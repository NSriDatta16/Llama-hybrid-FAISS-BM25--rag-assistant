[site]: stackoverflow
[post_id]: 2485675
[parent_id]: 2482451
[tags]: 
I cannot comment on the above, so I'll note it here. You can use HTML Tidy also for cleaning HTML fragments. See examples here: http://www.php.net/manual/en/tidy.examples.basic.php An alternative to HTML Tidy is to clean your output code with regular expressions - I provide an example below. However please note that even though this might be faster in terms of processing, it is not that universal not robust (maintenance-wise) as HTML Tidy is. Code Index No. Name 0 FooBaz 1 Harikrishna 2 Foo 3 Bar "; // regex magic $start_cond = " ]*)?>"; $end_cond = "(?:{$start_cond}| )"; $row_contents = "(?:(?!{$end_cond}).)*"; // first remove all tags $xhtml = preg_replace( "/ /ism", "", $html ); // now re-add tags where appropriate $xhtml = preg_replace( "/({$start_cond})({$row_contents})/ism", "$1$2 \n", $xhtml ); // ignore: just for writing comparision output echo " Before: "; show_count( $html ); echo " After "; show_count( $xhtml ); function cmp($patt,$html) { $count = preg_match_all( "/{$patt}/ism", $html, $matches); return htmlentities("\n{$count} x {$patt}"); } function show_count($html) { echo " " . cmp(" ]*)?>",$html) . cmp(" ",$html) . " "; } ?> Output Before: 5 x ]*)?> 1 x After 5 x ]*)?> 5 x
