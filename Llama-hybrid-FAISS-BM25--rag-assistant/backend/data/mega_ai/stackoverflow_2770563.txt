[site]: stackoverflow
[post_id]: 2770563
[parent_id]: 2770510
[tags]: 
Something like this: SELECT r.room_id, COALESCE(AVG(rpt.room0003), 0) AS AVERAGE_RATE FROM rooms r LEFT OUTER JOIN room_prices_table rpt ON r.room_id = rpt.room_id AND rpt.datum BETWEEN $arrival_datetime AND $departure_datetime WHERE r.room_id NOT IN ( SELECT reservations.room_id FROM reservations WHERE (reservations.arrivaldate >= $arrival_datetime AND reservations.departuredate = $arrival_datetime) OR (reservations.arrivaldate = $departure_datetime) ) GROUP BY r.room_id; Using the COALESCE function ensures that we get 0 instead of NULL for rooms with no information in the room_prices_table.
