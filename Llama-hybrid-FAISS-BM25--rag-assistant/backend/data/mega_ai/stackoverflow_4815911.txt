[site]: stackoverflow
[post_id]: 4815911
[parent_id]: 
[tags]: 
transactions using deuce stm

I am trying to revert object state on exceptions. My code is like:: public class DeuceTXTest { @Atomic public void myTransactionMethod(HashMap myHashMap) { myHashMap.put("s2", "two"); if(8>5) throw new NullPointerException(); } public static void main(String[] args){ HashMap hashMap = new HashMap (); hashMap.put("s1", "one"); System.out.println("Prior TX :: "+hashMap); DeuceTXTest txTest = new DeuceTXTest(); try { txTest.myTransactionMethod(hashMap); } catch (Exception e) { System.out.println(e); } System.out.println("Post TX :: "+hashMap); } } I added -javaagent:myDir/deuceAgent.jar as the VMArgument while running on eclipse. Result Expected:: Prior TX :: {s1=one} java.lang.RuntimeException Post TX :: {s1=one} Actual Result :: Prior TX :: {s1=one} java.lang.RuntimeException Post TX :: {s2=two, s1=one}. Also, please suggest me better examples on deuce to revert / restore object state on transaction rollback or when exception is thrown.
