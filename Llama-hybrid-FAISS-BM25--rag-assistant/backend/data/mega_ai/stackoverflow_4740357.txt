[site]: stackoverflow
[post_id]: 4740357
[parent_id]: 
[tags]: 
Sencha Touch Variable Missing error

In an effort to learn more about Sencha Touch I am building a calendar webapp for our university. I have some scripts that work but the problem is when I try to update the listPanel with the JSON data from Events.php. I am getting the data from the page but the update command is not updating the listPanel and instead for some reason that I can't put my finger on is asking for the events variable which is commented out. Now if I uncomment that variable it will parse the JSON in that variable but for the life of me i have no idea why. Here is the the index.html Student Calendar {date} {title} - {location} {date} {title} - {location} {title} {description} {location} {startTime} Here is the calendar.js Ext.setup({ onReady:function(){ eventListTemplate = Ext.XTemplate.from("eventList"); descriptionTemplate = Ext.XTemplate.from("eventDescription"); eventTapHandler = function(eventer,tapped){ tapID = tapped.id; /*Pass Into The Ajax Portion for getting a events description*/ Ext.Ajax.request({ params:{ /*params are available inside of the Ajax request*/ needs:eventDescription, panel:"descript", id:tapID, fails:rootPanel }, url: 'Events.php', method:'POST', success: function(response, opts) { /*Ext.uitl.JSON.decode() is used to change the response text to a JSON object*/ opts.params.needs.update(Ext.util.JSON.decode(response.responseText)); }, failure: function(response, opts) { alert("Sorry There Was An Error"); opts.params.fails.setCard(0); } }); rootPanel.setCard(1); } eventBackHandler = function(){ rootPanel.setCard(0); } backButton = { text:'Back', ui:'back', cls:'.backable', handler:eventBackHandler } toolBarBack = new Ext.Toolbar({ dock:'top', title:'Event Desciption', cls:'toolBar', items:[backButton], }); listPanel = new Ext.Panel({ tpl:eventListTemplate, scroll:'vertical', tester:function() { alert('MAGIC'); }, getEvent:function(){ var currentPanel = this; Ext.Ajax.request({ params:{ /*params are available inside of the Ajax request*/ panel:"list", needs:currentPanel, fails:rootPanel }, url: 'Events.php', method:'POST', success: function(response, opts) { var data = Ext.util.JSON.decode(response.responseText); //opts.params.needs.tester(); /*Ext.uitl.JSON.decode() is used to change the response text to a JSON object*/ opts.params.needs.update(data); }, failure: function(response, opts) { alert("Sorry There Was An Error"); } }); }, listeners: {el: {tap: eventTapHandler,delegate: '.touchable'}} }); eventDescription = new Ext.Panel({ tpl:descriptionTemplate, scroll:'vertical', dockedItems:[toolBarBack] }); rootPanel = new Ext.Panel({ fullscreen:true, layout:"card", animation: 'fade', items:[listPanel,eventDescription] }); //Offending Variable //var events = [{id:1,title:'this is a title',location:'here and now',startTime:'Right behind you'},{id:2,title:'this is a title2',location:'here and now2',startTime:'Right behind you2'}] //alert("done"); listPanel.getEvent(); } }); Here is the events.php Sql and database names have been changed to protect the innocent Here is an example of the JSON data being sent { "05":{"events":{ "2856":{"id":"2856","title":"BSM Leadership Retreat","location":"Lake O' The Pines","startTime":"01-05-2011"}}}, "06":{"events":{ "2957":{"id":"2957","title":"Women's Basketball","location":"Brownwood, TX","startTime":"01-06-2011"}, "2958":{"id":"2958","title":"Men's Basketball","location":"Brownwood, TX","startTime":"01-06-2011"}}}, "08":{"events":{ "2959":{"id":"2959","title":"Women's Basketball","location":"Alpine, Tx","startTime":"01-08-2011"}, "2960":{"id":"2960","title":"Men's Basketball","location":"Alpine, TX","startTime":"01-08-2011"}}}, "11":{"events":{ "3052":{"id":"3052","title":"Theatre Auditions!","location":"Black Box Theatre","startTime":"01-11-2011"}}}, "12":{"events":{ "3054":{"id":"3054","title":"Welcome Back Party","location":"New Student Lounge","startTime":"01-12-2011"}}}, "13":{"events":{ "2961":{"id":"2961","title":"Women's Basketball","location":"Pineville, LA","startTime":"01-13-2011"}, "2962":{"id":"2962","title":"Men's Basketball","location":"Pineville, LA","startTime":"01-13-2011"}}}, "14":{"events":{ "3055":{"id":"3055","title":"Organizations Meeting","location":"Cornish Great room","startTime":"01-14-2011"}}}, "15":{"events":{ "2963":{"id":"2963","title":"Women's Basketball","location":"Clinton, MS","startTime":"01-15-2011"}, "2964":{"id":"2964","title":"Men's Basketball","location":"Clinton, MS","startTime":"01-15-2011"}}}, "20":{"events":{ "2965":{"id":"2965","title":"Women's Basketball","location":"ETBU\/Ornelas Gymnasium","startTime":"01-20-2011"}, "2966":{"id":"2966","title":"Men's Basketball","location":"Ornelas Gym\/ETBU","startTime":"01-20-2011"}}}, "21":{"events":{ "3056":{"id":"3056","title":"Karen Peck and New River","location":"Marshall Convention Center Auditorium","startTime":"01-21-2011"}, "3057":{"id":"3057","title":"Chamber Ensemble Recital","location":"Woods Great Room in OSC","startTime":"01-21-2011"}}}, "22":{"events":{ "2967":{"id":"2967","title":"Women's Basketball","location":"ETBU\/Ornelas Gymnasium","startTime":"01-22-2011"}, "2968":{"id":"2968","title":"Men's Basketball","location":"Ornelas Gym\/ETBU","startTime":"01-22-2011"}}}, "27":{"events":{ "2969":{"id":"2969","title":"Women's Basketball","location":"Clarksville, AR","startTime":"01-27-2011"}, "2970":{"id":"2970","title":"Men's Basketball","location":"Clarksville, AR","startTime":"01-27-2011"}, "3058":{"id":"3058","title":"CASL Conference","location":"Ornelas Student Center","startTime":"01-27-2011"}}}, "28":{"events":{ "2857":{"id":"2857","title":"ABIDE - A Reflective Prayer Conference","location":"TBD","startTime":"01-28-2011"}, "3059":{"id":"3059","title":"CASL Conference","location":"Ornelas Student Center","startTime":"01-28-2011"}, "3060":{"id":"3060","title":"ABIDE","location":"TBD","startTime":"01-28-2011"}}}, "29":{"events":{"2971":{"id":"2971","title":"Women's Basketball","location":"Richardson, TX","startTime":"01-29-2011"}, "2972":{"id":"2972","title":"Men's Basketball","location":"Richardson, TX","startTime":"01-29-2011"}, "3061":{"id":"3061","title":"CASL Conference","location":"Ornelas Student Center","startTime":"01-29-2011"}, "3062":{"id":"3062","title":"SAI Province Day","location":"JGMB and EDW","startTime":"01-29-2011"}}} } Also you can view the app here It's best viewed in safari either mobile or desktop.
