[site]: stackoverflow
[post_id]: 4726202
[parent_id]: 4689325
[tags]: 
:pop is required to pop real layers, such as :encoding(...) . So yes, if you want to replace a real layer by another one, then you'll have to :pop . But note that pushing :raw actually results in a series of pop... And :perlio automatically inserts :unix underneath. So the exact number of pops really depends on the current layers. As the documentation says itself: A more elegant (and safer) interface is needed.
