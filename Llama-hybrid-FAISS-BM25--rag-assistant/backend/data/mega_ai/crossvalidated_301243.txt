[site]: crossvalidated
[post_id]: 301243
[parent_id]: 
[tags]: 
Two-way ANOVA with modified sum-to-zero constraint

I have a dataset with two categorical predictors and a continuous response. Suppose the predictors have $a$ and $b$ levels, respectively, with group-specific parameters $\alpha_1, \dots, \alpha_a$ and $\beta_1, \dots, \beta_b$ . I can implement a sum-to-zero constraint in a two-way ANOVA model such that $$\sum_{i=1}^a \alpha_i = 0 \text{ and } \sum_{i=1}^b \beta_i = 0$$ but I want to impose a constraint that will cause the weighted average of the parameters to equal zero where the weights are numbers of observations. That is, if the first predictor has $m_1, \dots, m_a$ observations for its $a$ levels and the second predictor has $n_1, \dots, n_b$ observations for its $b$ levels, then I want $$\sum_{i=1}^a m_i \alpha_i = 0 \text{ and } \sum_{i=1}^b n_i \beta_i = 0.$$ Is it possible to impose this constraint and minimize the sum of squared errors? If so, how would it be implemented? EDIT: A commenter asked why I want this constraint. I have a dataset composed of observations from a game in which there are two distinct roles (an A role and a B role). For each event in the game, the role A player and the role B player play against each other and generate a result. The dataset has two predictors ( roleA and roleB , which are categorical variables containing the names of the role A and role B players) and the response is points , a continuous variable. The code below generates an example dataset. Note that the players do not play an equal number of times. N I want to find the effect that each player has on points . For my dataset we can assume that the weighted average effects of the role A players and the role B players are both zero. However, because the players don't play an equal number of times, the parameters from a model with the conventional STZ constraint won't have a weighted average of zero. Thus, I am trying to find a way to implement the constraint described above.
