[site]: stackoverflow
[post_id]: 5553660
[parent_id]: 
[tags]: 
PHP -> SOAP -> Magento Webservice: get Cookies set by Magento

I am new to Magento Web-Service and have to expand it. The Webservice shell be able to login an customer, give me the session cookie back so that I can redirect to a file that sets the cookie again, redirects me and I can see my cart and proceed to checkout on the Magento Store. The Problem: Magento creates a cookie (that contains the session id or whatever, ive tried to set this cookie manual and them im logged in) instead of setting a session when the customer logs in. I've tried now for several hours to get this cookie that is set by magento in my magento web-service. It seems the cookie isn't set when i call $session = Mage::getSingleton('customer/session'); return $session->getCookie()->get('frontend'); Heres my complete Code: Magento Webservice Api: login($user); //$coreCookie = Mage::getSingleton('core/cookie'); //$ret['cookie'] = $_COOKIE['frontend']; return $ret; } function login($user) { Mage::getSingleton('core/session', array('name'=>'frontend')); $session = Mage::getSingleton('customer/session'); try { $session->loginById($user['id']); } catch (Exception $e) { } return $session->getCookie()->get('frontend'); } } ?> Heres my Api Call in Php: startSession(); $sessionId = $soap->login('ApiUser', 'ApiKey'); $userSession = $soap->call( $sessionId, 'customapi.checkout', array( array( 'id' => 1, 'username' => 'Ruf_Michael@gmx.de', 'password' => '***' ), array( ) ) ); echo ' '; var_dump($userSession)."\n"; if(isset($userSession['sid'])) echo ' '.$userSession['sid'].' '."\n"; echo ' '; $soap->endSession($sessionId); ?> Thanks for every help! MRu Sorry i am writing an answer but the comment box denied me to write more than ... letters. I've tried both codes you posted and all I get is an empty Array or Bool false. I wrote a static function: private static $cookie = array(); public static function cookie($key, $value) { if($key == 'frontend') { self::$cookie['key'] = $key; self::$cookie['value'] = $value; } } that is called in Mage_Core_Model_Session_Abstract_Varien::start and I got the frontend cookie value: Customapi_Model_Core_Api::cookie($sessionName, $this->getSessionId()); in line 125. But that didnt solve my basic Problem: The Session created in the Api call can't be restored, although it is set to the correct value. Thanks for your help!
