[site]: stackoverflow
[post_id]: 446966
[parent_id]: 
[tags]: 
How to find where browser breaks a paragraph of text

I need to add line breaks in the positions that the browser naturally adds a newline in a paragraph of text. For example: This is some very long text \n that spans a number of lines in the paragraph. This is a paragraph that the browser chose to break at the position of the \n I need to find this position and insert a Does anyone know of any JS libraries or functions that are able to do this? The only solutuion that I have found so far is to remove tokens from the paragraph and observe the clientHeight property to detect a change in element height. I don't have time to finish this and would like to find something that's already tested. Edit: The reason I need to do this is that I need to accurately convert HTML to PDF. Acrobat renders text narrower than the browser does. This results in text that breaks in different positions. I need an identical ragged edge and the same number of lines in the converted PDF. Edit: @dtsazza: Thanks for your considered answer. It's not impossible to produce a layout editor that almost exactly replciates HTML I've written 99% of one ;) The app I'm working on allows a user to create a product catalogue by dragging on 'tiles' The tiles are fixed width, absolutely positioned divs that contain images and text. All elemets are styled so font size is fixed. My solution for finding \n in paragraph is ok 80% of the time and when it works with a given paragrah the resulting PDF is so close to the on-screen version that the differences do not matter. Paragraphs are the same height (to the pixel), images are replaced with high res versions and all bitmap artwork is replaced with SVGs generated server side. The only slight difference between my HTML and PDF is that Acrobat renderes text slightly more narrowly which results in line slightly shorter line length. Diodeus's solution of adding span's and finding their coords is a very good one and should give me the location of the BRs. Please remember that the user will never see the HTML with the inserted BRs - these are added so that the PDF conversion produces a paragraph that is exactly the same size. There are lots of people that seem to think this is impossible. I already have a working app that created extremely accurate HTML->PDF conversion of our docs - I just need a better solution of adding BRs because my solution sometimes misses a BR. BTW when it does work my paragraphs are the same height as the HTML equivalents which is the result we are after. If anyone is interested in the type of doc i'm converting then you can check ou this screen cast: http://www.localsa.com.au/brochure/brochure.html Edit: Many thanks to Diodeus - your suggestion was spot on. Solution: for my situation it made more sense to wrap the words in spans instead of the spaces. var text = paragraphElement.innerHTML.replace(/ /g, ' '); text = " "+text+" "; //wrap first and last words. This wraps each word in a span. I can now query the document to get all the words, iterate and compare y position. When y pos changes add a br. This works flawlessly and gives me the results I need - Thank you!
