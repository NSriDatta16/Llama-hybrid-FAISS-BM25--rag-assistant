[site]: crossvalidated
[post_id]: 395008
[parent_id]: 
[tags]: 
in reinforcement learning off policy mc may not work

I noticed off-policy mc prediction(or control) will not work, as being descripted by boxed algorithm in page 110 of the book "reinforcement learning an introduction". The weight W should before C's(and Q(St, At)'s) update, because any Gt (including at the last time T-1) should be reweighted by Ï€(At|St)/b(At|St). Any non-greedy action generated by behavior policy will cause the weight to zero, as descripted too in the book. So actually, the Q(St, At) for the non-greedy action will always be undefined for weighted importance sampling (0/0*Gt) or just zero for ordinary importance sampling (0/N*Gt). So in general off-policy mc will not work for target policy being greedy !?
