[site]: stackoverflow
[post_id]: 1206851
[parent_id]: 886883
[tags]: 
If you have control of both of the sources, use a named mutex (which works across processes) to control access to the files rather than locking the file at the filesystem level. This way, you don't have to catch the exception raised by attempting to lock a locked file and loop on that, which is rather inelegant.
