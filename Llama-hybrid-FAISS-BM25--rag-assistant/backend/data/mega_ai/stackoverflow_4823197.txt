[site]: stackoverflow
[post_id]: 4823197
[parent_id]: 
[tags]: 
Iphone - when to calculate heightForRowAtIndexPath for a tableview when each cell height is dynamic?

I have seen this question asked many times but astoundingly, I have not seen a consistent answer, so I will give it a try myself: If you have a tableview containing your own custom UITableViewCells that contain UITextViews and UILabels whose height must be determined at runtime, how are you supposed to determine the height for each row in heightForRowAtIndexPath? The most obvious first idea is to calculate the height for each cell by calculating and then summing the heights of each view inside the cell inside of cellForRowAtIndexPath, and store that final total height for later retrieval. This will not work however because cellForRowAtIndexPath is called AFTER heightForRowAtIndexPath. The only thing I can think of is to do all the calculations inside viewDidLoad, create all the UITableViewCells then, calculate the cells height and store that in a custom field inside your UITableViewCell subclass, and put each cell in an NSMutableDictionary with the indexPath as the the key, and then simply retrieve the cell from the dictionary using the indexPath inside cellForRowAtIndexPath and heightForRowAtIndexPath, returning either the custom height value or the cell object itself. This approach seems wrong though because it does not make use of dequeueReusableCellWithIdentifier, instead I would be loading all the cells at once into a dictionary in my controller, and the delegate methods would be doing nothing more than retrieving the correct cell from the dictionary. I don't see any other way to do it though. Is this a bad idea - if so, what is the correct way to do this?
