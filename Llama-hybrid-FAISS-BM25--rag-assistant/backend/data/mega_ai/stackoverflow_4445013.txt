[site]: stackoverflow
[post_id]: 4445013
[parent_id]: 
[tags]: 
Cannot use javascript to submit() seam form

Hi I have a seam form that we use to upload an attachment to our java code. Everything was working fine until we needed to display a jquery dialog to give the user some visual feedback that the upload was taking place. To do this we intercept the onsubmit event via javascript, put up the jquery dialog then a second later submit the form via document.forms[...].submit() . Everything looks like it is working, the message appears, a second later we see the browser is transferring data to the server, but seam does not invoke the action of the form. The page simply refreshes and nothing happens. If I remove the javascript submit() and let the form get submitted in the normal submit button click seam processes the action on the server normally. My seam form: My javascript function that handles the form onsubmit event: ClickSuperUtil.submitForm=function() { if(this.messageDisplayed == null) { this.showPleaseWaitDialog(); this.messageDisplayed = true setTimeout("document.getElementById('uploadPanel').getElementsByTagName('form')[0].submit()",1000) return false } this.messageDisplayed = null return true } Further research shows that the "normal" post includes the conversationId appended to the referer in the headers but the javascript initiated post does not. Normal post headers: POST /connectweb/upload.seam HTTP/1.1 Host: localhost:8080 User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.6) Gecko/20100625 Firefox/3.6.6 GTB7.1 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Accept-Language: en-us,en;q=0.5 Accept-Encoding: gzip,deflate Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7 Keep-Alive: 115 Connection: keep-alive Referer: http://localhost:8080/connectweb/upload.seam?conversationId=73 Cookie: JSESSIONID=309AA62DD4929392DD9561389F5A36BA ... Javascript initiated post headers POST /connectweb/upload.seam HTTP/1.1 Host: localhost:8080 User-Agent: Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2.6) Gecko/20100625 Firefox/3.6.6 GTB7.1 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Accept-Language: en-us,en;q=0.5 Accept-Encoding: gzip,deflate Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7 Keep-Alive: 115 Connection: keep-alive Referer: http://localhost:8080/connectweb/upload.seam Cookie: JSESSIONID=309AA62DD4929392DD9561389F5A36BA ... The html for the form as generated by seam: Document Format: Please Select... CUSCAL ORACLE ROCKFAST Upload Document:
