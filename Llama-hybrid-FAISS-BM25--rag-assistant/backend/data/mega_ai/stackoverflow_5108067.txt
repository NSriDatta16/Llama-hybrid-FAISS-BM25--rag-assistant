[site]: stackoverflow
[post_id]: 5108067
[parent_id]: 
[tags]: 
Rotating a Rectangle on an Image using Swing

Ok when a user draws a Rectangle on top of an image, I want to find all the rotated Rectangles ahead of time for all image rotation angles (90,180,270,360). According to Java API I can just keep calling the Graphics2D rotate() method. I can then use this Graphics2D transformer to get the rotated Rectangle. This works for the very first rotation(1.5708) call. I get the correct Rectangle Point. All other calls after that return the wrong Rectangle Point after using Transformer. I think my problem is the Graphics2D translate(x,y). I don't understand how to use it. Anyone knows how to fix my code so that it will return the correct Rectangle after every rotation? Thank you. public void rotateRectangles(BufferedImage bim,int width,int height,Rectangle rect){ BufferedImage bim = new BufferedImage(height, width,BufferedImage.TYPE_INT_RGB); Graphics2D g2d = (Graphics2D) (bufferedImage.createGraphics()); g2d.translate(bufferedImage.getHeight(),0); //Get Rectangle for 90 degree image rotation. This always good. g2d.rotate(1.5708); Shape shape = g2d.getTransform().createTransformedShape(rect); Rectangle rotatedRect = shape.getBounds(); System.out.println("rotated rectangle at 90 degrees. Point x="+rotatedRect.x+" y="+rotatedRect.y); //Get Rectangle for 180 degree image rotation. Getting wrong rotatedRect. g2d.rotate(1.5708); shape = g2d.getTransform().createTransformedShape(rect); rotatedRect = shape.getBounds(); System.out.println("rotated rectangle at 180 degrees. Point x="+rotatedRect.x+" y="+rotatedRect.y); //Get Rectangle for 270 degree image rotation. Getting wrong rotatedRect. g2d.rotate(1.5708); shape = g2d.getTransform().createTransformedShape(rect); rotatedRect = shape.getBounds(); System.out.println("rotated rectangle at 270 degrees. Point x="+rotatedRect.x+" y="+rotatedRect.y); //Get Rectangle for 360 degree image rotation.Getting wrong rotatedRect. g2d.rotate(1.5708); shape = g2d.getTransform().createTransformedShape(rect); rotatedRect = shape.getBounds(); System.out.println("rotated rectangle at 360 degrees. Point x="+rotatedRect.x+" y="+rotatedRect.y); } Thank you.
