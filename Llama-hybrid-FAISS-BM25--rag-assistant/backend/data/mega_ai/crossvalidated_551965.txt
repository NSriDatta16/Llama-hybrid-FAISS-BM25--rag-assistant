[site]: crossvalidated
[post_id]: 551965
[parent_id]: 550230
[tags]: 
You want to take into consideration some local patterns in time to define your anomalies. This can be done with a relatively simple feature engineering procedure, and then using the standard anomaly detection methods on top. Divide the time-series into sliding time-windows of a suitable length for the "context" you wish to have. In your example, this could be some months. For each time-window, compute your desired metric for volatility. Should preferably be robust to outliers. Median Absolute Deviation is a candidate. Scale the original data points by the volatility metric to "normalize" / "correct for" volatility. Do anomaly detection on the new time series. If the feature engineering is strong, this might be as simple as applying a threshold
