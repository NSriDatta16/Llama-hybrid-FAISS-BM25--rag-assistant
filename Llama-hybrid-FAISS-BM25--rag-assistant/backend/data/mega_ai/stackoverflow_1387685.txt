[site]: stackoverflow
[post_id]: 1387685
[parent_id]: 
[tags]: 
Django unittests: The model is already registered Error

I come across several problems while trying django unittests library. Something strange happens: I defined the test like this: from django.core import management from django.test import TestCase from django.test.client import Client from django.core import mail from django.test.utils import setup_test_environment from django.contrib.auth.models import User from django.db import connection from goserver.models import ActiveList class GoserverTestCase(TestCase): #fixtures = ['dat.json'] def setUp(self): pass def test_active_list_works(self): c = Client() response = c.post('/') #print response.status_code self.assertEquals(True, True) But after the execution of the code it returns following error: ---------------------------------------------------------------------- Unit Test Code Coverage Results ---------------------------------------------------------------------- Traceback (most recent call last): File "manage.py", line 11, in execute_manager(settings) File "/opt/local/lib/python2.5/site-packages/Django-1.0.2_final-py2.5.egg/django/core/management/__init__.py", line 340, in execute_manager utility.execute() File "/opt/local/lib/python2.5/site-packages/Django-1.0.2_final-py2.5.egg/django/core/management/__init__.py", line 295, in execute self.fetch_command(subcommand).run_from_argv(self.argv) File "/opt/local/lib/python2.5/site-packages/Django-1.0.2_final-py2.5.egg/django/core/management/base.py", line 192, in run_from_argv self.execute(*args, **options.__dict__) File "/opt/local/lib/python2.5/site-packages/Django-1.0.2_final-py2.5.egg/django/core/management/base.py", line 219, in execute output = self.handle(*args, **options) File "/opt/local/lib/python2.5/site-packages/Django-1.0.2_final-py2.5.egg/django/core/management/commands/test.py", line 33, in handle failures = test_runner(test_labels, verbosity=verbosity, interactive=interactive) File "/opt/local/lib/python2.5/site-packages/django_test_coverage-0.1-py2.5.egg/django-test-coverage/runner.py", line 58, in run_tests modules.extend(_package_modules(*pkg)) File "/opt/local/lib/python2.5/site-packages/django_test_coverage-0.1-py2.5.egg/django-test-coverage/runner.py", line 92, in _package_modules modules.append(__import__(impstr + '.' + name, {}, {}, [''])) File "/Users/oleg/jin/goclub/trunk/jin/goserver/admin.py", line 11, in admin.site.register(ActiveList, ActiveListAdmin) File "/opt/local/lib/python2.5/site-packages/Django-1.0.2_final-py2.5.egg/django/contrib/admin/sites.py", line 64, in register raise AlreadyRegistered('The model %s is already registered' % model.__name__) django.contrib.admin.sites.AlreadyRegistered: The model ActiveList is already registered silver:jin oleg$ Admin file looks like this: from goserver.models import ActiveList, Game from django.contrib import admin class ActiveListAdmin(admin.ModelAdmin): list_display = ('user', "is_Bot", "isActive") admin.site.register(ActiveList, ActiveListAdmin) admin.site.register(Game) I run it all this way: python manage.py test goserver Also noticed that if I remove lines c = Client() response = c.post('/') from a test case definition, then no error appears
