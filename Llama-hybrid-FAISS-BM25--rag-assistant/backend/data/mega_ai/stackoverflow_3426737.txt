[site]: stackoverflow
[post_id]: 3426737
[parent_id]: 3425633
[tags]: 
Are you sure that you don't want to do an edge detection-like approach? It seems like a comparing the current pixel to the average value of the neighborhood pixels would do the trick. (I would evaluate various neighborhood sizes to be sure.)
