[site]: stackoverflow
[post_id]: 1947179
[parent_id]: 
[tags]: 
Implementation specific methods on an interface - how can I avoid them?

We have an interface that is passed to the constructor using an IoC container We have multiple classes that implement this interface. The problem is, some (not all) of the implementations need to be cleaned up, preferably using the IDisposable interface. Since not all of the implementations will need the "Dispose" method, do I include it anyway (I realize I'm not actually implementing IDisposable, this is just an example)? To me, it seems like the class that has knowledge about the actual implementations of the interface should know how to clean up those objects. However, this is the IoC container, and I see no elegant way of signalling it to call cleanup on a particular class it has created. interface IBar { void DoWork(); void Dispose(); //Not all implementations need this } class Foo : IBar { public void DoWork() { //implementation 1 } public void Dispose() { //cleanup, which needs to be called } } class Foo2 : IBar { public void DoWork() { //implementation 2 } public void Dispose() { //No cleanup needed in this implementation } }
