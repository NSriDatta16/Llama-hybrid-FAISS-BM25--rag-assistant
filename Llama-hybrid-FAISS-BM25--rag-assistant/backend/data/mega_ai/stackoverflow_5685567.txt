[site]: stackoverflow
[post_id]: 5685567
[parent_id]: 5673955
[tags]: 
From your link: "avg (average) is a more complex example of an aggregate. It requires two pieces of running state: the sum of the inputs and the count of the number of inputs. The final result is obtained by dividing these quantities. Average is typically implemented by using a two-element array as the state value." How about doing something like that?
