[site]: stackoverflow
[post_id]: 4874417
[parent_id]: 
[tags]: 
using nusoap returns fault code

making a call to a web service method with nusoap returns an error array(3) { ["faultcode"]=> string(11) "soap:Client" ["faultstring"]=> string(516) "System.Web.Services.Protocols.SoapException: Server did not recognize the value of HTTP Header SOAPAction: . at System.Web.Services.Protocols.Soap11ServerProtocolHelper.RouteRequest() at System.Web.Services.Protocols.SoapServerProtocol.RouteRequest(SoapServerMessage message) at System.Web.Services.Protocols.SoapServerProtocol.Initialize() at System.Web.Services.Protocols.ServerProtocolFactory.Create(Type type, HttpContext context, HttpRequest request, HttpResponse response, Boolean& abortProcessing)" ["detail"]=> string(0) "" } is the fault in my calling or with the soap server? $response = $qes->call('GetXhtml',$url); var_dump($response); Above is the call to the function, which accepts 1 parameter ($url) which I have checked as valid. -------FULL CODE----- useHTTPPersistentConnection(); $qes->soap_defencoding = 'utf-8'; //check connection $error = $qes->getError(); //get current page $curl = curPageURL();//function derives current URL $furl = $curl."?Type=8AFCCCB9-93DC-421E-A617-92A990EC99A7"; $param = array('url' => $furl); $response = $qes->call('getXhtml', $param, '','http://tempuri.org/GetXhtml', array('content-type' => 'UTF-8'), true,null,'rpc','literal'); fb::log($response); // Display the request and response echo ' Request '; echo ' ' . htmlspecialchars($qes->request, ENT_QUOTES) . ' '; echo ' Response '; echo ' ' . htmlspecialchars($qes->response, ENT_QUOTES) . ' '; //*/ The request SHOULD look like this (according to the company providing the service) POST /swindon/ppa/uat/ContentServer/ContentServer/ContentServer.asmx HTTP/1.1 Host: www.qes24.com Content-Type: text/xml; charset=utf-8 Content-Length: length SOAPAction: "http://tempuri.org/GetXhtml" http://localhost/waggleb/?Type=8AFCCCB9-93DC-421E-A617-92A990EC99A7 ?> Actual Full Request made by Nusoap: POST /swindon/ppa/uat/contentserver/contentserver/contentserver.asmx HTTP/1.1 Host: www.qes24.com User-Agent: NuSOAP/0.9.5 (1.123) Connection: close Content-Type: text/xml; charset=utf-8 SOAPAction: "http://tempuri.org/GetXhtml" Content-Length: 516 UTF-8 http://localhost/waggleb/?Type=8AFCCCB9-93DC-421E-A617-92A990EC99A7 Full response: HTTP/1.1 200 OK Date: Mon, 07 Feb 2011 10:50:25 GMT Server: Microsoft-IIS/6.0 X-Powered-By: ASP.NET X-AspNet-Version: 2.0.50727 Cache-Control: private, max-age=0 Content-Type: text/xml; charset=utf-8 Content-Length: 329
