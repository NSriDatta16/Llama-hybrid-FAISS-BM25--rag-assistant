[site]: stackoverflow
[post_id]: 3328344
[parent_id]: 
[tags]: 
Querying Project Gutenberg catalog.rdf via SPARQL

I'm having difficulty structuring a SPARQL query for the Project Gutenberg catalog (available at Gutenberg Feeds toward the bottom of the page). I know it is a fundamental lack of understanding on my part of how SparQL/RDF/etc. actually work, conflating it with SQL, etc. But I've tried several tutorials, and I just can't quite get my mind around piecing the WHERE clause together with what seems to be the multidimensional dataset. I have imported catalog.rdf into a TDB database (from the Jena project), and am using the tdbquery tool to set up my query initially, before I wrap it into a command-line tool that allows searching by author or title. Here is what I have so far: $ cat gutenquery.tq PREFIX rdf: PREFIX rdfs: PREFIX dc: PREFIX dcterms: PREFIX dcmitype: PREFIX cc: PREFIX pgterms: PREFIX dcmitype: SELECT ?title ?author WHERE { ?book dc:title ?title ; dc:creator ?author } LIMIT 10 $ ./tdbquery --loc=/var/db/gutenberg/ --file=gutenquery.tq ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- | title | author | ====================================================================================================================================================================== | "The Belgian Curtain\nEurope after Communism"^^rdf:XMLLiteral | "Vaknin, Samuel, 1961-"^^rdf:XMLLiteral | | "Fairy Tales; Their Origin and Meaning\nWith Some Account of Dwellers in Fairyland"^^rdf:XMLLiteral | "Bunce, John Thackray, 1828-1899"^^rdf:XMLLiteral | | "The World English Bible (WEB): Zephaniah"^^rdf:XMLLiteral | "Anonymous"^^rdf:XMLLiteral | | "Lectures of Col. R. G. Ingersoll - Latest"^^rdf:XMLLiteral | "Ingersoll, Robert Green, 1833-1899"^^rdf:XMLLiteral | | "Selections from Erasmus\nPrincipally from his Epistles"^^rdf:XMLLiteral | "Erasmus, Desiderius, 1469-1536"^^rdf:XMLLiteral | | "East and West\nPoems"^^rdf:XMLLiteral | "Harte, Bret, 1836-1902"^^rdf:XMLLiteral | | "The Enormous Room"^^rdf:XMLLiteral | "Cummings, E. E. (Edward Estlin), 1894-1962"^^rdf:XMLLiteral | | "The Enormous Room"^^rdf:XMLLiteral | _:b0 | | "Actes et Paroles, Volume 4\nDepuis l'Exil 1876-1885"^^rdf:XMLLiteral | "Hugo, Victor, 1802-1885"^^rdf:XMLLiteral | | "L'ÃŽle Des Pingouins"^^rdf:XMLLiteral | "France, Anatole, 1844-1924"^^rdf:XMLLiteral | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- A typical entry from PG looks like this, although not all fields are present in all records: &pg; A Connecticut Yankee in King Arthur's Court, Part 9. Twain, Mark, 1835-1910 A Connecticut Yankee in King Arthur's Court, Part en Americans -- Great Britain -- Fiction Arthurian romances -- Adaptations Britons -- Fiction Fantasy fiction Kings and rulers -- Fiction Knights and knighthood -- Fiction Satire Time travel -- Fiction PS 2004-07-07 In addition to, e.g. dc:author and dc:title, I'd like to get the value from the attribute of pgterms:etext rdf:ID="STUFF IN HERE": As well as combining the entries in the list under dc:subject, etc. Basically, provide all the info on this book as a single coherent entry via the command-line query. So, my questions: How can I combine the attribute value from pg:eterms rdf:ID with the rest of the query? How can I combine the entries under dc:subject's list into one string? Since not all fields show up for every record, should I use the OPTIONAL() clause to surround fields that don't always appear? How can I limit my query based on a user-specified string? Am I supposed to use FILTER() for that? Thank you so much. I have been able to construct queries to get single-layer information, but anything beyond that, attributes etc. are nigh inscrutable to me. This is much different to standard SQL, and a much more involved project than I thought at first.
