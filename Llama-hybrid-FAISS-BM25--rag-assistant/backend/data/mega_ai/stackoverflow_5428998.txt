[site]: stackoverflow
[post_id]: 5428998
[parent_id]: 5427778
[tags]: 
Just as a side note: If you need to perform side-effects like logging in your STM transation you can send messages to agents to do the non-idempotent parts. Messages sent to agents are dispatched only when the transaction finishes and are guaranteed to only be sent once.
