[site]: stackoverflow
[post_id]: 1516003
[parent_id]: 1236915
[tags]: 
Well, I need to close this though not having the ideal solution. Since the HTML tags used in my app are very common ones (no tables, list etc) with little or no nesting, what I did is to preformat the HTML fragments before I save them after user input. Remove all line breaks Add a line break prefix to all block tags (e.g. div, p, hr, h1/2/3/4 etc) Before I extract them out to be displayed as plain-text, use regex to remove the html tag and retain the line-break. Hardly any rocket science but works for me.
