[site]: stackoverflow
[post_id]: 2430791
[parent_id]: 
[tags]: 
Drupal incorrectly escapes tags in javascript

I installed drupal-6.16. I applied the patch from the post http://drupal.org/node/222926#comment-930745 . It works correctly in simple cases. But following code of counter is handled incorrectly and counter is now displayed on the page after drupal. Drupal modifies the string "alt='1Gb.ua counter'> ") to "alt='1Gb.ua counter' />&lt;\/a>") The full code of counter follows: Text cgb_js="1.0"; cgb_r=""+Math.random()+"&r="+ escape(document.referrer)+"&pg="+ escape(window.location.href); document.cookie="rqbct=1; path=/"; cgb_r+="&c="+ (document.cookie?"Y":"N"); cgb_js="1.1";cgb_r+="&j="+ (navigator.javaEnabled()?"Y":"N") cgb_js="1.2"; cgb_r+="&wh="+screen.width+ 'x'+screen.height+"&px="+ (((navigator.appName.substring(0,3)=="Mic"))? screen.colorDepth:screen.pixelDepth) cgb_js="1.3" cgb_r+="&js="+cgb_js; document.write(" "+ " ") Does anybody have this code working? How should Drupal be fixed to handle this code in correct way? Other suggestions are welcome. EDIT: Removing comments does not resolve the issue.
