[site]: stackoverflow
[post_id]: 4614878
[parent_id]: 4614814
[tags]: 
Bearing in mind the fact that you're already using string manipulation (don't quite get why - a single regular expression could handle it all), I don't know why you don't proceed down this path. For example using explode: function storageAmount($user) { system(escapeshellcmd('stat /web/'.$user.'/ | grep Size: > /web/'.$user.'/log/storage')); $storageChunks = explode(' ', file_get_contents('/web/'.$user.'/log/storage')); return $storageChunks[1]; } Incidentally: The $user variable doesn't exist within the scope of your function - you either need to pass it in as an argument as I've done, or make it a global. You should really use escapeshellcmd on all commands passed to system/exec, etc. You're using fopen incorrectly. fopen returns a resource which you then need to read from via fread, etc. prior to using fclose. That said, I've replaced this with file_get_contents which does the open/read/close for you. I'm not really sure what you're attempting to do with the system command, but I've left it as-is. However, you could just get the result of the grep back directly as the last string output rather than having to output it to a file. (This is what the system command returns.) You're also mixing ' and " as string delimiters - this won't work. (Just use one consistently.) I suspect you actually want to the final line of " df --si /web/'.$user.'/' " command as otherwise you'll always be returning the value 4096.
