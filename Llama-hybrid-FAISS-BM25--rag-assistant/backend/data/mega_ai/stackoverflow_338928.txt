[site]: stackoverflow
[post_id]: 338928
[parent_id]: 
[tags]: 
PHP, MSSQL2005 and Codepages

I have a php script which accesses a MSSQL2005 database, reads some data from it and sends the results in a mail. There are special characters in both some column names and in the fields itself. When I access the script through my browser (webserver iis), the query is executed correctly and the contents of the mail are correctly (for my audience) encoded. However, when I execute php from the console, the query fails (due to the special characters in the column names). If I replace the special characters in the query with calls to chr() and the character code in latin-1, the query gets executed correctly, but the results are also encoded in latin-1 and therefore not displayed correctly in the mail. Why is PHP/the MSSQL driver/â€¦ using a different encoding in the two scenarios? Is there a way around it? If you wonder, I need the console because I want to schedule the script using SQLAgent (or taskmanager or whatever).
