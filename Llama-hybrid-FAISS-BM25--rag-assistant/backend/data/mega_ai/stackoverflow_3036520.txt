[site]: stackoverflow
[post_id]: 3036520
[parent_id]: 2719472
[tags]: 
A quick and dirty trick for mocking an iterator is just to stock an ArrayIterator with mock objects and use that as your mock Iterator $mockIt = new ArrayIterator; $mockIt->append($mock1); $mockIt->append($mock2); $mockIt->append($mock3); $sut = new SystemExpectingAnIterator($mockIt); $this->assertTrue($sut->doSomethingWithIterator()); It's a bit smelly, but more straightforward than mocking all the SPL Iterator methods.
