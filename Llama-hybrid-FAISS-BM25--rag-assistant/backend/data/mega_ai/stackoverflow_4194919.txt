[site]: stackoverflow
[post_id]: 4194919
[parent_id]: 
[tags]: 
Strange NSPasteboard and TextEdit interaction

I am drag-dropping a string from two places in my app. One from a custom NSView and one from a NSTableDataSource delegate. The first one allows me to drag text into the TextEdit application, the second one does not. I can drag from both to other apps such as Terminal or TextMate. As far as I can tell, I'm using close to identical code for both. I'm trying to figure out what's wrong. It's working in principle because I can drag to some apps. But what's going on with TextEdit? From the custom NSView: (void)mouseDown:(NSEvent *)theEvent { NSString *testString = @"TEST"; NSImage *dragImage; NSPoint dragPosition; NSPasteboard *pboard = [NSPasteboard pasteboardWithName:NSDragPboard]; [pboard declareTypes:[NSArray arrayWithObjects: NSStringPboardType, nil] owner:nil]; [pboard setString:testString forType:NSStringPboardType]; dragImage = // blah dragPosition = [self convertPoint:[theEvent locationInWindow] fromView:nil]; [self dragImage:dragImage at:dragPosition offset:NSZeroSize event:theEvent pasteboard:pboard source:self slideBack:YES]; } } From the table delegate: (BOOL)tableView: (NSTableView *)aTableView writeRowsWithIndexes: (NSIndexSet *)indexes toPasteboard: (NSPasteboard *)pboard { NSString *testString = @"TEST"; [pboard declareTypes:[NSArray arrayWithObjects: NSStringPboardType, nil] owner:nil]; [pboard setString:testString forType:NSStringPboardType]; return YES; } If I print out the pboard's types for the first one: "public.utf8-plain-text", NSStringPboardType, And for the second: "public.utf8-plain-text", NSStringPboardType, Likewise, the content for the first: 2010-11-16 13:56:01.832 XXX[1654:a0f] public.utf8-plain-text:TEST 2010-11-16 13:56:01.838 XXX[1654:a0f] NSStringPboardType:TEST And second 2010-11-16 13:56:05.623 XXX[1654:a0f] public.utf8-plain-text:TEST 2010-11-16 13:56:05.623 XXX[1654:a0f] NSStringPboardType:TEST So as far as I can tell, the two should be behaving identically. But they're not. Ideas?
