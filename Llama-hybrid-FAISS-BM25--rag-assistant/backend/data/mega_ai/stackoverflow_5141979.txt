[site]: stackoverflow
[post_id]: 5141979
[parent_id]: 
[tags]: 
How to synchronized messaging between background and contentscript?

I currently have an issue with the communication bewteen my background and my contentscript. The problem is that they can communicate but it seems to be asynchronous. Let me show you my code. yourToolbar.js chrome.extension.sendRequest({getStatut : "none"}, function(response) { console.log('yourToolbar : ' + response.statut); localStorage['activated'] = response.statut; }); if (localStorage['activated'] == "show") { // injection } background.js chrome.extension.onRequest.addListener(function(request, sender, sendResponse) { if(request.getStatut) { console.log('Background : ' + localStorage['activated']); sendResponse({statut : localStorage['activated']}); } else if(request.modifyToolbar) { if (request.modifyToolbar == "hideToolbar") { localStorage['activated'] = "hide"; } } }); The real problem is that when i hide the toolbar, the toolbar only disapear after 1 more refresh. So it's seems that the communication is not up to date... When i print on the console the value of "activated" it show me the good value, but apparently the condition on yourtoolbar.js test the previous value of "activated" Someone have an idea ? EDIT : One strange thinks, is that if i add an alert just before the condition it work perfectly... alert(ocalStorage['activated']); if (ocalStorage['activated']== "show") {
