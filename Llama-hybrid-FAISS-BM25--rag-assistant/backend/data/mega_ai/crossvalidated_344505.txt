[site]: crossvalidated
[post_id]: 344505
[parent_id]: 344459
[tags]: 
Marginal effects are a bit trickier in nonlinear models and there are several options available. They correspond to evaluating the expression below at various sensible values of the covariates: $AME=\frac{1}{N}\sum_{i=1}^{N}\frac{\partial \Pr \left( y_{i}=1|x_{1},...,x_{k}\right) }{\partial x_{j}}=\frac{1}{N} \sum_{i=1}^{N}\phi \left( \alpha +\beta _{1}x_{1i}+...+\beta _{k}x_{ki}\right) \beta _{j},$ were $\phi()$ is the standard normal pdf.$^*$ People and disciplines have different notions of what is sensible. You want to take this a step further and compare two of these AMEs. You want to compare the change in the probability of eating healthy when informed between men and women. One way to do this is to change the gender as if everyone was a man, but leave income unchanged, and calculate the average change when informed goes from 0 to 1. The set everyone to female, and leave income unchanged, and do that again. If these two averages are different, then men respond differently. The code below calculates the change in the probability of a car being foreign when it is efficient versus not, and how that depends on whether it is expensive. I did it a couple of ways so that you can get the basic idea: sysuse auto, clear gen efficient = mpg > 20 gen expensive = price > 6000 probit foreign i.efficient i.expensive c.headroom, nolog /* Average Marginal Effects (AMEs) */ margins, dydx(efficient) at(expensive = (0 1)) // calculate the AMEs as if all cars were expensive or as if all were cheap with own values of headroom margins expensive, dydx(efficient) // same as above margins r.expensive, dydx(efficient) // compare the two average marginal effects by taking the difference margins r.efficient#r.expensive // same as above, but more cryptic /* Calculate the AME for each type of car separately */ margins, dydx(efficient) over(expensive) $^*$ This is actually not quite correct. This would be true for continuous variables. With binary variables, Stata is actually evaluating finite differences rather than derivatives since we used factor variable notation in the probit . FDs are the average of predicted probabilities with informed set to 1 minus predicted probability with informed set to zero. This makes more sense than contemplating infinitesimal changes in gender or information.
