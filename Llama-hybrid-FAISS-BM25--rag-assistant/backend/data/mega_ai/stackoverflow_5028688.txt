[site]: stackoverflow
[post_id]: 5028688
[parent_id]: 5028537
[tags]: 
If the string is small, why not use explode() to explode it at the tags, and replace the strings in required fragments, and then rejoin it ? Or try DomDocument : This is also red sun not yellow red sun is not yellow some words and here is yellow sun outside , now yellow sun inside "; $origArr = array("sun"); $replaceArr = array("apple"); $str = str_replace($origArr,$replaceArr,$str); $domElem = new DOMDocument(); $domElem->loadXML(" ".$str." "); $nodes = $domElem->getElementsByTagName('wrong'); $index = 0; while($nodes->item($index)->nodeValue) { $nodes->item($index)->nodeValue = str_replace($replaceArr,$origArr,$nodes->item($index)->nodeValue); $index++; } echo $domElem->saveHTML(); /* remove the ....*/ ?> See it here: http://codepad.org/T5o3shB4
