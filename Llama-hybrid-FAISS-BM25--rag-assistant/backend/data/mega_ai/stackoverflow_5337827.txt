[site]: stackoverflow
[post_id]: 5337827
[parent_id]: 
[tags]: 
Magento Ajax add to cart not working for subsites

I've written a small script that is called via ajax for adding products to the cart. $request = Mage::app()->getRequest(); $session = Mage::getSingleton('core/session', array('name'=>'frontend')); $cart = Mage::helper('checkout/cart')->getCart(); foreach($pids as $pid){ if(!pid || $pid == ''){continue;} $product = Mage::getModel('catalog/product')->load($pid); $cart->addProduct($product, $qty); } $session->setCartWasUpdated(true); $cart->save(); I have a multi site setup and this script works fine when it is run under the main site but when I run it under one of the subsites it doesn't add it to the cart. I've tried having the addtocart.php in the root of the subsite (and including the main sites mage.php) and have also tried adding it to the root of the main site, But nothing works. Do I need to specify the website id somewhere? Thanks
