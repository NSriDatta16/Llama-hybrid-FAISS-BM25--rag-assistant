[site]: stackoverflow
[post_id]: 4964567
[parent_id]: 
[tags]: 
Identifying if a Trees are "Equal"

I am using Perl, and I need to determine if two arithmetic expression trees are "equal". By equal, I mean the shape of the trees are equal, not the particular values held within. So, for instance [ 'internal', '-' [ 'leaf', 5] ['leaf', 4]] is not the same as [ 'internal', 'average', [ 'internal', '+', [ 'leaf', 42], [ 'leaf', 10 ] ], [ 'leaf', 1 ] ], but is the same as [ 'internal', '+' [ 'leaf', 3] ['leaf', 20]]. So, I am simply looking to match the shape. I have a subroutine that I had hoped to be able to do this, but so far, I am unable to make it properly match. Here is the subroutine: sub isEqualShape { my ($ex1, $ex2) = @_; my $node_type = $ex1->[0]; my $node_type2= $ex2->[0]; my $check; foreach (@$ex1){ if ( $node_type eq 'leaf' && $node_type2 eq 'leaf'){ $check = 1; } elsif ($node_type eq 'internal' && $node_type2 eq 'internal'){ $check = 1; } else { $check = 0; return 0; last; } } foreach (@$ex2){ if ( $node_type eq 'leaf' && $node_type2 eq 'leaf'){ $check = 1; } elsif ($node_type eq 'internal' && $node_type2 eq 'internal'){ $check = 1; } else { $check = 0; return 0; last; } } return $check; } and here is my test file: my $ex1 = [ 'leaf', 42]; my $ex2 = [ 'internal', '+', [ 'leaf', 42], [ 'leaf', 10 ] ]; my $ex3 = [ 'internal', 'average', $ex2, [ 'leaf', 1 ] ]; my $tree = isEqualShape($ex2, $ex3); if ($tree eq '1'){ print "Shapes Are Equal\n"; } else { print "Shapes Are Not Equal \n"; } When comparing between ex1 and either ex2 or ex3, this returns Shapes are Not Equal, as it is supposed to. However, it returns shape is equal when comparing either ex2 or ex3. How can I fix this, and maybe make this more generalizable? Edit: I've also tried using popping from an array, but this results in a reference error (I'm new to the whole reference thing). sub isEqualShape { my @array = @_; my ($ex1, $ex2) = @array; my $node_type = $ex1->[0]; my $node_type2= $ex2->[0]; my $check; foreach (@$ex1){ if ( $node_type eq 'leaf' && $node_type2 eq 'leaf'){ $check = 1; } elsif ($node_type eq 'internal' && $node_type2 eq 'internal'){ $check = 1; } else { $check = 0; return 0; last; } } for (@$ex2){ if ( $node_type eq 'leaf' && $node_type2 eq 'leaf'){ $check = 1; } elsif ($node_type eq 'internal' && $node_type2 eq 'internal'){ $check = 1; } else { $check = 0; return 0; last; } pop @$ex1; pop @$ex2, isEqualShape(@$ex1, @$ex2); } return $check; } The result given to me is: Can't use string ('internal') as an ARRAY while 'strict refs' are in use. How can I fix this?
