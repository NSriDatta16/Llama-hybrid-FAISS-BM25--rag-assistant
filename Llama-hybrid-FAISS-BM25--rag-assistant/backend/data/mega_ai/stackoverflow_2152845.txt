[site]: stackoverflow
[post_id]: 2152845
[parent_id]: 
[tags]: 
How to get address of member function for local class defined in function (C++)

I am trying to do the following: Obtain the address of a member function from a class that was locally defined within a function. class ConnectionBase { }; template class class ConnectionImpl : public ConnectionBase { public: typedef void (SinkType::*EventCallback)(EventType const&); }; template class Source { template boost::shared_ptr setupCallback(typename ConnectionImpl ::EventCallback func, SinkType* sink) { // do the actual connecting. } }; class SomeClass { public: void someFunction(int const& event){} } class SomeUnitTest { public: void someTest() { class NestedClass { public: void someFunction(int const& event){} }; NestedClass nc; //Try#1 - This does not work setupCallback (&NestedClass::someFunction, &nc); //Try #2 - This also does not work setupCallback (&SomeUnitTest::someTest::NestedClass::someFunction, &nc); //Try #3 - Following the GCC error output, I tried this setupCallback (&SomeUnitTest::someTest()::NestedClass::someFunction, &nc); SomeClass sc; //This works fine, as expected setupCallback (&SomeClass::someFunction, &sc); } }; Try #2 and #3 utterly confuse GCC, it has no idea what I am trying to do. Try #1 produces a more helpful error message saying no setupCallback exists that takes the form "setupCallback(void (SomeUnitTest::someTest()::NestedClass::SomeFunction::*), etc) Which is how try #3 was born. I can't really find a lot of information about classes defined inside a function, does anyone know the correct syntax for this, and maybe have a resource that discusses this topic? Ok, it appears this is settled, as both posters have pointed out, local classes have no linkage, it can't work. Now knowing this, I found this article that discusses this, for anyone else that runs into this problem and stumbles across this question: http://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=420 Edit: Clarification of setupCallback(), working example with a more regular class Edit #2: Updated wording to change "nested" to "local". Added more detail for setupCallback. Edit #3: Added links to furhter information. Thanks everyone.
