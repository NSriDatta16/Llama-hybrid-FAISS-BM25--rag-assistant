[site]: crossvalidated
[post_id]: 477559
[parent_id]: 
[tags]: 
What is the best way to model when the treatment is intermittent across years?

Let's say the goal is to gauge the effect of deploying certain clean technology ( dummy variable: 1 for the year the technology is deployed, 0 otherwise ) on a firm's pollution level ( continuous variable, yearly average ). The dataset is an unbalanced panel with roughly 100 different firms in more than 30 cities across 10 years. Not all firms will deploy the technology (treated) during the time period, and probably the most complex thing in the dataset is that the technology deployment (treatment effect) is intermittent in various ways for different firms. For example, Firm A may introduce the technology in Year 3 through Year 5 , and then, for some reasons, it did not use the technology for Year 6 and Year 7 , but the technology is re-deployed again from Year 8 and the rest of years. Firm B could have a totally different pattern in terms of the timing of deploying the technology, etc. To achieve the goal, I think a straightforward approach would be to model the deployment effect directly using a fixed-effect model with controls for both Firm and Year : $$ Pollution = \alpha + \beta_1 Tech\ + \omega_i Controls + \gamma_i Firm \ + \theta Year + \epsilon $$ The controls in the above equation refer to all possible firm-level controls varying across years(e.g., revenue, debt, number of employees, etc..) My first question is: In this case, is it legit to claim that the estimates on $\beta$ are the average treatment effect (ATE) of deploying the technology on a firms' pollution level? Then, I saw some people use the so-called pooled-OLS to model similar datasets, but using controls at a larger scale (i.e., city-level rather than the firm-level): $$ Pollution = \alpha + \beta_1 Tech\ + \omega_i Controls + \gamma_i City \ + \theta Year + \epsilon $$ My second question is: is it legit to use the pooled-OLS model with a broader level of controls for this case, especially considering the treatment effect is intermittent? How to interpret the estimate on $\beta$ then? I have never used the pooled-OLS before and I do not fully understand why it would work and the interpretation of the estimates.
