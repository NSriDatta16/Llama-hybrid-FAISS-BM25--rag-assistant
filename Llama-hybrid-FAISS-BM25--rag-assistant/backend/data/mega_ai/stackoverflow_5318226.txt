[site]: stackoverflow
[post_id]: 5318226
[parent_id]: 
[tags]: 
Mobile Redirect = Mod_Rewrite endless loop, what's wrong?

Hey all, I'm trying to redirect to a mobile site that lives in my subdirectory m , To make matters worse I was trying to only do the redirect on the index page, and then only if a cookie ( mobile ) isn't set (so that I can send users back to the desktop site) Anyhow, my mod-rewrite gets stuck in an endless loop here's the code from .htaccess: RewriteEngine On RewriteBase / RewriteCond %{REQUEST_URI} !^/m/.*$ RewriteCond %{HTTP_COOKIE} !^.*mobile.*$ [NC] RewriteCond %{HTTP_ACCEPT} "text\/vnd\.wap\.wml|application\/vnd\.wap\.xhtml\+xml" [NC,OR] RewriteCond %{HTTP_USER_AGENT} "sony|symbian|nokia|samsung|mobile|windows ce|epoc|opera mini|IEmobile|DoCoMo" [NC,OR] RewriteCond %{HTTP_USER_AGENT} "nitro|j2me|midp-|cldc-|netfront|mot|up\.browser|up\.link|audiovox"[NC,OR] RewriteCond %{HTTP_USER_AGENT} "blackberry|ericsson,|panasonic|philips|sanyo|sharp|sie-|ipad|ipod|iphone"[NC,OR] RewriteCond %{HTTP_USER_AGENT} "portalmmm|blazer|avantgo|danger|palm|series60|palmsource|pocketpc"[NC,OR] RewriteCond %{HTTP_USER_AGENT} "smartphone|rover|ipaq|au-mic,|alcatel|ericy|vodafone\/|wap1\.|wap2\.|mobile safari|android"[NC] RewriteRule ^(.*)$ m/$1 [R=307,NC,L,QSA] What's making this get stuck? also, it adds /var/www/html//var/www/html//var/www/html//var/www/html/ to the url
