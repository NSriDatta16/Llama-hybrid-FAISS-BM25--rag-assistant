[site]: stackoverflow
[post_id]: 3343660
[parent_id]: 
[tags]: 
Using DetachedCriteria to return generic list of non-AR type

I'm fiddling with my repository class and attempted to execute a query with a detached criteria. However, it doesn't seem to like me setting the result transformer to a non AR-type. public class IncidentRepository { public static IList GetAllIncidentsToAudit() { DetachedCriteria dc = DetachedCriteria.For ("i") .SetProjection( Projections.ProjectionList() .Add(Projections.Property("i.Id"), "IncidentId") .Add(Projections.Property("l.Id"), "LocationId") ) .CreateCriteria("Locations", "l") .Add(Expression.Eq("l.PrimaryLocationFlag", "T")) .SetResultTransformer(Transformers.AliasToBean ()); return ActiveRecordMediator .FindAll(dc); } } public class AuditReport { public int IncidentId { get; set; } public int LocationId { get; set; } } The error I get when executing this query is: You have accessed an ActiveRecord class that wasn't properly initialized. There are two possible explanations: that the call to ActiveRecordStarter.Initialize() didn't include castle.AuditReport class, or that castle.AuditReport class is not decorated with the [ActiveRecord] attribute. I understand the error but how can I return a strongly typed list of a non-AR type? I've looked at what NHibernate.Transform offers but nothing stands out. Also, is doing this bad practice? Edit: I managed to solve it by gaining access to the underlying database session and executing my criteria from there. ISession sess = ActiveRecordMediator.GetSessionFactoryHolder(). CreateSession(typeof(ActiveRecordBase)); ICriteria criteria = sess.CreateCriteria ("i") .SetProjection( Projections.ProjectionList() .Add(Projections.Property("i.Id"), "IncidentId") .Add(Projections.Property("l.Id"), "LocationId") ) .CreateCriteria("Locations", "l") .Add(Expression.Eq("l.PrimaryLocationFlag", "T")) .SetResultTransformer(Transformers.AliasToBean ()); return criteria.List (); Now I'm wondering, is there another of achieving this without manually creating a new session?
