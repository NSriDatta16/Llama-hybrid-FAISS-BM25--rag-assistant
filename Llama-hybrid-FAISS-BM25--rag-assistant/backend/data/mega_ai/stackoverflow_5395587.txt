[site]: stackoverflow
[post_id]: 5395587
[parent_id]: 
[tags]: 
Ruby 1.9 const_defined?("Timeout") returns true when Timeout not in the list of constants

I'm trying to upgrade Puppet to use Ruby 1.9 and running into trouble with constants. const_defined?("Timeout") is returning true even though :Timeout isn't in the list of constants. This doesn't happen on Ruby 1.8.7. Any ideas why? [128, 137] in /Users/matthewrobinson/work/puppet/lib/puppet/util/classgen.rb 128 def handleclassconst(klass, name, options) 129 const = genconst_string(name, options) 130 131 require 'ruby-debug'; 132 debugger if const == "Timeout"=> 133 if const_defined?(const) 134 if options[:overwrite] 135 Puppet.info "Redefining #{name} in #{self}" 136 remove_const(const) 137 else (rdb:1) const => "Timeout" (rdb:1) const_defined?(const) => true (rdb:1) constants.grep /Timeout/ => [] (rdb:1) constants => [:Ensure, :ParameterName, :Auth_type, :Allow_root, :Authenticate_user, :Auth_class, :Comment, :Group, :K_of_n, :Mechanisms, :Rule, :Session_owner, :Shared, :MetaParamNoop, :MetaParamSchedule, :MetaParamAudit, :MetaParamCheck, :MetaParamLoglevel, :MetaParamAlias, :MetaParamTag, :RelationshipMetaparam, :MetaParamRequire, :MetaParamSubscribe, :MetaParamBefore, :MetaParamNotify, :MetaParamStage, :Component, :Macauthorization, :Expirer, :ClassMethods, :InstanceMethods, :ExecutionStub, :POSIX, :Errors, :MethodHelper, :ClassGen, :Docs, :Execution, :Tagging, :Log, :Logging, :Package, :Warnings, :Cacher, :Autoload, :LoadedFile, :Settings, :Feature, :SUIDManager, :RunMode, :CommandLine, :InstanceLoader, :Pson, :Metric, :LogPaths, :ProviderFeatures, :InlineDocs, :FileLocking, :Storage, :Checksums] (rdb:1) constants.grep /Path/ => [:LogPaths] (rdb:1) self => Puppet::Type::Macauthorization
