[site]: stackoverflow
[post_id]: 2610412
[parent_id]: 2609944
[tags]: 
Maybe more tests will reveal the problem... if ( !isset($filename) ) { die('parameter "filename" not set'); } else if ( !file_exists($filename) ) { die('file does not exist'); } else if ( !is_readable($filename) ) { die('file not readable'); } else if ( false===($size=filesize($filename)) ) { die('stat failed'); } else if ( headers_sent() || ob_get_length()>0) { die('something already sent output.'); } else { $basename = basename($filename); header("Pragma: public"); header("Expires: 0"); header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); header("Cache-Control: private",false); // required for certain browsers header("Content-Type: $ctype"); header("Content-Disposition: attachment; filename=\"".$basename."\";" ); header("Content-Transfer-Encoding: binary"); header("Content-Length: ".$size); readfile($filename); }
