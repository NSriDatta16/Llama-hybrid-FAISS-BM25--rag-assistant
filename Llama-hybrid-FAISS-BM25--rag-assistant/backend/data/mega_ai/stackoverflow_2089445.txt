[site]: stackoverflow
[post_id]: 2089445
[parent_id]: 
[tags]: 
Erlang: How should I test this?

I've got an application where I cast a message to a gen_server to start an operation, then I call the gen_server every second to gather intermediate results until the operation completes. In production, it usually takes a couple of minutes, but it's only limited by the input size and I'd like to test hour long operations, too. I want to always make sure this operation still works by running a test as needed. Ideally, I'd like to run this test multiple times with different inputs, also. I use eunit right now, but it doesn't seem to have a purpose-built way of exercising this scenario. Does commmon test provide for this? Is there an elegant way of testing this or should I just hack something up? In general, I'm having trouble wrapping my head around how to systematically test stateful, asynchronous operations in Erlang.
