[site]: stackoverflow
[post_id]: 2301089
[parent_id]: 
[tags]: 
(Windows API) WM_PAINT Mouse problems

I created a window with the following flags to overlay a d3d application: WS_EX_TOPMOST | WS_EX_COMPOSITED | WS_EX_TRANSPARENT | WS_EX_LAYERED I proceeded with colorkeying the window for transperacy and all worked well. However once I began drawing on it using GDI an unforeseen problem occurred: For some reason the mouse events (especially movement) are not passed correctly through the window when WM_PAINT is in progress, and so it appears as though the mouse and the keyboard for that matter lag. the FPS is fine, this is some API problem, I suspect that for some reason the keyboard/mouse messages are not handled as they should while the WM_PAINT is in progress, because the slower the timer is set to the less jerking there is. LRESULT CALLBACK WndProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam) { switch(msg) { case WM_DESTROY: { KillTimer(hwnd, ID_TIMER); PostQuitMessage(0); break; } case WM_CREATE: { SetTimer(hwnd, ID_TIMER, 10, NULL); break; } case WM_TIMER: { InvalidateRect(hwnd, 0, 1); break; } case WM_PAINT: { paint(hwnd); break; } } return DefWindowProc(hwnd, msg, wParam, lParam); } and void paint (HWND hwnd) { PAINTSTRUCT Ps; HDC hdc = BeginPaint(hwnd, &Ps); SetBkColor(hdc, RGB(0,0,0)); SetBkMode(hdc, TRANSPARENT); LOGBRUSH log_brush; log_brush.lbStyle = BS_NULL; HBRUSH handle_brush = CreateBrushIndirect(&log_brush); SelectObject(hdc, handle_brush); .......................................... DeleteObject(font); DeleteObject(pen); DeleteObject(handle_brush); EndPaint(hwnd, &Ps); } Thank you for any help you may be able to give.
