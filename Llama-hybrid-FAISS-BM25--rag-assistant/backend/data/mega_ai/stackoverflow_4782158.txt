[site]: stackoverflow
[post_id]: 4782158
[parent_id]: 4782049
[tags]: 
Yes, but it's two underscores: __pragma I'm not sure about how the omp pragma works, however, here's an example using VC++'s optimize pragma: #define PRAGMA_OPTIMIZE_OFF __pragma(optimize("", off)) // These two lines are equivalent #pragma optimize("", off) PRAGMA_OPTIMIZE_OFF EDIT: I've just confirmed that the omp pragmas can also be used like this: #define OMP_PARALLEL_FOR __pragma(omp parallel for) So, yes, your macro should work if defined as follows (note that your original code incorrectly used the stringizing operator #x : #ifdef _OPENMP #define PRAGMA_IF_OPENMP(x) __pragma (x) #else // #ifdef _OPENMP #define PRAGMA_IF_OPENMP(x) #endif // #ifdef _OPENMP
