[site]: stackoverflow
[post_id]: 4974390
[parent_id]: 4972266
[tags]: 
The -openmp flag on ifort does more than just turn on OpenMP directive processing. It also links in the proper libraries. Assuming that you have handled the underscore in the subroutine naming problem already, then if you add -openmp to the ifort link step, that will take care of the OpenMP libraries and adding -lstdc++ will handle the C++ references (like __gxx_personality_v0). Or you can use the options provided by ifort. Simple example: $> cat a.f90 program a print *, "calling C++ program" call b() end program a $> cat b.cpp #include #include extern "C" { void b_(void); } void b_(void) { int i; #pragma omp parallel for for (i = 0; i g++ -fopenmp -c -o b.o b.cpp $> ifort -g -O0 -c -o a.o a.f90 $> ifort -openmp -cxxlib -openmp-lib compat b.o a.o $> export OMP_NUM_THREADS=4 $> a.out calling C++ program t#: 2 i: 6 t#: 2 i: 7 t#: 2 i: 8 t#: 3 i: 9 t#: 0 i: 0 t#: 0 i: 1 t#: 0 i: 2 t#: 1 i: 3 t#: 1 i: 4 t#: 1 i: 5 You have to tell ifort to use OpenMP (-openmp), be compatible with the GNU OpenMP run-time library libgomp (-openmp-lib compat), and to link using the C++ run-time libraries provided by g++ (-cxxlib).
