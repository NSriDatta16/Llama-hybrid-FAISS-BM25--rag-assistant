[site]: stackoverflow
[post_id]: 4141973
[parent_id]: 
[tags]: 
Why is part of my bitmap image missing when written to external storage?

I want to send an image of a view to external storage so that it can be printed. The view is a grid made up of a tablelayout, tablerows and textviews. I write the view to the sdcard, then copy it to my HD using the DDMS file-explorer screen. But when I look at it in MS Paint, the image is only partially there. I have tested this two ways. When I usied the xml version, the result was a small black square – no detail, no grid, nothing. Next I created a textview programmatically, with text using settext(“AAA”). The resulting bitmap had the correct color and size, but the text was missing. Would someone please tell me how to get my view correctly written to external storage so that it looks like it does on the android screen? //FYI. Here are excerpts from my program: //Test-1 used the xml version of the grid: TableLayout tl = (TableLayout) findViewById(R.id.board); View viewToBeConverted = tl; //Test-2 used a simple dynamically generated view: TextView tv = new TextView(this); tv.setBackgroundColor(Color.PINK); tv.setTextColor(Color.BLACK); tv.setText("AAA"); tv.setHeight(40); tv.setWidth(40); View viewToBeConverted = tv; //Both Tests used this code to write to external storage: try { Bitmap returnedBitmap = Bitmap.createBitmap(40,40, Bitmap.Config.ARGB_8888); Canvas canvas = new Canvas(returnedBitmap); viewToBeConverted.draw(canvas); String path = Environment.getExternalStorageDirectory() + File.separator + strPuzSolFilename; FileOutputStream out = new FileOutputStream(path); } catch (Exception e) { e.printStackTrace(); }
