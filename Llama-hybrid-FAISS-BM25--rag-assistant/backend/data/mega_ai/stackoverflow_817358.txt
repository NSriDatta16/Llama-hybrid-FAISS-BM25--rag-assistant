[site]: stackoverflow
[post_id]: 817358
[parent_id]: 817101
[tags]: 
In addition to what Elazar Leibovich suggested, I'd parse the query string with parse_str() , modify the resulting array to my needs and then use http_build_query() to rebuild the query string. This way you won't have any duplicates within your query string and you don't have to bother yourself with url-encoding your query-parts. The complete example would then look like (augmenting Elazar Leibovich code): $broken = parse_url($url); $query = parse_str($broken['query']); $query['var1'] = 1; $query['var2'] = 2; $broken['query'] = http_build_query($query); return $broken['scheme'] . '://' . $broken['host'] . $broken['path'] . '?' . $broken['query'] . '#' . $broken['fragment'];
