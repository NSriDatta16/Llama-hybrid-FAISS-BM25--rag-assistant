[site]: stackoverflow
[post_id]: 4284766
[parent_id]: 
[tags]: 
Override a Magento Class

I am trying to override the Mage_Catalog_Block_Product_View with my MyCompany_Mymodule_Block_View in this way: getProduct(); $logged_in = Mage::getSingleton( 'customer/session' )->isLoggedIn(); $groupId = Mage::getSingleton('customer/session')->getCustomerGroupId(); if($this->checkPrivateCategories($product->getCategoryIds())){ if($logged_in && $groupId == 1){ # die('The user can see the product'); }else{ header('location: /customer/account/login'); die; } } return parent::_prepareLayout(); } private function checkPrivateCategories($categories){ if(is_array($categories)){ foreach($categories as $category){ $collection = Mage::getModel('catalog/category')->getCollection(); /* @var $collection Mage_Catalog_Model_Resource_Eav_Mysql4_Category_Collection */ $collection ->addAttributeToFilter('private', true) ->addIdFilter(array($category)) ->load(); $data = $collection->getData(); if(!empty($data)){ if ($data[0]['private']){ return true ; } } } } return false; } } I would like to check if the product selected is within a particular category, if the answer is yes I redirect the user to the customer login page. Now, if I edit the core class directly the code works correctly. If I try to override the Mage_Catalog_Block_Product_View with my custom class I get an empty section of the product detail page. The class has been called correctly, but there is no html answer. This is the Config.xml extract: MyCompany_Mymodule_Block MyCompany_Mymodule_Block_View Does anybody can help me to discover this mistery?
