[site]: stackoverflow
[post_id]: 1064663
[parent_id]: 1049734
[tags]: 
To solve the problem "I have an object and want to know how many threads access it" and you also can enumerate your threads, you can solve this problem with thread local storage. Allocate a TLS index for your object. Make a private method called "registerThread" which simply sets the thread TLS to point to your object. The key extension to the poster's original idea is that during every method call, call this registerThread(). Then you don't need to detect when or who created the thread, it's just set (often redundantly) during every actual access. To see which threads have accessed the object, just examine their TLS values. Upside: simple and pretty efficient. Downside: solves the posted question but doesn't extend smoothly to multiple objects or dynamic threads that aren't enumerable.
