[site]: stackoverflow
[post_id]: 4884800
[parent_id]: 
[tags]: 
Clustering a multi-service application

As stated in my question title, I am currently facing the problem of how to load balance an application that serves multiple services. The application is a storage service that stores files of users organized in buckets. The files itself are not actually stored on the application server, but on network storage. The application servers are used to encrypt/decrypt the data and to offer several services that enable users to access their data. These services currently include FTP, SFTP, HTTP as well as JNDI/RMI for internal use and might be enhanced in the future other proprietary or own protocols. Two file buckets might not be accessed with two servers at a time, so I would like to route ANY invocation of ANY service to the same cluster node if it's still running. If not, another server will open the connection to the bucket and serve it to the users. How do you cluster such an application? I looked at both, Tomcat and JBoss AS cluster guides and read some articles on Java EE clustering but nothing could give me an idea of how to achieve my goal yet. I think one of my main problems is the load balancing and I'll probably not be able to use any standard solution here.
