[site]: stackoverflow
[post_id]: 5307655
[parent_id]: 5294890
[tags]: 
I would create the JVM instance on module load time ( _init(void) function or something apache calls itself) and destroy it on _fini . If I remember correctly, you can attach multiple threads via AttachCurrentThread to the JVM. But you need to make sure that the pointer that is returned is only used in that thread. I would advise to use thread local storage for it. You can initialize the pointer with 0 on thread creation and do the attach in the first call to the function by the new thread.
