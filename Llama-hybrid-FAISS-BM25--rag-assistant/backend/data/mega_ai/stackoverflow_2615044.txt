[site]: stackoverflow
[post_id]: 2615044
[parent_id]: 2614948
[tags]: 
From the curl_easy_getinfo docs: CURLINFO_SPEED_UPLOAD Pass a pointer to a double to receive the average upload speed that curl measured for the complete [emphasis added] upload. Measured in bytes/second. CURLINFO_SPEED_UPLOAD only works once the updload has completed. Instead, write a progress callback and set CURLOPT_PROGRESSFUNCTION . Have your progress function calculate the exponential moving average for the current speed. progress(curl, fd, len): now = time() speed = len/(now-then) * weight + speed * (1-weight) update progress display then=now As always, network speed is an approximation.
