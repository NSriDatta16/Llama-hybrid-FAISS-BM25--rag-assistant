[site]: stackoverflow
[post_id]: 5135276
[parent_id]: 5135015
[tags]: 
If you already have computed your histogram, to find peaks and valleys is computationally trivial (loop over it and find local extrema). What is not trivial is to find "good" peaks and valleys to do some segmentation/threshold. But that is not a matter of coding, it's a matter of modelling. You can google for it. If you want a simple recipe, and if you know that your histogram has "essentially" two peaks and a valley in the middle ("bimodal" histogram) and you want to locate that valley, I have once implemented the following ad-hoc procedure, with relative success: Compute all the extrema of the histogram (relative maxima/minima, including borders) If there are only two maxima, AND if in between those maxima there is only one local minimum, we've found the valley. Return it. Else, smooth the histogram (eg. a moving average) and go to first step.
