[site]: stackoverflow
[post_id]: 1763038
[parent_id]: 
[tags]: 
how do I always include symbols from a static library?

Suppose I have a static library libx.a. How to I make some symbols (not all) from this library to be always present in any binary I link with my library? Reason is that I need these symbols to be available via dlopen+dlsym. I'm aware of --whole-archive linker switch, but it forces all object files from library archive to linked into resulting binary, and that is not what I want... Observations so far (CentOS 5.4, 32bit) ( upd : this paragraph is wrong; I could not reproduce this behaviour) ld main.o libx.a will happily strip all non-referenced symbols, while ld main.o -L. -lx will link whole library in. I guess this depends on version of binutils used, however, and newer linkers will be able to cherry-pick individual objects from a static library. Another question is how can I achieve the same effect under Windows? Thanks in advance. Any hints will be greatly appreciated.
