[site]: crossvalidated
[post_id]: 155784
[parent_id]: 155704
[tags]: 
The concept is very similar to that. However, as the outputs are probabilities, each column of $M$ outputs should sum to $1$. Therefore, having your $NxM$ target matrix, you could use $N$ softmax functions on their $M$ outputs, in order to make each column sum to $1$. There are many approaches to do that, depending on where you are implementing this. I usually prefer Torch7, which is considered the state-of-the-art in neural networks and is supported by NYU, Google Deepmind and Facebook AI.
