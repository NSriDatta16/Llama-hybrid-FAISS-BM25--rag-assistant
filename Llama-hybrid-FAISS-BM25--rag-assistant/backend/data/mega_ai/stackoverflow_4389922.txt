[site]: stackoverflow
[post_id]: 4389922
[parent_id]: 4388911
[tags]: 
Graphs of network traffic often use a weighted average. You can sample once per second into a circular list of length 10 and for the graph, at each sample, graph the average of the samples. If 10 isn't enough you can store many more. You don't need to recalculate the average from scratch, either: new_average = (old_average*10 - replaced_sample + new_sample)/10 If you don't want to store all 10, however, you can approximate with this: new_average = old_average*9/10 + new_sample/10 Lots of routers use this to save on storage. This ramps toward the current traffic rate exponentially. If you do implement this, do something like this: new_average = old_average*min(9,number_of_samples)/10 + new_sample/10 number_of_samples++ to avoid the initial ramp-up. You should also adjust the 9/10, 1/10 ratio to actually reflect the time preiod of each sample because your timer won't fire exactly once per second.
