[site]: stackoverflow
[post_id]: 3255511
[parent_id]: 3251327
[tags]: 
Do the simplest thing that could possibly work, as it sounds like even that is likely to have no performance problems that you can fix in your code. One thread per client sounds good, it makes programming as simple as possible. Ideally don't write a custom file server at all, but use an already-existing one - http, rsync etc. Rsync protocol is good for many small files as it supports pipelining. Having 250 threads really is no problem - indeed, 1000 would be fine too. Depending on whether the files fit in ram, and how fast your IO is, you may bottleneck on the network. If your network is just 1-2Gbit/sec, it seems likely that your storage can beat it on sequential IO, so the network will be a bottleneck.
