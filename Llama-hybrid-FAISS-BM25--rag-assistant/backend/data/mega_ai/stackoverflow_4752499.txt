[site]: stackoverflow
[post_id]: 4752499
[parent_id]: 
[tags]: 
Weird behaviour of HttpWebRequest while using WebProxy

I have an HttpWebRequest with a StreamReader that works very fine without using a WebProxy. When I use WebProxy, the StreamReader reads strange character instead of the actual html. Here is the code. HttpWebRequest req = (HttpWebRequest)WebRequest.Create("https://URL"); req.UserAgent = "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/534.10 (KHTML, like Gecko) Chrome/8.0.552.224 Safari/534.10"; req.Accept = "application/xml,application/xhtml+xml,text/html;q=0.9,text/plain;q=0.8,image/png,*/*;q=0.5"; req.Headers.Add("Accept-Charset", "ISO-8859-1,utf-8;q=0.7,*;q=0.3"); req.Headers.Add("Accept-Encoding", "gzip,deflate,sdch"); req.Headers.Add("Accept-Language", "en-US,en;q=0.8"); req.Method = "GET"; req.CookieContainer = new CookieContainer(); WebProxy proxy = new WebProxy("proxyIP:proxyPort"); proxy.Credentials = new NetworkCredential("proxyUser", "proxyPass"); req.Proxy = this.proxy; HttpWebResponse res = (HttpWebResponse)req.GetResponse(); StreamReader reader = new StreamReader(res.GetResponseStream()); string html = reader.ReadToEnd(); Without using the WebProxy , the variable html holds the expected html string from the URL. But with a WebProxy , html holds a value like that: "�\b\0\0\0\0\0\0��]r����s�Y����\0\tP\"]ki� ��ػ��-��X�\0\f���/�!�HU���>Cr���P$%�nR�� z�g��3�t�~q3�ٵȋ(M���14&?\r�d:�ex�j ��p������.��Y��o�|��ӎu�OO.�����\v]?}�~������E:�b��Lן�Ԙ6+�l���岳�Y��y'ͧ��~#5ϩ�it�2��5��%�p��E�L����t&x0:-�2��i�C���$M��_6��zU�t.J�>C-��GY��k�O�R$�P�T��8+�*]HY\"���$ Ō�-�r�ʙ �H3\f8Jd���Q(:�G�E���r���Rܔ� ڨ�����W� 8\b�p� �\= 4\f�> �&��$��\v ��C��C�vC��x�p�|\"b9�ʤ�\r%i��w@��\t�r�M�� �����!�G�jP�8.D�k�Xʹt�J��/\v!�r��y\f7 �
