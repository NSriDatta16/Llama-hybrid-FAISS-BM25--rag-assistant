[site]: stackoverflow
[post_id]: 1515996
[parent_id]: 1515955
[tags]: 
Sounds like greylisting. Which is funny, because as I began to read your question, that was one of the first hurdles I could anticipate. Greylisting is an anti-spam method that works by soft-failing a delivery on the basis that legitimate MTAs will attempt to re-submit the message after a period of time. Unfortunately two things don't work in your favour: The greylisting period can be chosen at random. Which means that sometimes it will take multiple retries before a message is accepted for delivery. Although 4xx codes should always be treated as soft-failures and are used for this purpose, there isn't any requirement for the server to tell you that it is due to greylisting. Some will be so kind and some won't. How you deal with that will depend on whether soft-failures are considered an ultimate failure for the purposes of what your application is doing. If they aren't, then you will have to devise some reliable queueing and retries. My honest advice to you would be that it is probably easier to implement reliable DSN or log checking than it is inventing your own RFC (and quirk) compliant MTA.
