[site]: crossvalidated
[post_id]: 367311
[parent_id]: 
[tags]: 
Probability a transition is taken in a Markov Chain within a certain number of steps

Given a Markov Chain ${\{X_t\}}_{t \in T}$ which has a transition matrix $P$, and a random variable $N$ of possible transitions. The probability that a transition $n = (i, j)$ from $i$ to $j$ is taken on the $\lambda^{\mathrm{th}}$ step, given that the starting state is at node $q$ is: $$\Pr(N = n \mid T = \lambda , X_0 = q) = [P]_{i j} [P^{\lambda-1}]_{q i} $$ I want to find $\Pr(N = n \mid T \leq \lambda , X_0 = q)$ the probability that a transition $n$ is taken within $\lambda$ steps. I can work this out intuitively for the $P$ matrix, but need a way to solve this for larger transition matrices. My intuition was to do the following, but this does not work correctly with the absorbing state at 0 as it leads to probability values larger than 1. $$\Pr(N = n \mid T \leq \lambda , X_0 = q) \neq \sum_{\mu = 1}^{\lambda} \Pr(N = n \mid T = \mu , X_0 = q)$$ $$P = \left(\begin{array}{c c c c} 1 & 0 & 0 & 0 \\ 1 & 0 & 0 & 0 \\ 1 & 0 & 0 & 0 \\ 0 & 0.5 & 0.5 & 0 \end{array}\right) $$
