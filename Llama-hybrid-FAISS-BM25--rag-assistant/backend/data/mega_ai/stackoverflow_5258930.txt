[site]: stackoverflow
[post_id]: 5258930
[parent_id]: 5258331
[tags]: 
How about adding user records for all comments. Even for not signed-in users. This is just one more record per anonymous comment. And in user records you can keep last IP address and other stuff like max anonymous comments per day. After user sign-in, reassign comments to the right user and delete temporary user. For new user sign-ups update temporary user records to verified state. Notice that each anonymous comment has owner, but the user isn't verified. And verification state can be treated as user attribute. Yes, it is possible to keep unverified users data in session. However sessions sometimes are configured to be stored in a database. So result is the same as storing temporary users in main users table in terms of disk usage, but the data is more fragmented.
