[site]: stackoverflow
[post_id]: 400445
[parent_id]: 400288
[tags]: 
I think in a situation like this, you're much better off making sure your data is organized properly first and then rendering it. I know you want a single pass, but I think the results would be alot better. For instance, organize the data into the lines you'll need to have for a given day and organize the events the best way possible, starting with the longest events (don't need to be displayed first, but they do need to be organized first) and moving down to the shortest events. This will allow you to render your output accordingly not wasting any space, and avoiding those "e" event days. Additionally, then: bbb aa cc or aa cc bbb won't matter because x and y can always go on either side of bbb or even between aa and cc I hope you find this helpful.
