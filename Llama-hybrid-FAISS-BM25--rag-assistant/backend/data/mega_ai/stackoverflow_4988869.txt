[site]: stackoverflow
[post_id]: 4988869
[parent_id]: 
[tags]: 
How do I set the background colour of a transparent PNG (WPF)?

I'm loading up some images (jpg, bmp, png etc.), doing some manipulation, and saving them back out again as jpg images. When I save PNG images with a transparent background, they are saved with a black background, and I'd really prefer it to be white. Is there a way to do this? The important thing is that this is a 'UI-less' routine in a product, so I've not got much leeway when it comes to radically changing the way things are done. Surely there must be a 'set background = white' or something? A short snippet of my code... // Load the image var image = new BitmapImage(); image.BeginInit(); image.CacheOption = BitmapCacheOption.None; image.UriSource = "SomeImage.png"; image.EndInit(); // Some manipulation of the image here... image.Shake().Twist().ThrowItAllAbout(); // Save it back out, in a different format using (FileStream stream = new FileStream("SomeOtherFile.jpg", FileMode.Create)) { var encoder = new JpegBitmapEncoder(); encoder.Frames.Add(BitmapFrame.Create((BitmapSource)image)); encoder.Save(stream); }
