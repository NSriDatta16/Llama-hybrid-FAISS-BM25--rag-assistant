[site]: stackoverflow
[post_id]: 4168396
[parent_id]: 
[tags]: 
How do I find all peaks and troughs of tidal data?

I'm working with some ocean tide data that's structured like this: $data = array('date' => array('time' => array('predicted','observed'))); Here's a sample of real data that I'm using: http://pastebin.com/raw.php?i=bRc2rmpG And this is my attempt at finding the high/low values: http://pastebin.com/8PS1frc0 Current issues with my code: When the readings fluctuate (as seen in the 11/14/2010=>11:30:00 to 11/14/2010=>11:54:00 span in the sample data), it creates a "wobble" in the direction logic. This creates an erroneous Peak and Trough. How can I avoid/correct this? Note: My method is very "ad-hoc".. I assumed I wouldn't need any awesome math stuff since I'm not trying to find any averages, approximations, or future estimations. I'd really appreciate a code example of a better method, even if it means throwing away the code I've written so far.
