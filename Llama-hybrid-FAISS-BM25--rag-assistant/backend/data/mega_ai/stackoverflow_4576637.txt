[site]: stackoverflow
[post_id]: 4576637
[parent_id]: 
[tags]: 
The supplied parameters to Zend_Auth_Adapter_DbTable failed to produce a valid sql statement

I have the following exception Caught exception: The supplied parameters to Zend_Auth_Adapter_DbTable failed to produce a valid sql statement, please check table and column names for validity. I have googled and checked my code over and over again but I have not found a solution. The table and column names are all correct. The section of code that is causing this problem is $result = $auth->authenticate($authAdapter); . Infact the whole controller code is found below: class AuthenticationController extends Zend_Controller_Action { public function init() { $uri = $this->_request->getPathInfo(); $activenav = $this->view->navigation()->findByUri($uri); $activenav->active = true; } public function indexAction() { // action body } public function loginAction() { if(Zend_Auth::getInstance()->hasIdentity()) { $this->_redirect('index/index'); } $request = $this->getRequest(); $form = new Application_Form_LoginForm(); if($request->isPost()) { if($form->isValid($this->_request->getPost())) { $authAdapter = $this->getAuthAdapter(); $username = $form->getValue('username'); $password = $form->getValue('password'); $authAdapter->setIdentity($username) ->setCredential($password); $auth = Zend_Auth::getInstance(); try { $result = $auth->authenticate($authAdapter); } catch (Exception $e) { echo 'Caught exception: ', $e->getMessage(), "\n"; } if ($result->isValid()) { $identity = $authAdapter->getResultRowObject(); $authstorage = $auth->getStorage(); $authstorage->write($identity); $this->_redirect('index/index'); } else { $this->view->errorMessage = "User name or password is wrong"; } } } $this->view->form = $form; } public function logoutAction() { Zend_Auth::getInstance()->clearIdentity(); $this->_redirect('index/index'); } private function getAuthAdapter() { $authAdapter = new Zend_Auth_Adapter_DbTable(Zend_Db_Table::getDefaultAdapter()); $authAdapter->setTableName('users') ->setIdentityColumn('username') ->setCredentialColumn('password') ->setCredentialTreatment('SHA1(CONCAT(?,salt))'); return $authAdapter; } } I have been stuck on this for a couple of days now and its driving me nuts. BTW how can I echo out the actual sql that is being generated? Thanks all
