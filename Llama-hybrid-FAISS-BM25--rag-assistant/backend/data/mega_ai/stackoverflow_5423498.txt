[site]: stackoverflow
[post_id]: 5423498
[parent_id]: 
[tags]: 
How can I optimize my query/environment to improve MySQL sorting on a large data set?

Here's a sample MySQL query: SELECT DISTINCT item.ID, item.CREATED_AT FROM `item` , `image` WHERE item.COLLECTION_ID =9 AND item.REJECTED IS NULL AND image.ITEM_ID = item.ID ORDER BY item.CREATED_AT DESC LIMIT 0, 30 And here's the explain results: id select_type table type possible_keys key key_len ref rows Extra 1 SIMPLE item ref PRIMARY,item_FI_1,rejected item_FI_1 4 const 313775 Using where; Using temporary; Using filesort 1 SIMPLE image ref item_id item_id 3 dbname.item.id 1 Using where; Using index; Distinct Sorry, but I can only show the phpMyAdmin explain output at the moment. Here's the CREATE TABLE: CREATE TABLE `item` ( `id` int(11) NOT NULL auto_increment, `collection_id` int(11) NOT NULL, `user_id` int(11) NOT NULL, `variant_id` int(11) default NULL, `duplicate_id` int(11) default NULL, `rejected` tinyint(4) default NULL, `name` varchar(255) default NULL, `remote_key` int(11) default NULL, `created_at` datetime default NULL, PRIMARY KEY (`id`), KEY `item_FI_1` (`collection_id`), KEY `created_at` (`created_at`), KEY `rejected` (`rejected`), KEY `variant_id` (`variant_id`), CONSTRAINT `item_FK_1` FOREIGN KEY (`collection_id`) REFERENCES `collection` (`id`) ) ENGINE=InnoDB AUTO_INCREMENT=691849 DEFAULT CHARSET=latin1 Here's my variables: auto increment increment 1 auto increment offset 1 automatic sp privileges ON back log 50 basedir / binlog cache size 32,768 bulk insert buffer size 8,388,608 character set client utf8 (Global value) latin1 character set connection utf8 (Global value) latin1 character set database latin1 character set filesystem binary character set results utf8 (Global value) latin1 character set server latin1 character set system utf8 character sets dir /usr/share/mysql/charsets/ collation connection utf8_general_ci (Global value) latin1_swedish_ci collation database latin1_swedish_ci collation server latin1_swedish_ci completion type 0 concurrent insert 1 connect timeout 10 datadir /var/lib/mysql/ date format %Y-%m-%d datetime format %Y-%m-%d %H:%i:%s default week format 0 delay key write ON delayed insert limit 100 delayed insert timeout 300 delayed queue size 1,000 div precision increment 4 keep files on create OFF engine condition pushdown OFF expire logs days 0 flush OFF flush time 0 ft boolean syntax + -> Any thoughts on how I can improve performance on this? My queries are averaging around 3 seconds on the above (pertaining to about 600,000 query matches). Thanks!
