[site]: stackoverflow
[post_id]: 3870839
[parent_id]: 
[tags]: 
Good way to use CGImageCreateWithImageInRect, UIImage and UIImagePickerController questions

I'm trying to do something which should in theory be quite simple, but I've been chasing my tail around for days now. I'm trying to take a touch event from a screen overlay, capture an image, and crop a section of the image out around where the finger touched. Now all my code is working fine, the overlay, events, cropping etc....however I can't seem to get the coordinates system of the touch event to match the coordinates system of the UIImage. I've read all the docs I can get my hands on, I just can't seem to figure it out. My main question is, do I need to take into account UIImageOrientation when using CGImageCreateWithImageInRect, or does quartz figure it out? The reason I ask is I have a very simple routine that is cropping images just fine, but the cropped image never seems to be where my finger pressed?? The bulk of the routine is: -(void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info { UIImage *image = =[info objectForKey:@"UIImagePickerControllerOriginalImage"]; float scaleX = image.size.width / SCREEN_WIDTH; float scaleY = image.size.height / SCREEN_HEIGHT; //lastTouch is saved from touchesBegan method float x = (lastTouch.x * scaleX) - (CROP_WIDTH/2); float y = (lastTouch.y * scaleY) - (CROP_WIDTH/2); if(x So, the problem is that my cropped area (as viewed in my photo album) never matches the actual area that I press (it's always some other random part of the photo), which makes me think my coordinates system is off. Any pointers would be greatly appreciated, even if there just pointers to some docs I haven't found yet. Cheers Adam
