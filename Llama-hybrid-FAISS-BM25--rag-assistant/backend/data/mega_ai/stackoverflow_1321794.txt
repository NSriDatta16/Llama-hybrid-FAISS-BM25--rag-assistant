[site]: stackoverflow
[post_id]: 1321794
[parent_id]: 1320524
[tags]: 
You can use http://htmlpurifier.org/ It is great tool for your needs. Here is small configuration for htmlpurifier. These rules perfect match with TinyMce editor. $purifier = new HTMLPurifier(); $purfier_config = HTMLPurifier_Config::createDefault(); $purfier_config->set('HTML.DefinitionID', 'User Content Filter'); $purfier_config->set('HTML.DefinitionRev', 1); // these are allowed html tags, means white list $purfier_config->set('HTML.Allowed', 'a,strong,em,p,span,img,li,ul,ol,sup,sub,small,big,code,blockquote,h1,h2,h3,h4,h5'); // these are allowed html attributes, coool! $purfier_config->set('HTML.AllowedAttributes', 'a.href,a.title,span.style,span.class,span.id,p.style,img.src,img.style,img.alt,img.title,img.width,img.height'); // auto link given url string $purfier_config->set('AutoFormat.Linkify', true); // auto format \r\n lines $purfier_config->set('AutoFormat.AutoParagraph', true); // clean empty tags $purfier_config->set('AutoFormat.RemoveEmpty', true); // cache dir, just for symfony of course, you can change to another path $purfier_config->set('Cache.SerializerPath', sfConfig::get('sf_cache_dir')); // translation type, $purfier_config->set('HTML.Doctype', 'XHTML 1.0 Transitional'); // allow youtube videos $purfier_config->set('Filter.YouTube', true); $purfier_config->set('HTML.TidyLevel', 'heavy'); // now clean your data $clean_nice_html_data = $purifier->purify($user_input_data, $purfier_config); Now you can insert data to databse with html tags, and you don't need to escape your data, because, htmlpurifier clean nasty, dangerous data for you, and only accept your allowed tags and attributes. I hope it helps.
