[site]: crossvalidated
[post_id]: 477217
[parent_id]: 
[tags]: 
Proper way to estimate integrated autocorrelation time of a chain

Let's say that I have some quantity $\mathcal{O}$ that I wish to estimate by a sequence $(m_1,m_2,...,m_N)$ of data points (which are used to construct an estimate of $\mathcal{O}$ at each $i$ , called $\mathcal{O}_i$ ) generated by Monte Carlo, such that the estimate of $\mathcal{O}$ is $\hat{\mathcal{O}}=\langle\mathcal{O}_i\rangle$ (the average over each $\mathcal{O}_i$ ). I wish to find the integrated autocorrelation time of $\mathcal{O}$ , $\tau_{\mathcal{O}}$ , so I use an estimator defined by $$\hat{\tau}_{\mathcal{O}}=1+2\sum_{i=1}^{N}\rho_{\mathcal{O_i}},$$ where $$\rho_{\mathcal{O}_t}=c_{\mathcal{O}}(t)/c_{\mathcal{O}}(0); \\c_{\mathcal{O}}(t)=\frac{1}{N-t}\sum_{i=1}^{N-t}\big(\mathcal{O}_{i+t}-\langle\mathcal{O}\rangle\big)\big(\mathcal{O}_i-\langle\mathcal{O}\rangle\big).$$ The Monte Carlo will accept some proposals for $m_i$ and reject others. When estimating autocorrelation time this way, should one only use the parts of the chain that correspond to moves that were accepted, or should the entirety of the chain (which includes elements of the chain that were accepted and elements of the chain that stayed the same because the proposed move was rejected) be used?
