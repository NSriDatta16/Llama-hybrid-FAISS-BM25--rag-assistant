[site]: stackoverflow
[post_id]: 4305920
[parent_id]: 4304730
[tags]: 
Here is an alternate approach to access the information you want nginx to provide that is much safer. Include bytes_sent as a column in your access log. If you refer to the HttpLogModule you'll see you can specify bytes_sent as a column in the access log. Combine this with a php script that parses the log file (Perhaps after it is rotated) and you'll be able to avoid c. log_format sampleformatname '$remote_addr - $remote_user [$time_local] ' '"$request" $status ' '"$http_referer" "$http_user_agent" "$bytes_sent"'; access_log /path/to/logs/access.log sampleformatname; Some benefits to this approach: Ability to upgrade to newer versions of nginx without merging in your changes. Stick with the tools you know (php) offline processing Simpler and safer
