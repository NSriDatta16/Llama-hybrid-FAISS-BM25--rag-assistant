[site]: stackoverflow
[post_id]: 4148159
[parent_id]: 
[tags]: 
Delicious PHP oAuth Yahoo SDK Add Bookmark

I'm really having a difficult time trying to find a way to successfully authenticate a user and post a bookmark to their delicious account. I downloaded Yahoo's YOS Social SDK then began modifying the oauth sampleapp.php . It basically handles the oAuth process by creating a login link that sends you to Yahoo to grant permission then sends you back to the callback URL you specify. My thought was to modify the sampleapp.php file to make a request to delicious posts/add API to add a new bookmark once they oAuth process is over, but I'm running into some problems. I think I'm handling the POST request in the wrong manner. Here is my code: '); define('OAUTH_CONSUMER_SECRET', ' '); define('OAUTH_DOMAIN', ' '); define('OAUTH_APP_ID', ' '); if(array_key_exists("logout", $_GET)) { YahooSession::clearSession(); header("Location: sampleapp.php"); } $hasSession = YahooSession::hasSession(OAUTH_CONSUMER_KEY, OAUTH_CONSUMER_SECRET, OAUTH_APP_ID); if($hasSession == FALSE) { $callback = YahooUtil::current_url(); $auth_url = YahooSession::createAuthorizationUrl(OAUTH_CONSUMER_KEY, OAUTH_CONSUMER_SECRET, $callback); } else { $session = YahooSession::requireSession(OAUTH_CONSUMER_KEY, OAUTH_CONSUMER_SECRET, OAUTH_APP_ID); if($session) { $consumer = new stdclass(); $consumer->key = OAUTH_CONSUMER_KEY; $consumer->secret = OAUTH_CONSUMER_SECRET; $nativeSession = new NativeSessionStore(); $token = $nativeSession->fetchAccessToken(); $client = new OAuthClient($consumer, $token, OAUTH_PARAMS_IN_HEADERS, OAUTH_SIGNATURE_HMAC_SHA1); $request_url = 'http://api.del.icio.us/v2/posts/add'; $bookmark_url = 'http://www.tegdesign.com'; $parameters = array("url" => urlencode($bookmark_url), "description" => "test"); $response = $client->post($request_url,'TEXT',$parameters); echo ' '; print_r($response); echo ' '; } } if($hasSession == FALSE) { echo sprintf(" Login \n", $auth_url); } else if($hasSession) { echo " Logout "; } ?> And here is the output of $response variable: Array ( [method] => POST [url] => http://api.del.icio.us/v2/posts/add [code] => 401 [requestHeaders] => Array ( [0] => Accept: application/json [1] => Authorization: OAuth realm="yahooapis.com",oauth_version="1.0",oauth_nonce=" ",oauth_timestamp="1289407587",oauth_consumer_key=" ",oauth_token=" ",oauth_signature_method="HMAC-SHA1",oauth_signature=" " [2] => Content-Type: TEXT ) [requestBody] => Array ( [url] => http%3A%2F%2Fwww.tegdesign.com [description] => test ) [responseHeaders] => Array ( [Date] => Wed, 10 Nov 2010 16:46:32 GMT [WWW-Authenticate] => OAuth oauth_problem="signature_invalid", realm="yahooapis.com" [Content-Type] => application/json [Cache-Control] => private [Age] => 0 [Transfer-Encoding] => chunked [Connection] => keep-alive [Server] => YTS/1.17.21 ) [responseBody] => {"error":{"lang":"en-US","description":"Please provide valid credentials"}} ) Does anybody have knowledge on using Delicious new API to successfully authenticate and post a bookmark on behalf a user? I'm having a terrible time. Thanks, Tegan
