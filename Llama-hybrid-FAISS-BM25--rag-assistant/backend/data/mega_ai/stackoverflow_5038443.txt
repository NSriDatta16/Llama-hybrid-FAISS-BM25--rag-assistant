[site]: stackoverflow
[post_id]: 5038443
[parent_id]: 
[tags]: 
Three20 TTPhotoViewController is not displaying photos

I have gone through a few tutorials including the sample app included with Three20 and cannot figure out why photos aren't showing up in my TTPhotoViewController. I actually find it pretty hard to debug. Below is the code I have. Any thoughts on why images will not load and how to debug it would be great. I get a completely black view in between my bottom tabbar and upper nav bar. I also see left and right arrows overlayed on the black view which seems to be for navigating photos although I thought it was supposed to display a thumbnail gallery. // A TTPhoto class // Photo.h #import #import @interface Photo : NSObject { NSString *_caption; NSString *_urlLarge; NSString *_urlSmall; NSString *_urlThumb; id _photoSource; CGSize _size; NSInteger _index; } @property (nonatomic, copy) NSString *caption; @property (nonatomic, copy) NSString *urlLarge; @property (nonatomic, copy) NSString *urlSmall; @property (nonatomic, copy) NSString *urlThumb; @property (nonatomic, assign) id photoSource; @property (nonatomic) CGSize size; @property (nonatomic) NSInteger index; - (id)initWithCaption:(NSString *)caption urlLarge:(NSString *)urlLarge urlSmall:(NSString *)urlSmall urlThumb:(NSString *)urlThumb size:(CGSize)size; @end // Photo.m #import "Photo.h" @implementation Photo @synthesize caption = _caption; @synthesize urlLarge = _urlLarge; @synthesize urlSmall = _urlSmall; @synthesize urlThumb = _urlThumb; @synthesize photoSource = _photoSource; @synthesize size = _size; @synthesize index = _index; - (id)initWithCaption:(NSString *)caption urlLarge:(NSString *)urlLarge urlSmall:(NSString *)urlSmall urlThumb:(NSString *)urlThumb size:(CGSize)size { if ((self = [super init])) { self.caption = caption; self.urlLarge = urlLarge; self.urlSmall = urlSmall; self.urlThumb = urlThumb; self.size = size; self.index = NSIntegerMax; self.photoSource = nil; } return self; } - (void) dealloc { self.caption = nil; self.urlLarge = nil; self.urlSmall = nil; self.urlThumb = nil; [super dealloc]; } #pragma mark TTPhoto - (NSString*)URLForVersion:(TTPhotoVersion)version { switch (version) { case TTPhotoVersionLarge: return _urlLarge; case TTPhotoVersionMedium: return _urlLarge; case TTPhotoVersionSmall: return _urlSmall; case TTPhotoVersionThumbnail: return _urlThumb; default: return nil; } } @end // A TTPhotoSource class // PhotoSet.h #import #import "Three20/Three20.h" @interface PhotoSet : TTURLRequestModel { NSString *_title; NSArray *_photos; NSArray* _tempPhotos; NSTimer* _fakeLoadTimer; } @property (nonatomic, copy) NSString *title; @property (nonatomic, retain) NSArray *photos; - (id) init; @end // PhotoSet.m #import "PhotoSet.h" #import "Photo.h" @implementation PhotoSet @synthesize title = _title; @synthesize photos = _photos; - (id) init { _title = @"Test photo album"; _photos = [[NSArray alloc] initWithObjects: [[[Photo alloc] initWithCaption:@"coming soon" urlLarge:@"http://farm5.static.flickr.com/ 4066/4653156849_0905e6b58e_o.jpg" urlSmall:@"http://farm5.static.flickr.com/ 4066/4653156849_0d15f0e3f0_s.jpg" urlThumb:@"http://farm5.static.flickr.com/ 4066/4653156849_0d15f0e3f0_s.jpg" size:CGSizeMake(220, 112)] autorelease], [[[Photo alloc] initWithCaption:@"coming soon 2" urlLarge:@"http://farm5.static.flickr.com/ 4023/4653774402_05e6acd995_o.jpg" urlSmall:@"http://farm5.static.flickr.com/ 4009/4653157237_c2f5f59e0d_s.jpg" urlThumb:@"http://farm5.static.flickr.com/ 4009/4653157237_c2f5f59e0d_s.jpg" size:CGSizeMake(220, 112)] autorelease], [[[Photo alloc] initWithCaption:@"coming soon 2" urlLarge:@"http://farm5.static.flickr.com/ 4023/4653774402_05e6acd995_o.jpg" urlSmall:@"http://farm5.static.flickr.com/ 4009/4653157237_c2f5f59e0d_s.jpg" urlThumb:@"http://farm5.static.flickr.com/ 4009/4653157237_c2f5f59e0d_s.jpg" size:CGSizeMake(220, 112)] autorelease], [[[Photo alloc] initWithCaption:@"coming soon 2" urlLarge:@"http://farm5.static.flickr.com/ 4023/4653774402_05e6acd995_o.jpg" urlSmall:@"http://farm5.static.flickr.com/ 4009/4653157237_c2f5f59e0d_s.jpg" urlThumb:@"http://farm5.static.flickr.com/ 4009/4653157237_c2f5f59e0d_s.jpg" size:CGSizeMake(220, 112)] autorelease], nil]; for (int i = 0; i photo = [_photos objectAtIndex:i]; if ((NSNull*)photo != [NSNull null]) { NSLog(@"in here 65434"); photo.photoSource = self; photo.index = i; } } return self; } - (void) dealloc { self.title = nil; self.photos = nil; [super dealloc]; } #pragma mark TTModel - (BOOL)isLoading { return NO; } - (BOOL)isLoaded { return YES; } #pragma mark TTPhotoSource - (NSInteger)numberOfPhotos { return _photos.count; } - (NSInteger)maxPhotoIndex { return _photos.count-1; } - (id )photoAtIndex:(NSInteger)photoIndex { if (photoIndex #import #import #import "PhotoSet.h" @class Event; @interface EventDetailViewController : TTPhotoViewController { NSArray *photos; Event *event; PhotoSet *_photoSet; } @property (nonatomic, retain) NSArray *photos; @property (nonatomic, retain) Event *event; @property (nonatomic, retain) PhotoSet *photoSet; - (id)initWithEvent:(Event *)e; // EventDetailViewController.m #import "EventDetailViewController.h" #import "Event.h" #import "PhotoSet.h" #import "Photo.h" @implementation EventDetailViewController @synthesize photos; @synthesize event; @synthesize photoSet = _photoSet; #pragma mark - #pragma mark Initialization - (void)viewDidLoad { self.photoSet = [[PhotoSet alloc] init]; self.photoSource = self.photoSet; } - (id)initWithEvent:(Event *)e { if (self) { self.event = e; } return self; } @end
