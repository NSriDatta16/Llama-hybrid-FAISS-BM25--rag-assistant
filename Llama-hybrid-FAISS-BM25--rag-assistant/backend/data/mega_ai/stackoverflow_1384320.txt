[site]: stackoverflow
[post_id]: 1384320
[parent_id]: 
[tags]: 
Serving file download with python

Hey gang, I'm trying to convert a legacy php script over to python and not having much luck. The intent of the script is to serve up a file while concealing it's origin. Here's what's working in php: When I do the equivilent in Python, I get a download that is zero bytes. Here's what I'm trying: #!/usr/bin/env python # encoding: utf-8 import sys import os import cgitb; cgitb.enable() filepath = "foo.mp3" filesize = os.path.getsize(filepath) print "Prama: no-cache" print "Expires: 0" print "Cache-Control: must-revalidate, post-check=0, pre-check=0" print "Content-Type: application/octet-stream" print "Content-Type: application/download" print 'Content-Disposition: attachment;filename="'+filepath+'"' print "Content-Transfer-Encoding: binary" print 'Content-Length: '+str(filesize) print #required blank line open(filepath,"rb").read() Can anyone please help me?
