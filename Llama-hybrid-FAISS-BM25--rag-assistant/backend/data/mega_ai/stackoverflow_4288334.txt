[site]: stackoverflow
[post_id]: 4288334
[parent_id]: 4288265
[tags]: 
You should be able to do this with PHP's native DOM library . Creating a DOMDocument object with the truncated contents, then converting it back to a string will result in a normalized DOM tree not unlike what a browser would produce with a DocumentFragment .
