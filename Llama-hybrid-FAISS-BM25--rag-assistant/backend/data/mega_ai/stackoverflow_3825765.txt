[site]: stackoverflow
[post_id]: 3825765
[parent_id]: 3787941
[tags]: 
After looking back over your code, it appears this class is acting as both a Factory and Repository to the \Entities\Customer class (this was not obvious, so you could consider renaming to be more explicit your intentions). I also disagree with that function being named save since it is only returning an object that then needs to be persisted, but that is more semantics. With the code as you have it now, I see two different tests that are needed. 1) Test your \Entities\Customer class. Verify that each of your getters and setters are working correctly, or at least any one that has business logic behind it. For instance make sure that if you set the ResellerShop, then if you get a correct/valid ResellerShow object. More or less, you need to test your business logic. Get/Set of basic fields (ex. Name) don't really necessitate their own tests (unless 100% code coverage is a goal, I don't think it is). 2) Test the (Factory\Repository) class. Ensure the class you showed correctly creates (or fails) depending on the data passed into the array. For instance it should fail if required fields are not passed in, and it should not return a customer entity object. The idea is for separation of concerns. Your Entity class should contain your business logic and should be tested separately from your object instantiation code.
