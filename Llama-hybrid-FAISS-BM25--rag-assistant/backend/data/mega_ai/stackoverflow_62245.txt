[site]: stackoverflow
[post_id]: 62245
[parent_id]: 
[tags]: 
Merging records for Mnesia

I am trying to refactor some code I have for software that collects current status of agents in a call queue. Currently, for each of the 6 or so events that I listen to, I check in a Mnesia table if an agent exists and change some values in the row depending on the event or add it as new if the agent doesn't exist. Currently I have this Mnesia transaction in each event and of course that is a bunch of repeated code for checking the existence of agents and so on. I'm trying to change it so that there is one function like change_agent/2 that I call from the events that handles this for me. My problems are of course records.... I find no way of dynamically creating them or merging 2 of them together or anything. Preferably there would be a function I could call like: change_agent("001", #agent(id = "001", name = "Steve")). change_agent("001", #agent(id = "001", paused = 0, talking_to = "None")).
