[site]: stackoverflow
[post_id]: 4702701
[parent_id]: 4702666
[tags]: 
It would probably help to be consistent on whether the latitude is 37 or 37.780182. What's the theoretical basis behind acos(cos(LAT0) * cos(LAT1) * cos(LNG1 - LNG0) + sin(LAT0) * sin(LAT1)))? If you're modelling the globe as a sphere then you want acos(dot product of the 3D embedding) which is acos(cos(LAT0) * cos(LAT1) + sin(LAT0) * sin(LAT1) * (cos(LNG0) * cos(LNG1) + sin(LNG0) * sin(LNG1))).
