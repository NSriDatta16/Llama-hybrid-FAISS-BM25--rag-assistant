[site]: stackoverflow
[post_id]: 5043910
[parent_id]: 2775578
[tags]: 
Coming late to the party on this one. Here is the C++0x answer: #include #include #include int main() { // Set up distribution double interval[] = {1, 2, 3, 4, 5, 6}; double weights[] = { .2, .1, .4, .25, .05}; std::piecewise_constant_distribution<> dist(std::begin(interval), std::end(interval), std::begin(weights)); // Choose generator std::mt19937 gen; // seed as wanted // Demonstrate by pouring into avg[rand-1] const unsigned N = 1000000; double avg[sizeof(weights) / sizeof(weights[0])] = {0}; for (unsigned i = 0; i (dist(gen)) - 1]++; // Comute averages for (double* i = std::begin(avg); i Which for me outputs: avg[1] = 0.199779 avg[2] = 0.100002 avg[3] = 0.400111 avg[4] = 0.250257 avg[5] = 0.049851
