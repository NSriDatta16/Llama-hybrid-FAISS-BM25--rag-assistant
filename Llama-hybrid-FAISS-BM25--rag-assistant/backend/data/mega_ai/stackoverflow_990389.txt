[site]: stackoverflow
[post_id]: 990389
[parent_id]: 
[tags]: 
Creating Azure storage table on asp.net MVC

I'm following this blog post to create an azure storage table: http://blogs.msdn.com/jnak/archive/2008/10/28/walkthrough-simple-table-storage.aspx It works fine on an asp.net webform web_role. I've re-created the same project using asp.net mvc as the web role, and it's always failing on application start. this line: StorageAccountInfo account = StorageAccountInfo.GetDefaultTableStorageAccountFromConfiguration(); seem to always fail getting the account shared key. If I move the line from global asax application start to default.aspx, it works perfectly fine. Is there any difference in initializing a storage table in azure asp.net mvc compared to webform? Why can't I get the azure appsettings on application start? This is the error call stack from event viewer Exception information: Exception type: HttpException Exception message: No account key specified! Request information: Request URL: http://127.0.0.1:5100/do.__rd_runtime_init__?shutdownEvent=1B671B93FD-4153-4834-9D5D-595EFC6C19EE1D Request path: /do.__rd_runtime_init__ User host address: 127.0.0.1 User: Is authenticated: False Authentication Type: Thread account name: ***** Thread information: Thread ID: 6 Thread account name: ***** Is impersonating: False Stack trace: at System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) at System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) at System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) at System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) at System.Web.HttpApplicationFactory.GetPipelineApplicationInstance(IntPtr appContext, HttpContext context) at System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext)
