[site]: stackoverflow
[post_id]: 5408585
[parent_id]: 
[tags]: 
MsDeploy remoting executing manifest twice

I have: Created a manifest for msdeploy to: Stop, Uninstall, Copy over, Install, and Start a Windows service. Created a package from the manifest Executed msdeploy against the package against a remote server. Problem: It executes the entire manifest twice. Tried: I have tinkered with the waitInterval and waitAttempts thinking it was timing out and starting over, but that hasn't helper. Question: What might be making it execute twice? The Manifest: The command issued to package it: "C:\Program Files\IIS\Microsoft Web Deploy V2\msdeploy" -verb:sync -source:manifest=c:\msdeploy\custom.xml -dest:package=c:\msdeploy\package.zip The command issued to execute it: "C:\Program Files\IIS\Microsoft Web Deploy V2\msdeploy" -verb:sync -source:package=c:\msdeploy\package.zip -dest:auto,computername= I am running as a domain user who has administrative access on the box. I have also tried passing credentials - it is not a permissions issue, the commands are succeeding, just executing twice. Edit: I enabled -verbose and found some interesting lines in the log: Verbose: Performing synchronization pass #1. ... Verbose: Source filePath (C:\msdeploy\MyTestWindowsService\MyTestWindowsService\bin\Debug\MyTestWindowsService.exe) does not match destination (C:\msdeploy\MyTestWindowsService\MyTestWindowsService\bin\Debug\MyTestWindowsService.exe) differing in attributes (lastWriteTime['11/08/2011 23:40:30','11/08/2011 23:39:52']). Update pending. Verbose: Source filePath (C:\msdeploy\MyTestWindowsService\MyTestWindowsService\bin\Debug\MyTestWindowsService.pdb) does not match destination (C:\msdeploy\MyTestWindowsService\MyTestWindowsService\bin\Debug\MyTestWindowsService.pdb) differing in attributes (lastWriteTime['11/08/2011 23:40:30','11/08/2011 23:39:52']). Update pending. After these lines, files aren't copied the first time, but are copied the second time ... Verbose: The dependency check 'DependencyCheckInUse' found no issues. Verbose: Received response from agent (HTTP status 'OK'). Verbose: The current synchronization pass is missing stream content for 2 objects. Verbose: Performing synchronization pass #2. ... High Level Normally I deploy a freshly built package with newer bits than are on the server. During pass two, it duplicates everything that was done in pass one. In pass 1, it will: Stop, Uninstall, (delete some log files created by the service install), Install, and Start a Windows service In pass 2, it will: Stop, Uninstall, Copy files over , Install, and Start a Windows service. I have no idea why it doesn't copy over the files in pass 1, or why pass 2 is triggered. If I redeploy the same package instead of deploying fresh bits, it will run all the steps in pass 1, and not run pass 2. Probably because the files have the same time stamp.
