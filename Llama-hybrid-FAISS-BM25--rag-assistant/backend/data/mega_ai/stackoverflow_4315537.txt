[site]: stackoverflow
[post_id]: 4315537
[parent_id]: 
[tags]: 
Graceful handing over resources from initramfs to userspace

There are hardware devices which need userspace suppport, like daemon running and handling parts of interaction not suitable (too complex or policy-related) for kernel space. Running such daemons is easy once you reach userspace -- you can run'em as a result of hotplug event and don't worry much. Once initramfs comes to the picture, everything suddenly breaks apart: if the daemon is run from initramfs then it needs to either keep running when execution is switched to regular rootfs, which is particularily hard, given initramfs is freed during switch_root or hand out resources and state to another copy of itself, run from rootfs. Both solutions seem inelegant and hacky. Is there obvious way to manage such devices and their supporting daemons I overlooked?
