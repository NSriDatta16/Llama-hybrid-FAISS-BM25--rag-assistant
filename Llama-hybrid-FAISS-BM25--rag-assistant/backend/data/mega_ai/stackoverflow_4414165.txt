[site]: stackoverflow
[post_id]: 4414165
[parent_id]: 4380988
[tags]: 
I think you've only given a fragment of your xsd? It's easier to debug if you can provide a working snippet. I added a surrounding to make it validate. The problem seems to be that the enumValueKey selector groups all of the enumValues , across of all the enumType 's; but you only want to group those within one enumType . The only way I can see to fix it is to move the for enumValues into the enumType element (and adjust the xpath selector), so the whole thing becomes: This works, in that it allows your XML example, and it forbids the following fragment (with two 1 's) as it should: ... ... Let me know if this works for you. I'm also interested if there is any other way to express this.
