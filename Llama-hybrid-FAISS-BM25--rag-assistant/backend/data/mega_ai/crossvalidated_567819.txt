[site]: crossvalidated
[post_id]: 567819
[parent_id]: 
[tags]: 
Bayesian optimization by groups

I am currently comparing different models for a text classification task using tweets. Some of them are decision trees (random forests) and, since I augment my data periodically, I need to do hyperparameter's optimization quite often. This is why I moved to Bayesian optimization with OPTUNA (in Python), which really sped things up. However, there is still a missing point that I can't figure out. My data has a group structure at the city level (all tweets produced in different cities), and the models are expected to do predictions at this level of aggregation. That is, I train on cities, then do predictions on a new city, feed back, re-train etc. Due to this, I want the model evaluation to be at the city level and not in a mix of samples from different cities. Using sckit-learn, I believe that GroupKFold should be the way to go. Does something similar exist for Bayesian optimization? Is there a way to let optuna know how my domains work?
