[site]: crossvalidated
[post_id]: 535890
[parent_id]: 535884
[tags]: 
Intuitively, if you were to choose a constant as your prediction, the best choice would be $E[y|x]$ as you quoted. If you can divide the predictor space into $J$ regions (pre-defined) and have the freedom to choose $J$ constants, then region specific conditional averages would your best choice. This is like taking the mean of the samples in the leaves of a decision tree. $$E[Y|\mathbf X]=\sum_{j=1}^J \mathbb P(\mathbf X \in A_j)\mathbb E[Y|\mathbf X, \mathbf X\in A_j]=c_m$$ because only one of the terms in this sum is non-zero and that is the region of $\mathbf X$ , say $m$ .
