[site]: crossvalidated
[post_id]: 622800
[parent_id]: 
[tags]: 
Hypothesis test for treatment with opposite signed effects across subgroups

Imagine a treatment that, if it has an effect, is likely to affect two groups in opposite directions. As a concrete example, suppose I am testing the effect of a Republican politician endorsing a policy on a binary measure of support for that policy. The endorsement is likely to increase support among Republicans and decrease support among Democrats. The primary hypothesis I want to test is whether "treatment" (the endorsement) has any effect (on either group). Let $N$ be the total sample size and assume half are Republicans. $Y \in \{0, 1\}$ is a binary outcome with $Y = 1$ indicating support for the policy. Here are some approaches I'm considering: Test the effect of the endorsement on Republicans and Democrats separately (not a joint test). An estimator of the treatment effect in each group is the difference in means (proportions): $\tau_k = \bar{Y}_{kT} - \bar{Y}_{kC}$ , where $T$ and $C$ denote the treatment and control groups, respectively, and $k \in \{Rep, Dem\}$ . An estimator for the variance of $\tau_k$ is: $$V_k = \frac{s_{kT}^2}{n_{kT}} + \frac{s_{kC}^2}{n_{kC}}$$ where $n_{kT}$ and $n_{kC}$ are the number of treated and control observations in group $k$ . In a large sample, the t-stat will be approximately normal. This approach feels straightforward, but I suspect it has lower power than alternatives if the hypothesis is whether treatment has any effect because it uses only half the data for each test. Do a Wald test where the test statistic is: $$\sum_k \frac{\tau_k^2}{V_k}$$ This should have a chi-squared distribution with 2 degrees of freedom. Most of the online material I've found on joint hypothesis testing and Wald tests is for linear regression parameters, but is my approach valid? (I think I need to assume the $\tau_k$ are normally distributed, right?) Adopt a Fisher-style sharp null of no effect and use randomization inference to calculate the distribution of a suitable test statistic under this null (draw a 1,000 new treatment assignments with the same number of treatment and control units within each subgroup and re-calculate a test statistic, then compare with the actual statistic). I'm guessing a reasonable test statistic is: $$\sum_k \tau_k^2$$ Or should I weight the subgroup effects by the inverse of the variances as in approach #2? Run a (saturated) linear regression of the outcome on a treatment indicator, a group indicator, and their interaction. Then run an F-test on the treatment terms. This feels similar to approach #2, although pages 95â€“97 of Athey & Imbens (2017) suggest they are not identical. It's unclear to me if this is more or less powerful than approach #2. Run a logistic regression because the outcome is binary on a treatment indicator, a group indicator, and their interaction. Then run a likelihood ratio test on the treatment-related coefficients. Do the logistic regression, but calculate average marginal effects effects for each group (Democrats and Republicans) and then run a joint hypothesis test on those following the math in approach #2. Are all of these valid? Is there any guidance on which might have better power and when?
