[site]: stackoverflow
[post_id]: 1791045
[parent_id]: 1790880
[tags]: 
I'm not familiar with zend and only somewhat familiar with mootools so take this with a larger-than-average grain of salt. Wouldn't it be easier to have a process that generates/minifies all the possible combinations of the classes you have and then just request a particular combination? You could automate this with a script pretty easily. Also, I've used the HyperCache and WP_Minify plugins for wordpress and they do pretty much everything you are talking about so you might want to look there for inspiration.
