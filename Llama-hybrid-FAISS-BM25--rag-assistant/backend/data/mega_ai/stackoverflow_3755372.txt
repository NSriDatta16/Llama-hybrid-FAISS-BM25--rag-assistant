[site]: stackoverflow
[post_id]: 3755372
[parent_id]: 3755208
[tags]: 
Your algorithm will not be much more accurate unless you can use some statistical methods. First of all, 10 is probably not sufficient. The first and simplest change would be to gather 100 transit time samples and toss out the x longest and shortest. Another thing to add would be that both clients send their own timestamp in each packet. Then you can also calculate how different their clocks are and check the average difference between the clocks. You can also check up on STNP and NTP implementations specifically, as these protocols do this specifically.
