[site]: stackoverflow
[post_id]: 5626571
[parent_id]: 
[tags]: 
Javascript does not work upon AJAX call

I have a page which does an AJAX call and loads an entire page. The page that gets loaded has some Javascript. The javascript works on page by itself when loaded, but when its gets loaded by AJAX, the Javascript does not work. I dont know what I am missing. The code of the loaded page function showfield(name){ if(name=='lstbox')document.getElementById('div1').style.display="block"; else document.getElementById('div1').style.display="none"; } function hidefield() { document.getElementById('div1').style.display='none'; } Please enter a name for the App Choose a Label Choose an element Select Text Box List Box Check Box Radio Button Enter Listbox options: The code of the loading(AJAX) page is The ajax.js code function createXHR() { var request = false; try { request = new ActiveXObject('Msxml2.XMLHTTP'); } catch (err2) { try { request = new ActiveXObject('Microsoft.XMLHTTP'); } catch (err3) { try { request = new XMLHttpRequest(); } catch (err1) { request = false; } } } return request; } The responseHTML.js code function getBody(content) { test = content.toLowerCase(); // to eliminate case sensitivity var x = test.indexOf(" ", x); if(x == -1) return ""; var y = test.lastIndexOf(" "); if(y == -1) y = test.lastIndexOf(" "); if(y == -1) y = content.length; // If no HTML then just grab everything till end return content.slice(x + 1, y); } /** Loads a HTML page Put the content of the body tag into the current page. Arguments: url of the other HTML page to load id of the tag that has to hold the content */ function loadHTML(url, fun, storage, param) { var xhr = createXHR(); xhr.onreadystatechange=function() { if(xhr.readyState == 4) { //if(xhr.status == 200) { storage.innerHTML = getBody(xhr.responseText); fun(storage, param); } } }; xhr.open("GET", url , true); xhr.send(null); } /** Callback Assign directly a tag */ function processHTML(temp, target) { target.innerHTML = temp.innerHTML; } function loadWholePage(url) { var y = document.getElementById("storage"); var x = document.getElementById("displayed"); loadHTML(url, processHTML, x, y); } /** Create responseHTML for acces by DOM's methods */ function processByDOM(responseHTML, target) { target.innerHTML = "Extracted by id: "; // does not work with Chrome/Safari //var message = responseHTML.getElementsByTagName("div").namedItem("two").innerHTML; var message = responseHTML.getElementsByTagName("div").item(1).innerHTML; target.innerHTML += message; target.innerHTML += " Extracted by name: "; message = responseHTML.getElementsByTagName("form").item(0); target.innerHTML += message.dyn.value; } function accessByDOM(url) { //var responseHTML = document.createElement("body"); // Bad for opera var responseHTML = document.getElementById("storage"); var y = document.getElementById("displayed"); loadHTML(url, processByDOM, responseHTML, y); }
