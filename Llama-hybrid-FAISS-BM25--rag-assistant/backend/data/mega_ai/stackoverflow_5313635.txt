[site]: stackoverflow
[post_id]: 5313635
[parent_id]: 
[tags]: 
Set request headers for a Ext.data.Store proxy in SenchaTouch

I have a data Store that gets it's information from a JSON api on my server. When I run the code in WebKit/Chrome everything appears to work fine, but if I change my user-agent to iPhone 4.1, etc it appears that the JSON requests aren't getting set properly. Instead of sending a request to get JSON it simply sends the request and gets the HTML rendered page instead. This is the Store that I have defined: Product.ProductStore = new Ext.data.Store({ model: 'Product', proxy: { type: 'ajax', url: '/admin/products.json', reader: { type: 'json', root: 'products' } }, autoLoad: true, storeId: 'productStore', getGroupString: function(record){ return record.get('vendor')[0]; } }); So what I really want to have this store do is send a request to /admin/products.json, which works as expected on the desktop. But when I run this in my Simulator or even on a Device it appears to be just sending the request to /admin/products which returns the HTML instead. Some people have suggested that this is a rails server issue and I need to set the content type for my request. The problem is how do I exactly do this? I've tried the following, and it doesn't appear to work either: Product.ProductStore = new Ext.data.Store({ model: 'Product', proxy: { type: 'ajax', url: '/admin/products.json', // Trying to set the headers for the request -- not working headers: { 'Content-Type': 'application/json' }, reader: { type: 'json', root: 'products' } }, autoLoad: true, storeId: 'productStore', getGroupString: function(record){ return record.get('vendor')[0]; } }); Could I simply replace the AJAX request with my own that has the content-type headers set properly? If so, are there some examples which use a store and it's own custom AJAX request?
