[site]: stackoverflow
[post_id]: 2932171
[parent_id]: 
[tags]: 
Codeigniter Smiley Helper JS error

Want to use the codeigniters smiley pack . I am creating the messaging window with this code in controller I use the code from Documentation $this->load->helper('smiley'); $this->load->library('table'); $image_array = get_clickable_smileys('/files/smileys/', 'fieldMessage'); $col_array = $this->table->make_columns($image_array, 8); $data['smiley_table'] = $this->table->generate($col_array); And the View is GET USER NAME HERE | Private Messages --> tinyMCE.init({ theme : "advanced", mode : "exact", elements: 'fieldMessage', language : 'en', plugins : "safari,lengthcounter", lengthCounterElementId : 'fm_len', lengthCounterMax : '1000', submitFormName : 'messageForm', object_resizing : false, force_p_newlines : true, convert_fonts_to_spans : false, entities : '160,nbsp', verify_html : true, valid_elements : 'strong/b[class|style],-em/-i[class|style],-strike[class|style],-u[class|style],-p[id|style|class|align],br,img[src|border|alt=|title|hspace|vspace|width|height|align],-div[id|class|align|style],-span[style|class|align|color],-pre,-font[face|size|style|id|class|color],-li[class|style],-ol[class|style],-ul[class|style]', invalid_elements : "a", icons : "icons-x", // Theme options theme_advanced_buttons1 : "fontselect,fontsizeselect,cut,copy,paste", theme_advanced_buttons2 : "bold,italic,underline,strikethrough,|,forecolor,backcolor,|,justifyleft,justifycenter,justifyright,|,undo,redo" , theme_advanced_buttons3 : "", theme_advanced_buttons4 : "", theme_advanced_toolbar_location : "top", theme_advanced_toolbar_align : "left", theme_advanced_statusbar_location : "none", theme_advanced_resizing : false, theme_advanced_fonts : "Arial=arial,helvetica,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,times new roman,times,serif;Tahoma=tahoma,arial,helvetica,sans-serif;Times New Roman=times new roman,times,serif;Verdana=verdana,arial,helvetica,sans-serif;Impact=impact,chicago;Wingdings=wingdings,zapf dingbats", theme_advanced_font_sizes : "1,2,3,4" }); profile_model->user_mail_icon($stacox_id);?> profile_model->isOnlineOnlyPic($stacox_id);?> profile_model->get_user_link($stacox_id);?> Автообновление Звуковой сигнал --> Refresh &nbsp; |&nbsp; Close Some Ad Link Here " name="perepiska"> " type="hidden"> " type="hidden"> Characters Left &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; function sendMessage(){ tinyMCE.triggerSave(); var message=$("#fieldMessage").val(); var stacox_id=$('#stacox_id').val(); var token=$('#token').val(); $.ajax({ type: "POST", url: "/messages/send_it/", data: "message="+ message +"&stacox_id="+ stacox_id +"&token="+token, success: function(data){ //location.reload(true); $("#fieldMessage").val(''); tinyMCE.getInstanceById('fieldMessage').getBody().innerHTML=' '; window.frames["perepiska"].location.reload(); } }); } and I get on click this error uncaught exception: [Exception... "Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIDOMNSHTMLTextAreaElement.selectionStart]" nsresult: "0x80004005 (NS_ERROR_FAILURE)" location: "JS frame :: http://madrasti.com/messages/send/870 :: insert_smiley :: line 136" data: no] Any Idea how to make the click work. While with drag and drop i can put smiles inside the text
