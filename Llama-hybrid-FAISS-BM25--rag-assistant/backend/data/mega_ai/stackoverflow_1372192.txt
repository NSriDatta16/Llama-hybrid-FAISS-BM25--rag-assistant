[site]: stackoverflow
[post_id]: 1372192
[parent_id]: 1371460
[tags]: 
There is a lot of lesson to learn handcrafting state machines in C, but let me also suggest Ragel state machine compiler: http://www.complang.org/ragel/ It has quite simple way of defining state machines and then you can generate graphs, generate code in different styles (table-driven, goto-driven), analyze that code if you want to, etc. And it's powerful, can be used in production code for various protocols.
