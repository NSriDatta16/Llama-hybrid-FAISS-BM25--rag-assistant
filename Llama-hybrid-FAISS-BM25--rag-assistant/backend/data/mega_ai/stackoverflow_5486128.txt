[site]: stackoverflow
[post_id]: 5486128
[parent_id]: 721918
[tags]: 
I realise this question is long since answered, but if you want to do it without dipping into the "com.sun" hierarchy, here's an quick and very ugly example as I couldn't find this documented anywhere else. BufferedImage img = new BufferedImage(300, 300, BufferedImage.TYPE_INT_ARGB); // Create a DOM Document describing the metadata; // I've gone the quick and dirty route. The description for PNG is at // [http://download.oracle.com/javase/1.4.2/docs/api/javax/imageio/metadata/doc-files/png_metadata.html][1] Calendar c = Calendar.getInstance(); String xml = " "; DOMResult domresult = new DOMResult(); TransformerFactory.newInstance().newTransformer().transform(new StreamSource(new StringReader(xml)), domresult); Document document = dom.getResult(); // Apply the metadata to the image ImageWriter writer = (ImageWriter)ImageIO.getImageWritersBySuffix("png").next(); IIOMetadata meta = writer.getDefaultImageMetadata(new ImageTypeSpecifier(img), null); meta.setFromTree(meta.getMetadataFormatNames()[0], document.getFirstChild()); FileOutputStream out = new FileOutputStream("out.png"); writer.setOutput(ImageIO.createImageOutputStream(out)); writer.write(new IIOImage(img, null, meta)); out.close();
