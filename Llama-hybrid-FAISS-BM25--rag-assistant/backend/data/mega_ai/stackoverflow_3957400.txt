[site]: stackoverflow
[post_id]: 3957400
[parent_id]: 3957360
[tags]: 
Use the DOM classes to generate your whole XML document. It will handle encodings and decodings that we don't even want to care about. Edit: This was criticized by @Tchalvak: The DOM object creates a full XML document, it doesn't easily lend itself to just encoding a string on it's own. Which is wrong, DOMDocument can properly output just a fragment not the whole document: $doc->saveXML($fragment); which gives: Test &amp; and encode :) Test &amp;amp; &lt;b&gt; and encode &lt;/b&gt; :) as in: $doc = new DOMDocument(); $fragment = $doc->createDocumentFragment(); // adding XML verbatim: $xml = "Test &amp; and encode :)\n"; $fragment->appendXML($xml); // adding text: $text = $xml; $fragment->appendChild($doc->createTextNode($text)); // output the result echo $doc->saveXML($fragment); See Demo
