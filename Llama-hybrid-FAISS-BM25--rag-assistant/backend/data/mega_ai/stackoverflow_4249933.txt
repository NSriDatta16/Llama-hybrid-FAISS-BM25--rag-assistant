[site]: stackoverflow
[post_id]: 4249933
[parent_id]: 4172860
[tags]: 
Sounds like a bug. But just for posterity, here are a few things you might want to debug. allow_url_fopen : already tested PHP under Apache might behave differently than PHP-CLI, and would hint at chroot/selinux/fastcgi/etc. security restrictions local firewall: unlikely since curl works user-agent blocking: this is quite common actually, websites block crawlers and unknown clients transparent proxy from your ISP, which either mangles or blocks (PHP user-agent or non-user-agent could be interpreted as malware) PHP stream wrapper problems Anyway, first let's proof that PHPs stream handlers are functional: Then try to see if PHP makes real HTTP requests at all. First open netcat on the console: nc -l 80000 And debug with just: And from here you can try to communicate with PHP, see if anything returns if you variate the response. Enter an invalid response first into netcat. If there's no error thrown, your PHP package is borked. (You might also try communicating over a "tcp://.." handle then.) Next up is experimenting with http stream wrapper parameters. Use http://example.com/ literally, which is known to work and never block user-agents. $context = stream_context_create(array("http"=>array( "method" => "GET", "header" => "Accept: xml/*, text/*, */*\r\n", "ignore_errors" => false, "timeout" => 50, )); print file_get_contents("http://www.example.com/", false, $context, 0, 1000); I think ignore_errors is very relevant here. But check out http://www.php.net/manual/en/context.http.php and specifically try to set protocol_version to 1.1 (will get chunked and misinterpreted response, but at least we'll see if anything returns). If even this remains unsuccessful, then try to hack the http wrapper. This will not only set the User-Agent, but inject extra headers. If there is a processing issue with construction the request within the http stream wrapper, then this could very eventually catch it. Otherwise try to disable any Zend extensions, Suhosin , PHP xdebug, APC and other core modules. There could be interferences. Else this is potentiallyan issue specific to the Fedora package. Try a new version, see if it persists on your system.
