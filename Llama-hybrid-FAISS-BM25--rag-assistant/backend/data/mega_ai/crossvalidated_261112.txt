[site]: crossvalidated
[post_id]: 261112
[parent_id]: 
[tags]: 
What is the best way to estimate the average treatment effect in a longitudinal study?

In a longitudinal study, outcomes $Y_{it}$ of units $i$ are repeatedly measuret at time points $t$ with a total of $m$ fixed measurement occasions (fixed = measurements on units are taken at the same time). Units are randomly assigned either to a treatment, $G=1$, or to a control group, $G=0$. I want to estimate and test the average effect of treatment, i.e. $$ATE=E(Y | G=1) - E(Y | G=0),$$ where expectations are taken across time and individuals. I consider using a fixed-occasion multilevel (mixed-effects) model for this purpose: $$Y_{it} = \alpha + \beta G_i + u_{0i} + e_{it}$$ with $\alpha$ the intercept, $\beta$ the $ATE$, $u$ a random intercept across units, and $e$ the residual. Now I am considering alternative model $$Y_{it} = \tilde{\beta} G_i + \sum_{j=1}^m \kappa_j d_{ij} + \sum_{j=1}^m \gamma_j d_{ij} G_i + \tilde{u}_{0i} + \tilde{e}_{it}$$ which contains the fixed effects $\kappa_j$ for each occasion $t$ where dummy $d_t=1$ if $j=t$ and $0$ else. In addition this model contains an interaction between treatment and time with parameters $\gamma$. So this model takes into account that the effect of $G$ may differ across time. This is informative in itself, but I believe that it should also increase precision of estimation of the parameters, because the heterogeneity in $Y$ is taken into account. However, in this model the $\tilde{\beta}$ coefficient does not seem to equal the $ATE$ anymore. Instead it represents the ATE at the first occasion ($t=1$). So the estimate of $\tilde{\beta}$ may be more efficient than $\beta$ but it does not represent the $ATE$ anymore. My questions are : What is the best way to estimate the treatment effect in this longitudinal study design? Do I have to use model 1 or is there a way to use (perhaps more efficient) model 2? Is there a way to have $\tilde{\beta}$ have the interpretation of the $ATE$ and $\gamma$ the occasion specific deviation (e.g. using effect coding)?
