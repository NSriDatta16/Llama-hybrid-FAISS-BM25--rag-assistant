[site]: stackoverflow
[post_id]: 4333322
[parent_id]: 
[tags]: 
TFS 2010 built, drop location local not unc share

i have wanted to copy the built files on my release built to a local directory, not to an unc share. So i have written an activity which i wanted to do so: using System.Activities; using System.IO; using System.Linq; using Microsoft.TeamFoundation.Build.Client; namespace CustomBuiltActivities { /// /// This activity helps to copy a directory to another one. Integrated in TeamFoundation built activities are only supporting /// copy to an unc share, so this is a small helper activity we need for copying files to an local directory. /// [BuildActivity(HostEnvironmentOption.Agent)] public sealed class CopyDirectoryLocal : CodeActivity { [RequiredArgument] public InArgument DestinationDirectory { get; set; } [RequiredArgument] public InArgument SourceDirectory { get; set; } protected override void Execute(CodeActivityContext context) { var destination = context.GetValue(DestinationDirectory); var source = context.GetValue(SourceDirectory); CopyRecursive(source, destination); } private static void CopyRecursive(string sourceDirectory, string destinationDirectory) { if (!Directory.Exists(sourceDirectory)) throw new DirectoryNotFoundException(sourceDirectory); try { Directory.CreateDirectory(destinationDirectory); } catch { } Directory.GetDirectories(sourceDirectory).ToList().ForEach( sourceDir => { var dirName = sourceDir.Substring(sourceDir.LastIndexOf("\\")); CopyRecursive(sourceDir, destinationDirectory+"\\"+dirName); }); Directory.GetFiles(sourceDirectory).ToList().ForEach( sourceFile => { var fileName = new FileInfo(sourceFile).Name; File.Copy(sourceFile, string.Concat(destinationDirectory, "\\", fileName)); } ); } } } But this activity fails and let me know that the directory was not found. How to fix it? I need customization by getting seperat folders in from the binaries manually out there. Thx for help, Michael Baarz
