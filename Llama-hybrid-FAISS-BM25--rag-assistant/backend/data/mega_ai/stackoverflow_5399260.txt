[site]: stackoverflow
[post_id]: 5399260
[parent_id]: 
[tags]: 
Incorrect grouping in for-each-group

I have the following XML from which I am trying to generate HTML files. First line text in FIRST fragment Second line text in FIRST fragment Third line text in FIRST fragment First line text in SECOND fragment Second line text in SECOND fragment Third line text in SECOND fragment First line text in THIRD fragment Second line text in THIRD fragment Third line text in THIRD fragment Expected HTML Output: HTML 1: First line text in FIRST fragment Second line text in FIRST fragment Third line text in FIRST fragment HTML 2: First line text in SECOND fragment Second line text in SECOND fragment Third line text in SECOND fragment HTML 3: First line text in THIRD fragment Second line text in THIRD fragment Third line text in THIRD fragment This is the XSLT where I am using for-each-group to group the nodes between "milestone" tags, but the grouping does not occur as expected. Below is the output after of the transform. HTML 1: First line text in FIRST fragment Second line text in FIRST fragment Third line text in FIRST fragment First line text in SECOND fragment Second line text in SECOND fragment Third line text in SECOND fragment First line text in THIRD fragment Second line text in THIRD fragment Third line text in THIRD fragment First line text in FIRST fragment Second line text in FIRST fragment text in FIRST Third line text in FIRST fragment HTML 2: First line text in SECOND fragment Second line text in SECOND fragment text in SECOND Third line text in SECOND fragment HTML 3: First line text in THIRD fragment Second line text in THIRD fragment text in THIRD Third line text in THIRD fragment I am trying to understand why the first current-group()(i.e. first "milestone") is matching the whole document rather than just the nodes between the "milestone" tags.
