[site]: stackoverflow
[post_id]: 4346752
[parent_id]: 
[tags]: 
First database with referential integrity constraints -- suggestions, feedback, errors?

TARGET_RDBMS: MySQL-5.X-InnoDB ("X" equals current stable release) BACKGROUND: Building my first database with true referential integrity constraints, in an effort to get feedback, after creating the "real" DDL, I've made an abstraction that I believe covers the "feel" of the database; this is only 3 tables of about 20, all with referential integrity constraints; only pattern I see that is missing is a composite key table, which does not have data to be dumped in right now anyway, so I'm just focus on the first iteration. Sample Data / Unit Test: One thing I do not know is how to build out a sample data set that will offer 100% coverage of the referential integrity modeled -- AND build "Unit Test" around that sample data and this DDL: Sample DLL: (Note: Just to be clear, the LEGEND and naming standards are JUST for this example, which I've abstracted from the "real" database. The column names are robotic in nature, and meant to make the meaning and relationship of a given instance as clear as possible. If you have suggestions on the notation system used, please feel free to comment. I'm open to any suggestions. Thanks!) CREATE DATABASE sampleDB; use sampleDB; # ############### # LEGEND # - sID = surrogate key # - nID = natural key # - cID = common/shared across tables, but NOT unique/natural-key # - PK = Primary Key # - FK = Foreign Key # - data01 = Sample data (non-key,not-shared-across-tables) # - data02 = Sample data NOT NULL (non-key,not-shared-across-tables) # # - uID = user defined unique/natural key (NOTE: not used) # ############### # Behavior # - create_timestamp (NOT NULL, updated on record creation, NOT update) # - update_timestamp (NOT NULL, updated on record creation AND updates) CREATE TABLE `TABLE_01` ( `TABLE_01_sID_PK` MEDIUMINT NOT NULL AUTO_INCREMENT, `TABLE_01_cID` int(8) NOT NULL, `TABLE_01_data01` varchar(128) default NULL, `TABLE_01_data02` varchar(128) default NULL, `create_timestamp` DATETIME DEFAULT NULL, `update_timestamp` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, PRIMARY KEY (`TABLE_01_sID_PK`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8; CREATE TABLE `TABLE_02` ( `TABLE_02_sID_PK` MEDIUMINT NOT NULL AUTO_INCREMENT, `TABLE_02_nID_FK__TABLE_01_sID_PK` int(8) NOT NULL, `TABLE_02_cID` int(8) NOT NULL, `TABLE_02_data01` varchar(128) default NULL, `TABLE_02_data02` varchar(128) NOT NULL, `create_timestamp` DATETIME DEFAULT NULL, `update_timestamp` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, PRIMARY KEY (`TABLE_02_sID_PK`), FOREIGN KEY (TABLE_02_nID_FK__TABLE_01_sID_PK) REFERENCES TABLE_01(TABLE_01_sID_PK), INDEX `TABLE_02_nID_FK__TABLE_01_sID_PK` (`TABLE_02_nID_FK__TABLE_01_sID_PK`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8; CREATE TABLE `TABLE_03` ( `TABLE_03_sID_PK` MEDIUMINT NOT NULL AUTO_INCREMENT, `TABLE_03_nID_FK__TABLE_01_sID_PK` int(8) NOT NULL, `TABLE_03_nID_FK__TABLE_02_sID_PK` int(8) NOT NULL, `TABLE_03_cID` int(8) NOT NULL, `TABLE_03_data01` varchar(128) default NULL, `TABLE_03_data02` varchar(128) NOT NULL, `create_timestamp` DATETIME DEFAULT NULL, `update_timestamp` TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, PRIMARY KEY (`TABLE_03_sID_PK`), FOREIGN KEY (TABLE_03_nID_FK__TABLE_01_sID_PK) REFERENCES TABLE_01(TABLE_01_sID_PK), FOREIGN KEY (TABLE_03_nID_FK__TABLE_02_sID_PK) REFERENCES TABLE_02(TABLE_02_sID_PK), INDEX `TABLE_03_nID_FK__TABLE_01_sID_PK` (`TABLE_03_nID_FK__TABLE_01_sID_PK`), INDEX `TABLE_03_nID_FK__TABLE_02_sID_PK` (`TABLE_03_nID_FK__TABLE_02_sID_PK`) ) ENGINE=InnoDB DEFAULT CHARSET=utf8; SHOW TABLES; # DROP DATABASE `sampleDB`; # ####################### # View table definition # DESC inserttablename; # ####################### # View table create statement # SHOW CREATE TABLE example; Questions: Any and all feedback on missing, wrong, or "better" ways to do this database build are welcome. If you have questions, just comment -- and I'll respond ASAP. Again, thanks~! UPDATE (1): Just added "MEDIUMINT NOT NULL AUTO_INCREMENT" to the PKs -- not sure how I left that off.
