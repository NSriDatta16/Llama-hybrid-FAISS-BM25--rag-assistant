[site]: stackoverflow
[post_id]: 777871
[parent_id]: 
[tags]: 
wsFederationHttpBinding, passing custom user Identity to STS

I'm trying to implement following scenario: Client passes its cridentials to STS. STS applies custom AuthorizationPolicy to determine set of claims available to particular user and issues a secure token. Client passes the token to business services which determine user's priveleges basing on the set of claims they got from the token. Looks like the first step is the main problem. As MSDN suggests message element of wsFederationHttpBinding doesn't have clientCredentialsType. As a result, whenever my AuthorizationPolicy examines evaluationContext.Properties["Identities"] it sees WindowsIdentity in it. I'd like to authenticate user against custom storage (DB). Is there any way to accomplish it with wsFederationHttpBinding?
