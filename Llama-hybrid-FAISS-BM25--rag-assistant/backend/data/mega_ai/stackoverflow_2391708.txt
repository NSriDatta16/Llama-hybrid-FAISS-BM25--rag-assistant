[site]: stackoverflow
[post_id]: 2391708
[parent_id]: 2391214
[tags]: 
I think Turnkey is correct. It may be because you are closing the curl handle with the curl_close in between calls during the session. It should only be closed after the session usage is completed. You must not open two different curl session. Try doing everything in one session then close the session. Try adding curl_close() in class's destructor. Store curl session in a variable. And access it using $this->curl_session. Here is an example curl_session = curl_init(); } function __destruct() { if($this->curl_session) { curl_close($this->curl_session); } } function doWhatever() { curl_setopt( $this->curl_session, CURLOPT_COOKIEJAR, $this->cj ); curl_setopt( $this->curl_session, CURLOPT_COOKIEFILE, $this->cj ); curl_setopt( $this->curl_session, CURLOPT_URL, $url ); curl_setopt( $this->curl_session, CURLOPT_RETURNTRANSFER, true ); curl_setopt( $this->curl_session, CURLOPT_FOLLOWLOCATION, true ); curl_setopt( $this->curl_session, CURLOPT_HEADER, true ); curl_setopt( $this->curl_session, CURLOPT_USERAGENT, 'Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0)' ); $return = curl_exec($this->curl_session); } } ?>
