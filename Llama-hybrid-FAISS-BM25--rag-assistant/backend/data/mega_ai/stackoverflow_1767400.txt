[site]: stackoverflow
[post_id]: 1767400
[parent_id]: 
[tags]: 
AVAudioPlayer - Metering - Want to build a waveform (graph)

I need to build a visual graph that represents voice levels (dB) in a recorded file. I tried to do it this way: NSError *error = nil; AVAudioPlayer *meterPlayer = [[AVAudioPlayer alloc]initWithContentsOfURL:[NSURL fileURLWithPath:self.recording.fileName] error:&error]; if (error) { _lcl_logger(lcl_cEditRecording, lcl_vError, @"Cannot initialize AVAudioPlayer with file %@ due to: %@ (%@)", self.recording.fileName, error, error.userInfo); } else { [meterPlayer prepareToPlay]; meterPlayer.meteringEnabled = YES; for (NSTimeInterval i = 0; i &lt;= meterPlayer.duration; ++i) { meterPlayer.currentTime = i; [meterPlayer updateMeters]; float averagePower = [meterPlayer averagePowerForChannel:0]; _lcl_logger(lcl_cEditRecording, lcl_vTrace, @"Second: %f, Level: %f dB", i, averagePower); } } [meterPlayer release]; It would be cool if it worked out however it didn't. I always get -160 dB. Any other ideas on how to implement that? UPD : Here is what I got finally: alt text http://img22.imageshack.us/img22/5778/waveform.png
