[site]: stackoverflow
[post_id]: 2684257
[parent_id]: 2684051
[tags]: 
So you want to group by node name. Not the best idea to store more than actual structure information in the XML nodes, but here you go: page1 page2 link1 link2 site1 site2 and this XSLT 2.0 transformation (relevant fragment only): or this XSLT 1.0 transformation (relevant fragment only): Hint: You might want to think about using such an XML instead, this obviously matches your site structure better and you need no grouping to output it correctly. page1 page2 link1 link2 site1 site2
