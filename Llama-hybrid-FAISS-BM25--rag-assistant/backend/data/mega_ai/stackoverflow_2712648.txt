[site]: stackoverflow
[post_id]: 2712648
[parent_id]: 2712392
[tags]: 
You should do several things: First you should split the display code from program logic. You really should use a template engine like smarty In the second step you should move your database code to a separate class. With this separation you get much clean and better to read source. Now you can react on you different business cases better. Use the called PHP file as Controller which acts as broker between data retrieval and output.
