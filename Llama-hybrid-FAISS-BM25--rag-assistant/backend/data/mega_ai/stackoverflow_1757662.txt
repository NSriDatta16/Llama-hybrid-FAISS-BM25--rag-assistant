[site]: stackoverflow
[post_id]: 1757662
[parent_id]: 1757360
[tags]: 
Try something like this instead: cj = @session[COOKIE_JAR] agent.cookie_jar = YAML.load(cj) unless cj.nil? You may have defeated some rails meta-programming magic by not insisting that it give you an actual string. Sessions are Hash-like objects but not really a Hash. Update: looking at API docs with source, it's not metaprogramming but just plain logic: # File actionpack/lib/action_controller/session/abstract_store.rb, line 27 27: def [](key) 28: load! unless @loaded 29: super 30: end SessionHash is derived from Hash but only a few methods get the lazy load wrapper, and has_key? is not one of them.
