[site]: crossvalidated
[post_id]: 259343
[parent_id]: 
[tags]: 
Squared Prediction Error and PCA derivation

I've been looking at the Squared Prediction Error for PCA. It is defined as follows: $$Q = rr^\text{T}$$ Where $$r = x(I- PP^\text{T})$$ Now it is claimed that $$Q = x(I- PP^\text{T})x^\text{T}$$ But I cannot see how? My reasoning is as follows: $$Q = rr^\text{T} \\ = x(I- PP^\text{T}) (x(I- PP^\text{T}))^\text{T} \\ = x(I- PP^\text{T})(I- PP^\text{T})^\text{T} x^\text{T}$$ Now $(A+B)^\text{T} = A^\text{T} + B^\text{T}$ and $(AB)^\text{T} = B^\text{T}A^\text{T} $, hence $$(I- PP^\text{T})^\text{T}\\ = I^\text{T}- (PP^\text{T})^\text{T} \\ = I^\text{T}- PP^\text{T} \\$$ Therefore we find that $$Q = x(I- PP^\text{T})(I- PP^\text{T})x^\text{T}$$ Now clearly this is not equal to $$Q = x(I- PP^\text{T})x^\text{T}$$ unless some further assumptions are invoked? For example $(I- PP^\text{T})(I- PP^\text{T})$ can be expanded to give $$(I- PP^\text{T})(I- PP^\text{T}) \\ = II -2PP^\text{T} +PP^\text{T}PP^\text{T} \\ = I -2PP^\text{T} +PP^\text{T}PP^\text{T} \\ $$ If $P^\text{T}P = I$ then this would reduce to $I - PP^\text{T}$. But if $P^\text{T}P = I$ then surely $PP^\text{T} = I$ in which case $$Q = x(I- PP^\text{T})x^\text{T} = 0 \:\: \forall \:\: x$$ And hence $PP^\text{T} \neq I$, $P^\text{T}P \neq I$ and $Q \neq x(I- PP^\text{T})x^\text{T}$. Am I missing something?
