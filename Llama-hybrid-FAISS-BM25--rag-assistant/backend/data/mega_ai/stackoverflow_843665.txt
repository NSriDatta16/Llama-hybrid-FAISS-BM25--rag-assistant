[site]: stackoverflow
[post_id]: 843665
[parent_id]: 843542
[tags]: 
You say you are dealing with HTML. You are now realizing that this is pretty much a losing battle with fleeting and fragile solutions. A proper HTML parser would be make your life easier. HTML::Parser can be hard to use but there are other very useful libraries on CPAN which I can recommend if you can specify what you are trying to do rather than how .
