[site]: stackoverflow
[post_id]: 3739678
[parent_id]: 3739458
[tags]: 
So with a weighted average, you need to look at the special case where both are zero. In that case you want to treat it as 0.5 * w1 + 0.5 * w2, right? How about this? float calcWeightedAverage(float v1,float v2,float w1,float w2) { v1=fabs(v1); v2=fabs(v2); if (v1 == v2) { v1 = 0.5; } else { v1 = v1 / (v1 + v2); // v1 is between 0 and 1 } v2 = 1 - v1; // avoid addition and division because they should add to 1 return v1 * w1 + v2 * w2; }
