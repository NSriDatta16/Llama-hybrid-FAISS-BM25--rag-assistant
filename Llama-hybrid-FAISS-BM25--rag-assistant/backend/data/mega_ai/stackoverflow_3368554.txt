[site]: stackoverflow
[post_id]: 3368554
[parent_id]: 3368447
[tags]: 
The answer is easy: string being encoded always . As it's stated in the HTTP standard. And what is firefox displays - it doesn't matter. Also, as PHP decode query string automatically, no decoding required either. Note that '%D2%F0%E0%EB%E8%E2%E0%EB%E8' is single-byte encoding, so, you have your page probably in 1251. At least HTTP header says that to the browser. While AJAX always use utf-8. So, you have just to either use single encoding (utf-8) for your pages, or distinguish ajax calls from regular ones. As for the fragment - do not use a fragment value to send it to the server. Have a JS variable, and then use it twice - to set a fragment and to send to the server using JSON.
