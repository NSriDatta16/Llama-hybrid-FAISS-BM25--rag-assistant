[site]: stackoverflow
[post_id]: 2696333
[parent_id]: 2694376
[tags]: 
The Google Analytics JS code doesn't talk directly to the server - it adds an image to the page, and appends all the info to send back as URL parameters on the image - check out a page with Google Analytics running with the Firebug Net panel running and you'll see what's happening. So the JS code doesn't need to work out the IP - that's going to come through to the GA recording servers as part of the image request. The best official description of what happens is in the Google BigTable paper - there's a few paragraphs which give a sort of hint as to what happens behind the scenes. It might also be worth following this Stack Overflow question on structuring the database which records & reports on the activity. regards
