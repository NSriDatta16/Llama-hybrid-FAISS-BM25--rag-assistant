[site]: stackoverflow
[post_id]: 2588948
[parent_id]: 2588882
[tags]: 
I believe looking for word boundaries would do the trick here (or, a lack thereof, apparently - which seems rather counterintuitive to me). \B#[^,#=!\s]+ doesn't match anything on the third or fourth line. However, it DOES match the #foo in #foo=bar, and everything else covered by the $ signs in your example. EDIT: After a little fiddling around, \B#[^,#=!\s]+[\s,] will match everything on the first and second lines. Nothing is matched on lines 3-5, and on line 6, everything except #foo,bar is matched in full (#foo,bar only has a match on the part before the comma. You'll likely want a capturing group to leave out the whitespace or comma at the end, so that'd be \B(#[^,#=!\s]+)[\s,] . (If you really want all of the tags on line 6 to be matched in full, remove the comma from the first of the character classes.) Note that you might need something more in there for perfect coverage, but this at least meets your current test cases.
