[site]: crossvalidated
[post_id]: 531936
[parent_id]: 
[tags]: 
Variance of difference in mean estimator for Average Treatment Effects

Consider $n$ Patients each of whom is treated with probability $p$ and given control with $1-p$ independent of everything else. Let $W_i$ be $1$ if the patient $i$ is treated and $0$ otherwise. Let $Y_i$ be the response observed from patient $i$ . We make the standard assumption of SUTVA, ie. $Y_i$ only depends on if the patient was treated or not, $Y_i = Y_i(W_i)$ . We also assume that $W_i$ is independent of $\{Y_i(0), Y_i(1)\}$ . And that $\{Y_i(0), Y_i(1)\}_{i=1}^n$ are iid across all patients. Define $n_1 = \sum_{i=1}^n W_i$ , and $n_0 =n - n_1$ . We define the difference of means estimator as $$ \tau_{DM} = \frac{1}{n_1} \sum_{i=1}^n W_iY_i - \frac{1}{n_0} \sum_{i=1}^n (1-W_i)Y_i$$ It is easy to see using tower law of expectations that $$\mathbb{E} [\tau_{DM} ]= \mathbb{E} [Y(1)] - \mathbb{E} [Y(0)]$$ Similarly using law of total variance gives me that, $$\text{Var} [\tau_{DM} ]= \frac{p}{n} \text{Var} [Y(1) ] + \frac{1-p}{n} \text{Var} [Y(0) ] + \frac{p(1-p)}{n} \left( \mathbb{E} [Y(1)] - \mathbb{E} [Y(0)]\right)^2$$ However, these lecture notes (page 3, eq 1.4) say that, $$\text{Var} [\tau_{DM} ]= \frac{1}{n_1} \text{Var} [Y(1) ] + \frac{1}{n_0} \text{Var} [Y(0) ] $$ Is there something I am missing here?
