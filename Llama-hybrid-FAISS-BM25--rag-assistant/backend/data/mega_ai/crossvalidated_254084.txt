[site]: crossvalidated
[post_id]: 254084
[parent_id]: 253880
[tags]: 
I understand your concern as the scientific literature on propensity scores and blocking is difficult to search given that blocking is typically used after propensity score estimation. You basically ask instead if blocking before estimating the propensity scores (and using them) is reasonable and valid. In general terms yes, even if you could end up loosing statistical precision and increasing confidence intervals. In your specific case, I am not sure you really need to do it, but I don't think it would harm your analysis, unless your sample is very small (which I guess is quite unlikely). The most appropriate scenario in which to enforce pre-emptive blocking would be however a different one. For instance, imagine you want to compare the impact of coronary revascularization after finding myocardial ischemia at myocardial perfusion imaging (MPI) (e.g. Nudi et al, J Nucl Cardiol 2016 ). The typical approach would be just to conduct a propensity matched analysis on the whole dataset, possibly after missing data imputation. The issue here is that many people (say 60%) undergo MPI after exercise stress, which generates many important covariates for propensity score estimation, such as maximum workload, whereas other patients cannot exercise, and undergo pharmacologic stress, which does not yield such data. In a similar scenario, simply imputing missing data would be clinically wrong, and statistically risky. Instead, the correct approach is definitely separate estimation of propensity scores and matching in each block (exercise stress, pharmacologic stress), followed by computing average treatment effects (and the homogeneity between the two blocks as well).
