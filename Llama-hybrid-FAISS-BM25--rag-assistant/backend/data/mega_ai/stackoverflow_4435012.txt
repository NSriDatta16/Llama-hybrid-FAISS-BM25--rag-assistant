[site]: stackoverflow
[post_id]: 4435012
[parent_id]: 4434501
[tags]: 
Putting into a DomDocumentFragment doesn't actually change it into it changes it into A-DOM-Element-Node-with-name-"div"-and-no-content. It's only when the DomDocumentFragment is serialized that either or is created. In other words, the problem lies not with the DomDocumentFragment, but with the serialization process that you are using. PHP is not my language, so I can't be much more help, but I would be looking for an HTML-compatible serializer for your DomDocumentFragment, rather than try to patch the output after serialization.
