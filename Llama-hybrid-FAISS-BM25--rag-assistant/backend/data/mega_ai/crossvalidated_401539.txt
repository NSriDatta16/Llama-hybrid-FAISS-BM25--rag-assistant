[site]: crossvalidated
[post_id]: 401539
[parent_id]: 401480
[tags]: 
Problem statement $\mathbf{M_t}$ : the amount of money $M_t$ the gambler has at time $t$ $\mathbf{Y_t}$ : Let $Y_t = \log_{10}(M_t)$ be the logarithm of $M_t$ . $\mathbf{Y_0}$ : Let $Y_0 = 1$ be the amount of money that the gambler starts with (ten dollars). $\mathbf{Y_L}$ : Let $Y_L=-2$ be the amount of money where the gambler goes bankrupt (below 1 cent). $\mathbf{Y_W}$ : For simplicity we add a rule that the gambler stops gambling when he has passed some amount of money $Y_W$ (we can later lift this rule by taking the limit $Y_W \to \infty$ ). $\mathbf{q}$ : Let $q$ be the fraction of money that the gambler is betting. $\mathbf{b}$ : Let $b$ be the ratio of payout for a win and a loss. In this case, a win is twice the gamble $q$ and a loss is once the gamble $q$ , so $b = 2$ . $\mathbf{X_i}$ : The change of the logarithm of the amount of money in the $i$ -th gamble. $X_i = Y_t-Y_{t-1}$ $\mathbf{a_w}$ : $X$ for a win. $\mathbf{a_l}$ : $X$ for a loss. Random walk You can see the growth and decline of the money as an asymmetric random walk. That is you can describe $Y_t$ as: $$Y_t = Y_0 + \sum_{i=1}^t X_i$$ where $$\mathbb{P}[X_i= a_w =\log(1+2q)] = \mathbb{P}[X_i= a_l =\log(1-q)] = \frac{1}{2}$$ Probability of bankruptcy Martingale The expression $$Z_t = c^{Y_t}$$ is a martingale when we choose $c$ such that. $$c^{a_w}+ c^{a_l} = 2$$ (where $c if $q ). Since in that case $$E[Z_{t+1}] = E[Z_t] \frac{1}{2} c^{a_w} + E[Z_t] \frac{1}{2} c^{a_l} = E[Z_t]$$ Probability to end up bankrupt The stopping time (losing/bankruptcy $Y_t or winning $Y_t>Y_W$ ) is almost surely finite since it requires in the worst case a winning streak (or losing streak) of a certain finite length, $\frac{Y_W-Y_L}{a_w}$ , which is almost surely gonna happen. Then, we can use the optional stopping theorem to say $E[Z_\tau]$ at the stopping time $\tau$ equals the expected value $E[Z_0]$ at time zero. Thus $$c^{Y_0} = E[Z_0] = E[Z_\tau] \approx \mathbb{P}[Y_\tau and $$ \mathbb{P}[Y_\tau and the limit $Y_W \to \infty$ $$ \mathbb{P}[Y_\tau Conclusions Is there an optimal percentage of your cash you can offer without losing it all? Whichever is the optimal percentage will depend on how you value different profits. However, we can say something about the probability to lose it all. Only when the gambler is betting zero fraction of his money then he will certainly not go bankrupt. With increasing $q$ the probability to go bankrupt will increase up to some point where the gambler will almost surely go bankrupt within a finite time (the gambler's ruin mentioned by Robert Long in the comments). This point, $q_{\text{gambler's ruin}}$ , is at $$q_{\text{gambler's ruin}} = 1-1/b$$ This is the point where there is no solution for $c$ below one. This is also the point where the increasing steps $a_w$ are smaller than the decreasing steps $a_l$ . Thus, for $b=2$ , as long as the gambler bets less than half the money then the gambler will not certainly go bankrupt. do the odds of losing all your money decrease or increase over time? The probability to go bankrupt is dependent on the distance from the amount of money where the gambler goes bankrupt. When $q the gambler's money will, on average increase, and the probability to go bankrupt will, on average, decrease. Bankruptcy probability when using the Kelly criterion. When you use the Kelly criterion mentioned in Dave Harris answer, $q = 0.5(1-1/b)$ , for $b$ being the ratio between loss and profit in a single bet, then independent from $b$ the value of $c$ will be equal to $0.1$ and the probability to go bankrupt will be $0.1^{Y_0-Y_L}$ .... Derivation: if $c=0.1$ , with $a_w = \log_{10}(1+bq)$ and $a_l = \log_{10}(1-q)$ , then $$c^{a_w}+c^{a_l} = 0.1^{\log(1+bq)}+0.1^{\log(1-q)} = \frac{1}{1+bq} + \frac{1}{1-q} $$ which equals 2 when we fill in $q=0.5\frac{b-1}{b}$ . ...That is, independent from the assymetry parameter $b$ of the magic tree, the probability to go bankrupt, when using the Kelly criterion, is equal to the ratio of the amount of money where the gambler goes bankrupt and the amount of money that the gambler starts with. For ten dollars and 1 cent this is a 1:1000 probability to go bankrupt, when using the Kelly criterion. Simulations The simulations below show different simulated trajectories for different gambling strategies. The red trajectories are ones that ended up bankrupt (hit the line $Y_t=-2$ ). Distribution of profits after time $t$ To further illustrate the possible outcomes of gambling with the money tree, you can model the distribution of $Y_t$ as a one dimensional diffusion process in a homogeneous force field and with an absorbing boundary (where the gambler get's bankrupt). The solution for this situation has been given by Smoluchowski Smoluchowski, Marian V. "Über Brownsche Molekularbewegung unter Einwirkung äußerer Kräfte und deren Zusammenhang mit der verallgemeinerten Diffusionsgleichung." Annalen der Physik 353.24 (1916): 1103-1112. (online available via: https://www.physik.uni-augsburg.de/theo1/hanggi/History/BM-History.html ) Equation 8: $$ W(x_0,x,t) = \frac{e^{-\frac{c(x-x_0)}{2D} - \frac{c^2 t}{4D}}}{2 \sqrt{\pi D t}} \left[ e^{-\frac{(x-x_0)^2}{4Dt}} - e^{-\frac{(x+x_0)^2}{4Dt}} \right]$$ This diffusion equation relates to the tree problem when we set the speed $c$ equal to the expected increase $E[Y_t]$ , we set $D$ equal to the variance of the change in a single steps $\text{Var}(X_t)$ , $x_0$ is the initial amount of money, and $t$ is the number of steps. The image and code below demonstrate the equation: The histogram shows the result from a simulation. The dotted line shows a model when we use a naive normal distribution to approximate the distribution (this corresponds to the absence of the absorbing 'bankruptcy' barrier). This is wrong because some of the results above the bankruptcy level involve trajectories that have passed the bankruptcy level at an earlier time. The continuous line is the approximation using the formula by Smoluchowski. Codes # ## Simulations of random walks and bankruptcy: # # functions to compute c cx = function(c,x) { c^log(1-x,10)+c^log(1+2*x,10) - 2 } findc = function(x) { r Y_t))) if (tau 0], breaks = seq(0,round(2+max(pays)),binsize), col=rgb(0,0,0,0.5), ylim=c(0,1200), xlab = "log(result)", ylab = "counts", main = "") title(paste0("after ", n ," steps"),line = 0) # regular diffusion in a force field (shifted normal distribution) x
