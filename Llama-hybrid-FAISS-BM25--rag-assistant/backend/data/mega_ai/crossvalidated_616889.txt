[site]: crossvalidated
[post_id]: 616889
[parent_id]: 616879
[tags]: 
As @J. Delaney noticed you didn't normalize it properly. $$ \Pr(X \in A_i) = \int_{A_i} p(x) dx $$ so $$ \int_{A_i} f(x) p(x) dx $$ is not the expected value as it integrates over just a part of the support for $x$ . So you are not summing the expected values. The integration is correct , you just misunderstood the integrals over the $A_i$ subsets as expected values. If you had conditional expectations $$ E[f(X) | X \in A_i] = \int f(x) \frac{P(X = x, X \in A_i)}{P(X \in A_i)} dx $$ then indeed you would have to use the weighted average of those with the weights equal to $P(X \in A_i)$ to cancel the denominator above (see also the law of total expectation ).
