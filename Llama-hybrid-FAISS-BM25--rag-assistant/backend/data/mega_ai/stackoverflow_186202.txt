[site]: stackoverflow
[post_id]: 186202
[parent_id]: 
[tags]: 
What is the best way to open a file for exclusive access in Python?

What is the most elegant way to solve this: open a file for reading, but only if it is not already opened for writing open a file for writing, but only if it is not already opened for reading or writing The built-in functions work like this >>> path = r"c:\scr.txt" >>> file1 = open(path, "w") >>> print file1 >>> file2 = open(path, "w") >>> print file2 >>> file1.write("111") >>> file2.write("222") >>> file1.close() scr.txt now contains '111'. >>> file2.close() scr.txt was overwritten and now contains '222' (on Windows, Python 2.4). The solution should work inside the same process (like in the example above) as well as when another process has opened the file. It is preferred, if a crashing program will not keep the lock open.
