[site]: stackoverflow
[post_id]: 2044797
[parent_id]: 2044734
[tags]: 
I used my favorite text editor (editpadpro) to save the file you posted in the OP as a binary file called "c:\work\test.bin", edited your code to the following, and it (apparently) produced the correct (expected) output. Please try it out. #include #include #include using namespace std; #pragma pack( push, 1 ) class stlFormat { public: float normalX, normalY, normalZ; float x1,y1,z1; float x2,y2,z2; float x3,y3,z3; char byte1, byte2; }; #pragma pack( pop ) struct foo { char c, d, e; }; void main() { size_t sz = sizeof(foo); int size; int numTriangles; int * header = new int [21]; // size of header ifstream stlFile ("c:\\work\\test.bin", ios::in|ios::binary|ios::ate); size = stlFile.tellg(); // get the size of file stlFile.seekg(0, ios::beg); //read the number of triangles in the file stlFile.read(reinterpret_cast (header), 84); numTriangles = header[20]; stlFormat * triangles = new stlFormat [numTriangles]; //create data array to hold vertex data stlFile.seekg (84, ios::beg); //read vertex data and put them into data array stlFile.read(reinterpret_cast (triangles), (numTriangles * 50)); cout
