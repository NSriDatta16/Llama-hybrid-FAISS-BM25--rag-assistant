[site]: stackoverflow
[post_id]: 2492718
[parent_id]: 
[tags]: 
How do I pass ImageMagick environment variables to nginx mongrels?

My Rails app makes use of ImageMagick, but the app fails on trying to execute the ImageMagick command ("identify"). I fixed this issue in development (where I'm running Apache/Passenger) by passing the following environment variables in my Apache config: SetEnv MAGICK_HOME /opt/local/var/macports/software/ImageMagick/6.5.9-0_0+q16 SetEnv DYLD_LIBRARY_PATH /opt/local/var/macports/software/ImageMagick/6.5.9-0_0+q16/opt/local/lib SetEnv PATH /usr/bin:/opt/local/var/macports/software/ImageMagick/6.5.9-0_0+q16/opt/local/bin However, my production environment is running Nginx and Mongrel (not something I set up), and I am not sure how to pass those variables to the app. My nginx.conf file currently is as follows: # user and group to run as user mouthbreather mouthbreather; worker_processes 4; # pid of nginx master process pid /var/run/nginx.pid; events { worker_connections 8192; use epoll; } http { include /etc/nginx/mime.types; default_type application/octet-stream; log_format main '$remote_addr - $remote_user [$time_local] ' '"$request" $status $body_bytes_sent "$http_referer" ' '"$http_user_agent" "$http_x_forwarded_for"'; access_log /var/log/engineyard/nginx/access.log main; error_log /var/log/engineyard/nginx/error.log notice; sendfile on; tcp_nopush on; tcp_nodelay on; gzip on; gzip_http_version 1.0; gzip_comp_level 2; gzip_proxied any; gzip_buffers 16 8k; gzip_types text/plain text/html text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript; include /etc/nginx/sites/*.conf; } So my questions are: How can I determine where my MAGICK_HOME is on production? How can I pass those variables to the app via nginx.conf ? Thanks!
