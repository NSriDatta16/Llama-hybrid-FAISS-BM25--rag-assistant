[site]: stackoverflow
[post_id]: 4586945
[parent_id]: 4096173
[tags]: 
One way to work this is to: have makefile fragments for each architecture (possibly cumulative): posix , win32 , win32-gcc , etc. have a script that runs and determines why fragments are adequate for the host include those makefile fragments into the main makefile allow manual override using environment variables (because things can sometimes be complicated; e.g., think of cross-compilers) I've used this in small-to-medium size projects (2 or 3 persons working on code for a few years), and it fits the bill well.
