[site]: stackoverflow
[post_id]: 2169455
[parent_id]: 1033849
[tags]: 
This is an improvement of the "Create Property and Synths for instance variables" script that Lawrence Johnston posted above. Settings: Input: Entire Document Directory: Home Directory Output: Discard Output Errors: Ignore Errors (or Alert if you want to see them) Select any number of variables and it'll create properties and syns for all of them. It'll even create/edit your dalloc method as necessary. Edit up the results if they are not exactly right (copy vs. retain, etc.) Handles more things like underbar storage name, behavior, dealloc,… Link to where this comes from and discussion: http://cocoawithlove.com/2008/12/instance-variable-to-synthesized.html #! /usr/bin/perl -w # Created by Matt Gallagher on 20/10/08. # Copyright 2008 Matt Gallagher. All rights reserved. # # Enhancements by Yung-Luen Lan and Mike Schrag on 12/08/09. # (mainly: multiple lines) # Copyright 2009 Yung-Luen Lan and Mike Schrag. All rights reserved. # # Enhancements by Pierre Bernard on 20/09/09. # (mainly: underbar storage name, behavior, dealloc,…) # Copyright 2009 Pierre Bernard. All rights reserved. # # Permission is given to use this source code file without charge in any # project, commercial or otherwise, entirely at your risk, with the condition # that any redistribution (in part or whole) of source code must retain # this copyright and permission notice. Attribution in compiled projects is # appreciated but not required. use strict; # Get the header file contents from Xcode user scripts my $headerFileContents = }; close(SCRIPTFILE); # Look for the class implementation statement if (length($implementationFileContents) && ($implementationFileContents =~ /(\@implementation [_A-Za-z][_A-Za-z0-9]*\n)/)) { my $matchString = $1; my $indexAfterMatch = index($implementationFileContents, $matchString) + length($matchString); # Determine if we want a newline before the synthesize statement if (substr($implementationFileContents, $indexAfterMatch, 1) eq "\n") { $indexAfterMatch += 1; $leadingNewline = ''; } else { $leadingNewline = "\n"; } # Determine if we want a newline after the synthesize statement if (substr($implementationFileContents, $indexAfterMatch, 11) eq '@synthesize') { $trailingNewline = ''; } else { $trailingNewline = "\n"; } substr($implementationFileContents, $indexAfterMatch, 0) = $leadingNewline. $synthesizeStatements . $trailingNewline; if ($implementationFileContents =~ /([ \t]*\[.*super.*dealloc.*\].*;.*\n)/) { my $deallocMatch = $1; my $indexAfterDeallocMatch = index($implementationFileContents, $deallocMatch); substr($implementationFileContents, $indexAfterDeallocMatch, 0) = "$releaseStatements\n"; } elsif ($implementationFileContents =~ /(\@synthesize .*\n)*(\@synthesize [^\n]*\n)/s) { my $synthesizeMatch = $2; my $indexAfterSynthesizeMatch = index($implementationFileContents, $synthesizeMatch) + length($synthesizeMatch); my $deallocMethod = "\n- (void)dealloc\n{\n$releaseStatements\n\t[super dealloc];\n}\n"; substr($implementationFileContents, $indexAfterSynthesizeMatch, 0) = $deallocMethod; } # Use Applescript to replace the contents of the implementation file in Xcode system 'osascript', '-e', $replaceFileContentsScript, $implementationFilePath, $implementationFileContents; } exit 0;
