[site]: stackoverflow
[post_id]: 5572819
[parent_id]: 
[tags]: 
LINQ to SQL and Dynamics CRM 2011 data views and paging VERY SLOW

I am at a loss as the best way to access Dynamics CRM 2011 data and with custom search criteria. I am porting a website that used a contacts database and forms security. The contacts have been moved into Dynamics CRM 2011, so I am using the CRM 2011 SDK and early binding to connect to the CRM to retrieve the data. I have used the code generation tool, CrmSvcUtil.exe. I am using LINQ to build a query that selects from the contact set into the ContactViewDefault class: IQueryable query = from c in orgContext.ContactSet select new ContactViewDefault { Username = c.EMailAddress1 ?? "", Title = c.Salutation ?? "", Firstname = c.FirstName ?? "", Lastname = c.LastName ?? "", Organisation = "", Position = c.JobTitle ?? "", Phone = c.Telephone1 ?? "", Mobile = c.MobilePhone ?? "", }; PagedDataSource pagedData = new PagedDataSource(); pagedData.AllowCustomPaging = true; pagedData.AllowPaging = true; pagedData.PageSize = 10; pagedData.CurrentPageIndex = 1; pagedData.DataSource = query; If I then databind to "Username" I get the error: 'ContactViewDefault' does not contain a property with the name 'Username'. Also, calling query.Count() is not supported. I then tried the CopyToDataTable code (see: http://msdn.microsoft.com/en-us/library/bb669096.aspx ) to copy to a data table and then use my existing repeaters and paging. The problem is that the code IS VERY SLOW. It can take about 3 minutes to fill the datatable. There are 7000 records in the table. I have tried custom paging as described in http://www.dotnetcurry.com/ShowArticle.aspx?ID=345 , query.OrderBy(c => c.Username); query.Take(10); query.Skip(0); to select the first 10 records, but it still takes over 20 seconds to fill a basic repeater. By comparison, the original code can select all the data into the paged data source and display the first page in less that a second. So I am having several issues and I am asking if I am approaching this correctly. I have many more pages to convert with more complex queries and joins, so I want to get started on the right track.
