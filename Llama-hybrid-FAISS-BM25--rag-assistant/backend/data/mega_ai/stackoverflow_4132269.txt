[site]: stackoverflow
[post_id]: 4132269
[parent_id]: 4128582
[tags]: 
Let's look at how the 2 queries work in more detail: First, the one that works: /*Works*/ UPDATE tblagent t SET t.numbersent = (SELECT SUM(services) FROM tblservices x WHERE t.agentid = x.agentid GROUP BY x.agentid) Clearly the subquery must return a single value to use in the SET, so let's look at that on its own: SELECT SUM(services) FROM tblservices x WHERE t.agentid = x.agentid GROUP BY x.agentid Note that the "t" alias here correlates the subquery to the outer query - i.e. it has one specific value when the subquery is evaluated e.g. SELECT SUM(services) FROM tblservices x WHERE 123 = x.agentid GROUP BY x.agentid Therefore, although the query groups results by x.agentid, there is only in fact one x.agentid value i.e. the current value of t.agentid (e.g. 123). So this works. Now look at the second query's subquery on its own: SELECT SUM(services) FROM tblservices x INNER JOIN tblAgent t ON t.agentid = x.agentid GROUP BY x.agentid This time t.agentid is not a reference to the outer query, so this query is not correlated to the outer query. It can return more than 1 row (just run it and see), and thus cannot be safely used in the SET clause of the outer query.
