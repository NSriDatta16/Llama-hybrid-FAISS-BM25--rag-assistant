[site]: stackoverflow
[post_id]: 2507489
[parent_id]: 
[tags]: 
OutOfMemoryException - out of ideas

I know there is no simple answer to my question but I would appreciate ideas, guides or some sort of things-to-look-at list I have a net Windows service that is constantly throwing OutOfMemoryException. The service has two builds for x86 and x64 Windows. However on x64 it consumes a lot more memory. I have tried profiling it with various memory profilers. But I cannot get a clue what the problem is. The diagnosis - service consumes lot of VMSize and crashes app after 3 to 12 hours. The behaviuor is rather stochastic - there is no observable pattern for crash scenario. Also I tried to look at performance counters (perfmon.exe). What I can see is that heap size is growing and %GC time is on average 19%. Plus memory allocation is correlated with %CPU time. My application has threads and locking objects, DB connections and WCF interface. The general question that I am trying to solve: Is it simply GC not been fast enough to GC objects or some non-managed (windows) objects are consuming memory? See first app in list http://s45.radikal.ru/i109/1003/af/92a389d189e8.jpg http://s45.radikal.ru/i109/1003/af/92a389d189e8.jpg The link to picture with performance counters view http://s006.radikal.ru/i215/1003/0b/ddb3d6c80809.jpg
