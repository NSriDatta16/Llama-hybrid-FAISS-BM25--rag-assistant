[site]: stackoverflow
[post_id]: 2300430
[parent_id]: 2300414
[tags]: 
You are using a different window handle for SetWindowLongPtr than the one you use for GetWindowLongPtr is that a bug in your code or just a typo in your question? The following code works for me on Windows Server 2003 and on Windows 7 POINT ptScreen = pt; ClientToScreen(pwnd->hdr.hwnd, &ptScreen); HWND hctl = WindowFromPoint(ptScreen); if (IsWindow(hctl)) { LONG lExStyle = GetWindowLong(hctl, GWL_EXSTYLE); lExStyle ^= WS_EX_LAYERED; SetWindowLong(hctl, GWL_EXSTYLE, lExStyle); SetLayeredWindowAttributes(hctl, 0, (lExStyle & WS_EX_LAYERED) ? (255 * 50) / 100 : 255, LWA_ALPHA); } } However, it only works if WindowFromPoint returns the top level window for the application, if it returns a child window, then the code doesn't work. So it works when the mouse is over the caption of the window I want to make transparent, but usually not anywhere else. (tested with notepad)
