[site]: stackoverflow
[post_id]: 5569945
[parent_id]: 5541622
[tags]: 
I have found the solution to this problem. I had put in my configuration file the following code sourced from http://www.emacswiki.org/emacs/SqlMode (defun sql-add-newline-first (output) "Add newline to beginning of OUTPUT for `comint-preoutput-filter-functions'" (concat "\n" output)) (defun sqli-add-hooks () "Add hooks to `sql-interactive-mode-hook'." (add-hook 'comint-preoutput-filter-functions 'sql-add-newline-first)) (add-hook 'sql-interactive-mode-hook 'sqli-add-hooks) After removing the code (which because it sets the comint-preoutput-filter-functions , affects shell-mode as well), I no longer experience these issues. My proposed replacement for this code to get the behavior I want (works for me so far): (defun sql-add-newline-first (output) "Add newline to beginning of OUTPUT for `comint-preoutput-filter-functions'" (remove-hook 'comint-preoutput-filter-functions 'sql-add-newline-first) (concat "\n" output)) (defun sql-send-region-better (start end) "Send a region to the SQL process." (interactive "r") (if (buffer-live-p sql-buffer) (save-excursion (add-hook 'comint-preoutput-filter-functions 'sql-add-newline-first) (comint-send-region sql-buffer start end) (if (string-match "\n$" (buffer-substring start end)) () (comint-send-string sql-buffer "\n")) (message "Sent string to buffer %s." (buffer-name sql-buffer)) (if sql-pop-to-buffer-after-send-region (pop-to-buffer sql-buffer) (display-buffer sql-buffer))) (message "No SQL process started."))) (defvar sql-mode-map (let ((map (make-sparse-keymap))) (define-key map (kbd "C-c C-c") 'sql-send-paragraph) (define-key map (kbd "C-c C-r") 'sql-send-region-better) (define-key map (kbd "C-c C-s") 'sql-send-string) (define-key map (kbd "C-c C-b") 'sql-send-buffer) map) "Mode map used for `sql-mode'.") Essentially, I am adding the hook right before my sql-send-region-better code starts sending output, then inside the hook I am removing the hook again, guaranteeing that it only inserts the one new line that I want.
