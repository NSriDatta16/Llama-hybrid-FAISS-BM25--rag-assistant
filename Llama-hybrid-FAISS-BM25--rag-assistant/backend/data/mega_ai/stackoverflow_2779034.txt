[site]: stackoverflow
[post_id]: 2779034
[parent_id]: 2778866
[tags]: 
First of all do notice that your definition 'within 5 minutes of each other' does not define a single solution and that your (MIN()+MAX())/2 is not average but simply middle of min and max. You might be looking for AVG() in your subqueries. Secondly you are not getting results within 5 secs from each other, but entries whose longitude and latitude are at most 10 secs (which on diagonal can be closer to 14). In mysql you can use session variables such as: SET @avg_lat := (SELECT round(avg(LATITUDE)) FROM STATION WHERE DISTRICT_ID = '110' AND NAME LIKE 'Vancouver%'); SET @avg_long := (SELECT round(avg(LONGITUDE)) FROM STATION WHERE DISTRICT_ID = '110' AND NAME LIKE 'Vancouver%'); SELECT NAME FROM STATION WHERE DISTRICT_ID = '110' AND pow(LATITUDE-@avg_lat,2)+pow(LONGITUDE-@avg_long,2) Even though it is not necessary (as in the query written like above both variables occur only once). EDIT: Oops, missread the question. It is the radius of center - so replace 25 with 100 (and while at it decide if you want to use less or equal). Also, if center is the center of bounding box then your (min()+max())/2 is right formula and not my suggestion. Still 'center of all locations' is a bit vague so I am leaving my answer (it is easy to change it). EDIT2: Just noticed that the units in the my query are not right, if the latitude is stored in centiminutes, then the comparison should be to centiminutes too (10*100)^2=1000000 And finally, your decision to stick with (min()+max())/2 will lead to instances where you might have a single row which is far toward max and min which could make the query miss any of the results (and can happen, usually all the locations with similar names are next to each other, but it is not uncommon to have another location starting with the same name which is an isolated place far from the conglomerate of locations) As for 5 minute area, to be completely precise better say it is 10x10 minute area, that's what the queries would return. EDIT3: The formula used above for the distance is not very precise if you move away from the equator. Here is a better approximations of distance formula For serious work you might need something like this
