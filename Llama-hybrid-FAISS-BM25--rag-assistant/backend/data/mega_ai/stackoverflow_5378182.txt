[site]: stackoverflow
[post_id]: 5378182
[parent_id]: 
[tags]: 
Memory leak when retrieving data from database

Hey, I've created a custom retrieval method for database access: +(NSArray*) recordsForTable:(NSString *)table predicate:(NSPredicate *)prd{ NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init]; NSEntityDescription *entity = [NSEntityDescription entityForName:table inManagedObjectContext:managedObjectContext]; [fetchRequest setEntity:entity]; [fetchRequest setPredicate:prd]; NSArray *records = [managedObjectContext executeFetchRequest:fetchRequest error:nil]; [fetchRequest release]; return records; } i then use the above method in this method: -(NSArray *)tableViewControllerData{ NSNumber *savedBool = [[NSNumber alloc] initWithBool:YES]; NSString *onlyGetSavedVisitObjects = [NSString stringWithFormat:@"bolSaved=%@", savedBool]; [savedBool release]; NSMutableArray *data = [[[CoreDataAccess recordsForTable:@"LPVisit" stringPredicate:onlyGetSavedVisitObjects] mutableCopy] autorelease]; NSSortDescriptor *dateDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"dteVisitDate" ascending:NO]; NSArray *descriptors = [NSArray arrayWithObjects:dateDescriptor, nil]; [data sortedArrayUsingDescriptors:descriptors]; return data; } The trouble am having is that when the user makes changes to the LPVisit table and recall this method to show those changes it crashes the application. [EDIT] The exception it produces is: -[__NSArrayM objectID]: unrecognized selector sent to instance 0x4dac1f0 I believe the error is at line: NSMutableArray *data = [[[CoreDataAccess recordsForTable:@"LPVisit" stringPredicate:onlyGetSavedVisitObjects] mutableCopy] autorelease]; If I remove the autorelease, I get a memory leak but the application doesn't crash. Does anyone have any insights, thanks in advance
