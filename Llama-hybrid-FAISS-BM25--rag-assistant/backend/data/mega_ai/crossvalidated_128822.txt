[site]: crossvalidated
[post_id]: 128822
[parent_id]: 128813
[tags]: 
Part 1 - simple discussion : Let's look at the differences of the data $X_t-X_{t-1}$; if the normal decay is a constant amount per unit time it will show up as a horizontal negative line, while restocking should show either as positive (or at least, if negative, as nearer to zero than the flat decay line). Here's your differenced data: As you can see, the horizontal constant-amount decay line is obvious, a little below 0, while the restocking events are also obvious (position 8, 13 and 14). (Note that you made a mistake with the timing of the second restock - it's one period later than you said). There's also a short interval (11-12) where the decay seems to be faster than the previously experienced constant-amount. Some more details about the circumstances would help with saying more. If your real data are like this, you could write some fairly simple rules for deciding where the restocking occurs. If things are often much more complicated, more details will be needed to figure out more. For example, if substantial noise in the decay rate is possible, it may be difficult to detect the difference between constant-amount-decay-with-noise and restock+large-decay. Part 2 - building a model : I think this is a good candidate for a Bayesian model. At each time point you'll end up with a probability distribution on there being a restocking event (so for example, the mean of that distribution at time $t$ - the mean chance of a restocking event at $t$ given the data - might be interesting to you as an output). You'd start with priors on the parameters (while you might possibly consider hyperpriors on their parameters in turn, let's start very simple). It looks like this model might be estimates via MCMC. For example, your model might have something like (we might need to tweak this as I come to understand your problem better): Your specified model for $X_t$ - this is like a random walk + loss-process + restocking process Restocking process - $\beta_t$ is either $0$ (no restock) with probability $(1-\pi_t)$ or from some positive discrete distribution with large mean with probability $\pi_t$. It's not 100% clear whether this variable has a strict upper limit. We still have to pin down some guess at a distribution for the positive part. $\pi_t$ goes up as $X_t$ goes down, but may be 0 above some threshold (further clarification here would help). $\pi_t$ is presumably from something like a beta distribution. I assume we take $\alpha_t\sim \text{truncated Poisson}(\lambda)$, but do we truncate it at $0$, or some higher value (like say 1?). We might take $\lambda$ to have say a Gamma prior. Are the observations at random times or fixed times? Are the restockings and decreases at random times between observations? Might two restocking events happen between consecutive observations, for example? Might there be any other source of variation in $X$?
