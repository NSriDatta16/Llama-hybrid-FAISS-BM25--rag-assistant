[site]: stackoverflow
[post_id]: 3966346
[parent_id]: 
[tags]: 
How to wrap an object change in my own transaction and incorporate it with Hibernate to JTA?

I have a web-app, which I deploy on Tomcat 6 and it uses Hibernate. It receives messages on a JMS queue which trigger changes both to my DB, via Hibernate and to an Object of mine ( Agent ). The web-requests also access the DB, via Hibernate, and access the shared object (there's a ConcurrentHashMap held by a singleton). My problem is that I have a JMS message which changes several different Agent s and several tables and I need the changes in the Agent s to be available if and only if the DB transaction completed successfully. In addition I do not want to employ read locks as that is too much of a performance hazard for me. I was thinking of somehow implementing the XAResource interface for my singleton and then use JTA to manage both my singleton and my Hibernate transaction. What do you think? Does it sound reasonable? Am I way off? If any additional details are needed please don't hesitate to ask Ittai
