[site]: stackoverflow
[post_id]: 1520986
[parent_id]: 
[tags]: 
Open file in TagLib with Unicode chars in filename

I am quite new to the C++ 'area' so I hope this will not be just another silly 'C++ strings' question. Here is my problem. I want to integrate TagLib (1.5, 1.6 as soon as I manage to build it for Windows) into an existing Windows MFC VS2005 project. I need it to read audio files metadata (not write). The problem is that the program stores the input file names using CString(), and it has the Unicode option turned on (so the default chars are "wchar_t"). The reason for this (I think, the project was started by someone else) is that some of the 'input' file names could contain Unicode charaters (for example, Japanse or Arabic characters). For example, the file path is something like "d:\docs\audio_test\stragecharÚhere.mp3", but I get it with: CString fpath = tmpFile->GetFilePath(); Now.. if I try to do: TagLib::FileRef f(fpath.GetBuffer(0)); fpath.ReleaseBuffer(); I get something like: unresolved external symbol "__declspec(dllimport) public: __thiscall TagLib::FileName::FileName(wchar_t const *)" If I try something like: TagLib::FileRef f(reinterpret_cast (fpath.GetBuffer(0))); fpath.ReleaseBuffer(); I get rid of the compilation errors, but "f" is an invalid pointer/object.. and when I try reading a tag, I receive an assert failed. So, can anyone give me some pointers on how should I pass that CString, in it's Unicode form, to the TagLib ? Update: TagLib address: http://developer.kde.org/~wheeler/taglib.html Thank you, Alex
