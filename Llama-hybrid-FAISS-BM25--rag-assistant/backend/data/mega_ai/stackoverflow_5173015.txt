[site]: stackoverflow
[post_id]: 5173015
[parent_id]: 
[tags]: 
How to use `to_sql` in AREL when using `average()`?

I am trying to the get SQL from AREL, but it does not work in case I use average(:stars) : This works: Review.where("reviewed_user_id = ?", self.reviewed_user_id).to_sql #=> "SELECT `reviews`.* FROM `reviews` WHERE (reviewed_user_id = 3)" This causes NoMethodError : Review.where("reviewed_user_id = ?", self.reviewed_user_id).average(:stars).to_sql #=> undefined method `to_sql' for 3:Fixnum So that means that to_sql is getting called on the result of the AREL instead of on the AREL object - but why? How to get the generated SQL ?
