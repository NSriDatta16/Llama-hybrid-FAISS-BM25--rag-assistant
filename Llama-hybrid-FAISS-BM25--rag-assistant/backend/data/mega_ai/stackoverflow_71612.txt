[site]: stackoverflow
[post_id]: 71612
[parent_id]: 71328
[tags]: 
This is a great question. First, don't escape text on input except to make it safe for storage (such as being put into a database). The reason for this is you want to keep what was input so you can contextually present it in different ways and places. Making changes here can compromise your later presentation. When you go to present your data filter out what shouldn't be there. For example, if there isn't a reason for javascript to be there search for it and remove it. An easy way to do that is to use the strip_tags function and only present the html tags you are allowing. Next, take what you have and pass it thought htmlentities or htmlspecialchars to change what's there to ascii characters. Do this based on context and what you want to get out. I'd, also, suggest turning off Magic Quotes. It is has been removed from PHP 6 and is considered bad practice to use it. Details at https://www.php.net/magic_quotes For more details check out http://ha.ckers.org/xss.html This isn't a complete answer but, hopefully enough to help you get started.
