[site]: crossvalidated
[post_id]: 169157
[parent_id]: 
[tags]: 
Convergence of Bernoulli sampling procedure

Let $X$ be a variable which has density $f_{X}$ and mean $E[X]=\mu$ Define $B$, a Bernoulli variable, which has a probability $P(b_{i}=1)=p_{i}=\frac{1}{N^\gamma}$ Consider the following expression: \begin{equation} \frac{\sum_{i=1}^{N}b_{i}x_{i}}{\sum_{i=1}^{N}b_{i}} \end{equation} This can be interpreted as a sampling procedure where the probability of being included in the sample is a Bernoulli draw. The above expression is therefore simply an average. Is the following derivation correct: \begin{equation} \lim_{N \rightarrow \infty}\frac{\frac{1}{N}\sum_{i=1}^{N}b_{i}x_{i}}{\frac{1}{N}\sum_{i=1}^{N}b_{i}}=\frac{E[BX]}{E[B]}=\frac{E[E[BX|X]]}{E[B]}=\frac{E[\frac{1}{N^{\gamma}}X]}{E[\frac{1}{N^{\gamma}}]}=E[X] \end{equation} I am unsure whether this is correct because of the way the Bernouilli probability is specified: $p_{i}$ tends to zero as $N \rightarrow \infty$. But I do not see where this would invalidate the above derivation - although I have a feeling it might. Any help is much appreciated.
