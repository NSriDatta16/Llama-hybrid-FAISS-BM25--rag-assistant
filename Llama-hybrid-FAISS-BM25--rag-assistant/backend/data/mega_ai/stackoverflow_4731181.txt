[site]: stackoverflow
[post_id]: 4731181
[parent_id]: 
[tags]: 
Can I check ActiveRecord validations without string matching?

Long story short, I want a user registration form to do something particular if an email address is already in the system, but use the normal error handling otherwise. The validations on the model are already doing the work of figuring this out, so in the controller I'd like to be able to just check whether the email is non-unique. The problem is, it seems like the only way to make use of that work is to match against a specific string, e.g. ruby-1.9.2-head :022 > user.valid? => false ruby-1.9.2-head :023 > user.errors => {:email=>["has already been taken"], :password=>["can't be blank"]} ruby-1.9.2-head :037 > user.errors[:email].include? "has already been taken" => true and that just seems terrible and fragile. Am I missing something? Is there a way to check if a model is invalid due to uniqueness without string matching? I could check the system for duplicate emails myself easily enough, but that seems like a waste when validation already provides that information.
