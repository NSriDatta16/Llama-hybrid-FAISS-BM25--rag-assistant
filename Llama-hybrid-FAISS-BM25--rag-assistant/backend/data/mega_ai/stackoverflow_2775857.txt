[site]: stackoverflow
[post_id]: 2775857
[parent_id]: 2775584
[tags]: 
In this case I think you would just mock the method calls as you mentioned. Typically you would write your test first, and then write the method in a way so that all of the tests pass. I've noticed that when you do it this way, the code that's written is very clean and to the point. Also, each class is very good about only having a single responsibility that can easily be tested. I don't know what's wrong, but something doesn't smell right, and I think there maybe a more elegant way to do what you're doing.
