[site]: stackoverflow
[post_id]: 4842775
[parent_id]: 
[tags]: 
Twitter-like content submission and update

Greetings. I'm creating a quotation service now and encouraged such a problem while trying to make twitter-like data submission and display: all my ajax requests are executed twice. I'm using jQuery as follows: i've tried .click() , .live("click", function()) and .one("click", function()) handlers with "submit" button. All of them executed query twice. And yes, the .one("click", function()) too. i set timeout function to check for new quotes and it is executed twice too What's wrong with my JS/RoR code? You can see all my sources at github . Any help would be great. UPD: Here's my form resulting HTML: Author Body Approved And here's my javascript: onerror = function moo(msg, url, line) { //alert('Error: ' + msg + '\nURL: ' + url + '\nLine: ' + line); } function moo() { var cnt = 0, type = ""; var id = $("div.quote:first").attr("id"); $.getJSON("/after/" + id, function(data) { var cnt = data.length; if (cnt > 0) $(".msg").css("backgrount-color", "#ffff00").text(cnt + " new quotes added. Please, update").fadeIn('slow').delay(20000).fadeOut('slow'); }); setTimeout("moo()", 30000); } $(document).ready(function() { var to = setTimeout("moo()", 30000); $.getJSON("/author_list", function(data) { $("#quote_author").autocomplete({ source: data, minLength: 1 }) }); $("form.new_quote > .actions > [type=submit]").live("click", function() { $.post('/ajax_new', $('form.new_quote').serialize(), function(resp) { resp = $.parseJSON(resp); if (resp[0].done == "ok") { $(".msg").css("background-color", "#00fe00").text("Ok").fadeIn('slow').delay(5000).fadeOut('slow'); $("#quote_author,#quote_body").each(function(i,e) { $(this).val(""); }); } }); return false; }); });
