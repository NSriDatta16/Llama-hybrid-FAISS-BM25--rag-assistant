[site]: stackoverflow
[post_id]: 5744167
[parent_id]: 2108194
[tags]: 
Execute below three functions. Function 1 create or replace type stragg_type as object ( string varchar2(4000), static function ODCIAggregateInitialize ( sctx in out stragg_type ) return number , member function ODCIAggregateIterate ( self in out stragg_type , value in varchar2 ) return number , member function ODCIAggregateTerminate ( self in stragg_type, returnvalue out varchar2, flags in number ) return number , member function ODCIAggregateMerge ( self in out stragg_type, ctx2 in stragg_type ) return number ); / function 2 create or replace type body stragg_type is static function ODCIAggregateInitialize ( sctx in out stragg_type ) return number is begin sctx := stragg_type( null ) ; return ODCIConst.Success ; end; member function ODCIAggregateIterate ( self in out stragg_type , value in varchar2 ) return number is begin self.string := self.string || ',' || value ; return ODCIConst.Success; end; member function ODCIAggregateTerminate ( self in stragg_type , returnvalue out varchar2 , flags in number ) return number is begin returnValue := ltrim( self.string, ',' ); return ODCIConst.Success; end; member function ODCIAggregateMerge ( self in out stragg_type , ctx2 in stragg_type ) return number is begin self.string := self.string || ctx2.string; return ODCIConst.Success; end; end; / function 3 create or replace function stragg ( input varchar2 ) return varchar2 deterministic parallel_enable aggregate using stragg_type ; / after executing three functions now u can use stragg as follows Example Table :emp name | salary a | 100 a | 200 a | 300 b | 400 b | 500 c | 600 c | 700 d | 800 select name , STRAGG( salary) as string from emp group by name; output: a | 100,200,300 b | 400,500 c | 600,700 d | 800
