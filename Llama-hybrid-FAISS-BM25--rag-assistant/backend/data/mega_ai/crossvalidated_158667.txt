[site]: crossvalidated
[post_id]: 158667
[parent_id]: 
[tags]: 
Correlation with stratified data structure

I have a dataset with two stratas, the first level is called block, which represents the census block. the second level is two predetermined subgroups in each blocks, each subgroup contains several households. block subgroup id 1 1 1 1 1 2 1 1 3 ······· 3 1 5 3 2 1 3 2 2 3 2 3 Now what I want is to measure the similarity between individuals in different stratas. Specificly, I first randomly draw a household from subgroup 1 in each block, in the first step, I calculate the average value of a certain individual characteristics (say, income) of the rest individuals in the block (denote ave_income1 ), and calculate the correlations between the selected individual's income (denoted sel_income1 ) and ave_income1 , denoted as corr_income1 . Next, I do the same job in the subgroup level, ave_income2 denotes the average value of individual income in subgroup2 , and calculate the corr_income2 . Then I compare corr_income1 and corr_income2 to see if there is significant difference so that I can check if the households in two groups are fundamentally different in some sense. So I wonder if my method descripted here is defensible for my purpose，especially the averging part? And should I re-draw many times to make my result more robust? I don't know if there is some well-built theory on this context for I'm just a reg monkey, if it indeed existed, please throw some links or papers or tutorials for me, thanks your guys.
