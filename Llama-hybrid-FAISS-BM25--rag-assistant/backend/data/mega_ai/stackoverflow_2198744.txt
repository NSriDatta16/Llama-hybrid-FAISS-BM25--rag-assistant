[site]: stackoverflow
[post_id]: 2198744
[parent_id]: 
[tags]: 
logic issue while setting condition

I got a comment like this This check ( if (rp != null) ) should not be here. The variable irp.ResourcePolicy should be set to null when rp is null because the Resource Policy is unknown. Otherwise the previous value will be used and the previous value might be incorrect. // Search for the specified resource policy ResourcePolicy rp = null; try { int rpindex = allObjects.Find(new Guid(policyGuid)); if (rpindex != -1) { rp = (ResourcePolicy)allObjects.GetAt(rpindex); } } catch (System.Exception err) { SpoDebug.DebugTraceSevere(func, "Bad GUID: " + policyGuid + " Exception: " + err.Message); rp = null; } if (rp == null) { SpoDebug.DebugTraceSevere(func, "Unable to find ResourcePolicy with GUID: " + policyGuid); } // Search for the specified host foreach (DataModelObject dmo in allObjects) { if (dmo is IResourcePolicy && string.Compare(dmo.Name, hostName, true) == 0) { IResourcePolicy irp = (IResourcePolicy)dmo; irp.AgentVersion = agentVersion; if (rp != null) // this is the condition we need to look { irp.ResourcePolicy = rp; irp.AgentPolicyVersion.Version = Convert.ToInt64(policyVersion); irp.ResourcePolicyEnabled = Convert.ToBoolean(enabled); } // Distribute the object without saving it. SpoServer.Spurt.ServerSendObject(dmo, true, 0); break; } } So I made it this way: foreach (DataModelObject dmo in allObjects) { if (dmo is IResourcePolicy && string.Compare(dmo.Name, hostName, true) == 0) { IResourcePolicy irp = (IResourcePolicy)dmo; irp.AgentVersion = agentVersion; if (rp == null) { irp.ResourcePolicy = null; } else { irp.ResourcePolicy = rp; irp.AgentPolicyVersion.Version = Convert.ToInt64(policyVersion); irp.ResourcePolicyEnabled = Convert.ToBoolean(enabled); } // Distribute the object without saving it. SpoServer.Spurt.ServerSendObject(dmo, true, 0); break; } } Is that sufficient?
