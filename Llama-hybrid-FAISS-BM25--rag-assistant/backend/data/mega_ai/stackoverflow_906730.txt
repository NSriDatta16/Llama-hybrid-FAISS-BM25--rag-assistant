[site]: stackoverflow
[post_id]: 906730
[parent_id]: 880268
[tags]: 
Using inject with a hash will yield poor performance (you're re-assigning the memo var at every iteration). If you're on 1.9, Enumerable implements the method group_by , which can be used to make the code a little more obvious: result = array.map{ |row| [row.first.to_i, row.last.to_f] }.group_by(&:first) result.each_pair do |key, values| result[key] = values.average end Array#average is easily implemented as class Array def average inject(0.0) { |sum, e| sum + e } / length end end The fact that your data is strings is quite inconvenient, I recommend avoiding that whenever possible.
