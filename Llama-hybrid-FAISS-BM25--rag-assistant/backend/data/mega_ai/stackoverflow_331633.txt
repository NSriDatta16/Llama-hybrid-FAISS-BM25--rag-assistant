[site]: stackoverflow
[post_id]: 331633
[parent_id]: 331538
[tags]: 
The headers must be set prior to getting the InputStream to have any affect - an IllegalStateException will be thrown if the connection is already open. As far as the User-Agent header specifically, it should be sent if it has been set. See the URLConnection JavaDoc.
