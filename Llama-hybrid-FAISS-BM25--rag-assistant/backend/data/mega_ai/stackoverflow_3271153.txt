[site]: stackoverflow
[post_id]: 3271153
[parent_id]: 3267580
[tags]: 
I had a similar problem recently and used the - not very elegant - work-around: First I parsed my.cnf for a value for max_allow_packets , if I can't find it, the maximum is set to a default value. All data items are stored in a list. Next, for each data item I count the approximate byte length (with strings, it's the length of the string in bytes, for other data types I take the maximum bytes used to be safe.) I add them up, committing after I have reached approx. 75% of max_allow_packets (as SQL queries will take up space as well, just to be on the safe side). This approach is not really beautiful, but it worked flawlessly for me.
