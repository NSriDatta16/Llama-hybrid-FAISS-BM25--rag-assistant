[site]: stackoverflow
[post_id]: 214462
[parent_id]: 210371
[tags]: 
Hm. It looks like the problem is that LuaSocket uses "pasv" in lower case. I'm going try to figure out a work-around. Hm. Nope, it looks quite elegantly welded shut. The easiest thing to do is probably to copy that particular file to its equivalent place in a hierarchy in an earlier path in LUA_PATH. That is, (usually) make a local copy of the file, e.g. path/to/your/project/socket/ftp.lua . Then edit the local file: - self.try(self.tp:command("user", user or USER)) + self.try(self.tp:command("USER", user or USER)) - self.try(self.tp:command("pass", password or PASSWORD)) + self.try(self.tp:command("PASS", password or PASSWORD)) - self.try(self.tp:command("pasv")) + self.try(self.tp:command("PASV")) - self.try(self.tp:command("port", arg)) + self.try(self.tp:command("PORT", arg)) - local command = sendt.command or "stor" + local command = sendt.command or "STOR" - self.try(self.tp:command("cwd", dir)) + self.try(self.tp:command("CWD", dir)) - self.try(self.tp:command("type", type)) + self.try(self.tp:command("TYPE", type)) - self.try(self.tp:command("quit")) + self.try(self.tp:command("QUIT")) Perversely, a navelnaut expedition using getfenv, getmetatable, etc didn't seem to be worth it. I consider it a serious problem with the design. (of LuaSocket) It's worth noting that RFC0959 uses all-caps commands. (Probably because it's from the 7-bit ASCII era.)
