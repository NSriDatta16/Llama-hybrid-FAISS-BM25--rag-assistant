[site]: stackoverflow
[post_id]: 5303718
[parent_id]: 5303090
[tags]: 
SImple html dom eats memmory like nothing on earth, DOMDocument is much better, here is an example: $page = Test DOMDocument Small houses Dolls Houses H117: Daisy Cottage Pretty painted cottage with daisy motif, opening windows, shutters and door, decorated interior, includes 'Starter furniture set'. Dolls sold separately, 3 years+ W440mm D350mm H425mm H111: Lilys Cottage Pretty painted cottage with daisy motif, opening windows, shutters and door, decorated interior, includes 'Starter furniture set'. Dolls sold separately, 3 years+ W440mm D350mm H425mm le toy van, wodden toys, designed in uk, pirate, fantasy, everyday, historical, fairytale, dolls, manufactured in indonesia, traditional wooden toys, fabric clothing, designed in the uk manufactured in indonesia, copyright le toy van ltd, manufacturer distributor, designer, dolls houses, castles, garages, cars, budkins, traditional wooden toys, fairies, farms HTML; libxml_use_internal_errors(true); $dom = new DOMDocument(); $dom->load($page); foreach($dom->getElementsByTagName('img') as $img) { if (strpos($img->getAttribute('src'),"http://letoyvan.com") === false) { $src->src = "http://letoyvan.com/" . $img->getAttribute('src'); } $product['image'][] = $img->getAttribute('src'); }; foreach($dom->getElementsByTagName('p') as $para) { if ($para->hasAttributes()) { if ($para->getAttribute('class') == "imAlign_left") { $product['description'][] = $para->nodeValue; } } } foreach($dom->getElementsByTagName('span') as $span) { if ($span->hasAttributes()) { if ($span->getAttribute('class') == "fc3") { $product['title'][] = $span->nodeValue; } } } If you need the description to retain the html you can use this function function DOMinnerHTML($element) { $innerHTML = ""; $children = $element->childNodes; foreach ($children as $child) { $tmp_dom = new DOMDocument(); $tmp_dom->appendChild($tmp_dom->importNode($element, true)); $innerHTML = trim($tmp_dom->saveHTML()); } return $innerHTML; }
