[site]: stackoverflow
[post_id]: 4046960
[parent_id]: 
[tags]: 
How do I redirect without www using Rails 3 / Rack?

I understand there are a lot of questions that answer this. I'm familiar with .htaccess and nginx.conf methods, but I do not have access to such traditional configuration methods on Heroku. Simone Carletti gave this answer that leverages Rails 2.x Metals, but I'm using Rails 3 and this isn't compatible: Redirect non-www requests to www URLs in Ruby on Rails Please note: I'm not looking for a simple before_filter in my ApplicationController. I'd like to accomplish a rewrite similar to Simone's. I believe this is job for the webserver or middleware like Rack at the very least, so I'd like to leave this bit out of the actual application code. Goal redirect to status ---------------------------------------------------- www.foo.com foo.com 301 www.foo.com/whatever foo.com/whatever 301 Only hosts matching /^www\./ should be redirected. All other requests should be ignored.
