[site]: stackoverflow
[post_id]: 4554062
[parent_id]: 4553871
[tags]: 
This is really not what global variables are for and I'm not surprised it's not working reliably when using this technique. You should consider putting the data elsewhere (be it a normal database, or something like redis which would be well suited to simple array storage). That way, the data is less associated to the different threads.
