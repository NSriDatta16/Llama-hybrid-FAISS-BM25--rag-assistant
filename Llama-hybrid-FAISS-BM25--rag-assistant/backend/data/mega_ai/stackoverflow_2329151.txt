[site]: stackoverflow
[post_id]: 2329151
[parent_id]: 2328836
[tags]: 
You can: zip elements and their ranks group these pairs by element's value average group ranks form result as array And write down that algo as script: let f sortedArray sortedArrayRanks = [| for v,xs in Array.zip sortedArray sortedArrayRanks |> Seq.groupBy (fun (v,r) -> v) do let n,r = Seq.fold (fun (n,r) (_,r') -> (n+1,r+r')) (0,0.) xs let r = r/(float n) for i in 1..n do yield r |] > f [|-10.0;-3.4;-3.4;-3.4;-3.4;1.2;9.4|] [|1.;2.;3.;4.;5.;6.;7.|];; val it : float [] = [|1.0; 3.5; 3.5; 3.5; 3.5; 6.0; 7.0|]
