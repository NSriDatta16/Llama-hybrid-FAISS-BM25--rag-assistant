[site]: stackoverflow
[post_id]: 5695565
[parent_id]: 5695430
[tags]: 
I'd really recommend building the undo tree into your Controller Building it into the model could run you into trouble: the 'model' is usually fragmented per view (each view has it's own partial model) this will lead to non-atomic undo (undoing part of an operation due to the view not knowing what other things (models) would have to be undone etc) The controller is the 'action dispatcher', so it'd have to say clone state (all models) snapshot add action to history with reference to snapshot run action then undo would be pop action off history stack (optionally push to 'future' stack) restore snapshot display view Also, make undo work with highlevel actions (see Composite Pattern or Command Pattern)
