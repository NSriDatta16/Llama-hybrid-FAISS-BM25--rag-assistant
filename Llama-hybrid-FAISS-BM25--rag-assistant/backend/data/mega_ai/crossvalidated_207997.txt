[site]: crossvalidated
[post_id]: 207997
[parent_id]: 
[tags]: 
In a CART model, why is the average of the leaf proportions equal to the total proportion only when the classes are unweighted?

Suppose I want to do binary classification (the two classes are 0 and 1) and I choose to work with a CART model. I first fit this model on a training set. (Note that I am using Python, and specifically the sklearn DecisionTreeClassifier .) Then, for a sample X, predict_proba returns [p0(X), p1(X)] where p0(X) represents the probability that X belongs to the 0-class and p1(X) represents the probability that X belongs to the 1-class. In the sklearn documentation, it is said that p0(X) is equal to: (number of samples of the training set which belong to the leaf of X and to the 0-class) / (number of samples of the training set which belong to the leaf of X), that is to say the ratio of the 0-class in the leaf of X. And the same way for p1(X) . With this definition, I would think that the average of p0 on the training set itself, is going to be equal to: (number of samples of the training set which belong to the 0-class)/(number of samples of the training set), that is to say the ratio of the 0-class in the training set. If I put class_weight=None , then the previous statement is true. But with any other class_weight , it is not anymore and I do not understand why.
