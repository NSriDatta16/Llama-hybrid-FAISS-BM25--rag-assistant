[site]: stackoverflow
[post_id]: 4987777
[parent_id]: 
[tags]: 
Wsdl soap header is missing in the imported interface in Delphi 6

I am trying to implement a webservice using Delphi 6. Web service uses soap version 1.2 and my delphi has a soap agent of 1.1. When I tried to import the wsdl, soap header "Autenticacao" is missing in the interface. Provider insists to send the 4 parameters as part of this soap header before calling the web service ? I have attached both my wsdl xml file and the imported pas file ? Can anyone help me to set the parameters of "Autenticacao" ? Thanks in advance . Kind Regards Sinu .xml file content &lt;br /&gt;Este método deve ser usado para envio do arquivo de Nota Fiscal modelo 1/1A.&lt;br /&gt;Os parâmetros de autenticação, informados via SOAP Header, são:&lt;br /&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;Usuario&lt;/b&gt;: login do usuário que está fazendo a requisição de acordo com o perfil escolhido&lt;/li&gt;&lt;li&gt;&lt;b&gt;Senha&lt;/b&gt;: senha do usuário&lt;/li&gt;&lt;li&gt;&lt;b&gt;CNPJ&lt;/b&gt;: CNPJ do estabelecimento ao qual o usuário está vinculado e o arquivo pertence&lt;/li&gt;&lt;li&gt;&lt;b&gt;CategoriaUsuario&lt;/b&gt;: perfil do usuário informado (1 para contribuintes e 2 para contabilistas)&lt;/li&gt;&lt;/ul&gt;&lt;br /&gt;Os parâmetros do método são:&lt;br /&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;NomeArquivo&lt;/b&gt;: nome do arquivo enviado&lt;/li&gt;&lt;li&gt;&lt;b&gt;ConteudoArquivo&lt;/b&gt;: conteúdo do arquivo enviado&lt;/li&gt;&lt;li&gt;&lt;b&gt;Observacoes&lt;/b&gt;: observações, caso existam, relativas ao arquivo ou envio&lt;/li&gt;&lt;/ul&gt;&lt;br /&gt; &lt;br /&gt;Este método é utilizado para consultar o resultado de processamento para um arquivo de Nota Fiscal modelo 1.&lt;br /&gt;Os parâmetros de autenticação, informados via SOAP Header, são:&lt;br /&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;Usuario&lt;/b&gt;: login do usuário que está fazendo a requisição de acordo com o perfil escolhido&lt;/li&gt;&lt;li&gt;&lt;b&gt;Senha&lt;/b&gt;: senha do usuário&lt;/li&gt;&lt;li&gt;&lt;b&gt;CNPJ&lt;/b&gt;: CNPJ do estabelecimento ao qual o usuário está vinculado e o arquivo pertence&lt;/li&gt;&lt;li&gt;&lt;b&gt;CategoriaUsuario&lt;/b&gt;: perfil do usuário informado (1 para contribuintes e 2 para contabilistas)&lt;/li&gt;&lt;/ul&gt;&lt;br /&gt;O parâmetro do método é:&lt;br /&gt;&lt;ul&gt;&lt;li&gt;&lt;b&gt;Protocolo&lt;/b&gt;: número do protocolo a ser consultado&lt;/li&gt;&lt;/ul&gt;&lt;br /&gt; .pas file content // ************************************************************************ // // The types declared in this file were generated from data read from the // WSDL File described below: // WSDL : C:\Projects\Delphi 6\WBWaiter\arquivonf_mod1.asmx.xml // Encoding : UTF-8 // Version : 1.0 // (10/02/2011 4:37:33 p.m. - $Revision: 1.9.1.0.1.0.1.9 $) // ************************************************************************ // unit arquivonf_mod1; interface uses InvokeRegistry, Types, XSBuiltIns; type // ************************************************************************ // // The following types, referred to in the WSDL document are not being represented // in this file. They are either aliases[@] of other types represented or were referred // to but never[!] declared in the document. The types from the latter category // typically map to predefined/known XML or Borland types; however, they could also // indicate incorrect WSDL documents that failed to declare or import a schema type. // ************************************************************************ // // !:string - "http://www.w3.org/2001/XMLSchema" ConsultarResponse = class; { "https://www.nfp.sp.gov.br/ws" } Consultar = class; { "https://www.nfp.sp.gov.br/ws" } EnviarResponse = class; { "https://www.nfp.sp.gov.br/ws" } Enviar = class; { "https://www.nfp.sp.gov.br/ws" } // ************************************************************************ // // ************************************************************************ // ConsultarResponse = class(TRemotable) private FConsultarResult: String; published property ConsultarResult: String read FConsultarResult write FConsultarResult; end; // ************************************************************************ // // // ************************************************************************ // Consultar = class(TRemotable) private FProtocolo: String; published property Protocolo: String read FProtocolo write FProtocolo; end; // ************************************************************************ // // // ************************************************************************ // EnviarResponse = class(TRemotable) private FEnviarResult: String; published property EnviarResult: String read FEnviarResult write FEnviarResult; end; // ************************************************************************ // // // ************************************************************************ // Enviar = class(TRemotable) private FNomeArquivo: String; FConteudoArquivo: String; FObservacoes: String; published property NomeArquivo: String read FNomeArquivo write FNomeArquivo; property ConteudoArquivo: String read FConteudoArquivo write FConteudoArquivo; property Observacoes: String read FObservacoes write FObservacoes; end; // ************************************************************************ // // Namespace : // binding : ArquivoNF_Mod1Soap12 // service : ArquivoNF_Mod1 // port : ArquivoNF_Mod1Soap12 // ************************************************************************ // ArquivoNF_Mod1Soap12 = interface(IInvokable) ['{AD787B4C-A2C5-BE98-12B8-A37CF0CEA897}'] function Enviar(const parameters: Enviar): EnviarResponse; stdcall; function Consultar(const parameters: Consultar): ConsultarResponse; stdcall; end; implementation uses SOAPHTTPClient; initialization InvRegistry.RegisterInterface(TypeInfo(ArquivoNF_Mod1Soap12), 'https://www.nfp.sp.gov.br/ws', 'UTF-8'); InvRegistry.RegisterDefaultSOAPAction(TypeInfo(ArquivoNF_Mod1Soap12), ''); RemClassRegistry.RegisterXSClass(ConsultarResponse, 'https://www.nfp.sp.gov.br/ws', 'ConsultarResponse'); RemClassRegistry.RegisterXSClass(Consultar, 'https://www.nfp.sp.gov.br/ws', 'Consultar'); RemClassRegistry.RegisterXSClass(EnviarResponse, 'https://www.nfp.sp.gov.br/ws', 'EnviarResponse'); RemClassRegistry.RegisterXSClass(Enviar, 'https://www.nfp.sp.gov.br/ws', 'Enviar'); end.
