[site]: stackoverflow
[post_id]: 3831168
[parent_id]: 3831041
[tags]: 
Rather than implementing this yourself I'd try using an existing piece of software like Browser.php that parses the user agent string for you. There's so many little things you need to take into account it's best to use a specialized library rather than trying to learn all these little platform/browser incongruities yourself.
