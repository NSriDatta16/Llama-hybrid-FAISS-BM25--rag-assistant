[site]: stackoverflow
[post_id]: 2493443
[parent_id]: 
[tags]: 
NHibernate - Retrieve specific columns and count using criteria query

This is my mapping file: class name="CRMStradCommon.Entities.OportunidadEntity,CRMStradCommon" table="oportunidad"> This is the other with joined-subclass class name="CRMStradCommon.Entities.ContactoEntity,CRMStradCommon" table="contacto" dynamic-update="true"> How can I make this query with criteria? SELECT contacto.id, contacto.nombre, persona.apellido, COUNT(*) AS Cant FROM contacto INNER JOIN oportunidad ON contacto.id = oportunidad.dueno LEFT OUTER JOIN persona ON contacto.id = persona.id LEFT OUTER JOIN empresa ON contacto.id = empresa.id GROUP BY contacto.id, contacto.nombre, persona.apellido ORDER BY contacto.nombre, persona.apellido Thanks a lot! Thanks a lot! It solved a part of my problem. I did this: ICriteria criteria = session.CreateCriteria(typeof(ContactoEntity)); criteria.SetProjection(Projections.ProjectionList() .Add(Projections.GroupProperty("Id"),"Id") .Add(Projections.GroupProperty("Nombre"),"Nombre") .Add(Projections.GroupProperty("Apellido"), "Apellido") .Add(Projections.GroupProperty("TipoContacto"), "TipoContacto") .Add(Projections.RowCount(),"CantOportunidadesDueno")); criteria.CreateCriteria("DuenoOportunidadList"); criteria.AddOrder(Order.Asc("Nombre")).AddOrder(Order.Asc("Apellido")); criteria.SetResultTransformer( new NHibernate.Transform.AliasToBeanResultTransformer(typeof(ContactoEntity))); IList ContLst = (criteria.List ()); I used Transformer in order to make a collection of Contacto entities, but the problem is with property Apellido . I have it in subclass Persona and the collection is made only with parent class and not with children classes. do you know if it is possible to solve that? or the only solution I have is to go throw each collection item without using transformer and creating a new collection of Contacto entities creating each new object? Thanks!!!
