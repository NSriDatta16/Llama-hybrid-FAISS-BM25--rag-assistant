[site]: stackoverflow
[post_id]: 5294975
[parent_id]: 
[tags]: 
FileUpload and HttpClient upload items and parts

I can see this code DiskFileUpload fu = new DiskFileUpload(); // If file size exceeds, a FileUploadException will be thrown fu.setSizeMax(1000000); List fileItems = fu.parseRequest(request); Iterator itr = fileItems.iterator(); while(itr.hasNext()) { FileItem fi = (FileItem)itr.next(); //Check if not form field so as to only handle the file inputs //else condition handles the submit button input if(!fi.isFormField()) { System.out.println("nNAME: "+fi.getName()); System.out.println("SIZE: "+fi.getSize()); //System.out.println(fi.getOutputStream().toString()); File fNew= new File(application.getRealPath("/"), fi.getName()); System.out.println(fNew.getAbsolutePath()); fi.write(fNew); } else { System.out.println("Field ="+fi.getFieldName()); } } And I am wondering what this code part: List fileItems = fu.parseRequest(request); Iterator itr = fileItems.iterator(); ...means for HttpClient? Should I upload file by parts or what does it mean? I want to upload video files with my desktop app but I am not sure how to organize the HttpClient. Please help me to understand. Client import org.apache.http.params.CoreProtocolPNames; import org.apache.http.util.EntityUtils; public class PostFile { public static void main(String[] args) throws Exception { HttpClient httpclient = new DefaultHttpClient(); httpclient.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1); HttpPost httppost = new HttpPost("http://localhost:8080/uploadtest"); File file = new File("C:\\file.flv"); MultipartEntity mpEntity = new MultipartEntity(); ContentBody cbFile = new FileBody(file, "binary/octet-stream"); mpEntity.addPart("userfile", cbFile); httppost.setEntity(mpEntity); System.out.println("executing request " + httppost.getRequestLine()); HttpResponse response = httpclient.execute(httppost); HttpEntity resEntity = response.getEntity(); System.out.println(response.getStatusLine()); if (resEntity != null) { System.out.println(EntityUtils.toString(resEntity)); } if (resEntity != null) { resEntity.consumeContent(); } httpclient.getConnectionManager().shutdown(); } } server public void doPut(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { System.out.println("Content Type ="+request.getContentType()); try { DiskFileUpload fu = new DiskFileUpload(); // If file size exceeds, a FileUploadException will be thrown fu.setSizeMax(1000000); List fileItems = fu.parseRequest(request); Iterator itr = fileItems.iterator(); while (itr.hasNext()) { FileItem fi = (FileItem) itr.next(); //Check if not form field so as to only handle the file inputs //else condition handles the submit button input if (!fi.isFormField()) { System.out.println("nNAME: " + fi.getName()); System.out.println("SIZE: " + fi.getSize()); //System.out.println(fi.getOutputStream().toString()); File fNew = new File("D:\\uploaded.flv"); System.out.println(fNew.getAbsolutePath()); fi.write(fNew); } else { System.out.println("Field =" + fi.getFieldName()); } } } catch (Exception ex) { } } I want to upload files >=1Gb. What am I doing wrong?
