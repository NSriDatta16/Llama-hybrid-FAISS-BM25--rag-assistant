[site]: stackoverflow
[post_id]: 5242592
[parent_id]: 5242226
[tags]: 
If it's choking when inserting into the current document, have you considered creating a new document instead? You can use the importNode method on DOMDocument to copy just the correct bits across from the old document into the right structure you'll create in the new document. You might be able to use a similar trick using a document fragment , only using serialized XML instead of working with node objects. This could work for the paragraph tags, at least.
