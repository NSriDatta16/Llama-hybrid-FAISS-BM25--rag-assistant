[site]: stackoverflow
[post_id]: 351606
[parent_id]: 350539
[tags]: 
There are a few Windows CE and CF behaviors that you're seeing here that's giving you this behavior. Unfortuantely there's no really good solution, but I can at least give you some guidance. Windows CE stores the current object store, including files in the filesystem not specifically on a persistent store in RAM. This includes any files and/or folders added to the \Windows folder (this is key in your case). When device power is lost - typically in a soft or hard reset, this data is lost. The CE registry can (and probably is on your device) be stored on a persistent store. This might be in the file system (as a hive) or in some non-visible location (there are two distinct ways an OEM can store it). This is not lost on reset. Only items saved and not flushed are lost. As an addendum to #2 - the registry changes are flushed when the RegFlushKey API is called. Installing a CAB automatically calls this (so installing the CF does). Some OEMs also choose to have it flush on a periodic timer. When the CF GACs an items not in the image, the file is moved to the \Windows folder. They are put back when the assembly is unloaded (I complained to the CF team about this years ago to no avail). What this means is that if you install the CF to a storage card and run your app this happens: CF files are copied to the persistent store during unpacking the CAB Installation reg keys are written Registry is flushed (saved) App runs CF files are moved (not copied) to \Windows, which is volatile. Now if you reset the device while the CF assemblies are loaded - poof! no more CF. Your app was on the storage card, but not in the GAC, so it survives but can no longer run. A hack solution: use a native app to "bootstrap" to launch your app. Have it check for the CF files in \Windows on run and if they aren't there install the CF CAB from a place in persistent storage (mark it as read-only so wceload won't delete it). The other option is to distribute the CF assemblies with your app and not GAC them.
