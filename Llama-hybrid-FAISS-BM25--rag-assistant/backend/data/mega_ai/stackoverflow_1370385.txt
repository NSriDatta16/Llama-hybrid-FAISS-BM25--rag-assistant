[site]: stackoverflow
[post_id]: 1370385
[parent_id]: 
[tags]: 
maven cobertura reports 0% with aspectj

Has anyone been able to use maven2 with the Aspectj plugin, and Cobertura plugin? I keep getting 0% coverage, when I should get something. Cobertura instrumentation is running before Aspectj weaving which, I think, is messing up the Cobertura instrumentation. Also, Cobertura is giving warnings about my aspects, it looks like it is trying to parse them as java files. Any help would be appreciated. C:\project>mvn cobertura:cobertura [INFO] Scanning for projects... [INFO] ------------------------------------------------------------------------ [INFO] Building Project [INFO] task-segment: [cobertura:cobertura] [INFO] ------------------------------------------------------------------------ [INFO] Preparing cobertura:cobertura [INFO] [aspectj:compile {execution: compile}] [INFO] [resources:resources] [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] Copying 1 resource [INFO] [compiler:compile] [INFO] Nothing to compile - all classes are up to date [INFO] [cobertura:instrument] [INFO] Cobertura 1.9.2 - GNU GPL License (NO WARRANTY) - See COPYRIGHT file Cobertura: Loaded information on 538 classes. Instrumenting 538 files to C:\project\target\generated-classes\cobertura Cobertura: Saved information on 538 classes. Instrument time: 3938ms [INFO] Instrumentation was successful. [INFO] [aspectj:test-compile {execution: test-compile}] [INFO] [resources:testResources] [INFO] Using 'UTF-8' encoding to copy filtered resources. [INFO] Copying 1 resource [INFO] [compiler:testCompile] [INFO] Nothing to compile - all classes are up to date [INFO] [surefire:test] [INFO] Surefire report directory: C:\project\target\surefire-reports ------------------------------------------------------- T E S T S ------------------------------------------------------- Running project.AnnounceTypeActionTest Tests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.594 sec Results : Tests run: 3, Failures: 0, Errors: 0, Skipped: 0 [INFO] [cobertura:cobertura] [INFO] Cobertura 1.9.2 - GNU GPL License (NO WARRANTY) - See COPYRIGHT file Cobertura: Loaded information on 538 classes. Javancss.(InputStream).e: net.sourceforge.cobertura.javancss.ParseException: Encountered "aspect" at line 5, column 8. Was expecting one of: "@" ... "abstract" ... "final" ... "public" ... "synchronized" ... "strictfp" ... "class" ... "static" ... "protected" ... "private" ... "native" ... "transient" ... "volatile" ... "enum" ... "interface" ... [cobertura] WARN [main] net.sourceforge.cobertura.reporting.ComplexityCalculator - JavaNCSS got an error while parsing the java file C:\project\src\main\java\Project\logging\ApplicationLoggingAspect.aj ParseException in STDIN Last useful checkpoint: "project.logging." Encountered "aspect" at line 5, column 8. Was expecting one of: "@" ... "abstract" ... "final" ... "public" ... "synchronized" ... "strictfp" ... "class" ... "static" ... "protected" ... "private" ... "native" ... "transient" ... "volatile" ... "enum" ... "interface" ... Javancss.(InputStream).e: net.sourceforge.cobertura.javancss.ParseException: Encountered "aspect" at line 4, column 17. Was expecting one of: "@" ... "abstract" ... "final" ... "public" ... "synchronized" ... "strictfp" ... "class" ... "static" ... "protected" ... "private" ... "native" ... "transient" ... "volatile" ... "enum" ... "interface" ... [cobertura] WARN [main] net.sourceforge.cobertura.reporting.ComplexityCalculator - JavaNCSS got an error while parsing the java file C:\project\src\main\java\Project\logging\LoggingAspect.aj ParseException in STDIN Last useful checkpoint: "project.logging." Encountered "aspect" at line 4, column 17. Was expecting one of: "@" ... "abstract" ... "final" ... "public" ... "synchronized" ... "strictfp" ... "class" ... "static" ... "protected" ... "private" ... "native" ... "transient" ... "volatile" ... "enum" ... "interface" ... Javancss.(InputStream).e: net.sourceforge.cobertura.javancss.ParseException: Encountered "aspect" at line 6, column 17. Was expecting one of: "@" ... "abstract" ... "final" ... "public" ... "synchronized" ... "strictfp" ... "class" ... "static" ... "protected" ... "private" ... "native" ... "transient" ... "volatile" ... "enum" ... "interface" ... [cobertura] WARN [main] net.sourceforge.cobertura.reporting.ComplexityCalculator - JavaNCSS got an error while parsing the java file C:\project\src\main\java\Project\logging\TracingAspect.aj ParseException in STDIN Last useful checkpoint: "project.logging." Encountered "aspect" at line 6, column 17. Was expecting one of: "@" ... "abstract" ... "final" ... "public" ... "synchronized" ... "strictfp" ... "class" ... "static" ... "protected" ... "private" ... "native" ... "transient" ... "volatile" ... "enum" ... "interface" ... Report time: 5891ms [INFO] Cobertura Report generation was successful. [INFO] Cobertura 1.9.2 - GNU GPL License (NO WARRANTY) - See COPYRIGHT file Cobertura: Loaded information on 538 classes. Javancss.(InputStream).e: net.sourceforge.cobertura.javancss.ParseException: Encountered "aspect" at line 5, column 8. Was expecting one of: "@" ... "abstract" ... "final" ... "public" ... "synchronized" ... "strictfp" ... "class" ... "static" ... "protected" ... "private" ... "native" ... "transient" ... "volatile" ... "enum" ... "interface" ... [cobertura] WARN [main] net.sourceforge.cobertura.reporting.ComplexityCalculator - JavaNCSS got an error while parsing the java file C:\project\src\main\java\Project\logging\ApplicationLoggingAspect.aj ParseException in STDIN Last useful checkpoint: "project.logging." Encountered "aspect" at line 5, column 8. Was expecting one of: "@" ... "abstract" ... "final" ... "public" ... "synchronized" ... "strictfp" ... "class" ... "static" ... "protected" ... "private" ... "native" ... "transient" ... "volatile" ... "enum" ... "interface" ... Javancss.(InputStream).e: net.sourceforge.cobertura.javancss.ParseException: Encountered "aspect" at line 4, column 17. Was expecting one of: "@" ... "abstract" ... "final" ... "public" ... "synchronized" ... "strictfp" ... "class" ... "static" ... "protected" ... "private" ... "native" ... "transient" ... "volatile" ... "enum" ... "interface" ... [cobertura] WARN [main] net.sourceforge.cobertura.reporting.ComplexityCalculator - JavaNCSS got an error while parsing the java file C:\project\src\main\java\Project\logging\LoggingAspect.aj ParseException in STDIN Last useful checkpoint: "project.logging." Encountered "aspect" at line 4, column 17. Was expecting one of: "@" ... "abstract" ... "final" ... "public" ... "synchronized" ... "strictfp" ... "class" ... "static" ... "protected" ... "private" ... "native" ... "transient" ... "volatile" ... "enum" ... "interface" ... Javancss.(InputStream).e: net.sourceforge.cobertura.javancss.ParseException: Encountered "aspect" at line 6, column 17. Was expecting one of: "@" ... "abstract" ... "final" ... "public" ... "synchronized" ... "strictfp" ... "class" ... "static" ... "protected" ... "private" ... "native" ... "transient" ... "volatile" ... "enum" ... "interface" ... [cobertura] WARN [main] net.sourceforge.cobertura.reporting.ComplexityCalculator - JavaNCSS got an error while parsing the java file C:\project\src\main\java\Project\logging\TracingAspect.aj ParseException in STDIN Last useful checkpoint: "project.logging." Encountered "aspect" at line 6, column 17. Was expecting one of: "@" ... "abstract" ... "final" ... "public" ... "synchronized" ... "strictfp" ... "class" ... "static" ... "protected" ... "private" ... "native" ... "transient" ... "volatile" ... "enum" ... "interface" ... Report time: 3125ms [INFO] Cobertura Report generation was successful. [INFO] ------------------------------------------------------------------------ [INFO] BUILD SUCCESSFUL [INFO] ------------------------------------------------------------------------ [INFO] Total time: 30 seconds [INFO] Finished at: Wed Sep 02 17:15:45 VET 2009 [INFO] Final Memory: 26M/254M [INFO] ------------------------------------------------------------------------
