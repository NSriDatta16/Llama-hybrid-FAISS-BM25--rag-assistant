[site]: stackoverflow
[post_id]: 5544970
[parent_id]: 
[tags]: 
Making decisions based on find_or_create

I am trying to do something like this (creating many files at once): @files = params[:files].split(/\s*,\s*/) # comma-separated list is received failures = [] @files.each do |file| unless File.find_or_create_by_name(:name => file, ...) failures The above isn't quite working. When a file is 'found' rather than 'created', this is something that should prompt an error (i.e. because the file is NOT new). However, it is still not added to failures here ( find_or_create never fails in this case). How can I do the above in an elegant way? Note: I want to avoid presenting users with an obnoxiously-large list of errors if, for example, they mistakenly try to create the same list of 100 files twice. I feel that simply listing the errors in a sentence would be better than displaying an individual error notice for each one.
