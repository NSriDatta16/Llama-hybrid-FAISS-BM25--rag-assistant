[site]: stackoverflow
[post_id]: 5490820
[parent_id]: 
[tags]: 
Modifying Updated DOM in XQuery via XQIB

Newbie to XQuery. I am using XQIB ("XQuery In the Browser", i.e. Zorba implemented in JavaScript) to process it client-side. In the following test document, if I click the first button, "Add Paragraphs" and then the second button, "Make some paragraphs bold", it works as expected. However, if I click "Add Paragraphs" twice (regardless of whether or not I click the second button in-between), the second button stops working. Is this likely a bug in XQIB or does XQuery just behave differently than I expect? XQIB Test declare default element namespace "http://www.w3.org/1999/xhtml"; declare namespace hresume="http://microformats.org/profile/hresume"; declare namespace hcard="http://microformats.org/profile/hcard"; declare updating function local:addparas($loc, $evtObj) { insert node test1 as last into b:dom()//body, insert node test2 as last into b:dom()//body }; b:addEventListener(b:dom()//input[@value='Add paragraphs'], "onclick", xs:QName("local:addparas")) declare updating function local:boldparas($loc, $evtObj) { replace node b:dom()//p[.='test1'] with test1 }; b:addEventListener(b:dom()//input[@value='Make some parapgraphs bold'], "onclick", xs:QName("local:boldparas")) Insert example Hey
