[site]: stackoverflow
[post_id]: 1741656
[parent_id]: 
[tags]: 
Strip Characters Before Period If Filename Has Prefix in Bash

I have a directory that looks like this: pages/ folder1/ folder1.filename1.txt folder1.filename2.txt folder2/ folder2.filename4.txt folder2.filename5.txt folder3/ filename6.txt I want it to look like this: pages/ folder1/ filename1.txt filename2.txt folder2/ filename3.txt filename4.txt folder3/ filename5.txt With ls * | sed -e s/^[^.]*.// > /tmp/filenames.txt I get a file containing: filename1.txt filename2.txt filename3.txt filename4.txt txt How can I tell sed to ignore filenames of the form [filename].[suffix] and only look at filenames of the form [foldername].[filename].[suffix] ? The final script (as pointed out, the find command would simplify things, but this worked): for folder in $(ls .) do if test -d $folder then pushd $folder ls * | sed 's/.*\.\(.*\..*\)/\1/' > /tmp/filenames.txt ls * > /tmp/current.txt exec 3 This page is now a community wiki. You can add more elegant solutions below: for folder in $(ls .) do something better
