[site]: stackoverflow
[post_id]: 4106780
[parent_id]: 
[tags]: 
Ftp list directory behind a http proxy

I'm trying to list the files from a ftp address using FtpWebRequest class private IEnumerable EnumerateResources(Stream stream) { StreamReader reader = new StreamReader(stream); string line = null; while ((line = reader.ReadLine()) != null) { yield return new ResourceInfo(this, line); } } public override IReadOnlyList GetResources() { FtpWebRequest req = (FtpWebRequest)WebRequest.Create(Url); req.Method = WebRequestMethods.Ftp.ListDirectory; req.Credentials = Credentials; using (var resp = (FtpWebResponse)req.GetResponse()) { using (var stream = resp.GetResponseStream()) { return EnumerateResources(stream).ToReadOnly(); } } } This works ok in most cases. But when i'm behind an HTTP proxy the content of the response stream contains a HTML page that lists the files inside a tags. Is there any elegant way to treat this or should i just try to parse the HTML by hand.
