[site]: crossvalidated
[post_id]: 551206
[parent_id]: 
[tags]: 
Estimating covariance of multimodal distribution from series of samples

I have two random variables $X$ and $Y$ , the variables are distributed multimodally. I want to calculate covariance $Cov(X, Y)$ from a series of batches of data. For example I have a series $X_1 = \{x^1_1, x^1_2 ... x^1_n\}$ , $Y_1 = \{y^1_1, y^1_2 ... y^1_n\}$ then $$X_2 = \{x^2_1, x^2_2 ... x^2_n\}, Y_2 = \{y^2_1, y^2_2 ... y^2_n\}$$ $$...$$ $$ X_b = \{x^b_1, x^b_2 ... x^b_n\}, Y_b = \{y^b_1, y^b_2 ... y^b_n\}$$ All of them are non-uniformly samples, so sometimes It will sample one mode, and sometimes another. The question is how to calculate $Cov(X, Y)$ in this case ? Do I calculate $Cov(X,Y)$ for every batch ( $Cov_1, Cov_2 ... Cov_b$ ) and then average them ? Or maybe I concatenate all of the data and then calculate $CoV(X,Y)$ ? (Where the second method does not seem to me reasonable).
