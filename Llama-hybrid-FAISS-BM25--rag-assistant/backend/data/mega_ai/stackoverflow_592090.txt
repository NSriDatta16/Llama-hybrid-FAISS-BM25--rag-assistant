[site]: stackoverflow
[post_id]: 592090
[parent_id]: 587957
[tags]: 
Guy had a good idea, but it didn't handle child control (i.e. TPanel, TPageControl, etc) Here's a variant that uses recursion. Also, notice that i don't actually disable anchors - turn out that ScaleBy doesn't work with no anchors either. So now you can scale a form using: procedure ScaleFormBy(AForm: TForm; M, D: Integer); var StoredAnchors: TAnchorsArray; begin StoredAnchors := DisableAnchors(AForm); try AForm.ScaleBy(M, D); finally EnableAnchors(AForm, StoredAnchors); end; end; With the support library functions: TAnchorsArray = array of TAnchors; function DisableAnchors(ParentControl: TWinControl): TAnchorsArray; var StartingIndex: Integer; begin StartingIndex := 0; DisableAnchors_Core(ParentControl, Result, StartingIndex); end; procedure EnableAnchors(ParentControl: TWinControl; aAnchorStorage: TAnchorsArray); var StartingIndex: Integer; begin StartingIndex := 0; EnableAnchors_Core(ParentControl, aAnchorStorage, StartingIndex); end; procedure DisableAnchors_Core(ParentControl: TWinControl; var aAnchorStorage: TAnchorsArray; var StartingIndex: Integer); var iCounter: integer; ChildControl: TControl; begin if (StartingIndex+ParentControl.ControlCount+1) > (Length(aAnchorStorage)) then SetLength(aAnchorStorage, StartingIndex+ParentControl.ControlCount+1); for iCounter := 0 to ParentControl.ControlCount - 1 do begin ChildControl := ParentControl.Controls[iCounter]; aAnchorStorage[StartingIndex] := ChildControl.Anchors; if ([akLeft, akRight ] * ChildControl.Anchors) = [akLeft, akRight] then ChildControl.Anchors := ChildControl.Anchors - [akRight]; if ([akTop, akBottom] * ChildControl.Anchors) = [akTop, akBottom] then ChildControl.Anchors := ChildControl.Anchors - [akBottom]; Inc(StartingIndex); end; //Add children for iCounter := 0 to ParentControl.ControlCount - 1 do begin ChildControl := ParentControl.Controls[iCounter]; if ChildControl is TWinControl then DisableAnchors_Core(TWinControl(ChildControl), aAnchorStorage, StartingIndex); end; end; procedure EnableAnchors_Core(ParentControl: TWinControl; aAnchorStorage: TAnchorsArray; var StartingIndex: Integer); var iCounter: integer; ChildControl: TControl; begin for iCounter := 0 to ParentControl.ControlCount - 1 do begin ChildControl := ParentControl.Controls[iCounter]; ChildControl.Anchors := aAnchorStorage[StartingIndex]; Inc(StartingIndex); end; //Restore children for iCounter := 0 to ParentControl.ControlCount - 1 do begin ChildControl := ParentControl.Controls[iCounter]; if ChildControl is TWinControl then EnableAnchors_Core(TWinControl(ChildControl), aAnchorStorage, StartingIndex); end; end; end;
