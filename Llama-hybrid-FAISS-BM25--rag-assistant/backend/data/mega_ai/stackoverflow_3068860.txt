[site]: stackoverflow
[post_id]: 3068860
[parent_id]: 3068586
[tags]: 
Due to the way you have your arrays organized, you can use array_combine($keys, $values) to assemble $Arr1 and $Arr2 into associative arrays using keys from ['uid'] and values from ['weight'] . Using the associative arrays simplifies the calculation quite a bit: $combi1 = array_combine($Arr1['uid'], $Arr1['weight']); $combi2 = array_combine($Arr2['uid'], $Arr2['weight']); // loop through the keys from both arrays foreach (array_keys($combi1+$combi2) as $uid) { // use the value from $combi1, or 0 if it isn't set $value1 = isset($combi1[$uid]) ? $combi1[$uid] : 0; // use the value from $combi2, or 0 if it isn't set $value2 = isset($combi2[$uid]) ? $combi2[$uid] : 0; // calculate our final weight $result = $value1 * $Arr1Coeff + $value2 * $Arr2Coeff; echo " $uid final weight: ".$result."\n"; } Results Compared Your code: user 1 has found on 0 and RES=1.6 user 2 has found on 3 and RES=7.6 user 3 has not found and RES=3.5 user 1 has found somewhere user 4 has not found and RES=6 user 5 has not found and RES=4.5 user 2 has found somewhere My Code: user 1 final weight: 1.6 user 2 final weight: 7.6 user 3 final weight: 3.5 user 4 final weight: 6 user 5 final weight: 4.5
