[site]: stackoverflow
[post_id]: 3864295
[parent_id]: 3864242
[tags]: 
It's not too hard to do this with a proper HTML parser like Nokogiri which can perform clean-up as part of the processing method: bad_html = ' bad ' puts Nokogiri.fragment(bad_html).to_s # bad Once parsed properly, you should have fully balanced tags.
