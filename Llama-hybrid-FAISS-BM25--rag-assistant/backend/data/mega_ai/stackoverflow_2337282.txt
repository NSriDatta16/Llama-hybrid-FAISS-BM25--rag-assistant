[site]: stackoverflow
[post_id]: 2337282
[parent_id]: 2336925
[tags]: 
Just rearrange the code so to move up the util thing to front in its own try-catch block and keep the response untouched until the try block is passed. byte[] outputFileBytes; try { outputFileBytes = util_getBytesFromFile(docFile.getAbsolutePath()); } catch (Exception e) { throw e; // Do the forward call when this is caught in the calling method. If necessary, wrap in a more specific excaption so that you can distinguish what action to take. } response.setContentType("application/pdf"); response.setHeader("Expires", "0"); response.setHeader("Cache-Control", "must-revalidate, post-check=0, pre-check=0"); response.setHeader("Pragma", "public"); response.setHeader("Content-Disposition","attachment; filename=" + docFile.getName() ); response.setContentLength(outputFileBytes.length); ServletOutputStream outs = response.getOutputStream(); outs.write(outputFileBytes); // byte[] outs.close(); Be aware that this is memory hogging. If you can, rather let the util thing return an InputStream (no, not a ByteArrayInputStream ).
