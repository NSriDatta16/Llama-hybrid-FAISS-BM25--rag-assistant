[site]: stackoverflow
[post_id]: 5052182
[parent_id]: 
[tags]: 
Program received signal EXC_BAD_ACCESS accessing array

I am using the routine for getting pixel colour (this one: http://www.markj.net/iphone-uiimage-pixel-color/ ) and am faced with frequent app crashes when using it. The relevant portion of the code: unsigned char* data = CGBitmapContextGetData (cgctx); if (data != NULL) { int offset = (some calculations here); int alpha = data[offset]; // This code is linked to be ran on touchesBegan, touchesEnded and touchesMoved. It appears that the crashes occur during touchesEnded and touchesMoved events only, particularly when I start the touch on the target image, but move it off the boundaries of the image in the process. Is there any way to check what is the size of the data in the array pointed to by data object? What could be going wrong there? Edit : The calculation of offset: int offset = 4*((w*round(point.y)*x)+round(point.x)*x); Where point is the point where touch occurs, w is the width if the image, x is the scale of the image (for hi-res images on retina displays). I don't see anything wrong with the cgctx either. Basically, I am running the code from the link above almost unmodified, the particular code snippet I have problems with is in the function (UIColor*) getPixelColorAtLocation:(CGPoint)point so if you want the details of what the code does, just read the source there. Edit: another thing is that this never happens in the simulator, but often happens when testing on a device. Edit: Ideally I'd want to do nothing if the finger is currently not over the image, but have trouble figuring out when that happens. It looks like the relevant methods in SDK only show what view the touch originated in, not where it is now. How can I figure that out?
