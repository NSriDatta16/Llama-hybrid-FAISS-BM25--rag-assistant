[site]: stackoverflow
[post_id]: 4215133
[parent_id]: 4209618
[tags]: 
If I understand your design you are doing this: Splitting a string into paragraphs. Building a page by adding paragraphs one at a time After you add the paragraph to your page you check to see if there is a title by breaking up the entire page into words and looking for a word that contains the start of the HTML font tag. A page is considered complete if you found a title or it has more than 180 words So if you want to put titles at the top check the paragraph for a title first before you add it to your page. Of course this also assumes that the way you detect titles is accurate in the first place (which I am less than certain of...) Try this approach: Split into paragraphs Check the paragraph for a title marker If title found store the current page and start another with title paragraph as the first paragraph If title not found add paragraph and check page length If page length boundary reached store page and start another empty page That should work...
