[site]: stackoverflow
[post_id]: 4879793
[parent_id]: 
[tags]: 
jQuery: Calculate column totals for sections in table

I have the following table: MEALS 02/6 02/7 02/8 02/9 02/10 02/11 02/12 Total CONGREGATE - HEALTHY BALANCE Totals BEVERAGES 02/6 02/7 02/8 02/9 02/10 02/11 02/12 Total SKIM MILK Totals I'd like to be able to sum each column and insert the value into a texbox. I have it working for totals on a row level using the following jQuery: $('input.sum').change(function () { var sum = 0; $(this).closest('tr').find('input.sum').each(function (i) { var val = parseInt($(this).val(), 10); if (isNaN(val) || val === undefined) { return; } sum += val; }); $(this).closest('tr').find('input.total').val(sum); }); Each class for the column textbox totals has a name of totalCategory. Any help with this on how to calculate the column totals would be greatly appreciated. =========Edit============================ Ok. I'm working through this from the help below. I've changed my javascript to the following: $('input.sum').change(function () { var sum = 0; $(this).closest('tr').find('input.sum').each(function (i) { var val = parseInt($(this).val(), 10); if (isNaN(val) || val === undefined) { return; } sum += val; }); $(this).closest('tr').find('input.total').val(sum); var tableID = $(this).closest('tr').parents('table').attr('id'); var columnIndex = $(this).closest('td').attr("cellIndex"); sumOfColumns(tableID, columnIndex, true); }); I've also added a new function: function sumOfColumns(tableID, columnIndex, hasHeader) { var tot = 0; $("#" + tableID + " tr" + (hasHeader ? ":gt(0)" : "")) .children("td:nth-child(" + columnIndex + ") input.sum") .each(function () { tot += parseInt($(this).val()); }); alert(tot); } The problem now is that I don't get the correct value from the function sumOfColumns. Am I missing something with the code? Thanks for the help thus far. ======Solution========= Here is the solution I came up with: function sumOfColumns(tableID, columnIndex, hasHeader) { var tot = 0; $("#" + tableID + " tr" + (hasHeader ? ":gt(0)" : "")) .children("td:nth-child(" + (columnIndex + 1) + ")").find('input.sum') .each(function () { var val = parseInt($(this).val(), 10); if (isNaN(val) || val === undefined) { val = 0; $(this).val(0); } tot += parseInt(val); }); $("#" + tableID + " tr" + (hasHeader ? ":gt(0)" : "")).children("td:nth-child(" + (columnIndex + 1) + ")").find('input.totalCategory').val(tot); } $(document).ready(function () { $('input.sum').change(function () { //Initialize variable to hold the totals var sum = 0; var grandTotal = 0; //Sum the row numbers $(this).closest('tr').find('input.sum').each(function (i) { var val = parseInt($(this).val(), 10); if (isNaN(val) || val === undefined) { return; } sum += val; }); //Assign the row total to the textbox $(this).closest('tr').find('input.total').val(sum); //Calculate column totals var tableID = $(this).closest('tr').parents('table').attr('id'); var columnIndex = $(this).closest('td').attr("cellIndex"); sumOfColumns(tableID, columnIndex, true); //Calculate grand totals for the last row $("#" + tableID + " tr:last").find('input.totalCategory').each(function (i) { var val = parseInt($(this).val(), 10); if (isNaN(val) || val === undefined) { return; } grandTotal += val; }); $("#" + tableID + " tr:last").find('input.grandTotal').val(grandTotal); }); }); Thanks for all the help!
