[site]: stackoverflow
[post_id]: 4580149
[parent_id]: 
[tags]: 
Google Map - issue with map drag not releasing

I have a google map that is not releasing from being dragged when the mouse click is released. When I click the mouse, drag the map and release the click, the map still keeps dragging with the mouse. This causes some strange positioning stuff while users are trying to place markers. Here is my code: var initialLocation; var siberia = new google.maps.LatLng(44.9111410149792, -93.0537195); var newyork = new google.maps.LatLng(40.69847032728747, -73.9514422416687); var browserSupportFlag = new Boolean(); function initialize() { var myOptions = { zoom: 6, mapTypeId: google.maps.MapTypeId.HYBRID }; var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); myListener = google.maps.event.addListener(map, 'click', function(event) { placeMarker(event.latLng); google.maps.event.removeListener(myListener); }); google.maps.event.addListener(map, 'drag', function(event) { placeMarker(event.latLng); google.maps.event.removeListener(myListener); }); // Try W3C Geolocation (Preferred) if(navigator.geolocation) { browserSupportFlag = true; navigator.geolocation.getCurrentPosition(function(position) { initialLocation = new google.maps.LatLng(position.coords.latitude,position.coords.longitude); map.setCenter(initialLocation); }, function() { handleNoGeolocation(browserSupportFlag); }); // Try Google Gears Geolocation } else if (google.gears) { browserSupportFlag = true; var geo = google.gears.factory.create('beta.geolocation'); geo.getCurrentPosition(function(position) { initialLocation = new google.maps.LatLng(position.latitude,position.longitude); map.setCenter(initialLocation); }, function() { handleNoGeoLocation(browserSupportFlag); }); // Browser doesn't support Geolocation } else { browserSupportFlag = false; handleNoGeolocation(browserSupportFlag); } function handleNoGeolocation(errorFlag) { if (errorFlag === true) { alert("Geolocation service failed."); initialLocation = newyork; } else { alert("Your browser doesn't support geolocation. We've placed you in beautiful Minneapolis."); initialLocation = siberia; } map.setCenter(initialLocation); } function placeMarker(location) { var marker = new google.maps.Marker({ position: location, map: map, draggable: true }); map.setCenter(location); var markerPosition = marker.getPosition(); populateInputs(markerPosition); google.maps.event.addListener(marker, "drag", function (mEvent) { populateInputs(mEvent.latLng); }); } function populateInputs(pos) { document.getElementById("t1").value=pos.lat() document.getElementById("t2").value=pos.lng(); } }
