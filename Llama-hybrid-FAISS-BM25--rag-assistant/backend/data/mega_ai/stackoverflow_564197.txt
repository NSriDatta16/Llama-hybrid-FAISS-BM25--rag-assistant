[site]: stackoverflow
[post_id]: 564197
[parent_id]: 564100
[tags]: 
I think you want to replace luaL_loadfile with lua_dofile . lua_pcall is unnecessary. My guess is loading a file as a function using luaL_loadfile and then running it using pcall may not create the globals you want.
