[site]: stackoverflow
[post_id]: 5199458
[parent_id]: 5199300
[tags]: 
If the only thing that defines equality is relative to another object, then I am afraid that what you want is impossible. Think about it, there is no way to determine that an object is already included in the array unless I check every object, so I will have a complexity of O(n) no matter what. However, if you make the equality absolute then this is possible. In order to do that, you will have to produce a hash value for each of the objects. Two objects will be equal if and only if their hashes are equal. Once you have that, then you can achieve O(1) with a HashMap. Under the hoods, this is exactly what SplObjectStorage does, by taking the address of an object as its hash value.
