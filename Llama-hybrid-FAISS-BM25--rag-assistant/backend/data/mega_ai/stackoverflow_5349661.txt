[site]: stackoverflow
[post_id]: 5349661
[parent_id]: 5349028
[tags]: 
The code below does a couple of things, first it will get all the storeâ€™s categories - it then checks to see if they are active before continuing. Code Courtesy : magentocommerce forum getStoreCategories(); /* Get the current category the user is in */ $_current_category=$this->getCurrentCategory(); /* Get the current category path */ $_categorypath = $this->getCurrentCategoryPath(); ?> getIsActive()): $cur_category=Mage::getModel('catalog/category')->load($_main_category->getId()); $layer = Mage::getSingleton('catalog/layer'); $layer->setCurrentCategory($cur_category); /* Write the main categories */ ?> getCurrentCategory()->getUrl()?>"> getCurrentCategory()->getName();?> getCurrentCategory()->getId(), $_categorypath)): ?> getCurrentCategory()?> getCurrentChildCategories()?> count()):?> getIsActive()): $cur_subcategory=Mage::getModel('catalog/category')->load($_category->getId()); $layer = Mage::getSingleton('catalog/layer'); $layer->setCurrentCategory($cur_subcategory); ?> getCategoryUrl($_category)?>"> getName()?> setCurrentCategory($_current_category); ?> $_main_categories array was empty. This might be because you are referencing this phtml file with a wrong type attribute. You should use !
