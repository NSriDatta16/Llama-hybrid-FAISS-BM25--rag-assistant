[site]: stackoverflow
[post_id]: 2153763
[parent_id]: 
[tags]: 
mechanize and redirecting (ruby)

I thought that mechanize follows redirection by default ... by my script ends at the redirection page. How can I handle this? require 'rubygems' require 'mechanize' agent = WWW::Mechanize.new page = agent.get("http://www.vbulletin.org/forum/index.php") login_form = page.form_with(:action => 'login.php?do=login') login_form['vb_login_username'] = 'user name' login_form['vb_login_password'] = '' login_form['vb_login_md5password_utf'] = 'md5 hash from the password' login_form['vb_login_md5password'] = 'md5 hash from the password' page = agent.submit login_form #Display welcome message if logged in puts page.parser.xpath("/html/body/div/table/tr/td[2]/div/div").xpath('text()').to_s.strip output = File.open("login.html", "w") {|f| f.write(page.parser.to_html) } redirection page html 0) { timeout -= 1; } else { clearTimeout(timerID); window.status = ""; window.location = "http://www.vbulletin.org/forum/index.php"; } } var myvar = ""; var timeout = 20; exec_refresh(); //--> vBulletin.org Forum Redirecting... Thank you for logging in, my username. Click here if your browser does not automatically redirect you.
