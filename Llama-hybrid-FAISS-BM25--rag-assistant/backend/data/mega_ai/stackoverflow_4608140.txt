[site]: stackoverflow
[post_id]: 4608140
[parent_id]: 
[tags]: 
A SELECT statement that assigns a value to a variable must not be combined with data-retrieval operations

What is wrong with this statement? ALTER Function [InvestmentReturn].[getSecurityMinLowForPeriod](@securityid int, @start datetime, @end datetime) returns xml begin declare @results varchar(500) declare @low int declare @adjustedLow int declare @day varchar(10) if @end is null begin set @end = getdate() end set @adjustedLow = (select min(adjLow) from ( select Low * [InvestmentReturn].[fn_getCorporateActionSplitFactor](isq.securityid, @start, convert(varchar,day, 111)) as adjLow from securityquote isq where isq.securityid = @securityid and isq.day >= convert(varchar(10), @start, 111) and convert(varchar(10), @end, 111) >= isq.day and low != -1 ) as x) select top 1 @low = low , @day = day , @adjustedLow --select high from securityquote sq where day >= convert(varchar(10), @start, 111) and convert(varchar(10), @end, 111) >= day and securityid = @securityid and low != -1 order by low asc set @results= ' ' set @results = @results + ' ' + coalesce(cast(@start as varchar(20)), 'NULL') + ' ' set @results = @results + ' ' + coalesce(cast(@end as varchar(20)), 'NULL') + ' ' set @results = @results + ' ' + coalesce(cast(@securityID as varchar(10)), 'NULL') + ' ' set @results = @results + ' ' + coalesce(cast(@low as varchar(10)), '-11111') + ' ' set @results = @results + ' ' + coalesce(cast(@adjustedLow as varchar(10)), '-11111') + ' ' set @results = @results + ' ' + coalesce(@day, 'NULL') + ' ' set @results = @results + ' ' return @results Just to explain the answer (after getting where the error was caused), I simply removed @adjustedLow from the second select statement.
