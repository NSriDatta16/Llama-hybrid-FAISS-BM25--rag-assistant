[site]: stackoverflow
[post_id]: 1353321
[parent_id]: 
[tags]: 
Complex queries in linq to nhibernate

We are using accountability pattern for organizational structure. I using linq to nhibernate to find some departments and position but I have two problem. var query = Repository .Find(p => p.IsInternal == true) .Where(p => p.Parents.Any(c => c.Parent.PartyId == id)) .Where(p => ( p.PartyType.PartyTypeId == (int)PartyTypeDbId.Department && _secretariat.Departments.Select(c => c.PartyId).Contains(p.PartyId) ) || ( p.PartyType.PartyTypeId == (int)PartyTypeDbId.Position && p.Children.Any(c => c.AccountabilityType.AccountabilityTypeId == (int)AccountabilityTypeDbId.TenurePersonOfPosition && ((Person)c.Child).UserName != null) ) ); First : I got 'Unhandled Expression Type: 1003' for this part of query : '_secretariat.Departments.Select(c => c.PartyId).Contains(p.PartyId)' and I got Property not found 'UserName' We have many complex queries i think we need to use stored procedure. Sorry for bad Inglish!
