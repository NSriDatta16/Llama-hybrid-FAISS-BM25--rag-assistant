[site]: stackoverflow
[post_id]: 3155609
[parent_id]: 3141833
[tags]: 
Finally i found a solution on this mailing list Fop from PHP Java so that works great with the last released version of FOP 0.9x. the only problem now it's that when tomcat finished his works on the generated pdf, that last stay locked and no way to open it without restarting the Server. Any ideas ? thanks previously :) EDIT : Ok my bad being a really noob in Java didn't helped me. In fact the trouble was that i opened a FileOutputStream and forgot to close it at the very end. If this can help someone, here how i did it : require_once("java/Java.inc"); $input = 'D:/wamp/www/test/fo2pdf'; $output = 'D:/wamp/www/test/fo2pdf'; $sourcefile = 'test.fo'; $destfile = 'trys.pdf'; $pdffile = new Java("java.io.FileOutputStream", $output . "\\" . $destfile); $mimes = new Java("org.apache.fop.apps.MimeConstants"); $fopfactory = new Java("org.apache.fop.apps.FopFactory"); $fopf = $fopfactory->newInstance(); $fopf->setUserConfig( new Java("java.io.File", "D:/wamp/www/myvisitV3/outils/FOP/conf/fop.xconf") ); $userf = $fopf->newFOUserAgent(); $fop = $fopf->newFop($mimes->MIME_PDF, $userf, $pdffile); $transformerclass = new Java("javax.xml.transform.TransformerFactory"); $transformerfactory = $transformerclass->newInstance(); $transformerf = $transformerfactory->newTransformer(); $src = new Java("javax.xml.transform.stream.StreamSource", new Java("java.io.File", $input . "\\" . $sourcefile )); $res = new Java("javax.xml.transform.sax.SAXResult", $fop->getDefaultHandler()); $transformerf->transform($src, $res); $pdffile->close();
