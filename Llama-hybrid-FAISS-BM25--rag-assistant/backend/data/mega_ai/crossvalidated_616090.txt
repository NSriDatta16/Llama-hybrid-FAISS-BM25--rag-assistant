[site]: crossvalidated
[post_id]: 616090
[parent_id]: 
[tags]: 
Weighed average (percentage) depending on the number of facilities in each given region

I have 10 regions with facilities (different number of facilities in each region) that test people for presence of condition A. However, there are also facilities, that were included in the pilot project, and in case person has condition A (positive result) the one can also be tested for presence of condition B. I want to calculate the coverage of testing on condition B in each region, e. g. what percentage of people with condition A were also tested on condition B on the facilities that were included in the pilot project in each region in each given month (ratio of number of people tested for condition B / all people tested), and then compare the coverage in each region in different periods. As the total number of facilities in each region is different and the number of facilities included in the pilot project is also different, how can I calculate the weighed percentage of condition B testing coverage, therefore to take into account the number of facilities in the process of percentage calculation. Demo table: Facility name Condition A result Included in the pilot project Condition B result Date tested for condition B Xy Positive 1 Positive 01/04/2023 Np Positive 0
