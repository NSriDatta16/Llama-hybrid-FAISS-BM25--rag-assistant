[site]: stackoverflow
[post_id]: 5224662
[parent_id]: 5224306
[tags]: 
It looks like you're SOL with widgets you're inserting into CMS pages via the {{widget...}}} tag. Unlike instances, or adding it directly via a Package Layout XML update file, Magento appears to render these blocks on the fly. That is, its not until toHtml is called on the CMSs content block that Magento instantiates a {{widget...}} block. By then the head block has already rendered, and manipulating it programmatically no longer has any effect. Here's the approach I'd take. It sounds adding javascript still works (which makes sense, as the CMS content block will be rendering before the before_body_end block.) Look into techniques for loading CSS files via Javascript (older link, google around if you want something web 2ish). That way you can add a javascript block that can add a CSS file. This way all your code is still confined to the widget, and you still get validating html output. It's a pretty common technique. Other approaches include Just added your styles to the document inline. Bad HTML practices and all that (style aren't in the head), but you wouldn't be the first person to do this. Having a block that's always added to the head, and contains conditional rendering logic. Immediately prior to rendering, have it check the layout object for your widget (via the type) OR have it check if this request is for a CMS page, and if it is check CMS page's content for a directive ( {{widget...}} ) for rendering your widget. If either is true, have CSS link rendered. If it isn't, the link doesn't render.
