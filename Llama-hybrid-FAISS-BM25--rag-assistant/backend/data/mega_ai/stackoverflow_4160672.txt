[site]: stackoverflow
[post_id]: 4160672
[parent_id]: 
[tags]: 
Clever uses of linker scripts?

A great comment on my answer describing how to use linker scripts to make a ctor-like function list pointed out that recent GNU ld has much improved support for grafting new sections into system linker scripts with -Wl,-T... and INSERT BEFORE / INSERT AFTER . This got me thinking about other linker script tricks. For a network card firmware I modified the linker script to group together the runtime modules of the firmware so that they would all be in a contiguous block that could be in L1 cache without conflicts. To clean up stragglers (where I couldn't group by .o ) I used section attributes on individual functions. Performance counters verified that it actually worked (reduced L1 instruction cache misses to almost nothing). What other clever things have you accomplished with linker scripts?
