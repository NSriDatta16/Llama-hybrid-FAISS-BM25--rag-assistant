[site]: stackoverflow
[post_id]: 2037687
[parent_id]: 
[tags]: 
Get content of response with StatusCode 401

I'm trying to establish a connection to a server that sends 401 Authentication Error for all my requests along with the normal html response. e.g. However, I also want to read the HTML response that is sent alongwith so that I can parse that. An example header exchange captured using LiveHTTPHeaders: Clearly, content-length is non-zero. Firefox shows it to be javascript. https://172.31.1.251:1003/fgtauth?73e285357b2dc5cc Request: GET /fgtauth?73e285357b2dc5cc HTTP/1.1 Host: 172.31.1.251:1003 User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.1b4) Gecko/20090423 Firefox/3.5b4 (.NET CLR 3.5.30729) Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Accept-Language: en-us,en;q=0.5 Accept-Encoding: gzip,deflate Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7 Keep-Alive: 300 Connection: keep-alive Response: HTTP/1.x 401 Unauthorized WWW-Authenticate: Fortigate Content-Length: 1091 Connection: Keep-Alive Cache-Control: no-cache Content-Type: text/html At this point, a form opens in firefox that asks me to enter my username and password. https://172.31.1.251:1003/ Request: POST / HTTP/1.1 Host: 172.31.1.251:1003 User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.0; en-US; rv:1.9.1b4) Gecko/20090423 Firefox/3.5b4 (.NET CLR 3.5.30729) Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Accept-Language: en-us,en;q=0.5 Accept-Encoding: gzip,deflate Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7 Keep-Alive: 300 Connection: keep-alive Referer: https://172.31.1.251:1003/ Content-Type: application/x-www-form-urlencoded Content-Length: 93 magic=73e285357b2dc5cc&username=uuxx&password=xxuu&4Tredir=http%3A%2F%2Fwww.google.com%2F Response: HTTP/1.x 401 Unauthorized WWW-Authenticate: Fortigate Content-Length: 924 Connection: Keep-Alive Cache-Control: no-cache Content-Type: text/html At this point I am redirected to another URL. However, the problem that I have is how to get the content of lenght 924 that is sent along with the 401 Unauthorized, because that content will help me in doing what I want to do further. But the very line: WebResponse loginResponse = loginRequest.GetResponse(); throws an exception. I will be grateful for any suggestions to help me get to the actual content. Thanks.
