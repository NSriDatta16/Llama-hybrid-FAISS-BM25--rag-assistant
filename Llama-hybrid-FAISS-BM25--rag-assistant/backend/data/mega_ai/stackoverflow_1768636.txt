[site]: stackoverflow
[post_id]: 1768636
[parent_id]: 1621496
[tags]: 
This one works good for me: function get_web_page( $url ) { $options = array( CURLOPT_RETURNTRANSFER => true, // return web page CURLOPT_HEADER => false, // don't return headers CURLOPT_FOLLOWLOCATION => true, // follow redirects CURLOPT_ENCODING => "", // handle all encodings CURLOPT_USERAGENT => "spider", // who am i CURLOPT_AUTOREFERER => true, // set referer on redirect CURLOPT_CONNECTTIMEOUT => 120, // timeout on connect CURLOPT_TIMEOUT => 120, // timeout on response CURLOPT_MAXREDIRS => 10, // stop after 10 redirects ); $ch = curl_init( $url ); curl_setopt_array( $ch, $options ); $content = curl_exec( $ch ); $err = curl_errno( $ch ); $errmsg = curl_error( $ch ); $header = curl_getinfo( $ch ); curl_close( $ch ); $header['errno'] = $err; $header['errmsg'] = $errmsg; $header['content'] = $content; return $header; } As a function you can call it over and over. (as asyncronous threads) So really all you would need to do is write a while loop to handle receiving and handling all the received curls.. once that is done your script can finish, avoiding the halt at end of code issue. Another point.. you dont need to format your while loops like this.. do { ... } while (conditional) you can just use: while (conditional) { ... }
