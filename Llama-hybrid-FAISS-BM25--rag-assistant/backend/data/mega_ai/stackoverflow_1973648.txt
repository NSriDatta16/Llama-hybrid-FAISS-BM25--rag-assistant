[site]: stackoverflow
[post_id]: 1973648
[parent_id]: 1972934
[tags]: 
One could modify the incoming html before parsing. html = open("http://scrape.example.com/search?q=#{ticker_symbol}").string html.gsub!(/class="(foo_\d+_bar)"/){ |s| "class=\"foo_bar #{$1}\"" } doc = Hpricot(html) After that you can identify the elements using the foo_bar class. This is far from elegant or general but could prove to be more efficient.
