[site]: stackoverflow
[post_id]: 2418882
[parent_id]: 
[tags]: 
Entity Data Model (edmx) services returning sql server 2008 image type as binary access by iPhone SDK through NSURLConnection

I have a sql image type field coming back in an EDM (Entity Data Model) .NET service call. The image field is stored as binary in sql server 2008. However, I'm not sure what is happening to the image data, or what type of encoding. And since the webservices are generated behind the scenes, I canâ€™t figure out if the service is doing something funky to the image binary data before sending it across the wire. Anyone done anything of the sort? I've tried base64 decoding the image, tried setting the NSURLConnection request encoding to NSUTF8StringEncoding, all with no luck Here's a sample packet sniff: HTTP/1.1 200 OK Date: Tue, 09 Mar 2010 19:41:13 GMT Server: Microsoft-IIS/6.0 X-Powered-By: ASP.NET X-AspNet-Version: 2.0.50727 DataServiceVersion: 1.0; Cache-Control: no-cache Content-Type: application/json;charset=utf-8 Content-Length: 41809 { "d" : [ { "__metadata": { "uri": " http://11.111.11.111:8002/domain/myservice.svc/StudentByGroupID(createDate=datetime \'2009-12-15T11%3A16%3A18.14\',firstName=\'Niansong\',groupId=1,isActive=1,lastName=\'Liu\',studentGroupId=28,studentId=6)", "type": "MyModel.StudentByGroupID" }, "studentId": 6, "firstName": "Niansong", "lastName": "Liu", "createDate": "/Date(1260875778140)/", "updateDate": null, "isActive": 1, "image": "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", "studentGroupId": 28, "groupId": 1 } ] }
