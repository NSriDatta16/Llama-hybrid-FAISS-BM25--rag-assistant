[site]: stackoverflow
[post_id]: 2790980
[parent_id]: 2776172
[tags]: 
If you have ever wanted to lazy load some HTML using jquery .load() you need to know that IE and FF don't treat relative HREFs the same way. IE adds a ghost domain to the relative URL (to the lazy loaded html). As a result, if you load a DIV of content full of HREFs you cannot count on using $(a[href^=/]) to find all relative HREFs. IE won't have any. So I wrote this: (Bear with me, I'm a CSS guy who does some jQuery. I know this could be written MUCH more elegantly. Could someone help me out with that?) $('.footer-wrap').ready(function() { $('.tab1-cont').load('/web_Content.htm .tab1-cont'); return false; }); $(".footer-wrap").hover(function() { //Step 1 //IE seems to add a ghost domain to lazy loaded html. In my case, "site.heritage" is the domain, so IE added to lazy loaded href URL. //So I sniff for "site" in the URL $(".footer-wrap a[href*=site]") //on all results .each(function() { //clean up the ghost domain by getting the href and replacing "http://site.web.org" with nothing var hrefValue = $(this).attr("href").replace('http://site1.web.org', '').replace('http://site2.web.org', '').replace('http://site.web.org', ''); //add the proper domain to the clean relative href URL $(this).attr("href", "http://www.web.org" + hrefValue); }); //Step 2 //FF just needs this to make a relative url into an absolute URL because it treats lazy loaded html like regular html. $(".footer-wrap a[href^=/]") .each(function() { var hrefValue = $(this).attr("href"); $(this).attr("href", "http://www.web.org" + hrefValue); }); }); Perhaps lazy loaded HREFs in IE don't act this way for all people all the time... and I just found some niche circumstance. I don't know. Hopefully this HREF post will save someone some time.
