[site]: stackoverflow
[post_id]: 3090756
[parent_id]: 
[tags]: 
Configuring NHibernate via Web.config in ASP.NET 4.0

So my unit tests are green, time to integrate this shiny new NHibernate-driven DAL in to my web app! I don't really want to maintain two configuration files so I've migrated hibernate.cfg.xml in to my Web.config file (i.e. I copypasta'd the contents of hibernate.cfg.xml in to my Web.config). Here is the relevant bits from my Web.config: NHibernate.Connection.DriverConnectionProvider NHibernate.Driver.SqlClientDriver Data Source=(local)\SQLExpress;Initial Catalog=MyProject;Integrated Security=True NHibernate.Dialect.MsSql2008Dialect NHibernate.ByteCode.Castle.ProxyFactoryFactory, NHibernate.ByteCode.Castle In Global.asax, on Application_Start, I try to initialize my configuration: protected void Application_Start() { AreaRegistration.RegisterAllAreas(); RegisterRoutes(RouteTable.Routes); SessionProvider.Initialize(); } All this really does is call new Configuration().Configure().AddAssembly("MyProject"); in accordance with the configuration code above. Interesting result: When I first hit the page, an exception is thrown: [FileNotFoundException: Could not find file 'D:\Build\MyProject\Source\MyProject.Web\bin\hibernate.cfg.xml'.] Well, I put the configuration in Web.config, shouldn't it be lookign there? Do I need to indicate "hey, NHibernate, pay attention -- the config data is in Web.config, dummy!" anywhere? When I then hit F5, the page comes up. Hurray! Now I try to do something with data access and I get this exception: [ProxyFactoryFactoryNotConfiguredException: The ProxyFactoryFactory was not configured. Initialize 'proxyfactory.factory_class' property of the session-factory configuration section with one of the available NHibernate.ByteCode providers. Example: NHibernate.ByteCode.LinFu.ProxyFactoryFactory, NHibernate.ByteCode.LinFu Example: NHibernate.ByteCode.Castle.ProxyFactoryFactory, NHibernate.ByteCode.Castle ] Huh, that's kinda weird too -- this worked just fine in test with configuration in hibernate.cfg.xml...and I am specifying this property in my Web.config...I wonder what could possibly be up? So, anyone have any ideas? Any help in solving this mystery would be super! *Update: I found the issue. It looks like I wasn't using the correct type in my configs section! D'oh. I have a complete write up on my blog .
