[site]: stackoverflow
[post_id]: 3543146
[parent_id]: 2752713
[tags]: 
(I will probably state the obvious here, but, if that is the case, please overlook those points and read on.) General Distances ("As The Crow Flies" and for Limiting Search/Processing Loads) Determining Distances Between Two Points can be done within the SQL Database / SELECT statement. Reference: MySQL Great Circle (Haversine Formula) SELECT acos( cos(radians( $latitude0 )) * cos(radians( $latitude1 )) * cos(radians( $longitude0 ) - radians( $longitude1 )) + sin(radians( $latitude0 )) * sin(radians( $latitude1 )) )*6371 AS greatCircleDistanceKMs FROM yourTable That can be used dynamically, if the Lat/Long of the point you are using to compare is likely to change (ie the user's address, etc.), or could be used to perform an UPDATE of a number of files in the event that the point you are using to compare is set (the location of your office, etc.) If it is to be used dynamically, then it is also recommended that the set of rows this function is run against be limited. WHERE searchLatitude BETWEEN latitude+1 AND latitude-1 AND searchLongitude BETWEEN longitude+1 and longitude-1 Which will, essentially, create a 1 degree box around the searchLatitude/searchLongitude point, and reduce the number of calculations required. Exact Distances For Final Results The Google Directions API provides functionality for you to get the actual travelling distance between two points using a simple HTTP Request. An example URL would be, for "Chhatrapati Shivaji Int'l Airport" to "Taj Mahal Palace & Tower": http://maps.google.com/maps/api/directions/xml?origin=Chhatrapati+Shivaji+International+Airport&destination=Taj+Mahal+Palace+%26+Tower,+Mahakavi+Bhushan+Road,+Apollo+Bandar+Mumbai&sensor=false That will return an XML Response of: OK Western Express Hwy/NH 8 DRIVING 19.0966100 72.8656200 19.1091100 72.8539000 yxpsBcqv{LuAd@aEf@eBl@a^lQqDpBiS`PgAnAeArCoA`JiAbK B???@?@???B 112 2 mins Head &lt;b&gt;north&lt;/b&gt; on &lt;b&gt;Sahar Rd&lt;/b&gt; toward &lt;b&gt;I A Project Rd&lt;/b&gt; &lt;div style=&quot;font-size:0.9em&quot;&gt;Pass by Priyadeep (on the left in 1.9&amp;nbsp;km)&lt;/div&gt; 1978 2.0 km DRIVING 19.1091100 72.8539000 19.1061700 72.8538800 }fssB{gt{LpHr@zCO|B_@ B??B 52 1 min Turn &lt;b&gt;left&lt;/b&gt; toward &lt;b&gt;Western Express Hwy/NH 8&lt;/b&gt; 332 0.3 km DRIVING 19.1061700 72.8538800 19.0991500 72.8540500 qtrsBwgt{L|BAbTqCfCQrBJ|IvB B??@?B 82 1 min Continue straight onto &lt;b&gt;Western Express Hwy/NH 8&lt;/b&gt; &lt;div style=&quot;font-size:0.9em&quot;&gt;Pass by Giriraj Ceramic Products (on the left in 750&amp;nbsp;m)&lt;/div&gt; 799 0.8 km DRIVING 19.0991500 72.8540500 19.0931000 72.8507700 uhqsByht{LdMlDxG|AdC~@jBdAzBjB~@hAj@fA B??@???B 35 1 min Slight &lt;b&gt;right&lt;/b&gt; toward &lt;b&gt;Western Express Hwy/NH 8&lt;/b&gt; 772 0.8 km DRIVING 19.0931000 72.8507700 19.0507200 72.8404700 {bpsBits{LjAfCr@rCbCdS`@vB\dAhAdBvBhB`Af@`Ch@bBHnAExCk@nAm@l@e@nGuF~Ay@fDaAlXcDxx@f@~UBbPPvVF|HLhXAdD\~Bn@lCxA|AbBjAdCz@nDfGfS B????@???@??@????@@?????@???@??B 252 4 mins Continue straight onto &lt;b&gt;Western Express Hwy/NH 8&lt;/b&gt; &lt;div style=&quot;font-size:0.9em&quot;&gt;Pass by St Joseph's (on the left in 3.5&amp;nbsp;km)&lt;/div&gt; 5666 5.7 km DRIVING 19.0507200 72.8404700 19.0429200 72.8401400 _zgsB}sq{LfBjBj@ZxB^h@XZfAN~Ab@b@l@VnJEn@MrBg@lQgH B???????@?@?B 54 1 min Exit onto &lt;b&gt;S V Rd&lt;/b&gt; &lt;div style=&quot;font-size:0.9em&quot;&gt;Pass by Saraswati Dattatray Electricals &amp;amp; Co., (SDEC) (on the left in 500&amp;nbsp;m)&lt;/div&gt; 1019 1.0 km DRIVING 19.0429200 72.8401400 19.0332800 72.8422800 gifsB{qq{LXAxCcAfLsEzDiAxDs@jC[lFQtIDdFR B????@???B 77 1 min Continue onto &lt;b&gt;A S Gaya Marg/Lady Jamshedji Rd&lt;/b&gt; &lt;div style=&quot;font-size:0.9em&quot;&gt;Pass by Dawood Khan (on the left)&lt;/div&gt; 1117 1.1 km DRIVING 19.0332800 72.8422800 19.0249800 72.8406100 _mdsBg_r{LtI^lb@pFbBXrA`@ B???B 62 1 min At Emerald Surgicare (P) Ltd, continue onto &lt;b&gt;Lady Jamshedjee Rd&lt;/b&gt; &lt;div style=&quot;font-size:0.9em&quot;&gt;Pass by Petrol Pump (on the left)&lt;/div&gt; 941 0.9 km DRIVING 19.0249800 72.8406100 19.0217700 72.8424900 cybsBytq{LvEeB~@gAlB}CXSx@SfDC B?????B 41 1 min Turn &lt;b&gt;left&lt;/b&gt; at Gadkari Chowk onto &lt;b&gt;NC Kelkar Rd&lt;/b&gt; &lt;div style=&quot;font-size:0.9em&quot;&gt;Pass by Dhyan Securities Pvt Ltd (on the right)&lt;/div&gt; 432 0.4 km DRIVING 19.0217700 72.8424900 19.0179000 72.8475600 aebsBq`r{L^c@tAm@XB^QpHeNbHoL B?????B 63 1 min At the roundabout, take the &lt;b&gt;1st&lt;/b&gt; exit onto &lt;b&gt;Tilak Bridge&lt;/b&gt; &lt;div style=&quot;font-size:0.9em&quot;&gt;Pass by Vanmali Chk (on the right)&lt;/div&gt; 702 0.7 km DRIVING 19.0179000 72.8475600 19.0131500 72.8550800 {lasBg`s{LUa@Fs@RSv@DvZ{j@ B????B 160 3 mins At the roundabout, take the &lt;b&gt;2nd&lt;/b&gt; exit onto &lt;b&gt;Tilak Rd&lt;/b&gt; &lt;div style=&quot;font-size:0.9em&quot;&gt;Pass by Sargam Florists (on the left)&lt;/div&gt; 987 1.0 km DRIVING 19.0131500 72.8550800 18.9933600 72.8515000 eo`sBgot{LzB`AdDr@jMv@rHVhRN`Zj@vMjB~E^zEt@lIbCdDbC B??@??@??@?B 233 4 mins Turn &lt;b&gt;right&lt;/b&gt; at Shobha Hospital onto &lt;b&gt;Rafi Ahmed Kidwai Marg&lt;/b&gt; &lt;div style=&quot;font-size:0.9em&quot;&gt;Pass by Sukkur Bhawan (on the left)&lt;/div&gt; 2264 2.3 km DRIVING 18.9933600 72.8515000 18.9675800 72.8448800 os|rB{xs{L~AbBbMtOtYjb@dAn@pCr@`ZsEp[aEvJ}AzPwBzBa@nBI`E@zFz@~Ad@^T B??@?@????@????B 203 3 mins Continue onto &lt;b&gt;Barrister Nath Pai Marg&lt;/b&gt; &lt;div style=&quot;font-size:0.9em&quot;&gt;Pass by Everest Marine Ply - J. Himatlal &amp;amp; Co. (on the left in 1.6&amp;nbsp;km)&lt;/div&gt; 3360 3.4 km DRIVING 18.9675800 72.8448800 18.9382900 72.8379900 krwrBoor{LxCf@rBh@`Bf@nCpAnAFpAEfBSr@Y^?dk@nIdm@rJbEb@rz@xM B????????????B 246 4 mins At Our Lady of the Rosary Church, continue onto &lt;b&gt;P D Mello Rd&lt;/b&gt; &lt;div style=&quot;font-size:0.9em&quot;&gt;Pass by Petrol Pump (on the left in 1.9&amp;nbsp;km)&lt;/div&gt; 3356 3.4 km DRIVING 18.9382900 72.8379900 18.9344900 72.8371000 i{qrBmdq{LjIlAvI|ArAD B??B 56 1 min Continue onto &lt;b&gt;S Bhagat Singh Marg&lt;/b&gt; &lt;div style=&quot;font-size:0.9em&quot;&gt;Pass by SIB (on the left)&lt;/div&gt; 433 0.4 km DRIVING 18.9344900 72.8371000 18.9321900 72.8357900 qcqrB{~p{Ll@?bDf@^RtC`DbAf@ B????B 32 1 min Continue onto &lt;b&gt;Mint Rd&lt;/b&gt; &lt;div style=&quot;font-size:0.9em&quot;&gt;Pass by Mint Police Station (on the left)&lt;/div&gt; 302 0.3 km DRIVING 18.9321900 72.8357900 18.9243200 72.8320700 euprBuvp{LdIj@XNhAxArA`ApHfCtDX`C@lA\r@n@fAvCf@f@j@LNR?XnC`@ B???????@??????B 97 2 mins Continue onto &lt;b&gt;Shahid Bhagat Singh Rd/Shahid Bhagat SIngh Marg&lt;/b&gt; &lt;div style=&quot;font-size:0.9em&quot;&gt;Go through 1 roundabout&lt;/div&gt;&lt;div style=&quot;font-size:0.9em&quot;&gt;Pass by Town Hall (on the left)&lt;/div&gt; 1022 1.0 km DRIVING 18.9243200 72.8320700 18.9230100 72.8334800 _dorBm_p{LvFmERa@Ei@ B??B 30 1 min Turn &lt;b&gt;left&lt;/b&gt; at CBI onto &lt;b&gt;Mahakavi Bhushan Rd/Rajkavi Ghushan Marg&lt;/b&gt; &lt;div style=&quot;font-size:0.9em&quot;&gt;Pass by Kalajot Hospital (on the right)&lt;/div&gt; 220 0.2 km DRIVING 18.9230100 72.8334800 18.9219500 72.8335500 y{nrBghp{LdA_@t@KvA\ B??B 46 1 min Turn &lt;b&gt;right&lt;/b&gt; at Mumbai Hotels Booking onto &lt;b&gt;Appolo Bunder/P J Ramchandani Marg&lt;/b&gt; &lt;div style=&quot;font-size:0.9em&quot;&gt;Destination will be on the right&lt;/div&gt; 124 0.1 km 1933 32 mins 25826 25.8 km 19.0966100 72.8656200 18.9219500 72.8335500 Chhatrapati Shivaji International Airport, Vile Parle East, Mumbai, Maharashtra, India Taj Mahal Palace &amp; Tower, P J Ramchandani Marg, Apollo Bandar, Mumbai, Maharashtra 400001, India yxpsBcqv{LuAd@aEf@eBl@a^lQqDpBiS`PgAnAeArCoA`JiAbKpHr@nAChEk@|BAbTqCfCQl@@dAHhE`AbJhCxQvEfDdBzBjB~@hAvBnEr@rCbCdS`@vBh@xA|@pAvBhB`Af@`Ch@bBHnAExCk@nAm@l@e@nGuF~Ay@fDaAlXcDxx@f@~UBbPPvVF|HLhWClDX|Bh@fDdBz@x@l@z@~@rBz@nDfGfSfBjBj@ZxB^h@XZfAN~Ab@b@l@VnJErAYnA[vEgBPObJoDXAxCcAfLsEzDiAdB]vGw@jIM~DFzPr@lb@pFbBXrA`@vEeB~@gAlB}CXSx@SfDC^c@tAm@XB^QpHeNbHoLUa@Fs@RSv@DvZ{j@zB`AdDr@jMv@rHVhRN`Zj@vMjB`DRnFt@vJnChCfBjAhArNjQtYjb@dAn@pCr@`ZsEp[aEvJ}AzPwBzBa@nBI`E@zFz@~Ad@^TxCf@rBh@`Bf@nCpAnAFpAEfBSr@Y^?dk@nIdm@rJbEb@b\bFnWhEjOxBvI|A`CDbDf@^RtC`DbAf@dIj@XNhAxAzBxAhGnBtDX`C@lA\r@n@fAvCf@f@j@LNR?XnC`@vFmERa@Ei@dA_@t@KvA\ B???@?@???A??????@???@???@???@???A??@????@@?????@???@???@???????@?@?????????@??@??A???@?????@??????A??@??@???@?????@??????@??????@????@????????@??????@???@?????@??????B The elements containing the details for the full journey are: DirectionsResponse > route > distance > value The distance, in a base unit, for the complete journey DirectionsResponse > route > distance > text The distance, in a plain English form, for the complete journey DirectionsResponse > route > duration > value The estimated travel time, in a base unit (seconds), for the complete journey DirectionsResponse > route > duration > text The estimated travel time, in a plain English form, for the complete journey You could then use the PHP DOMDocument CLASS to parse the result and extract these details. NOTE: From the Google Directions API page " Use of the Google Directions API is subject to a query limit of 2,500 directions requests per day . Individual directions requests may contain up to 8 intermediate waypoints in the request. Google Maps Premier customers may query up to 100,000 directions requests per day , with up to 23 waypoints allowed in each request. "
