[site]: stackoverflow
[post_id]: 1811817
[parent_id]: 1811800
[tags]: 
This might be horrendously slow, but what I'd recommend is to break the scanned surface into quarters/16ths and re-color them so that the average grayscale level is similar across the page. (Might break if you have pages with large margins though)
