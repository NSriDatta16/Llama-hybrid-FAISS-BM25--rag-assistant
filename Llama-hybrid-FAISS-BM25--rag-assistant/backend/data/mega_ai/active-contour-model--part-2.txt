le E_{\text{internal}}={\frac {1}{2}}(\alpha \,\!(s)\left|\mathbf {v} _{s}(s)\right\vert ^{2})+{\frac {1}{2}}(\beta \,\!(s)\left|\mathbf {v} _{ss}(s)\right\vert ^{2})={\frac {1}{2}}{\bigg (}\alpha \,\!(s)\left\|{\frac {d{\bar {v}}}{ds}}(s)\right\Vert ^{2}+\beta \,\!(s)\left\|{\frac {d^{2}{\bar {v}}}{ds^{2}}}(s)\right\Vert ^{2}{\bigg )}} where α ( s ) {\displaystyle \alpha (s)} and β ( s ) {\displaystyle \beta (s)} are user-defined weights; these control the internal energy function's sensitivity to the amount of stretch in the snake and the amount of curvature in the snake, respectively, and thereby control the number of constraints on the shape of the snake. In practice, a large weight α ( s ) {\displaystyle \alpha (s)} for the continuity term penalizes changes in distances between points in the contour. A large weight β ( s ) {\displaystyle \beta (s)} for the smoothness term penalizes oscillations in the contour and will cause the contour to act as a thin plate. Image energy Energy in the image is some function of the features of the image. This is one of the most common points of modification in derivative methods. Features in images and images themselves can be processed in many and various ways. For an image I ( x , y ) {\displaystyle I(x,y)} , lines, edges, and terminations present in the image, the general formulation of energy due to the image is E image = w line E line + w edge E edge + w term E term , {\displaystyle E_{\text{image}}=w_{\text{line}}E_{\text{line}}+w_{\text{edge}}E_{\text{edge}}+w_{\text{term}}E_{\text{term}},} where w line {\displaystyle w_{\text{line}}} , w edge {\displaystyle w_{\text{edge}}} , w term {\displaystyle w_{\text{term}}} are weights of these salient features. Higher weights indicate that the salient feature will have a larger contribution to the image force. Line functional The line functional is the intensity of the image, which can be represented as E line = I ( x , y ) {\displaystyle E_{\text{line}}=I(x,y)} The sign of w line {\displaystyle w_{\text{line}}} will determine whether the line will be attracted to either dark lines or light lines. Some smoothing or noise reduction may be used on the image, which then the line functional appears as E line = filter ⁡ ( I ( x , y ) ) {\displaystyle E_{\text{line}}=\operatorname {filter} (I(x,y))} Edge functional The edge functional is based on the image gradient. One implementation of this is E edge = − | ∇ I ( x , y ) | 2 . {\displaystyle E_{\text{edge}}=-\left|\nabla I(x,y)\right\vert ^{2}.} A snake originating far from the desired object contour may erroneously converge to some local minimum. Scale space continuation can be used in order to avoid these local minima. This is achieved by using a blur filter on the image and reducing the amount of blur as the calculation progresses to refine the fit of the snake. The energy functional using scale space continuation is E edge = − | G σ ⋅ ∇ 2 I | 2 {\displaystyle E_{\text{edge}}=-\left|G_{\sigma }\cdot \nabla ^{2}I\right\vert ^{2}} where G σ {\displaystyle G_{\sigma }} is a Gaussian with standard deviation σ {\displaystyle \sigma } . Minima of this function fall on the zero-crossings of G σ ∇ 2 I {\displaystyle G_{\sigma }\,\nabla ^{2}I} which define edges as per Marr–Hildreth theory. Termination functional Curvature of level lines in a slightly smoothed image can be used to detect corners and terminations in an image. Using this method, let C ( x , y ) {\displaystyle C(x,y)} be the image smoothed by C ( x , y ) = G σ ⋅ I ( x , y ) {\displaystyle C(x,y)=G_{\sigma }\cdot I(x,y)} with gradient angle θ = arctan ⁡ ( C y C x ) , {\displaystyle \theta =\arctan \left({\frac {C_{y}}{C_{x}}}\right),} unit vectors along the gradient direction n = ( cos ⁡ θ , sin ⁡ θ ) , {\displaystyle \mathbf {n} =(\cos \theta ,\sin \theta ),} and unit vectors perpendicular to the gradient direction n ⊥ = ( − sin ⁡ θ , cos ⁡ θ ) . {\displaystyle \mathbf {n} _{\perp }=(-\sin \theta ,\cos \theta ).} The termination functio