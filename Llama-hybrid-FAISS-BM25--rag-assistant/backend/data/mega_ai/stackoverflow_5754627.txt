[site]: stackoverflow
[post_id]: 5754627
[parent_id]: 
[tags]: 
\n to and multiple \n to question

I use bbruby gem to replace text in bbcode with html. It replaces \r\n \n with , and mutiple \r\n \n s with . # https://github.com/cpjolicoeur/bb-ruby/blob/master/lib/bb-ruby.rb def simple_format(text) start_tag = ' ' text = text.to_s.dup text.gsub!(/\r\n?/, "\n") # \r\n and \r => \n text.gsub!(/\n\n+/, " \n\n#{start_tag}") # 2+ newline => paragraph text.gsub!(/([^\n]\n)(?=[^\n])/, '\1 ') # 1 newline => br text.insert 0, start_tag text " end It looks fine! But when the text contains , it becomes terrible! I want to avoid replacing \n when \n is in a table tag, and I try to replace \n in a table before bbruby replaces it, but it doesn't work.
