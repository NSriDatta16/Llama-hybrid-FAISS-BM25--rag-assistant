[site]: crossvalidated
[post_id]: 629706
[parent_id]: 
[tags]: 
Expectation propagation: $g_i(\theta)\sim\mathcal{N}(\mu_i,\Sigma_i)$ but $\Sigma_i^{-1}$ is non-invertible

I paste here the section on Expectation Propagation from Gelman et al.'s Bayesian Data Analysis (pg 340). I have two questions: In Step 5 (with the red box), where we infer the hyperparameters of the multivariate $g_i(\theta)$ from the moments of the univariate $g_i(\eta)$ , how are these transformations motivated? Also in Step 5, doesn't $\text{det}(\Sigma_i^{-1})=0$ as it is a scalar multiple of the outer product of $X_i$ ? If so, how are we meant to model $g_i(\theta)$ as $\sim\mathcal{N}(\mathbf{\mu}_i, \Sigma_i)$ (see the preamble) when $\Sigma_i^{-1}$ is non-invertible?
