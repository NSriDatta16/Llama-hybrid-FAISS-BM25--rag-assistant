[site]: stackoverflow
[post_id]: 4843225
[parent_id]: 
[tags]: 
magento escape string for JavaScript part 2

This is a follow up on magento escape string for javascript where I accepted @AlanStorm suggestion to use json_encode to escape string literals. But I now have a new problem with this solution. when trying to escape a URL that has /'s in it to be rendered as a string literal for JavaScript json_encode seems to add redundant \'s in front of the /'s. Any new suggestions here? solutions should take a string variable and return a string that would properly be evaluated to a string literal in JavaScript. (I don't care if its surrounded with single or double quotes - although I prefer single quotes. And it must also support newlines in the string.) Thanks
