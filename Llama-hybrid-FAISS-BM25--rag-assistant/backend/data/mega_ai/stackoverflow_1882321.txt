[site]: stackoverflow
[post_id]: 1882321
[parent_id]: 
[tags]: 
WPF ListBox virtualization screws up displayed items

Problem We need to efficiently display a large (>1000) number of objects in a WPF ListBox control. We are relying on the WPF ListBoxâ€™s virtualization (via VirtualizingStackPanel) to efficiently display these items. Bug : The WPF ListBox control does not display items correctly when using virtualization. How to Reproduce We have distilled the problem to the standalone xaml shown below. Copy and paste the xaml into XAMLPad. Initially, there is no selected item in the ListBox, so as expected, all items are the same size and they completely fill the available space. Now, click on the first item. As expected, because of our DataTemplate, the selected item will expand to show additional information. As expected, this causes the horizontal scrollbar to appear, since the selected item is now wider than the available space. Now use the mouse to click and drag the horizontal scrollbar to the right. Bug: the non-selected visible items no longer stretch to fill the available space. All the visible items should be the same width. Is this a known bug? Is there any way to fix this, either via XAML or programmatically?
