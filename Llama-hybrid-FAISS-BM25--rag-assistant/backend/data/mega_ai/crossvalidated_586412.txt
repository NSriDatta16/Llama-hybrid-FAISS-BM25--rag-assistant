[site]: crossvalidated
[post_id]: 586412
[parent_id]: 586385
[tags]: 
If you don't get to the smart covariance trick by Glen B, then you could also consider the following approach which is one level of abstraction lower Step 1: consider computing the hard way by adding all 10 by 10 terms from a table $$\frac{1}{100}\sum_{x_1=1}^{10}\sum_{x_2=1}^{10} x_1 \cdot x_2 = E[X]^2 = 5.5^2$$ $$\begin{array}{cccccccccc} 1&2&3&4&5&6&7&8&9&10\\ 2&4&6&8&10&12&14&16&18&20\\ 3&6&9&12&15&18&21&24&27&30\\ 4&8&12&16&20&24&28&32&36&40\\ 5&10&15&20&25&30&35&40&45&50\\ 6&12&18&24&30&36&42&48&54&60\\ 7&14&21&28&35&42&49&56&63&70\\ 8&16&24&32&40&48&56&64&72&80\\ 9&18&27&36&45&54&63&72&81&90\\ 10&20&30&40&50&60&70&80&90&100 \end{array}$$ Step 2: without replacement you get a similar sum but without the terms where $x_1=x_2$ . $$\begin{array}{cccccccccc} &2&3&4&5&6&7&8&9&10\\ 2&&6&8&10&12&14&16&18&20\\ 3&6&&12&15&18&21&24&27&30\\ 4&8&12&&20&24&28&32&36&40\\ 5&10&15&20&&30&35&40&45&50\\ 6&12&18&24&30&&42&48&54&60\\ 7&14&21&28&35&42&&56&63&70\\ 8&16&24&32&40&48&56&&72&80\\ 9&18&27&36&45&54&63&72&&90\\ 10&20&30&40&50&60&70&80&90& \end{array}$$ Then a trick to answer the question is to analyse only the difference in this diagonal with the average of the previous step. The question is whether the average of this diagonal $E[X^2]$ is lower or smaller than $E[X]^2 = 5.5^2$ . Since $E[X^2] = E[X]^2 + VAR[X] > E[X]^2$ you get that the diagonal has a more than average contribution and leaving it out would reduce the expectation of the outcome (thus you get the higher result when you use replacement, and leave the diagonal in the draw). Here is a simple way to compute it with brute force in R n = 10 ### generate a matrix of the outer product M = outer(1:n,1:n, FUN = "*") ### make a second matrix but with the diagonal zero M2 = M diag(M2) = NA ### with replacement 30.25 mean(M) ### without replacement (no diagonal) 29.3333 mean(M2, na.rm = TRUE)
