[site]: stackoverflow
[post_id]: 1231297
[parent_id]: 1230741
[tags]: 
I use this code with libxml-ruby (1.1.3). I have not used nokogiri myself, but I understand that it uses libxml-ruby anyway. I would also encourage you to look at ROXML ( http://github.com/Empact/roxml/tree ) which maps xml elements to ruby objects; it is built atop libxml. # USAGE: Hash.from_libxml(YOUR_XML_STRING) require 'xml/libxml' # adapted from # http://movesonrails.com/articles/2008/02/25/libxml-for-active-resource-2-0 class Hash class xml_node_to_hash(result.root)} rescue Exception => e # raise your custom exception here end end def xml_node_to_hash(node) # If we are at the root of the document, start the hash if node.element? if node.children? result_hash = {} node.each_child do |child| result = xml_node_to_hash(child) if child.name == "text" if !child.next? and !child.prev? return result end elsif result_hash[child.name.to_sym] if result_hash[child.name.to_sym].is_a?(Object::Array) result_hash[child.name.to_sym]
