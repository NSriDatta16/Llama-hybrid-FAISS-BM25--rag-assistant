[site]: stackoverflow
[post_id]: 3884611
[parent_id]: 
[tags]: 
HTML Parsing fails with accented letters (eg: é)

I'm using this library: http://benreeves.co.uk/objective-c-hmtl-parser/ to parse HTML for a little iPhone app I'm making. I have got the code working so far, but it fails when presented with an accent (so far only experienced é). This is the code I'm using: NSError * error = nil; HTMLParser * parser = [[HTMLParser alloc] initWithContentsOfURL:[NSURL URLWithString:@"http://intranet.westminster.org.uk/almanack/food.asp?nextweek=TRUE"] error:&error]; if (error) { NSLog(@"Error: %@", error); return nil; } HTMLNode * bodyNode = [parser body]; //Find the body tag NSArray *individualMeals = [bodyNode findChildTags:@"font"]; for (HTMLNode *node in individualMeals) { if ([[node getAttributeNamed:@"color"] isEqual:@"green"]) { NSLog(@"%@",[node rawContents]); } } But it doesn't parse all of the text. It seems to give up after it finds an accent in the URL. This is the result it produces when run: 2010-10-07 18:40:59.296 Westminster[1011:207] 2010-10-07 18:40:59.298 Westminster[1011:207] 2010-10-07 18:40:59.305 Westminster[1011:207] 2010-10-07 18:40:59.307 Westminster[1011:207] 2010-10-07 18:40:59.308 Westminster[1011:207] Sausage &#13; Bacon&#13; Hash Brown&#13; Baked Beans&#13; Breakfast special&#13; Three cheese omelets&#13; Plain Porridge &#13; Croissants &#13; Natural Yogurt&#13; Dried Fruits &#13; Granola&#13; Honey 2010-10-07 18:40:59.309 Westminster[1011:207] Mulligatawny &#13; Black Olive &#13; RICE&#13; Roasted med veg in paella rice&#13; Hot and sticky wings on yellow rice&#13; Hoi Sin Pork Belly Steaks&#13; Vegetable Biriyani with a Mild Curry Sauce&#13; Babycorn Bamboo Shoots and Water Chestnuts &#13; Stir fried noodles with seaweed &#13; Lemon Sponge with Orange Sauce&#13; Vanilla Granola 2010-10-07 18:40:59.310 Westminster[1011:207] 2010-10-07 18:40:59.312 Westminster[1011:207] Pea &amp; Ham &#13; Black Olive &#13; Roast Chicken with Bread Sauce and Roast Jus&#13; Warm Salad of Salmon and Crispy Bacon&#13; Vegetarian Chilli&#13; With Sour Cream and Braised Rice&#13; Green Beans&#13; Bubble &amp; Squeak&#13; Tiramisu&#13; 3 Cheeses &amp; Biscuits 2010-10-07 18:40:59.313 Westminster[1011:207] Sausage&#13; Bacon&#13; Grilled Tomato&#13; Grilled mushrooms&#13; Fried Egg&#13; Plain Porridge&#13; Bread &#13; Natural Yogurt&#13; Dried Fruits &#13; Granola&#13; Honey 2010-10-07 18:40:59.317 Westminster[1011:207] Root Vegetable&#13; Red Pesto &#13; WRAP&#13; Chimichanga&#13;&#13; Mexican fish tortillas&#13;&#13; Roast Leg of Lamb &#13; Gnocchi with Roasted Vegetables and Flaked Parmesan &#13; Broccoli &#13; Thyme Roasted Potatoes &#13; Sticky Toffee Pudding and Toffee Sauce&#13; Banana Bread 2010-10-07 18:40:59.318 Westminster[1011:207] 2010-10-07 18:40:59.318 Westminster[1011:207] Tomato with Basil Oil&#13;&#13; Red Pesto &#13; Beef Olives&#13; Lamb with Ginger, Spring onion and Noodles&#13; Field Mushroom Pies&#13;&#13; Ratatouille &#13; Creamed Potatoes&#13; Lemon Tart&#13; 3 Cheeses &amp; Biscuits 2010-10-07 18:40:59.319 Westminster[1011:207] Sausage &#13; Bacon&#13; Baked Beans&#13; Grilled Tomato&#13; Breakfast special&#13; Avocado on toast&#13; Plain Porridge &#13; Bread and banana bread&#13; Natural Yogurt&#13; Dried Fruits &#13; Granola&#13; Honey 2010-10-07 18:40:59.333 Westminster[1011:207] (GREEK)&#13; FLAT BREADS&#13; SPINACH, ROCKET AND FETA AND TOASTED SOUR DOUGHS &#13; SEAFOOD STUFFED PEPPERS&#13; STIFADO (beef)&#13; LAMB FRICASSEE&#13; zucchini pie from Macedonia&#13;&#13; RICE&#13; GIGANTIS PLAKI&#13; ORANGE AND LEMON CAKE TOPPED WITH GREEK YOGURT AND HONEY 2010-10-07 18:40:59.333 Westminster[1011:207] 2010-10-07 18:40:59.334 Westminster[1011:207] Roasted Vegetable&#13; FLAT BREADS&#13; Pork Steak Served with a Tomato, Tarragon and Mushroom sauce&#13; Roast beef and homemade horseradish sauce&#13; Lancashire Cheese Sausages with Onion Gravy&#13;&#13; Courgettes&#13; Roast Potatoes&#13; Mississippi Mud Pie&#13; 3 Cheeses &amp; Biscuits 2010-10-07 18:40:59.343 Westminster[1011:207] Sausage&#13; Bacon &#13; Hash Brown&#13; Grilled mushrooms&#13; Fried Egg&#13; Plain Porridge &#13; Bread &#13; Natural Yogurt&#13; Dried Fruits &#13; Granola&#13; Honey 2010-10-07 18:40:59.344 Westminster[1011:207] Leek, Blue Cheese and Potato &#13;&#13; Sunflower Seed&#13; COUS COUS&#13; Couscous with apricots, lemon and coriander &#13; Couscous fried chicken with couscous and spiced tomato sauce &#13;&#13; Butchers Sausages &#13; Balsamic Roasted Vegetable Frittata&#13; Red Cabbage&#13; Mashed Potatoes&#13; Jam Roly Poly &#13; Bakewell Slice 2010-10-07 18:40:59.344 Westminster[1011:207] 2010-10-07 18:40:59.345 Westminster[1011:207] Curried Parsnip and Apple &#13;&#13; Sunflower Seed&#13; Spiced Sticky chicken pieces&#13; Mexican Beef Chilli Wraps with Natural Yogurt and Guacamole&#13; Roasted Teriyaki Tofu Steaks with Glazed Green Vegetables&#13;&#13; Spiced Aubergine&#13; Rice and Peas&#13; Mango Mousse&#13; 3 Cheeses &amp; Biscuits 2010-10-07 18:40:59.351 Westminster[1011:207] Sausage&#13; Bacon&#13; Baked Beans&#13; Grilled Tomato&#13; Breakfast special&#13; Muffin bar&#13; Plain Porridge&#13; Croissants &#13; Natural Yogurt&#13; Dried Fruits &#13; Granola&#13; Honey 2010-10-07 18:40:59.352 Westminster[1011:207] Carrot and Chilli &#13;&#13; Rosemary &#13; NOODLES&#13; Crispy tofu&#13; Lemon chicken&#13; Fish with Traditional Crispy Batter&#13; Japanese Vegetable Curry with Rice Noodles and Tofu&#13;&#13; Garden peas&#13; Chips &#13; Viennese Jam Tart and Custard &#13; Fresh Fruit Salad 2010-10-07 18:40:59.361 Westminster[1011:207] 2010-10-07 18:40:59.361 Westminster[1011:207] Three onion, spring, red and white&#13; Rosemary &#13; Pepperoni Pizza Topped with Boccaccio&#13; Bolognaise pasta bake&#13; Vegetarian Plait&#13;&#13; Green Cabbage&#13; Oven Baked Cajun Wedges&#13; Ice&#13; Cream Sundae&#13; 3 Cheeses &amp; Biscuits 2010-10-07 18:40:59.362 Westminster[1011:207] Sausage &#13; Bacon &#13; Hash Brown&#13; Grilled Mushrooms&#13; Poached Eggs&#13; Plain Porridge &#13; Natural Yogurt&#13; Dried Fruits &#13; Granola&#13; Honey 2010-10-07 18:40:59.362 Westminster[1011:207] (null) 2010-10-07 18:40:59.363 Westminster[1011:207] 2010-10-07 18:40:59.363 Westminster[1011:207] It gives up at the section with sautéed potatoes, and doesn't return any results from that or any of the latter sections. I think this might be due to the website not having encoded the és. When I view the source I see é rather than & eacute; (without space, otherwise SO formats it...) as suggested by this website: http://www.w3.org/MarkUp/html3/latin1.html Thanks for your time. If you know a better way to obtain whats for lunch from that website I would love to hear it too.
