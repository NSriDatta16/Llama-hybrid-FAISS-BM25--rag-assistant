[site]: stackoverflow
[post_id]: 4329088
[parent_id]: 4329019
[tags]: 
Right what it does is as follows. Checks to see if the script was called with ping if it was it replies and terminates Downloads a list of valid server IPs and checks that the request came from one, terminates if not. Downloads a list of user-agent strings and matches the browser against those to see if it is valid, if not it terminates. If the cookie pingshell has been set previously then the HTML file is downloaded and displayed to the browser Otherwise a cookie script is sent back to the browser, setting the pingshell cookie to a dummy value, valid for the entire domain. Step 4 is the important bit, it looks like a proxy server to retrieve the HTML at the location given. If the link is illegal, then it's not good. Probably for marketing purposes though, they can use your URL to serve their content and get your users click-through data. Having said that the code only allows any form of access from prescribed IP addresses, so unless they are capturing that information first, seems like it is designed for specific use by specific people.
