[site]: stackoverflow
[post_id]: 1933289
[parent_id]: 
[tags]: 
ESP Error when I call an API function?

platform : win32 , language : c++ I get this error when I call an imported function I declared: Run-Time Check Failure #0 - The value of ESP was not properly saved across a function call. This is usually a result of calling a function declared with one calling convention with a function pointer declared with a different calling convention. And this is the code I used: int LoadSongFromFile(int module); typedef int (CALLBACK* loadSongT)(LPCTSTR); //... HINSTANCE dllHandle = NULL; loadSongT loadSongPtr = NULL; dllHandle = LoadLibrary(L"miniFMOD.dll"); loadSongPtr = (loadSongT)GetProcAddress(dllHandle,"SongLoadFromFile"); int songHandle = loadSongPtr(L"C:\b.xm"); The function I'm trying to call is SongLoadFromFile which requires one argument (in C# it is string so I assume its LPCTSTR in C++) and returns an int value. Can somebody check what have I done wrong? P.S. songHandle gets a weird negative value of -858993460 This is how I can call that function from C# : [DllImport("MiniFMOD.dll")] public static extern int SongLoadFromFile(string name); P.S. 2 : Using *typedef int (__cdecl loadSongT)(char );* doesn't return an error but songHandle comes up as 0. miniFMOD.dll is an unmanaged library
