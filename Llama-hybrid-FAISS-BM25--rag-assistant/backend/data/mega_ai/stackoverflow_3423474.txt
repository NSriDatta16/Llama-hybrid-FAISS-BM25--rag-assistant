[site]: stackoverflow
[post_id]: 3423474
[parent_id]: 
[tags]: 
Global Hook in c++ doesn't work?

Trying to write a GLOBAL CBT HOOK, this is My code, but my hooking app doesn't recieve any Messages, neither writes the dll something to a test file. This is My Code: #include "stdafx.h" #include "GlobalHook.h" #include "Stdafx.h" #include #include #define DLL_EXPORT #include "GlobalHook.h" #include using namespace std; #pragma comment(lib, "User32.lib") #pragma unmanaged HINSTANCE dllHandle; #pragma data_seg("ASEG") HWND prnt = 0; #pragma data_seg() #pragma comment(linker, "/section:ASEG,RWS") HHOOK hHook; int x = 0; BOOL APIENTRY DllMain( HINSTANCE hinstDLL, // handle to DLL module DWORD fdwReason, // reason for calling function PVOID lpReserved ) // reserved { // Perform actions based on the reason for calling. switch( fdwReason ) { case DLL_PROCESS_ATTACH: dllHandle = hinstDLL; return TRUE; break; } } LRESULT CALLBACK CBTProc(int nCode, WPARAM wParam, LPARAM lParam) { if(nCode
