[site]: stackoverflow
[post_id]: 2380539
[parent_id]: 
[tags]: 
WCF (Silverlight) Duplex - Not hitting server

I have created a web application with a Silverlight project embedded in it, using VS 2008 SP 1, and the Silverlight 3 tools, on Vista and Windows 7. The duplex service code: [ServiceContract(Namespace = "cotoco", CallbackContract = typeof(IDuplexClient))] [ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)] [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)] public class DuplexServer { private IDuplexClient _client; private string _message; private int _messageCounter; private Timer _timer; public DuplexServer() { } #region IDuplexServer Members [OperationContract(IsOneWay = true)] public void SendEcho(string message) { _client = OperationContext.Current.GetCallbackChannel (); _message = message; _timer = new Timer(); _timer.Interval = 2000; _timer.Enabled = true; _timer.Elapsed += new ElapsedEventHandler(_timer_Elapsed); _timer.Start(); } void _timer_Elapsed(object sender, ElapsedEventArgs e) { _client.ReturnEcho(string.Format("Duplex Echo {0}: {1}", _messageCounter, _message)); _messageCounter++; if (_messageCounter > 5) _timer.Dispose(); } #endregion } [ServiceContract] public interface IDuplexClient { [OperationContract(IsOneWay = true)] void ReturnEcho(string message); } The duplex config section: I have setup a Duplex service in the client application as follows: Binding svcBinding; EndpointAddress svcAddress; svcBinding = new PollingDuplexHttpBinding() { UseTextEncoding = true }; svcAddress = new EndpointAddress("http://localhost/CTC.Test.WCF.Server/DuplexServer.svc"); _duplex = new DuplexServerClient(svcBinding, svcAddress); I have used a Simplex service in tandem with this, and calls to the Simplex service hit the breakpoints setup on the server and i can step through. Calls to the Duplex service do not hit the breakpoints, although no error is raised on the client. If i inspect the HTTP traffic with Fiddler, i can see hundreds of 202 requests being fired after the initial request - i assume these are the polling requests. Initial Duplex Request: POST http://localhost/CTC.Test.WCF.Server/DuplexServer.svc HTTP/1.1 Accept: / Content-Length: 665 Content-Type: application/soap+xml; charset=utf-8 UA-CPU: x86 Accept-Encoding: gzip, deflate User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; (R1 1.6); SLCC1; .NET CLR 2.0.50727; InfoPath.2; .NET CLR 3.5.21022; .NET CLR 3.5.30729; .NET CLR 3.0.30618) Host: cotocovista4.cotoco.local Connection: Keep-Alive Pragma: no-cache urn:IDuplexServer/SendEcho 43f9e320-cde3-4e21-a748-e5b29c10ee25 http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=ae3e3139-0df8-41eb-97db-69c2c48782b7 43f9e320-cde3-4e21-a748-e5b29c10ee25 s:mustUnderstand="1"> Message! http://cotocovista4.cotoco.local/CTC.Test.WCF.Server/DuplexServer.svc Message! ; Subsequent Duplex Requests: POST http://localhost/CTC.Test.WCF.Server/DuplexServer.svc HTTP/1.1 Accept: / Content-Length: 588 Content-Type: application/soap+xml; charset=utf-8 UA-CPU: x86 Accept-Encoding: gzip, deflate User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0; (R1 1.6); SLCC1; .NET CLR 2.0.50727; InfoPath.2; .NET CLR 3.5.21022; .NET CLR 3.5.30729; .NET CLR 3.0.30618) Host: cotocovista4.cotoco.local Connection: Keep-Alive Pragma: no-cache http://docs.oasis-open.org/ws-rx/wsmc/200702/MakeConnection s:mustUnderstand="1"> http://cotocovista4.cotoco.local/CTC.Test.WCF.Server/DuplexServer.svc xmlns:wsmc="http://docs.oasis-open.org/ws-rx/wsmc/200702"> http://docs.oasis-open.org/ws-rx/wsmc/200702/anonymous?id=ae3e3139-0df8-41eb-97db-69c2c48782b7 ; Does anyone know why this would happen, i thought I'd finally sussed the last problem when it stopped throwing connection exceptions.... Regards Tris Update: I have tried recreating this in the following project types: WCF Application, Web Application, Web Project. I have succeeded in implementing the MS Example that uses WCF Message's for the Duplex parameters without problem, but i was looking for a rapid way of assembling duplex web services using WSDL.
