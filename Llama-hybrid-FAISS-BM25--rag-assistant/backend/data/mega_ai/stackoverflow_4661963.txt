[site]: stackoverflow
[post_id]: 4661963
[parent_id]: 
[tags]: 
Working with Huge ArrayLists, Java OutOfMemoryError: Java heap space... use db?

I am having a memory problem that I completely understand the cause, but have no idea of a fix. I have attempted to use the -Xmx2g tag and make the heap size larger, but there seems to be a hidden maximum. (if i used -Xmx512m I run out of space at the same time). Assume I have 2 objects, an Area and a User. My Area object holds an ArrayList of users: public class Area { int numUsers; ArrayList userList; } My User class holds an ArrayList of friends: public class User { int userID; int numFriends; ArrayList friends; } Just using a single Area, with 1 million users, and an average of 200 friends per user, I run out of heap space after about 680,000 Users are created. Obviously if I lower the average number of friends/user to something closer to 100, I can store all of these objects in the heap. What if I want to simulate 2 million Users in an area? Or Hundreds of area's? With this much data, is a database the only feasible way to do simulations using the information?
