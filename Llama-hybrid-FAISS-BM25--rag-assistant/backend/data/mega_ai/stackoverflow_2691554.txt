[site]: stackoverflow
[post_id]: 2691554
[parent_id]: 2688408
[tags]: 
import string, re, sys, os import twill.commands class browser: def __init__(self, url="www.google.com", query="python code", log = None): self.a=twill.commands self.a.config("readonly_controls_writeable", 1) self.b = self.a.get_browser() self.b.set_agent_string("Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.8.1.14) Gecko/20080404 Firefox/2.0.0.14") self.log = log self.b.clear_cookies() self.url=url self.b.go(self.url) f = self.b.get_form("1") # self.log.debug("form is %s" % f) f["q"] = query self.b.submit() self.log.debug( "Links\n%s" % self.b.showlinks()) self.log.debug( "Forms\n%s" % self.b.showforms()) pageContent = self.b.get_html() self.log.debug("html is >" % pageContent)
