[site]: stackoverflow
[post_id]: 1566110
[parent_id]: 1565795
[tags]: 
The problem is not your logic, but the underlying file system. Most file systems get very slow when you put many files in a directory. This is very bad with FAT, but NTFS also suffers from it, especially if you have thousands of files in a directory. The best you can do is reorganize those directory structures, for instance by age. Then have at most a couple of 100 files in each directory. --jeroen
