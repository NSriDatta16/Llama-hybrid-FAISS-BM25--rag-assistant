[site]: stackoverflow
[post_id]: 1700490
[parent_id]: 1700435
[tags]: 
The way i do this is: Save up all bytes transfered in a long. Then every 1 second i check how much has been transfered. So i basicly only trigger the code to save speed once pr second. Your while loop is going to loop maaaaaaaaaaaany times in one second on a fast network. Depending on the speed of your network you may need to check the bytes transfered in a seperate thread or function. I prefere doing this with a Timer so i can easly update UI EDIT: From your looking at your code, im guessing what your doing wrong is that you dont take into account that one loop in the while(true) is not 1 second EDIT2: Another advatage with only doing the speed check once pr second is that things will go much quicker. In cases like this updating the UI can be the slowest thing your are doing, so if you try to update the UI every loop, thats most likely your slowest point and is going to produce unresponsive UI. Your also correct that you should avarage out the values, so you dont get the microsoft minutes bugs. I normaly do this in the Timer function running by doing something like this: //Global variables long gTotalDownloadedBytes; long gCurrentDownloaded; // Where you add up from the download/upload untill the speedcheck is done. int gTotalDownloadSpeedChecks; //Inside function that does speedcheck gTotalDownloadedBytes += gCurrentDownloaded; gTotalDownloadSpeedChecks++; long AvgDwnSpeed = gTotalDownloadedBytes / gTotalDownloadSpeedChecks; // Assumes 1 speedcheck pr second.
