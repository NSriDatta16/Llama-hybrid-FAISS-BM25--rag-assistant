[site]: stackoverflow
[post_id]: 2021114
[parent_id]: 
[tags]: 
Javascript/jQuery variables not giving expected values

Like others before me I'm struggling with scope in Javascript. (That and trying to read the darn stuff). I have checked some of the previous threads on this question but I cant seem to get them to apply correctly to my issuue. In the example below, I want to manipulate the values in the tagsArr array, once the array has been fully populated. I declared the tagsArr variable outside the scope of the function in which it is populated in order to access it globally. But the variable doesn't seem to have the scope I expect - tagsArr.length is 0 at the point where I call output it to console on line 16. $(function(){ var apiKey = [myapikey]; var tags = ''; var tagsArr = new Array(); $.getJSON('http://api.flickr.com/services/rest/?&method=flickr.people.getPublicPhotos&api_key=' + apiKey + '&user_id=46206266@N05&extras=date_taken,tags&format=json&jsoncallback=?', function(data){ $.each(data.photos.photo, function(i, item) { var photoID = item.id; $.getJSON('http://api.flickr.com/services/rest/?&method=flickr.photos.getInfo&api_key=' + apiKey + '&photo_id=' + photoID + '&format=json&jsoncallback=?', function(data){ if (data.photo.tags.tag != '') { $.each(data.photo.tags.tag, function(j, item) { tagsArr.push(item.raw); }); } }); tags = tagsArr.join(' '); console.debug(tagsArr.length); }); $('#total-dragged').append(data.photos.total); $('#types-dragged').append(tags); }); });
