[site]: crossvalidated
[post_id]: 159927
[parent_id]: 159924
[tags]: 
The right way of calculating the expected value of a function by Monte Carlo simulation is to calculate the (sample) average of the function value on all n (one million in your write up) replications. You should also look at the sample standard deviation divided by sqrt(n) or sqrt(n-1), to understand the uncertainty in your estimate. You need to correctly generate the values of X and Y, accounting for dependency, if any, between X and Y. I.e., draw from their joint distribution. if they are independent, this amounts to drawing separately from their own distributions. You have specified Uniform([0,10]) distributions for X and Y, and based on the results of the Monte Carlo simulation, you have assumed they are independent. Assuming independence of X and Y, then indeed your averaging is the correct thing to do to get expected value of abs(X-Y). Your analytical calculation of 10 - sqrt(5) does indeed correspond to the median of abs(X-Y), not its expected value Plot the sorted values of abs(X-Y) from the simulation, and you'll see that the median is not equal to the expected value. You may be too used to symmetric distributions, and perhaps in particular the Normal distribution. Median = expected value in such cases, but not for abs(X-Y) in your case.
