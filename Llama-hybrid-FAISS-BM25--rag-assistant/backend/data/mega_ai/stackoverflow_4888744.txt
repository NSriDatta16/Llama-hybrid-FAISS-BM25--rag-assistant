[site]: stackoverflow
[post_id]: 4888744
[parent_id]: 4888535
[tags]: 
If #Tnum is always at the end, you just need to do a bit of anchoring. For example, like this: test.aspx\?.*(?!\#T[0-9])...$ But that's very fragile as it depends on the bad URLs always ending in a very particular form and good URLs always having enough characters to soak up that end matching. A negative lookbehind assertion is somewhat better, but still fragile and less commonly supported: test.aspx\?.*(? It's better to write a regular expression that matches what you don't want and to just invert the logic of what to do when you get a match (i.e., "if it matches throw it away", instead of "if it matches use it"). But really it's much better to delegate the parsing of the URLs to a specialized library and then just do a simpler check against the fragment identifier as a logical component instead of as a horrible RE hack.
