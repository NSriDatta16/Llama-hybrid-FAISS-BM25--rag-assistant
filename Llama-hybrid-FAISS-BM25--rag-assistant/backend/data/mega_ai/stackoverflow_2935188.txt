[site]: stackoverflow
[post_id]: 2935188
[parent_id]: 2537700
[tags]: 
Try this function the cookijar option is added: function execute($toLoad) { if ( !preg_match( '/^http/', $toLoad ) ) { $toLoad = 'http://'.$toLoad; } $cookiefile = APP_PATH.'tmp/cookie.txt'; $data = array(); $ch = curl_init(); curl_setopt($ch, CURLOPT_CONNECTTIMEOUT,10); curl_setopt($ch, CURLOPT_TIMEOUT,10); curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE); curl_setopt($ch, CURLOPT_USERAGENT,"Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.1.6) Gecko/20091216 Fedora/3.5.6-1.fc11 Firefox/3.5.6 GTB6"); curl_setopt($ch, CURLOPT_URL, $toLoad); // The page to download curl_setopt($ch, CURLOPT_HEADER, 0); curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); curl_setopt($ch, CURLOPT_REFERER, 'http://somesite.com/' ); curl_setopt($ch, CURLOPT_COOKIEJAR, $cookiefile); curl_setopt($ch, CURLOPT_COOKIEFILE, $cookiefile); $data['data'] = curl_exec($ch); $data['status'] = curl_getinfo($ch); //$this->out(curl_error($ch)); //$this->out(curl_getinfo($ch)); //$this->out(''); //$this->out($data); //$this->out(''); curl_close($ch); return $data; } you could also try reading the header of the returned data for Set-Cookie: SOMEKEY and then in the curlopt use if ($header) { curl_setopt($ch, CURLOPT_HTTPHEADER, array('Cookie:'.$header)); } Thanks
