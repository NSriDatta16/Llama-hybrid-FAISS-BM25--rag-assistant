[site]: stackoverflow
[post_id]: 2307583
[parent_id]: 2307535
[tags]: 
If the HTML generated is identical to page HTML you may be able to leverage your existing templating code to generate the same HTML with less code duplication. Otherwise, JSON is typically more common as it tends to be more compact and it allows you to create nodes and assign non-HTML properties like event handlers to them as you go. If you create your new nodes by creating an HTML string, however, you have to use HTML-encoding to ensure any , & or quotes are escaped correctly. There's no built-in function to do this in JavaScript like htmlspecialchars in PHP; it's pretty trivial to write one, but no-one seems to bother. The result is jQuery apps that are full of client-side cross-site-scripting security holes, just as we were starting to make some progress of fixing the server-side XSS stuff.
