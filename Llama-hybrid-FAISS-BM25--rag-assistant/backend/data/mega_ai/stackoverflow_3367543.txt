[site]: stackoverflow
[post_id]: 3367543
[parent_id]: 3359258
[tags]: 
PHP, 234 chars function pages($t,$c,$s=5){$m=ceil($s/2);$p=range(1,$t);$p[$c-1]='x';$a=array();return preg_replace('~(\[('.implode('|',array_merge($c-$m (Sort of) unminified: function pages($max, $current, $subset=5) { $m = ceil($subset / 2); // amount to go in each direction $arr = range(1, $max); // array(1, 2, 3, 4, 5, 6, 7, 8, 9, 10) $arr[$current-1] = 'x'; // array(1, 2, 3, 4, x, 6, 7, 8, 9, 10) // replace ~(\[(2|8|9)\])+~ with ... $pattern = '~(\[(' . implode('|', array_merge($current-$m >= 2 ? range(2, $current-$m) : array(), $max-1 >= $current+$m ? range($current+$m, $max-1): array())) . ')\])+~'; return preg_replace($pattern, '...', '['.implode('][',$arr).']'); } This doesn't follow the spec exactly ( [1][x][3][4]...[30] instead of [1][x][3][4][5]...[30] ), but it would become a lot less elegant accounting for that.
