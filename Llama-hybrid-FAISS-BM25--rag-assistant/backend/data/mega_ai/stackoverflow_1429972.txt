[site]: stackoverflow
[post_id]: 1429972
[parent_id]: 
[tags]: 
Dragging and dropping to a TreeView, finding the index where to insert the dropped item

I have a WPF TreeView with one level of child items. I am using the HierarchicalDataTemplate for the top-level items, so the child items are bound to a backing data list. When I'm doing dragging and dropping I want to find out where in the target list the new items should go to. I have broken the scenarios down into the following cases: I am on on empty part of the target TreeView I am hovering on or near one of the top-level TreeViewItem s (dropped item must go to the back of the list) I am hovering on one of the child-items, in which case the dropped item must go either to the front or the back of the current item, depending on whether I am hovering on the upper or lower half of the item. My question is, how do I know which TreeViewItem I am hovering over? How do I know if it is a parent-type or a child-type TreeViewItem ? (They have different DataContext data types) Should I do some kind of hittesting? How do I know which top-level item owns the current child-item I am hovering over?
