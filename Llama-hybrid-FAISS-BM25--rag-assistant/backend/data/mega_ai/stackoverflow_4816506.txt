[site]: stackoverflow
[post_id]: 4816506
[parent_id]: 
[tags]: 
How to SELECT an AVG of the TOP n grouped values in MySQL?

The Database: player | team | points player1 | team1 | 100 player2 | team1 | 90 player3 | team2 | 100 player4 | team2 | 95 player5 | team2 | 90 I am trying to get the top 2 players from each team's points and average them towards the teams ranking, while grouping the teams in a query: team2 97.5 (not 95) team1 95 `$mysqli->query("SELECT charGuild, gr FROM ( SELECT charGuild, AVG(charRating) as gr FROM ins_rated GROUP BY charGuild HAVING COUNT(*) >= 10 ORDER BY gr DESC LIMIT 15 ) ORDER BY gr DESC LIMIT 40");` Is not working as expected. $mysqli->query("SELECT charGuild, AVG(charRating) AS gr FROM ins_rated GROUP BY charGuild HAVING COUNT(*) >= 10 ORDER BY gr DESC LIMIT 40"); Is listing the top teams, whom have at least 10 people in the db. Now adding in a way to get the top 15 players ONLY to average out the teams scores is where I am lost.
