[site]: stackoverflow
[post_id]: 5280675
[parent_id]: 5279452
[tags]: 
What exactly do you store in the FIFO queues? Do you store packets of data i.e buffers? In version A, you were writing formatted data (probably bytes) to the queue. So, sending it on the socket involved just writing out a fixed size buffer. However in version B, you are storing high level data in the queues. Formatting it is now creating bigger buffer sizes that are being written directly to the socket. This causes the TCp/ip stack to spend CPU cycles in fragmenting & overhead... THis is my theory based on what you have said so far.
