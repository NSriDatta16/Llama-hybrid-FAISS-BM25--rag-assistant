[site]: stackoverflow
[post_id]: 4346822
[parent_id]: 
[tags]: 
What is the proper way to determine the end of a mouse drag using Rx?

I am slowly learning how to use Reactive Extensions for .NET with WPF. There a few beginner examples about how simple it is to write drag-drop or drawing routines but they are all extremely simple. I'm trying to go one step further and it's not obvious to me what the "proper" way is. The examples all show how you can define streams of events from MouseDown , MouseMove , and MouseUp var mouseDown = from evt in Observable.FromEvent (..., "MouseDown") select evt.EventArgs.GetPosition(...); var mouseMoves = from evt in Observable.FromEvent (..., "MouseMove") select evt.EventArgs.GetPosition(...); var mouseUp = Observable.FromEvent (..., "MouseUp"); And then how you can easily do things during a MouseDrag (this displays the co-ordinates of the rectangle created from the starting drag point to the current mouse position) var mouseDrag = from start in mouseDown from currentPosition in mouseMoves.TakeUntil(mouseUp) select new Rect(Math.Min(start.X, currentPosition.X), Math.Min(start.Y, currentPosition.Y), Math.Abs(start.X - currentPosition.X), Math.Abs(start.Y - currentPosition.Y)); mouseDrag.Subscribe(x => { Info.Text = x.ToString(); }); My question is, what is the "proper" way to accomplish a task at the end of the mouse drag? Originally, I thought I could do something like this: mouseDrag.Subscribe( onNext: x => { Info.Text = x.ToString(); }, onCompleted: () => { // Do stuff here...except it never gets called }); Reading more of the documentation, though, it seems that onCompleted is called when there is no more data (ever) and when the object can be disposed. So the first option that seems plausable is subscribing to the mouseUp event and doing something there. mouseUp.Subscribe(x => { // Do stuff here.. } But then at this point, I may as well go back to just use the "normal" MouseLeftButtonUp event handler. Is there another way to determine when the mouseDrag is "completed" (or when the TakeUntil(mouseUp) ) occurs and perform some action then?
