[site]: stackoverflow
[post_id]: 346587
[parent_id]: 346568
[tags]: 
The only way that I can see it working with only one query is to do "select * from posts order by timestamp" which returns all posts, and then handle the display logic in your code. However, this is not a very efficient solution. As long as you have your table properly indexed, then performing a select count(*) followed by a retrieval query shouldn't affect performance. Are there any special circumstances that would make you specifically try to avoid a second query? Otherwise, I think that your solution above is sufficient.
