[site]: stackoverflow
[post_id]: 3067174
[parent_id]: 3067038
[tags]: 
Here's a moderately complex form - this from Chapter 11 of my book 'Using Informix-SQL' (or, strictly, an answer to the exercise posed in Chapter 11 of the book). (Yes, it uses a different login ID - one I'd forgotten about until I saw it again. It is ...o...l...d...!) { @(#)$Id: sales.per,v 5.5 1991/03/22 21:44:46 john Exp $ Answer to Chapter 11 Question 1 '\" @(#)%Q% } DATABASE Cars SCREEN { Stock List ========== Registration [f000 ] Model Number [f001] [f011] Description [f021 ] [f012 ] [f013 ] Colour [f002 ] Notes [f006 ] [f008 ] } SCREEN { [b1 ] [b] [b] [b] Sales entry form [b] [b] [b] [b] Registration [f000 ] [b] [b] Model Number [p001] [f011] [b] [b] Description [f021 ] [b] [b] [f012 ] [b] [b] [f013 ] [b] [b] Customer [c000] [b] [b] Name [c001 ][c002 ][c003 ] [b] [b] Sold for [p003 ] [b] [b] Date sold [p004 ] [b] [b] Terms [p005] [b] [b] Colour [p102 ] [b] [b] [b] [b2 ] } SCREEN { Sensitive Sales data -- do not show to the customer Registration [f000 ] Model Number [f001] [f011] Description [f021 ] [f012 ] [f013 ] Condition [p] Datebought [p103 ] Boughtfor [p104 ] Mileage [p105 ] Notes [p106 ] [p108 ] Profit [profit ] Markup [markup]% } SCREEN { Sensitive Stock data -- do not show to the customer Condition [a] Datebought [f003 ] Boughtfor [f004 ] Mileage [f005 ] } SCREEN { Customer details Number [c000] Name [c001 ][c002 ][c003 ] Address [c004 ] [c005 ] [c006 ] Post code[c007 ] Phone number [c008 ] Type of enquiry[c] Spending Power (estimated) [c009 ] Model Number [c010] Last contact date [c011 ] } SCREEN { Guide prices Model Number [f001] [f011] Description [f021 ] [f012 ] [f013 ] Year [g001] Low [g002 ] High [g003 ] Average [gavg ] Minimum [gmin ] Maximum [gmax ] } SCREEN { Model List ========== Model [f001] Maker [f011] [f021 ] Modelname [f012 ] Details [f013 ] Price [f014 ] Maxspeed [f015 ] Accel [f016 ] Tanksize [f017 ] Urban [f018 ] Mpgat56 [f019 ] } SCREEN { Company Details =============== Company Number [f011] Company Name [f021 ] Address [f022 ] [f023 ] [f024 ] Postcode [f025 ] Phone [f026 ] Notes [f028 ] [f030 ] } TABLES Stock Models Companies Sales Prices Customers ATTRIBUTES f000 =*Stock.Registration = Sales.Registration, QUERYCLEAR, UPSHIFT, AUTONEXT, PICTURE = "AXXXXXA"; f001 =*Models.Model = Stock.Model, QUERYCLEAR, NOENTRY, NOUPDATE; = Prices.Model, QUERYCLEAR; { Read the commentary on the answer to find out why this join cannot be made } { = Customers.Lastmodel, QUERYCLEAR; } f002 = Stock.Colour; a = Stock.Condition, AUTONEXT, UPSHIFT, INCLUDE = ('X', 'V', 'G', 'A', 'P'), COMMENTS = "Xcellent, Very good, Good, Average, Poor"; f003 = Stock.Datebought; f004 = Stock.Boughtfor; f005 = Stock.Mileage; f006 = Stock.Notes1; f008 = Stock.Notes2; c000 =*Customers.Number = Sales.Customer, QUERYCLEAR; p003 = Sales.Soldfor; p004 = Sales.Datesold, DEFAULT = TODAY, NOENTRY, NOUPDATE; p005 = Sales.Terms, UPSHIFT, AUTONEXT, INCLUDE = ('CASH', 'ACCE', 'BARC', 'HIRE', 'CHEQ'), COMMENTS = "CASH, ACCEss, BARClaycard, HIRE-purchase, CHEQue"; { These are implicitly no-entry fields } p001 = Sales.Model; p102 = Sales.Colour; p = Sales.Condition; p103 = Sales.Datebought; p104 = Sales.Boughtfor; p105 = Sales.Mileage; p106 = Sales.Notes1; p108 = Sales.Notes2; f011 = Models.Maker = Companies.Maker, QUERYCLEAR; f012 = Models.Modelname; f013 = Models.Details; f014 = Models.Price; f015 = Models.Maxspeed; f016 = Models.Accel; f017 = Models.Tanksize; f018 = Models.Urban; f019 = Models.Mpgat56; f021 = Companies.Company; f022 = Companies.Address1; f023 = Companies.Address2; f024 = Companies.Address3; f025 = Companies.Postcode; f026 = Companies.Phone; f028 = Companies.Notes1; f030 = Companies.Notes2; c001 = Customers.Salut, COMMENTS = "Mr Mrs Miss Ms or blank", INCLUDE = ("Mr", "Mrs", "Miss", "Ms", NULL); c002 = Customers.Firstname; c003 = Customers.Surname, REQUIRED; c004 = Customers.Address1, AUTONEXT, COMMENTS = "Enter address"; c005 = Customers.Address2, AUTONEXT, COMMENTS = "Enter address"; c006 = Customers.Address3, AUTONEXT, COMMENTS = "Enter address"; c007 = Customers.Postcode, UPSHIFT, COMMENTS = "Enter post code", PICTURE = "AXXX #AA"; c008 = Customers.Phone, DOWNSHIFT, COMMENTS = "STD code, number, and extension"; c = Customers.Enquiry, UPSHIFT, AUTONEXT, DEFAULT = 'S', COMMENTS = "Q enquiry, S sale, C contact", INCLUDE = ("Q", "C", "S"); c009 = Customers.Maxmoney, REVERSE, COMMENTS = "2000 to 100000, or blank", INCLUDE = (NULL, 2000 TO 100000); { Read the commentary to find out why Customers.Lastmodel is not joined to Models.Model } c010 = Customers.Lastmodel; c011 = Customers.Contactdate, DEFAULT = TODAY, FORMAT = "ddd, dd mmm yyyy", NOENTRY; g001 = Prices.Year_made; g002 = Prices.Lo_price, FORMAT = "###,###"; g003 = Prices.Hi_price, FORMAT = "###,###"; gmin = DISPLAYONLY TYPE DECIMAL, FORMAT = "###,###"; gmax = DISPLAYONLY TYPE DECIMAL, FORMAT = "###,###"; gavg = DISPLAYONLY TYPE DECIMAL, FORMAT = "###,###"; b1 = DISPLAYONLY TYPE CHAR, REVERSE; b2 = DISPLAYONLY TYPE CHAR, REVERSE; b = DISPLAYONLY TYPE CHAR, REVERSE; profit = DISPLAYONLY TYPE MONEY; markup = DISPLAYONLY TYPE DECIMAL, FORMAT = "###.##"; END INSTRUCTIONS { Master/detail relationships as before } Companies MASTER OF Models Models MASTER OF Prices Models MASTER OF Stock { You may only change Sales and Customers } BEFORE EDITADD EDITUPDATE OF Models Companies Prices Stock ABORT { You may not update Sales -- just add } BEFORE EDITUPDATE OF Sales ABORT { You may only delete Stock records } BEFORE REMOVE OF Sales Models Companies Customers Prices COMMENTS BELL REVERSE "You may not change this table" ABORT { Finish border of Sales screen } AFTER DISPLAY OF SALES LET b1 = " ABC Cars Ltd" { Show range of prices } AFTER DISPLAY QUERY OF Prices LET gmin = MIN OF g002 LET gmax = MAX OF g003 LET gavg = (AVG OF g002 + AVG OF g003) / 2 { Show the company what we made on the deal } AFTER EDITADD OF Soldfor LET profit = p003 - f004 LET markup = ((p003 -f004) / f004) * 100 { Transfer data to Sales record } AFTER EDITADD OF Sales.Registration LET p001 = f001 LET p102 = f002 LET p = a LET p103 = f003 LET p104 = f004 LET p105 = f005 LET p106 = f006 LET p108 = f008 { Do not let user edit transferred data } BEFORE EDITADD OF Sales.Model NEXTFIELD = f000 BEFORE EDITADD OF Sales.Notes2 NEXTFIELD = p005 END
