[site]: stackoverflow
[post_id]: 5392288
[parent_id]: 
[tags]: 
Drop File on SWT Label with Image (DND)

Problem description: The user should be able to drag an Image-File from his computer to a RCP Application. The drop-target is a SWT-Label which is generated through the Eclipse FormToolkit. (Eclipse Forms) With the following code, the user is able to drag Image-Files as well as Images from a Browser and drop them on the label (works well). The problem occurs, when the label shows a image: lblImage.setImage() In my example, I set the image of the label, after the user dropped a file. As a consequence, subsequent drags are no longer registered. (dragEnter method is no longer invoked) /** create label **/ Label lblImage = fFormToolkit.createLabel(fForm.getBody(), ""); GridData gd = new GridData(); gd.widthHint = 200; gd.heightHint = 200; lblImage.setLayoutData(gd); /** drag drop support **/ int ops = DND.DROP_COPY | DND.DROP_LINK | DND.DROP_DEFAULT; final FileTransfer fTransfer = FileTransfer.getInstance(); final ImageTransfer iTransfer = ImageTransfer.getInstance(); Transfer[] transfers = new Transfer[] { fTransfer, iTransfer }; DropTarget target = new DropTarget(fLblArtWork, ops); target.setTransfer(transfers); target.addDropListener(new DropTargetAdapter() { @Override public void drop(DropTargetEvent event) { if (event.data instanceof String[]) { String[] filenames = (String[]) event.data; if (filenames.length > 0){ Image i = new Image(Display.getCurrent(), filepath); lblImage.setImage(i); } } else if (event.data instanceof ImageData) { Image i = new Image(Display.getCurrent(), data); lblImage.setImage(i); } } public void dragEnter(DropTargetEvent event) { System.out.println("drag enter"); event.detail = DND.DROP_COPY; } }); Question: How do I register dragEnter Events on a SWT Label that shows an Image? Thanks
