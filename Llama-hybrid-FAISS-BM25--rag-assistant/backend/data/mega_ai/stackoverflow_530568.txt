[site]: stackoverflow
[post_id]: 530568
[parent_id]: 530546
[tags]: 
It looked pretty easy to do with a regular expression: >>> import re ... text = """line 1 ... line 2 ... Barney Rubble Cutherbert Dribble and foo ... line 4 ... # Flobalob, bing, bong, foo and brian ... line 6""" >>> regexp = re.compile('^(#.+)foo', re.MULTILINE) >>> print re.sub(regexp, '\g bar', text) line 1 line 2 Barney Rubble Cutherbert Dribble and foo line 4 # Flobalob, bing, bong, bar and brian line 6 But then trying your example text is not so good: >>> text = """# foo ... foo ... # foo foo""" >>> regexp = re.compile('^(#.+)foo', re.MULTILINE) >>> print re.sub(regexp, '\g bar', text) # bar foo # foo bar So, try this: >>> regexp = re.compile('(^#|\g.+)foo', re.MULTILINE) >>> print re.sub(regexp, '\g bar', text) # foo foo # foo foo That seemed to work, but I can't find \g in the documentation ! Moral: don't try to code after a couple of beers.
