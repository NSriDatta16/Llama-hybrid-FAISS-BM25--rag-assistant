[site]: stackoverflow
[post_id]: 5316091
[parent_id]: 5313433
[tags]: 
If you compile this with -Wall do you perhaps get warnings about packing changes? I've had similar crashes due to #pragma pack before standard library headers. Or, after some more looking at your code, perhaps change your BOX1 and BOX2 defines to 0 and 1, not 1 and 2 - given that your array has only 2 boxes.
