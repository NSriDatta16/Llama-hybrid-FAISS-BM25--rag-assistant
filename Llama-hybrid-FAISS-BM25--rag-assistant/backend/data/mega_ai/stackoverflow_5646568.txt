[site]: stackoverflow
[post_id]: 5646568
[parent_id]: 
[tags]: 
HttpWebRequest is getting stream even without internet connection

I am using below code to send a byte array to a site. Why this code is not throwing an exception even when there is no internet connection?.Even when no connection is there I am able to get stream and able to write to it.I expect it to throw an exception at Stream postStream = request1.EndGetRequestStream(result) .Anyone got any idea why its behaving like this. private void UploadHttpFile() { HttpWebRequest request = WebRequest.CreateHttp(new Uri(myUrl)); request.ContentType = string.Format("multipart/form-data; boundary={0}", boundary); request.UserAgent = "Mozilla/4.0 (Windows; U; Windows Vista;)"; request.Method = "POST"; request.UseDefaultCredentials = true; request.BeginGetRequestStream(GetStream, request); } private void GetStream(IAsyncResult result) { try { HttpWebRequest request1 = (HttpWebRequest)result.AsyncState; using (Stream postStream = request1.EndGetRequestStream(result)) { int len = postBody.Length; len += mainBody.Length; len += endBody.Length; byte[] postArray = new byte[len + 1]; Encoding.UTF8.GetBytes(postBody.ToString()).CopyTo(postArray, 0); Encoding.UTF8.GetBytes(mainBody).CopyTo(postArray, postBody.Length); Encoding.UTF8.GetBytes(endBody).CopyTo(postArray, postBody.Length + mainBody.Length); postStream.Write(postArray, 0, postArray.Length); } }
