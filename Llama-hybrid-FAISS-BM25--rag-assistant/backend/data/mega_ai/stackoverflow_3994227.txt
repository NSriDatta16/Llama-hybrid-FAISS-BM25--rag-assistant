[site]: stackoverflow
[post_id]: 3994227
[parent_id]: 
[tags]: 
Why is PHP's SoapClient creating a different namespace for the header than the body?

I'm trying to communicate with the eWay server and had everything working until we ended up needing to switch to a different API. The problem is that SoapClient is creating a different namespace for the header (that includes the authentication) then from the body, which, obviously, doesn't get me any results. Instead, I get eWay's servers saying it must have the authentication information. Here's my code: $client = new SoapClient($url.'?WSDL', array('trace'=>TRUE)); // Set our SOAP Headers for authentication $header_body = array( 'eWAYCustomerID' => $gateway['customer_id'], 'Username' => $gateway['username'], 'Password' => $gateway['password'] ); $header_var = new SoapVar($header_body, SOAP_ENC_OBJECT); $header = new SOAPHeader('http://www.eway.com.au/gateway/managedpayment', 'eWAYHeader', $header_body); //$client->__setSoapHeaders($header); try { $response = $client->__soapCall($action, $xml, null, $header); } catch (SoapFault $e) { echo 'SOAP Fault: '. $e->getMessage()." \n"; } As you can see, I've tried it with and without using a SoapVar for the header, all with no luck. Here's the XML request that is being created: 87654321 test@eway.com.au test123 ...
