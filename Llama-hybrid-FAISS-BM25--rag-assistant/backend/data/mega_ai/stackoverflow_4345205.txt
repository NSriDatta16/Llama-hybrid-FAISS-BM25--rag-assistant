[site]: stackoverflow
[post_id]: 4345205
[parent_id]: 4344441
[tags]: 
Is there any reason you're reusing your @doc instance variable? When it comes to troubleshooting stuff like this, I find the best idea is to try evaluating the same code without the Rails overhead. For example: require 'nokogiri' doc = Nokogiri::HTML(DATA) doc.css("p").each do |p| p.remove if p["class"] == "why" end __END__ Test Test data More Test Data Why is this still here? Which returns: Test Test data More Test Data Now trying doing paragraphs = @doc.css("p") and then paragraphs.each .. or just omit the whole assignment like I have above.
