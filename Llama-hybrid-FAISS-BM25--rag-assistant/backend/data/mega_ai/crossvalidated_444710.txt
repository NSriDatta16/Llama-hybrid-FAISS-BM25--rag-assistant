[site]: crossvalidated
[post_id]: 444710
[parent_id]: 
[tags]: 
Averaging two dataframes without deleting missing in r

i'm currently trying to merge two dataframes of technical replicates, and am stuck in trying to get my code to not clear missing values. For instance, I have: df1 sampleID geneID ct B1 GABBR1 26.5 B1 GABBR2 21.2 B1 GABRA1 NA B1 GABRA2 19.0 and df2 sampleID geneID ct B1 GABBR1 26.1 B1 GABBR2 21.9 B1 GABRA1 14.7 B1 GABRA2 18.7 I have been able to combine and average the two dataframes using the following code: rbindlist(list(df1,df2))[,lapply(.SD,mean), list(sampleID, geneID)] However, this then produces NA for the CT value on line 3. Is there any way I can alter this code so that it produces 14.7 instead? EDIT: And if anyone knows of a better way to combine technical replicates than this somewhat brutish manner, i'm all ears for that too!
