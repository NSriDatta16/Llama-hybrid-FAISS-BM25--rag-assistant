[site]: stackoverflow
[post_id]: 2957800
[parent_id]: 
[tags]: 
CGContextDrawPDFPage displays white or garbled text

In the process of updating my iPad app I've been attempting to draw a page from an existing PDF document into a Core Graphics context then save it as a new PDF, but am having difficulty getting the text to display properly. Images in the newly-created PDF look great, but text rarely appears correctly: more often that not it appears white/invisible or garbled. When the text is invisible, I am still able to to select where it -should- be and copy/paste correctly into a text editor. Is this an issue related to the limited number of fonts available on the iPad? My code is as follows: CGPDFDocumentRef document = CGPDFDocumentCreateWithProvider(dataProvider); CGPDFPageRef page = CGPDFDocumentGetPage(document, pageNumberToRetrieve); CGRect pageRect = CGPDFPageGetBoxRect(page, kCGPDFMediaBox); UIGraphicsBeginPDFContextToFile(pathToFile, pageRect, nil); CGContextRef context = UIGraphicsGetCurrentContext(); CGContextBeginPage(context, NULL); // I don't think this line is necessary, but I have tried both with and without it. CGContextSetTextDrawingMode (context, kCGTextFill); CGContextDrawPDFPage(context, page); CGContextEndPage(context); UIGraphicsEndPDFContext(); CGDataProviderRelease(dataProvider); CGPDFDocumentRelease(document); If anyone has any suggestions I would greatly appreciate hearing them. Thanks for your time. Rob
