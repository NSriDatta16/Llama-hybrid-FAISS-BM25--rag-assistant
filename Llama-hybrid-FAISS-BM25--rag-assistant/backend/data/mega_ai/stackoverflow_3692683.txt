[site]: stackoverflow
[post_id]: 3692683
[parent_id]: 3692549
[tags]: 
What do you mean by “looks wrong”? Have you tried rendering the data? It’s valid. Below is your code modified to output an SVG of the curve data, which appears correct (but upside down because the coordinate convention of SVG is different). Other than that, removing some random C++, and adding transform which is undefined in your extract, the only difference is that it correctly counts the number of glyphs with [manager numberOfGlyphs] . In the test case, this makes no difference, but in general the glyph count isn’t the same as the length of the string. NSString *str = @"test string"; int length = str.length; NSAffineTransform *transform = [NSAffineTransform transform]; NSFont* font = [NSFont fontWithDescriptor: [NSFontDescriptor fontDescriptorWithName:@"Times" size:20] textTransform: transform]; NSTextStorage *storage = [[NSTextStorage alloc] initWithString:str]; NSLayoutManager *manager = [[NSLayoutManager alloc] init]; NSTextContainer *container = [[NSTextContainer alloc] init]; [storage addLayoutManager:manager]; [manager addTextContainer:container]; NSUInteger glyphCount = [manager numberOfGlyphs]; NSGlyph glyphs[glyphCount]; [manager getGlyphs:glyphs range:NSMakeRange(0, glyphCount)]; [container release]; [manager release]; [storage release]; NSBezierPath* path = [NSBezierPath bezierPath]; [path moveToPoint: NSMakePoint(0, 0)]; // If I don't do this I get an exception that currentPoint doesn't exist ... [path appendBezierPathWithGlyphs:glyphs count:length inFont:font]; printf(" \n" " \n" " \n" "\t Debug dump \n" "\t\n DoublePath for (NSInteger i=0; i \n \n");
