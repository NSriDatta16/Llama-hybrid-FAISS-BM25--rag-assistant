[site]: crossvalidated
[post_id]: 241967
[parent_id]: 
[tags]: 
Obtaining a desired average with a minimum constraint

I have a database with two columns of interest, a weight $w_i$ and a proportion of something $p_i$. I want to create a new proportion, $p'_i$, that is derived from $p_i$, with two constraints : $p'_i$ must be at least 50% I have a target for the weighted average of $p'_i$ : $\sum w_ip'_i=\alpha$ By deriving them from $p_i$, I mean that my goal is to give a proportion for each unit. My calclations yield $p_i$. Nevertheless, another external constraint that I have, is that none of these $p_i$ should be inferior to 50%. So the $p'_i$ I want in the end must be close to $p_i$, I have to "tweak" them to obtain $p'_i$. That is why my initial idea was to create $\tilde{p}_i=max(0.50,p_i)$, and then $p'_i=\tilde{p}_i*\cfrac{\alpha}{\sum w_i \tilde{p}_i}$. But by doing so, I had to reduce some of the $\tilde{p}_i=max(0.50,p_i)$ that I had set to 50%, therefore violating one of my need. Is there a simple way to do both things simultaneously? Or at least in two times, as I guess I can repeat my process and it will converge in the end.
