[site]: stackoverflow
[post_id]: 1472904
[parent_id]: 1471704
[tags]: 
Here is a starting point in awk. I know you can optimize code better. count == 0 { startTime = timeToSeconds($1) } { currentTime = timeToSeconds($1) elapsedTime = currentTime - startTime if (elapsedTime > 30.0) { calculateAverage() startTime = timeToSeconds($1) } print sum += $2 count++ } END { calculateAverage() } function timeToSeconds(timeString) { # Convert a time string to number of seconds split(timeString, tokens, ":") seconds = tokens[1]*3600.0 + tokens[2]*60.0 + tokens[3] return seconds } function calculateAverage() { # Use & modify global vars: count, sum average = sum / count printf "Average: %.4g\n\n", average sum = 0.0; count = 0 }
