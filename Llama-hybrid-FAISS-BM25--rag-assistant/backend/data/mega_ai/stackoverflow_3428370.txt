[site]: stackoverflow
[post_id]: 3428370
[parent_id]: 
[tags]: 
Moving ListBoxItems around a Canvas?

I'm working on dragging objects around a Canvas, which are encapsulated in ListBoxItems -- the effect being to create a simple pseudo desktop. I have a ListBox with a Canvas as the ItemsPanelTempalte, so that the ListBoxItems can appear anywhere on screen: I have a Style to define how the ListBoxItems should appear: The "PseudoWindowContainer" extends from the ContentControl and has its own Style applied to make it look like a dialog box (title bar, close button, etc...). Here is a chunk of it: Inside the PseudoWindowContainer.cs class I create some event handlers to listen for MouseDown/MouseUp/MoveMove events: public override void OnApplyTemplate() { _titleBar = (Border)Template.FindName("PART_TitleBar", this); if (_titleBar != null) { _titleBar.MouseDown += TitleBar_MouseDown; _titleBar.MouseUp += TitleBar_MouseUp; } _grip = (ResizeGrip)Template.FindName("PART_ResizeGrip", this); if (_grip != null) { _grip.MouseLeftButtonDown += ResizeGrip_MouseLeftButtonDown; _grip.MouseLeftButtonUp += ResizeGrip_MouseLeftButtonUp; } base.OnApplyTemplate(); } private void TitleBar_MouseDown(object sender, MouseButtonEventArgs e) { _titleBar.MouseMove += TitleBar_MouseMove; ((Border)sender).CaptureMouse(); _windowLocation.X = Left; _windowLocation.Y = Top; _clickLocation = this.PointToScreen(Mouse.GetPosition(this)); } private void TitleBar_MouseUp(object sender, MouseButtonEventArgs e) { _titleBar.MouseMove -= TitleBar_MouseMove; ((Border)sender).ReleaseMouseCapture(); } private void TitleBar_MouseMove(object sender, MouseEventArgs e) { Point currentLocation = this.PointToScreen(Mouse.GetPosition(this)); Left = _windowLocation.X + currentLocation.X - _clickLocation.X; Top = _windowLocation.Y + currentLocation.Y - _clickLocation.Y; } The trouble I run into is the "Left" and "Top" are not defined properties, and updating them to Canvas.SetLeft/SetTop (or GetLeft/GetTop, accordingly) does not update the position on the Canvas. I have "Left" and "Top" defined in the ViewModel of the controls I place into the ListBoxItems, and are thus subsequently wrapped with a PseudoWindowContainer because of the Template. These values are being honored and the objects do appear in the correct location when the application comes originally. I believe I need to somehow define "Left" and "Top" in my PseudoWindowContainer (aka: ContentControl) and have them propagate back up to my ViewModel. Is this possible? Thanks again for any help!
