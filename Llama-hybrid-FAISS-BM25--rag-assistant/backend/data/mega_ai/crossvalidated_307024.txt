[site]: crossvalidated
[post_id]: 307024
[parent_id]: 
[tags]: 
Using target variable to manipulate features

I often come up with notion when working with machine learning, I think it will be better understood through some examples: Example 1 Say I try to predict a property's price and one of my features is the city identifier. There are 300 different cities in my dataset. My ML algorithm can only handle numerical features, so I decide to transform the field using dummy variables. However 300 columns are too many, therefore I would like to group cities based on something. Should I group them by their average target value (price)? For example expensive cities, average and cheap ones. Example 2 I want to impute missing values using some form of KNN. When trying to define a distance between two records, is it a good idea to include the target variable in the distance calculation? For example if I miss the city identifier for a property, should I fill it with the city of the property with the closest price to it? Question In general these approaches make sense to me but I can't help but feel that I am introducing some feedback that should not be there. Due to my limited math background I cannot formulate the issue. Perhaps someone else can. Or is the proposed approach flawless?
