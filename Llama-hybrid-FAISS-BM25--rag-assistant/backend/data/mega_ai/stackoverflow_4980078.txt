[site]: stackoverflow
[post_id]: 4980078
[parent_id]: 
[tags]: 
I use mysql_real_escape_string before SQL INSERT, but then have to apply stripslashes to my retrieved data. Is it normal?

I'm no PHP/SQL expert, and I've juste discovered that i had to apply mysql_real_escape_string to secure my SQL INSERTS. I made a function using several advice found on the net, here it is: function secure($string) { if(is_numeric($string)) { $string = intval($string); } elseif (is_array($string)) { foreach ($string as $key => $value) { $string[$key] = secure($value); } } else if ($string === null) { $string = 'NULL'; } elseif (is_bool($string)) { $string = $string ? 1 : 0; } else { if (get_magic_quotes_gpc()) { $value = stripslashes($string); } $string = mysql_real_escape_string($string); $string = addcslashes($string, '%_'); } return $string; } Thing is, when I have a look at my tables content, it contains backslashes. And then logically, when I retrieve data I have to apply stripslashes to it to remove these backslashes. Magic Quotes are off. QUESTION 1) Now I think that even though I use mysql_real_escape_string to secure my data before SQL insertion, backslashes should not appear in my content ? Can you confirm this ? QUESTION 2) If not normal, why are these backslashes appearing in my phpMyAdmin content and retrievals ? What did I did wrong ? QUESTION 3) A guess I have is that mysql_real_escape_string could be applied twice, isn't it ? If so, what could be a function to prevent mysql_real_escape_string being applied many times to a same string, leading to many \\ to a same escapable character ? Thanks a lot by advance for your inputs guys !
