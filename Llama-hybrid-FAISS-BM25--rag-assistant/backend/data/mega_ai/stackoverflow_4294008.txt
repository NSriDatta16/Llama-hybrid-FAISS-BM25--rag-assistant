[site]: stackoverflow
[post_id]: 4294008
[parent_id]: 4293782
[tags]: 
First off, your code is quite hard to read, please work on your coding style, for example: Use more than 1 space for per indent Don't place stuff on the same line with opening and closing curly braces Use spaces around == , != etc. This will make your code a lot more readable :) But on to your problem: // this looks like a callback.... chrome.tabs.getSelected(null,function(tab) { var temp; temp = tab.url; localStorage['tab'] = temp; console.log(temp); }); // this will most likely get executed BEFORE the callback gets called // therefore the values just hasn't been changed yet links = localStorage['tab']; rule = localStorage['ok0']; search = links.indexOf(rule); You most likely need to move the rest of the loaded function into the callback.
