[site]: stackoverflow
[post_id]: 1254118
[parent_id]: 
[tags]: 
left join in rails/mysql

i am newbie in rails and try to perform left join in mysql. there are two objects - user and message. user has_and_belongs_to_many messages, message has_and_belongs_to_many users currently, by simply writing user.messages i get following query in console SELECT * FROM `messages` INNER JOIN `messages_users` ON `messages`.id = `messages_users`.message_id WHERE (`users_messages`.group_id = 1 ) Message with restricted==false is not connected to any user but is accessible by any user, and i need to add collection Message.all(restricted=>false) to user.messages the query which would solve my problem would be: select * from messages left join messages_users on messages_users.message_id=messages.id and messages_users.user_id=1 where (messages_users.user_id is NULL and messages.restricted=false) OR (messages_users.user_id=1 and messages.restricted=true); how do i write it in rails as elegantly as possible? would it be smth like Message.find(:all,:conditions => "(messages_users.user_id is NULL and messages.restricted=false) OR (messages_users.user_id=1 and messages.restricted=true)", :joins => "left join messages_groups on messages_users.message_id=messages.id and messages_users.user_id=1 " ) or can it be nicer? i am using rails 2.3.2 thanks, Pavel
