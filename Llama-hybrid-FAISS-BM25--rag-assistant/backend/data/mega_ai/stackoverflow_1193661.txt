[site]: stackoverflow
[post_id]: 1193661
[parent_id]: 1193500
[tags]: 
100% accurate, but pretty difficult approach: Iterate charactes using DOM Use DOM methods to remove remaining elements Serialize the DOM Easy brute-force approach: Split string into tags (not elements) and text fragments using preg_split('/( )/') with PREG_DELIM_CAPTURE. Measure text length you want (it'll be every second element from split, you might use html_entity_decode() to help measure accurately) Cut the string (trim &[^\s;]+$ at the end to get rid of possibly chopped entity) Fix it with HTML Tidy
