[site]: stackoverflow
[post_id]: 5646552
[parent_id]: 5646349
[tags]: 
You need to run sftp in batch mode, by putting your commands in a file and passing that to sftp . You will then get an exit code of 1 if there is a failure and 0 for success. Here is some sample code: # create a temporary file containing sftp commands BATCH_FILE="/tmp/$(basename $0).$$.tmp" echo ${cmdPut} > ${BATCH_FILE} echo ${cmdRen} >> ${BATCH_FILE} # run sftp in batch mode sftp -b ${BATCH_FILE} ${sftpOption} ${targetUsername}@${targetHostname} sftpStatus=$? rm ${BATCH_FILE}
