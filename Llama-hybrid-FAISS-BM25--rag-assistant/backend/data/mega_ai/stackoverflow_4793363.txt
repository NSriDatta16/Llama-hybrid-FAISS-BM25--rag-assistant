[site]: stackoverflow
[post_id]: 4793363
[parent_id]: 
[tags]: 
Why does the compiler ignore OpenMP pragmas?

In the following C code I am using OpenMP in a nested loop. Since race condition occurs, I want to perform atomic operations at the end: double mysumallatomic() { double S2 = 0.; #pragma omp parallel for shared(S2) for(int a=0; a The thing is that #pragma omp atomic has no effect on the program behaviour, even if I remove it, nothing happens. Even if I change it to #pragma oh_my_god , I get no error! I wonder what is going wrong here, whether I can tell the compiler to be more strict when checking omp pragmas or why I do not get an error when I make the last change PS: For compilation I use: gcc-4.2 -fopenmp main.c functions.c -o main_elec_gcc.exe PS2: New code that gives me the same problem and based on gillespie idea: #include #include #include #include #include #define NRACK 64 #define NSTARS 1024 double mysumallatomic_serial(float rocks[NRACK][3], float moon[NSTARS][3], float qr[NRACK],float ql[NSTARS]) { int j,i; float temp_div=0.,temp_sqrt=0.; float difx,dify,difz; float mod2x, mod2y, mod2z; double S2 = 0.; for(j=0; j
