[site]: crossvalidated
[post_id]: 630001
[parent_id]: 629787
[tags]: 
You ask how to perform a sequential update of the vector sequence $$\sigma_n = \sum_{t=1}^n \Sigma_t v_t = \sum_{t=1}^n \sum_{i=1}^t x_i x_i^\prime \, v_t.$$ To update $\sigma_n$ to $\sigma_{n+1}$ you will add their difference, $$\sigma_{n+1} - \sigma_n = \sum_{i=1}^{n+1} x_i x_i^\prime v_{n+1} = \left(\sum_{i=1}^n x_ix_i^\prime\right)v_{n+1} + x_{n+1}\left(x_{n+1}^\prime v_{n+1}\right).\tag{*}$$ Consequently, if you maintain a data structure that includes $$A_n = \sum_{i=1}^n x_i x_i^\prime$$ which (because it is symmetric) requires storing only $p(p+1)/2$ coefficients, then the total storage for all variables in the update is $p(p+1)/2$ (for $A_n$ ) plus $p$ (for $\sigma_n$ ) plus $2p$ (for $x_{n+1}$ and $v_{n+1}$ plus $1$ (for accumulating $x_{n+1}^\prime v_{n+1}$ ), summing to $p^2/2 + 7p/2 + 1 = O(p^2).$ This is the best you can possibly do, because clearly the update depends on $A_n$ and if you don't store full information about it, then for sufficiently large $p$ you can construct an alternative matrix $B_n$ that yields the same value of your data structure but a different value of $B_n v_{n+1}$ for some nonzero possible value of $v_{n+1}.$ To show this is not mere speculation or opinion, I will offer a definite statement and a proof. Proposition. Let the available storage asymptotically be less than $O(p^2)$ and suppose you can store piecewise differentiable functions of the data (which is all you can do in standard models of computing). Then there exists a $p$ for which you cannot sequentially update $\sigma_n$ forever. Proof. The assumptions imply the set of possible values you can store are at most a countable union of differentiable manifolds (possibly with boundaries and corners). Let the largest dimension of any component of this union be $d(p).$ We have supposed that for any number $\lambda \gt 0,$ there exists a sufficiently large $p$ for which $d(p) \lt \lambda p^2.$ Formula $(*)$ shows that $\sigma_n$ can be updated with $O(p)$ storage plus the amount of storage required to compute $A_n v_{n+1}$ for arbitrary vectors $v_{n+1}$ . In other words, any possible updating algorithm will be capable of computing every possible $A_n v_{n+1}$ with at most $O(p)$ extra storage. The map $v\to A_n V$ defines a symmetric endomorphism of $\mathbb R^p.$ The set of such transformations is a differentiable submanifold of $\mathbb R^{p^2}$ of dimension $p(p+1)/2.$ Applying the first observation to the case $\lambda = 1/2$ shows we cannot store every possible element in this set, implying it is not possible to update $\sigma_n$ with certainty for all $n$ with this value of $p,$ qed.
