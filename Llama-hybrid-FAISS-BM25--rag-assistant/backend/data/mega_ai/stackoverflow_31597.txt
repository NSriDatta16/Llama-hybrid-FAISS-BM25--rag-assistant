[site]: stackoverflow
[post_id]: 31597
[parent_id]: 19353
[tags]: 
If you want to efficiently calculate the average power over a sliding window: square each sample, then add it to a running total. Subtract the squared value from N samples previous. Then move to the next step. This is the simplest form of a CIC Filter. Parseval's Theorem tells us that this power calculation is applicable to both time and frequency domains. Also you may want to add Hysteresis to the system to avoid switching on&off rapidly when power level is dancing about the threshold level.
