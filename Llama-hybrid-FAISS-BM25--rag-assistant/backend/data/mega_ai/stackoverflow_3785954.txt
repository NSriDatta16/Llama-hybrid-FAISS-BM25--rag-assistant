[site]: stackoverflow
[post_id]: 3785954
[parent_id]: 3772549
[tags]: 
The validate_doc_update function cannot have any side effects and cannot change the document before storage. It only has the power to block an update or to let it through. This is important, because the function is not only called when a user requests an update, but also when changes are replicated from one CouchDB instance to another. So the function can be called multiple times for one document. However, CouchDB now supports Document Update Handlers that can modify a document or even build it from scratch. These can be used to convert non-JSON input data into usable documents. You can find some documentation in the CouchDB Wiki . Before you build your own user registration/login system, I'd suggest you look into the built-in CouchDB security features (if you haven't - some information here ). They might not be enough for you (e.g. if you need email validation or something similar), but maybe you can build on them.
