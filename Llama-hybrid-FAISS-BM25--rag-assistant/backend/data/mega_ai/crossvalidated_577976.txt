[site]: crossvalidated
[post_id]: 577976
[parent_id]: 
[tags]: 
Including multiple treatment and multiple endpoint studies in meta-analysis using metafor

I am running a random-effects multivariate meta-analysis with the package metafor. I have binary data with one treatment and one control group. I am interested in the overall effect of the treatment. I did not want to average the effect sizes, but use all effect sizes I have, as of by now I just include 15 effect sizes. This post comes close to this one here , however, I am not quite sure if I do it correctly. So I would be more than happy if someone could help. Please see the generic data below. Regarding the dataset: Study 5 has 3 different treatment groups always compared to the no treatment group, therefore these effect sizes are correlated. For study 6 the effect sizes are also correlated, as the same participants are measured 2 weeks later again. data I am running 2 different options. The problem with Option #1 are the profile plots, which have a gap for sigma 2: Option1 For the second option, I was thinking of just including Study/obs, which does not show any gaps in the profile plots Option2 I was also thinking of changing it to a long format as I saw in the example section of the GitHub page by Prof. Viechtbauer ( here ). Option 1 does not show any profile plots however almost no heterogeneity for sigma2 and sigma3. dat.long Another option would also be to delete the reference groups that are included multiple times and to average the results of study 6, as this is the only study that includes measures with a time gap in between. Not quite sure, if this is ok, as it is the only study that would be averaged. I hope someone could help me out. Update: I tried to construct the variance-covariance matrix as described on the metafor page here by the following code. However, I am not quite sure if this takes care of the dependent effect sizes (same control group and one time participants got measured two weeks after the first measurement). data $pti pci $n2i[1]*x$ pci[1]*(1-x $pci[1])), nrow=nrow(x), ncol=nrow(x)) diag(v) vi v } V Thanks again in advance for any help. As I am quite new to meta-analysis, so is the following approach also correct, if I stick to metafor : data $pti pci $n2i[1]*x$ pci[1]*(1-x $pci[1])), nrow=nrow(x), ncol=nrow(x)) diag(v) vi v } V I also saw the vcalc function by metafor . I get the same final results as well as the same results on the diagonal, however, when constructing the covariance matrix I get the following warning for all my clusters: 1: The var-cov matrix appears to be not positive definite in cluster 1. V2 Can I use this and does it take care of my problem that I sometimes have the same control group (study 5 and 7) and for one study, the same participants are measured two weeks after the first one (study 6)?
