[site]: stackoverflow
[post_id]: 3259246
[parent_id]: 
[tags]: 
Encoding rules for URL with the `javascript:` pseudo-protocol?

Is there any authoritative reference about the syntax and encoding of an URL for the pseudo-protocol javascript: ? (I know it's not very well considered, but anyway it's useful for bookmarklets). First, we know that standard URLs follow the syntax: scheme://username:password@domain:port/path?query_string#anchor but this format doesn't seem to apply here. Indeed, it seems, it would be more correct to speak of URI instead of URL : here is listed the "unofficial" format javascript:{body} . Now, then, which are the valid characters for such a URI, (what are the escape/unescape rules) when embedding in a HTML? Specifically, if I have the code of a javascript function and I want to embed it in a javascript: URI, which are the escape rules to apply ? Of course one could escape every non alfanumeric character, but that would be overkill and make the code unreadable. I want to escape only the necessary characters. Further, it's clear that it would be bad to use some urlencode / urldecode routine pair (those are for query string values), we don't want to decode '+' to spaces, for example.
