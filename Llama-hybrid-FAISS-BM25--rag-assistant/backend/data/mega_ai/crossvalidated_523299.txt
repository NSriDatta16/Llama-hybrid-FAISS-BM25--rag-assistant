[site]: crossvalidated
[post_id]: 523299
[parent_id]: 
[tags]: 
Macro version of RMSE

I want to calculate the error of a prediction on an imbalanced dataset, i.e.: true = [0, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 3, 3, 4] pred = [1, 1, 2, 1, 2, 1, 2, 2, 1, 3, 1, 2, 2, 3, 4] This paper suggests using a "Macro version" of standard error functions (MAE, MSE, RMSE). Where for example the normal MAE: $$ MAE^{\mu}(\hat{\Phi}, Te)={1\over \vert Te\vert}\sum_{x_{i}\in Te}\vert \hat{\Phi}(x_{i})-\Phi(x_{i})\vert $$ where $Te$ is a set of samples, $x_i$ are the features for a sample, $\hat{\Phi}(x_{i})$ is a prediction, and $\Phi(x_{i})$ is the true value. is translated into its macro version: $$ MAE^{M}(\hat{\Phi}, Te)={1\over n}\sum_{j=1}^{n}{1\over \vert Te_{j}\vert}\sum_{x_{i}\in Te_{j}}\vert \hat{\Phi}(x_{i})-\Phi(x_{i})\vert $$ where $n$ is the set of unique classes ( $\{0, 1, 2, 3, 4\}$ in our case). So they basically perform an average $MAE$ for each class and then average all those errors. The authors do not specifically write how to do this for $MSE$ but I assume that: $$ MSE^{\mu}(\hat{\Phi}, Te)={1\over \vert Te\vert }\sum_{x_{i}\in Te}(\hat{\Phi}(x_{i})-\Phi(x_{i}))^{2} $$ would be translated to: $$ MSE^{M}(\hat{\Phi}, Te)={1\over n}\sum_{j=1}^{n}{1\over \vert Te_j\vert }\sum_{x_{i}\in Te_j}(\hat{\Phi}(x_{i})-\Phi(x_{i}))^{2} $$ My question is: How would $RMSE^M$ look? Given the $RMSE^\mu$ formula: $$ RMSE^{\mu}(\hat{\Phi}, Te)=\sqrt{{1\over \vert Te\vert }\sum_{x_{i}\in Te}(\hat{\Phi}(x_{i})-\Phi(x_{i}))^{2}} $$ Would we expect an average across all classes like: $$ RMSE^{M}(\hat{\Phi}, Te)={1\over n}\sum_{j=1}^{n}\sqrt{{1\over \vert Te_j\vert }\sum_{x_{i}\in Te_j}(\hat{\Phi}(x_{i})-\Phi(x_{i}))^{2}} \hspace{2cm}(1) $$ Or $\sqrt{MSE^M}$ like: $$ RMSE^{M}(\hat{\Phi}, Te)=\sqrt{{1\over n}\sum_{j=1}^{n}{1\over \vert Te_j\vert }\sum_{x_{i}\in Te_j}(\hat{\Phi}(x_{i})-\Phi(x_{i}))^{2}} \hspace{2cm}(2) $$
