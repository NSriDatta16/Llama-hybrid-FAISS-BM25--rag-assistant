[site]: stackoverflow
[post_id]: 2206458
[parent_id]: 2206425
[tags]: 
Try this one: How to calculate network bandwidth speed in c# . using System; using System.Net.NetworkInformation; using System.Windows.Forms; namespace InterfaceTrafficWatch { /// /// Network Interface Traffic Watch /// by Mohamed Mansour /// /// Free to use under GPL open source license! /// public partial class MainForm : Form { /// /// Timer Update (every 1 sec) /// private const double timerUpdate = 1000; /// /// Interface Storage /// private NetworkInterface[] nicArr; /// /// Main Timer Object /// (we could use something more efficient such /// as interop calls to HighPerformanceTimers) /// private Timer timer; /// /// Constructor /// public MainForm() { InitializeComponent(); InitializeNetworkInterface(); InitializeTimer(); } /// /// Initialize all network interfaces on this computer /// private void InitializeNetworkInterface() { // Grab all local interfaces to this computer nicArr = NetworkInterface.GetAllNetworkInterfaces(); // Add each interface name to the combo box for (int i = 0; i /// Initialize the Timer /// private void InitializeTimer() { timer = new Timer(); timer.Interval = (int)timerUpdate; timer.Tick += new EventHandler(timer_Tick); timer.Start(); } /// /// Update GUI components for the network interfaces /// private void UpdateNetworkInterface() { // Grab NetworkInterface object that describes the current interface NetworkInterface nic = nicArr[cmbInterface.SelectedIndex]; // Grab the stats for that interface IPv4InterfaceStatistics interfaceStats = nic.GetIPv4Statistics(); // Calculate the speed of bytes going in and out // NOTE: we could use something faster and more reliable than Windows Forms Tiemr // such as HighPerformanceTimer http://www.m0interactive.com/archives/2006/12/21/high_resolution_timer_in_net_2_0.html int bytesSentSpeed = (int)(interfaceStats.BytesSent - double.Parse(lblBytesSent.Text)) / 1024; int bytesReceivedSpeed = (int)(interfaceStats.BytesReceived - double.Parse(lblBytesReceived.Text)) / 1024; // Update the labels lblSpeed.Text = nic.Speed.ToString(); lblInterfaceType.Text = nic.NetworkInterfaceType.ToString(); lblSpeed.Text = nic.Speed.ToString(); lblBytesReceived.Text = interfaceStats.BytesReceived.ToString(); lblBytesSent.Text = interfaceStats.BytesSent.ToString(); lblUpload.Text = bytesSentSpeed.ToString() + " KB/s"; lblDownload.Text = bytesReceivedSpeed.ToString() + " KB/s"; } /// /// The Timer event for each Tick (second) to update the UI /// /// /// void timer_Tick(object sender, EventArgs e) { UpdateNetworkInterface(); } } }
