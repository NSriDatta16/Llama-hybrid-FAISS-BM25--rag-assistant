[site]: stackoverflow
[post_id]: 3870377
[parent_id]: 
[tags]: 
SQL queries with views and subqueries

select nid, avg, std from sView1 where sid = 4891 and nid in (select distinct nid from tblref where rid = 799) and oidin (select distinct oid from tblref where rid = 799) and anscount > 3 This is a query I'm currently trying to run. And running it like this takes about 3-4 seconds. However, if I replace the "4891" value with a subquery saying (select distinct sid from tblref where rid = 799) the procedure just hangs, even though the subquery only returns one sid . The query is supposed to return a dataset with averages (avg) and standard deviations (std) over a resultset which is calculated through nested views in sView1. This dataset is then run through another view to get some top-level averages and stdevs. The averages may need to include more than 1 sid (sid identifies a dataset). It's difficult describing it more without revealing codebase and codestructure that shouldn't be revealed ;) Can anyone suggest why the query hangs when trying to use the subquery? (The code is rebuilt from originally using nested cursors, since I have been told that cursors are the work of the devil, and nested cursors may make me sterile)
