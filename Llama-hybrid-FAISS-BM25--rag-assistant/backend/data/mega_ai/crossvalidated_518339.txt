[site]: crossvalidated
[post_id]: 518339
[parent_id]: 
[tags]: 
Can embeddings function as control variables?

Suppose I am building a linear regression model $$y = X + Z + \epsilon$$ where $X$ are covariates, $Z$ is a confounder, and $\epsilon$ is noise. $Z$ is a categorical variable with an enormous number of levels, both in absolute terms and in relation to the amount of data. For example in $10$ million observations $Z$ might have $1$ million levels and many of these levels will only have one observation. However it is possible to use deep learning to build an embedding for $Z$ in a much smaller dimension, say $500$ . If I were to use these embeddings in place of $Z$ in the model, will I still be able to control for the confounding effect of $Z$ ?
