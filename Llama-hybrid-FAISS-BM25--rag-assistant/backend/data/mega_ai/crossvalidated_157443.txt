[site]: crossvalidated
[post_id]: 157443
[parent_id]: 157178
[tags]: 
Can we make some simplifying assumptions? I'd like to have the max concurrent calls happen at the middle of the 5-minute time interval. For now, I'd also like to assume that all calls started at exactly the middle also. Next, let's assume call duration is exponentially distributed. A quick search finds better distributions and this approach should work with any distribution. With those assumptions, we can estimate the number of calls still active at the next time period by using the cumulative distribution to estimate the percent of calls longer than 5 minutes and multiplying by starting number of calls. For example, if 100 calls start between 9:25 and 9:30, then we can estimate $100 e^{-\lambda 5}$ calls still active during the 9:30-9:35 time period. Next, we add up the estimated calls still active from each previous time period and find a $\lambda$ that gives the estimated calls equal to the actual concurrent calls. Then $1/\lambda$, the mean of the exponential distribution, is the average call duration. Let time period $i=0$ be the current 5-minute time period and $i=1$ be the 5-minute time period before that. Let $s_i$ equal the calls started at that time period, e.g. $s_0=125$. Let $c_i$ equal the concurrent calls at the middle of the time period, e.g. $c_0=575$. Let $t_i$ be how many minutes ago the time period was, e.g. $t_0=0, t_1=5, ...$ $$ c_0 = \sum_{i=1}^{\infty} s_i * e^{-\lambda * t_i} $$ I don't know if there is a closed form solution for $\lambda$. It can probably be solved using Newton's method. Below, I've solved for $\lambda$ using trial and error. I estimated the numbers from your plot and, since I don't have the historical data, repeated the started calls hourly for 5 hours of historical data. Using 9:30-9:35 as the current time period and estimating $c_0=575$, I got an average call duration of 40.8 minutes. started_calls We can slightly relax the call started assumption by spreading out the calls over the start of each minute in the 5 minute period. The max concurrent calls still happens at the middle of the period. I got an average call duration of 37.2 minutes started_calls Finally, I would think you're interested in a $\lambda$ for a longer period of time. Consider repeating this process over each 5-minute interval for the same $\lambda$. And for each 5-minute interval, compute an error that is the difference in estimated concurrent calls and observed calls. Finally, select $\lambda$ that minimizes mean squared error. I tried to estimate concurrent calls for the hour in the plot above and repeated the started calls for historical data. I got a call duration of 38.0 minutes concurrent_calls
