[site]: stackoverflow
[post_id]: 4243401
[parent_id]: 3519436
[tags]: 
It's a bit weird but here is a workaround: framework 'Foundation' framework 'AppKit' class KCUpcase def upcase(pasteboard, userData: s_userdata, error: s_error) incoming_string = pasteboard.stringForType "public.utf8-plain-text" outgoing_string = incoming_string.upcase pasteboard.clearContents pasteboard.setString(outgoing_string, forType: "public.utf8-plain-text") end end puts "Starting…" NSRegisterServicesProvider(KCUpcase.new, "Upcase") puts "Registered…" later = NSDate.dateWithTimeIntervalSinceNow(5) NSRunLoop.currentRunLoop.runUntilDate later puts "Done" Basically, you need to define the timestamp before you dispatch the runloop request otherwise the main loop exists before getting the instruction. As you spotted, this is not really a MacRuby bug but still, hopefully that helps.
