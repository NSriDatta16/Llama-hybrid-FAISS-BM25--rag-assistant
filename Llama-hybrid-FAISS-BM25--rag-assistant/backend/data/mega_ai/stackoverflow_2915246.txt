[site]: stackoverflow
[post_id]: 2915246
[parent_id]: 2909764
[tags]: 
I've found a hacky trick to create an environment that can be wrapped in another one. One should use saveBoxes like this: \newenvironment{example}[2][]{% \newsavebox{\exampleStore} % Box storage \begin{lrbox}{\exampleStore} % Start capturing the input }{% \end{lrbox} % Stop capturing the input \colorbox[gray]{0.7}{% \usebox{\NBstorage} % Load the box's contents }% }% }%
