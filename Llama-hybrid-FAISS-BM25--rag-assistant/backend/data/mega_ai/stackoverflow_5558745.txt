[site]: stackoverflow
[post_id]: 5558745
[parent_id]: 
[tags]: 
Force `table` to include all factors from both arrays in R

I am using the following R code to produce a confusion matrix comparing the true labels of some data to the output of a neural network. t However, sometimes the neural network doesn't predict any of a certain class, so the table isn't square (as, for example, there are 5 levels in the test.labels factor, but only 3 levels in the nnetpredict factor). I want to make the table square by adding in any factor levels necessary, and setting their counts to zero. How should I go about doing this? Example: > table(as.factor(a), as.factor(b)) 1 2 3 4 5 6 7 8 9 10 1 1 0 0 0 0 0 0 1 0 0 2 0 1 0 0 0 0 0 0 1 0 3 0 0 1 0 0 0 0 0 0 1 4 0 0 0 1 0 0 0 0 0 0 5 0 0 0 0 1 0 0 0 0 0 6 0 0 0 0 0 1 0 0 0 0 7 0 0 0 0 0 0 1 0 0 0 You can see in the table above that there are 7 rows, but 10 columns, because the a factor only has 7 levels, whereas the b factor has 10 levels. What I want to do is to pad the table with zeros so that the row labels and the column labels are the same, and the matrix is square. From the example above, this would produce: 1 2 3 4 5 6 7 8 9 10 1 1 0 0 0 0 0 0 1 0 0 2 0 1 0 0 0 0 0 0 1 0 3 0 0 1 0 0 0 0 0 0 1 4 0 0 0 1 0 0 0 0 0 0 5 0 0 0 0 1 0 0 0 0 0 6 0 0 0 0 0 1 0 0 0 0 7 0 0 0 0 0 0 1 0 0 0 8 0 0 0 0 0 0 0 0 0 0 9 0 0 0 0 0 0 0 0 0 0 10 0 0 0 0 0 0 0 0 0 0 The reason I need to do this is two-fold: For display to users/in reports So that I can use a function to calculate the Kappa statistic, which requires a table formatted like this (square, same row and col labels)
