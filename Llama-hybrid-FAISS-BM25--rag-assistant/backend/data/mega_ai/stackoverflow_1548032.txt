[site]: stackoverflow
[post_id]: 1548032
[parent_id]: 1394171
[tags]: 
You can append the actual timestamp of each image file by getting the file modification time like this: source.gsub!(/url\((['"]*)(.+)(['"]*)\)/) do open, file, close = $1, $2, $3 css_dir = File.join(RAILS_ROOT,"public/stylesheets") timestamp = '' FileUtils.cd(css_dir) do if file =~ /^\// # absolute path f = File.new(RAILS_ROOT + "/public" + file) else # relative path f = File.new(file) end timestamp = f.mtime.to_i.to_s end if file =~ /.\.(ico|css|js|gif|jpe?g|png)/ "url(#{open}#{file}?#{timestamp}#{close})" else "url(#{open}#{file}#{close})" end end (There's probably a more elegant way to write this, my ruby chops are still weak!) Now the hack's getting ugly, though... you'd think there would be a more Rails-like way to do this.
