[site]: crossvalidated
[post_id]: 515548
[parent_id]: 515226
[tags]: 
In settings with more than two cities, we can still compute the difference-in-differences coefficient. I will show you how it works using a very simply illustration in R, though I highly recommend @DimitriyV.Masterov's answer linked in the comments. Stata's margins command is very robust, though the margins package in R is able to replicate Stata's output. Let's experiment with a simple illustration in R. library(tidyr) set.seed(123) df % group_by(treat, post) %>% # group_by the treatment dummy AND the pre- versus post-treatment indicator summarize(outcome = mean(y)) # calculate the means # Manually extract the means pre_treatment % filter(post == 0, treat == 1) %>% pull(outcome) post_treatment % filter(post == 1, treat == 1) %>% pull(outcome) pre_control % filter(post == 0, treat == 0) %>% pull(outcome) post_control % filter(post == 1, treat == 0) %>% pull(outcome) # Calculate the difference-in-differences estimate manually (dd This approach is a bit tedious but it illustrates the point. Now let's estimate the interaction model in lm() which produces the difference-in-differences coefficient. # Pull out the coefficients (see 'treat:post') lm(y ~ treat*post, data = df)$coefficients (Intercept) treat post treat:post 1018.045979 -7.323225 -15.794770 -5.802908 The difference-in-differences estimate is $-5.803$ , which is equivalent to a 'double difference' using the group means. Note, we're only looking at city averages . Once you start adjusting for other covariates, then I recommend using the margins() function. It will allow you to calculate the marginal effects at specified values. model
