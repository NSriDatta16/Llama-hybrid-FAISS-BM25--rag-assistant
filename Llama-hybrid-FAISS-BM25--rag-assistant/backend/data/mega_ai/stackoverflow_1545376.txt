[site]: stackoverflow
[post_id]: 1545376
[parent_id]: 
[tags]: 
nhibernate cross table query optimization

I have a query I've written with NHibernate's Criteria functionality and I want to optimize it. The query joins 4 tables. The query works, but the generated SQL is returning all the columns for the 4 tables as opposed to just the information I want to return. I'm using SetResultTransformer on the query which shapes the returned data to an Individual, but not until after the larger sql is returned from the server. Here's the NHibernate Criteria return session.CreateCriteria(typeof(Individual)) .CreateAlias("ExternalIdentifiers", "ExternalIdentifier") .CreateAlias("ExternalIdentifier.ExternalIdentifierType", "ExternalIdentifierType") .CreateAlias("ExternalIdentifierType.DataSource", "Datasource") .Add(Restrictions.Eq("ExternalIdentifier.Text1", ExternalId)) .Add(Restrictions.Eq("ExternalIdentifierType.Code", ExternalIdType)) .Add(Restrictions.Eq("Datasource.Code", DataSourceCode)) .SetResultTransformer(new NHibernate.Transform.RootEntityResultTransformer()); And the generated sql (from NHProfiler) is SELECT (all columns from all joined tables) FROM INDIVIDUAL this_ inner join EXTERNAL_ID externalid1_ on this_.INDIVIDUAL_GUID = externalid1_.GENERIC_GUID inner join EXTERNAL_ID_TYPE externalid2_ on externalid1_.EXTERNAL_ID_TYPE_GUID = externalid2_.EXTERNAL_ID_TYPE_GUID inner join SYSTEM_SRC datasource3_ on externalid2_.SYSTEM_SRC_GUID = datasource3_.SYSTEM_SRC_GUID WHERE externalid1_.EXTERNAL_ID_TEXT_1 = 96800 /* @p0 */ and externalid2_.EXTERNAL_ID_TYPE_CODE = 'PATIENT' /* @p1 */ and datasource3_.SYSTEM_SRC_CODE = 'TOUCHPOINT' /* @p2 */ I only want the columns back from the Individual table. I could set a projection, but then I lose the Individual type. I could also rewrite this with DetachedCriteria. Are these my only options?
