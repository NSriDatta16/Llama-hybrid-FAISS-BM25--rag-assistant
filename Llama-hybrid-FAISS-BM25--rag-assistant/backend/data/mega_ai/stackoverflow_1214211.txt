[site]: stackoverflow
[post_id]: 1214211
[parent_id]: 1194718
[tags]: 
It seems like a problem with util:parse specifically, not the rest of your code (and I don't see any alternative way to do what you want here). Have you tried testing util:parse specifically on the sample input that you give in the question (i.e. foo bar ) to verify that it does indeed not parse a multi-node fragment correctly?
