[site]: crossvalidated
[post_id]: 443478
[parent_id]: 443445
[tags]: 
The question is under-specified in that the constraints on the frequencies \begin{align}n_1+2n_2+3n_3+4n_4&=100M\\n_1+n_2+n_3+n_4&=100\end{align} do not determine a distribution: "random" is not associated with a particular distribution, unless the OP means "uniform". For instance, if there exists one solution $(n_1^0,n_2^0,n_3^0,n_4^0)$ to the above system, then the distribution degenerated at this solution is producing a random draw that is always $(n_1^0,n_2^0,n_3^0,n_4^0)$ . In the case the question is about simulating a Uniform distribution over the grid \begin{align}n_1+2n_2+3n_3+4n_4&=100M\\n_1+n_2+n_3+n_4&=100\end{align} one can always use a Metropolis-Hastings algorithm. Starting from $(n_1^0,n_2^0,n_3^0,n_4^0)$ , create a Markov chain by proposing symmetric random perturbations of the vector $(n_1^t,n_2^t,n_3^t,n_4^t)$ and accept if the result is within $\{1,2,3,4\}^4$ and satisfies the constraints. For instance, here is a crude R rendering: cenM=293 #starting point (n¹,n³,n⁴) n 100)|(n[2]-n[1]+2*n[3]!=cenM-200)) n 0)) n=prop} c(n[1],100-sum(n),n[-1]) with the distribution of $(n_1,n_3,n_4)$ over the 10⁶ iterations: In case you want draws of the integers themselves, sample(c(rep(1,n[1]),rep(2,100-sum(n)),rep(3,n[2]),rep(4,n[3]))) is a quick & dirty way to produce a sample.
