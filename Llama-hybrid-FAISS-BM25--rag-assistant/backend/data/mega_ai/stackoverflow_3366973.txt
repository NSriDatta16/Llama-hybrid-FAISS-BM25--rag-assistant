[site]: stackoverflow
[post_id]: 3366973
[parent_id]: 3366798
[tags]: 
Depending on the situation (people always seem to add 2 linebreaks between paragraphs), you could say the problem is: replace all newlines not directly preceded or followed by a newline with a space. //just to be sure, remove \r's $string = str_replace("\r",'',$string); $string = preg_replace('/(? While allowing \r's: $string = preg_replace('/(? Edit: nevermind: do not use: while people tend to write their email text in paragraphs, you will break their signature / signoff with this regex. One could fiddle around with a minimum linelength before deeming it 'breakable' (i chose 63), but fiddly it will be: $string = preg_replace('/([^\r\n]{63,})\r?\n(?!\r|\n)/','$1 ',$string); The problem is: there are no assurance the linebreak wasn't intended. With a fiddleable line-length you could base it on average users, but the question is: what do they mind more: the differences between breaking & non-breaking paragraphs, or the breaking of their signatures?
