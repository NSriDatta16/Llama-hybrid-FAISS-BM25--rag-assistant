[site]: stackoverflow
[post_id]: 1010958
[parent_id]: 1010810
[tags]: 
Tell the person who gave this to you it will require a rewrite. It looks like this function determines user type, sets flags and content for a page generator. You could put this functionality in a flow chart and reorganize this project. This whole thing seems like it would mold very nicely to object-oriented programming. You could really lower the amount of interdependence on session globals, have smaller code and make this whole thing more robust.
