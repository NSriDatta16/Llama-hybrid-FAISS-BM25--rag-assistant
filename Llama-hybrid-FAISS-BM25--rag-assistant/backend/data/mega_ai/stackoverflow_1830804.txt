[site]: stackoverflow
[post_id]: 1830804
[parent_id]: 1823355
[tags]: 
My general answer would be to try and reverse engineer the magento paypal module in magento core. Then you can create a module that will be similar to your desired functionality. Also look at http://www.magentocommerce.com/wiki/how-to/create-payment-method-module and http://activecodeline.net/writing-a-custom-module-in-magento-detailed-walktrough
