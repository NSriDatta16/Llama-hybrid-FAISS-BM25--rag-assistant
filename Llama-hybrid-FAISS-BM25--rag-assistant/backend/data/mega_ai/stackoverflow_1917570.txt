[site]: stackoverflow
[post_id]: 1917570
[parent_id]: 1917300
[tags]: 
I didn't try running any of this, but you do seem to be passing an alpha value to CGContextSetGrayFillColor. Also, the use of "device gray" has been generally discouraged. You might want to double check to make sure that the color space you're getting back has the same number of components as you expect it to.
