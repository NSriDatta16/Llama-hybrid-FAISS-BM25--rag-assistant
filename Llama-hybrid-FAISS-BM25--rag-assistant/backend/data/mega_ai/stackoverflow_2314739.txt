[site]: stackoverflow
[post_id]: 2314739
[parent_id]: 2314683
[tags]: 
First, I'd decide whether your application is write-heavy or read-heavy. If there are a lot more reads than writes, then you want to minimize the amount of work you do on reads (like this script, for example). On the assumption that it's read-heavy, since most webapps are, I'd suggest maintaining the combined average in a separate column and recalculating it whenever a user adds a new rating. Other options are: Try ordering by the calculated column name 'average'. SQL Server supports this. . not sure about mysql. Use a view. You can create a view on your base table that does the average calculation for you and you can query against that. Also, unrelated to your question, don't do a separate query for each user in your loop. Join the users table to the code table in the original query.
