[site]: stackoverflow
[post_id]: 2596427
[parent_id]: 2595710
[tags]: 
It is a recommended good practice in XSLT to prefer using xsl:apply-templates over xsl:for-each . In this case a simple solves the problem in a most elegant way. No conditionals are necessary and the XSLT processor does all the work to apply the template best matching each State child.
