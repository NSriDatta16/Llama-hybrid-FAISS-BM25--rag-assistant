[site]: stackoverflow
[post_id]: 3655550
[parent_id]: 
[tags]: 
Timing program execution in MATLAB; weird results

I have a program which I copied from a textbook, and which times the difference in program execution runtime when calculating the same thing with uninitialized, initialized array and vectors. However, although the program runs somewhat as expected, if running several times every once in a while it will give out a crazy result. See below for program and an example of crazy result. clear all; clc; % Purpose: % This program calculates the time required to calculate the squares of % all integers from 1 to 10000 in three different ways: % 1. using a for loop with an uninitialized output array % 2. Using a for loop with a pre-allocated output array % 3. Using vectors % PERFORM CALCULATION WITH AN UNINITIALIZED ARRAY % (done only once because it is so slow) maxcount = 1; tic; for jj = 1:maxcount clear square for ii = 1:10000 square(ii) = ii^2; end end average1 = (toc)/maxcount; % PERFORM CALCULATION WITH A PRE-ALLOCATED ARRAY % (averaged over 10 loops) maxcount = 10; tic; for jj = 1:maxcount clear square square = zeros(1,10000); for ii = 1:10000 square(ii) = ii^2; end end average2 = (toc)/maxcount; % PERFORM CALCULATION WITH VECTORS % (averaged over 100 executions) maxcount = 100; tic; for jj = 1:maxcount clear square ii = 1:10000; square = ii.^2; end average3 = (toc)/maxcount; % Display results fprintf('Loop / uninitialized array = %8.6f\n', average1) fprintf('Loop / initialized array = %8.6f\n', average2) fprintf('Vectorized = %8.6f\n', average3) Result - normal: Loop / uninitialized array = 0.195286 Loop / initialized array = 0.000339 Vectorized = 0.000079 Result - crazy: Loop / uninitialized array = 0.203350 Loop / initialized array = 973258065.680879 Vectorized = 0.000102 Why is this happening ? (sometimes the crazy number is on vectorized, sometimes on loop initialized) Where did MATLAB "find" that number?
