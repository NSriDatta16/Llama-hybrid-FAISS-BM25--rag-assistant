[site]: stackoverflow
[post_id]: 4811778
[parent_id]: 
[tags]: 
MSTest and app.config issue

I am stuck trying to automate unit tests runs with MSTest and deployment of app.config. I read multiple posts and blogs, tried multiple things and yet still app.config doesn't seem to be picked up during MSTest execution. Having a dll that contains all my unit tests built with msbuild, here is what I've tried... Attempt 1 Copied app.config to the same location with MyTests.dll as MyTests.dll.config (on one of the msdn forums it was said it'd be picked up automagically) Added [DeploymentItem("MyTests.dll.config")] attribute to each test Ran MSTest.exe /noisolation /testcontainer:d:\MyTestTests.dll /test:MyTest Attempt 2 Created local.testrunconfig file with the following content (below) Ran mstest with /runconfig and no isolation, but nothing was executed: MSTest.exe /runconfig:d:\local.testrunconfig /testcontainer:d:\MyTestTests.dll /test:MyTest Result: Loading d:\local.testrunconfig... d:\local.testrunconfig d:\local.testrunconfig ... and nothing happens: no errors, no tests are executed! EDIT/RESOLUTION: By default, MSTest executes tests in separate processes. In this case, config file is automatically picked up if it is named like "dllname.dll.config". However, it is hard to debug tests running in separate processes if they run outside of VS. /noisolation switch is used to make MSTest run all tests in one process. However, in this case test config file is NOT picked up. Instead, MSTest.exe.config file is used, which is located in the same directory as MSTest. To resolve this issue, configuration file can be loaded pragmatically like this: ExeConfigurationFileMap map = new ExeConfigurationFileMap(); map.ExeConfigFilename = @"path to config file"; Configuration config = ConfigurationManager.OpenMappedExeConfiguration(map, ConfigurationUserLevel.None);
