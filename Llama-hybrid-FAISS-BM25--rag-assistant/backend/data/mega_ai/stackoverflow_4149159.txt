[site]: stackoverflow
[post_id]: 4149159
[parent_id]: 4144160
[tags]: 
I believe this would meet your criteria: set textwidth=78 v/^$/normal gq/^$\|\%$^M ^M is ctrl-v followed by enter Lets break this down into smaller peices /^$\|\%$ is a pattern that matches every line not starting with a $. The \%$ will include the lines between the last $ started line and the end of file. gq/^$\|\%$ formats from the current line up to the pattern /^$\|\%$ :normal {cmd} executes a normal mode commands on current line. :v/pattern/ is equivalent to :g!/pattern/ which executes a command on every line lot matching /pattern/ This solution does not format as you type as @Herbert Sitz solution does. Instead formats the text in one fell swoop at the end. You could of course apply this before each write with au BufWritePre filename-pattern-here set textwidth=78 | v/^$/normal gq/^$\|\%$^M au BufWritePost filename-pattern-here set textwidth=0
