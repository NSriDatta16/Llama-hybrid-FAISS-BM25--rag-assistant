[site]: stackoverflow
[post_id]: 2891980
[parent_id]: 
[tags]: 
Django aggregation on a date range

I have been lurking and learning in here for a while. Now i have a problem that somehow i cannot see an easy solution. In order to learn django i am bulding an app that basically keeps track of booked items. What I would like to do is to show how many days per month for a selected year one item has been booked. i have the following models: Asset(Model) BookedAsset(Model): asset = models.ForeignKey(Asset) startdate = models.DateField() enddate = models.DateField() So having the following entries: asset 1, 2010-02-11, 2010-02-13 asset 2, 2010-03-12, 2010-03-14 asset 1, 2010-04-30, 2010-05-01 I would like to get returned the following: asset 1 asset 2 ------- ------- Jan = 0 Jan = 0 Feb = 2 Feb = 0 Mar = 0 Mar = 2 Apr = 1 Apr = 0 May = 1 May = 0 Jun = 0 Jun = 0 Jul = 0 Jul = 0 Aug = 0 Aug = 0 Sep = 0 Sep = 0 Oct = 0 Oct = 0 Nov = 0 Nov = 0 Dec = 0 Dec = 0 I know i need to first get the number of days in a date range (and keep track if they fall out of the current month and into the next month) and then do an agregate on the number of days. I am just stuck on how to do it elegantly in Django. Any help (or hint in the right direction) is greatly appreciated.
