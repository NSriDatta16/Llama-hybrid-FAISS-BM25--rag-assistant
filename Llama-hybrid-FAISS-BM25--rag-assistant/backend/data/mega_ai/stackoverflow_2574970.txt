[site]: stackoverflow
[post_id]: 2574970
[parent_id]: 2574929
[tags]: 
Hi Morgan Cheng (Hong Kong people?), Could your problem be solved by touch -ing the session object when your long-time request finishes? Let's discuss the solution by an example. When the request arrives, you touch the session and extends it for 5 minutes. When the request ends, you also touch the session and extends it for 1 minute, before releasing the lock. If the result of "end request + one minute" is earlier than "start request + 5 minutes" , then use the latter as the timeout; otherwise use the former. (Of course, the 5 minutes and 1 minute could be any value you like.) I wonder what kind of "cache" you are using. From your description, it seems like the cache destroys the session object "automatically". If this is the case, you may touch the session with a very large timeout value, for example, one day , when the request arrives. When the request ends, you re- touch it using a reasonable value, say, 5 minutes . Or, to be smarter , using the value: (5 minutes - request_time > 1 minute) ? (5 minutes - request_time) : 1 minute) , where request_time is the time spent on the request. Hope this helps. Asuka Kenji (from Hong Kong)
