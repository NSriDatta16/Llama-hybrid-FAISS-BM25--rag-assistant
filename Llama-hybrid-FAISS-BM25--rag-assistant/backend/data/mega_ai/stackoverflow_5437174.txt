[site]: stackoverflow
[post_id]: 5437174
[parent_id]: 624549
[tags]: 
As alluded to in the answer's code comments, if the user has not visited the site at least one time, then there is no user metadata available from which to derive a proper usertoken. With SharePoint 2010, you can simulate a user visit, with the EnsureUser method available from the SPWeb class (this snippet creates the user and also tweaks their profile a bit): SPUser alice = web.EnsureUser(@"MYDOMAIN\alice"); SPList userInfo = web.SiteUserInfoList; //metadata storage of user info SPListItem item = userInfo.GetItemById(alice.ID); item["About Me"] = "I am Alice from Mel's Diner"; item.Update();
