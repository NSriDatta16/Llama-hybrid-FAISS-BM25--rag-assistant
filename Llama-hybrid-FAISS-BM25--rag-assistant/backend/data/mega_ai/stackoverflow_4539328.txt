[site]: stackoverflow
[post_id]: 4539328
[parent_id]: 
[tags]: 
How check if file have been changed via other process?

I have two processes (firsts source in perl, seconds source in c++) and both of them use same file. One of them writes to the file line by line, and another reads from file if new line is appended to it. For second process to know that file is modified the first proces flush - es after each apendence. But second process checks only modification time to be increased to start read, but actualy after adding new line and flushing the file doesn't change its "last modification time". So there is another aporache is needed to do this. So the question is here, how detect if new line is appended to the file, to start its processing? here are fragments from source codes of this proceses: 1. open FILE, ">>", $file or die $!; for($i = 0; $i flush(); sleep(10); } close FILE; 2. struct stat64 file_info; if(fstat64(fileno(this->auto_file_ptr.get_file()), &file_info)!=0) { //throw error that file have been changed } data_file_new_modification_time = 1000LL * file_info.st_mtime; if(this->data_file_last_modification_time!=data_file_new_modification_time) { //processs the file }
