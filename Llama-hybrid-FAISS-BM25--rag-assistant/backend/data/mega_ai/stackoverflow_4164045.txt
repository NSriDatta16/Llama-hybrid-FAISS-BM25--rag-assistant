[site]: stackoverflow
[post_id]: 4164045
[parent_id]: 
[tags]: 
section header in uitableview - reusidentifier?

I have a table with customized headers for the sections. In addition to that, I implemented a collapsing feature, so that when a header is touched, all non-adressed sections are reduced, and the adressed section is expanded. I realized that by using UIButtons as background views. Furthermore, the buttons have different colors and text, depending on their state (expanded vs not expanded). I have a problem, similar to that reusidentifier problem, i.e. if u dont reuse cells already allocated in a table, certain fragments appear, if u start to scroll. Here it only happens to my first section, nevertheless it appears fragmented and duplicated.... Is there anything similar to reusing headerviews already allocated once like the method reusIdentifier for UITableViewCells? Or is there a better approach? Allocating the Buttons in advance to store them in array didnt do the trick for me... Here's some code: - (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section { UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, self.tableView.frame.size.width, 40)]; [button setShowsTouchWhenHighlighted:NO]; [button setTitleShadowColor:[UIColor clearColor] forState:UIControlStateNormal]; [button addTarget:self action:@selector(collapse:) forControlEvents:UIControlEventTouchUpInside]; button.tag = section; [button setAdjustsImageWhenHighlighted:NO]; button.backgroundColor = [UIColor colorWithRed:63.0f/255.0f green:154/255.0f blue:201/255.0f alpha:1.0f]; [button.titleLabel setFont:[UIFont fontWithName:@"Helvetica" size:14.0]]; [button setContentHorizontalAlignment:UIControlContentHorizontalAlignmentLeft]; [button setContentVerticalAlignment:UIControlContentVerticalAlignmentCenter]; if (section == 0) { // [button setBackgroundImage:[UIImage imageNamed:@""] forState:UIControlStateNormal]; [button setTitle:@" Newsroom" forState:UIControlStateNormal]; } else { [button setTitle:[NSString stringWithFormat:@" Sektion %d", section] forState:UIControlStateNormal]; } if (section == mySection) { [button setBackgroundImage:[UIImage imageNamed:@"sectionHeader_active.png"] forState:UIControlStateNormal]; [button setBackgroundImage:[UIImage imageNamed:@"sectionHeader_active.png"] forState:UIControlEventTouchUpInside]; [button.titleLabel setTextColor:[UIColor whiteColor]]; } else { [button setBackgroundImage:[UIImage imageNamed:@"sectionHeader_inactive.png"] forState:UIControlStateNormal]; [button setBackgroundImage:[UIImage imageNamed:@"sectionHeader_inactive.png"] forState:UIControlEventTouchUpInside]; [button.titleLabel setTextColor:[UIColor colorWithRed:96.0f/255.0f green:96/255.0f blue:97/255.0f alpha:1.0f]]; } return [button autorelease]; }
