[site]: stackoverflow
[post_id]: 3820466
[parent_id]: 
[tags]: 
javascript objects cant see each other? :: google chrome extension

i have two files one called stats.js one called storage.html in stats.js in contains var stats = { myFunc : function() { //do something } } in storage.html I have $(document).ready(function() { stats.myFunc(); }); But I get Uncaught TypeError: Cannot call method 'myFunc' of undefined Update Ok so that was a really simplified example. The basics of it are, This is a google chrome extension, So you will see some code specific to that. Here is the literal pages concerned: Popup.html Extension popup.js $(document).ready(function() { if(background.storage.get('firstRun') == null) background.initialize(); if(background.storage.get('metaExpire') >= Date.parse(Date())) background.updateMeta(); $('#content').append(read_object(stats.getMetaData())); }); function read_object(object){ var $obj = $(' '); for(var o in object) { $obj.append(o+' : '); if(typeof(object[o]) == 'object' && object[o] != null) $obj.append(read_object(object[o])); else $obj.append(object[o]+' '); } return $obj; } Manifest.json { "name": "Halo Reach: Stats", "description": "This extension allows you to keep track of your own, and your friends Halo Reach Stats.", "version": "1.0.0.1", "permissions": [ "http://www.bungie.net/" ], "icons": { "128": "images/logo/logo128.jpg", "64": "images/logo/logo64.jpg", "32": "images/logo/logo32.jpg", "16": "images/logo/logo16.jpg" }, "browser_action": { "default_title": "Open Stats", "default_icon": "images/logo/logo32.jpg", "popup": "popup.html" }, "background_page": "background.html" } statsapi.js var background = chrome.extension.getBackgroundPage(); var apikey = background.storage.get('apikey'); var gamertage = background.storage.get('gamertag'); var page = '0'; var stats = { getMetaData : function() { var url = 'http://www.bungie.net/api/reach/reachapijson.svc/game/metadata/'+apikey; console.log(url); $.ajax({ url: url, success: function(data) { return data; } }); }, meta : { read : function(param) { var meta = background.storage.get('metaData'); } } }; Background.html var storage = { set : function (key, value) { window.localStorage.removeItem(key); window.localStorage.setItem(key, value); }, get : function (key) { return window.localStorage.getItem(key); }, clear : function () { window.localStorage.clear(); } }; function updateMeta() { var meta = stats.getMetaData(); if(meta['status'] == 0){ storage.set('metaData', JSON.stringify(meta)); storage.set('metaExpire', Date.parse(Date())+900000); } } function initialize() { storage.set('apikey', '***'); storage.set('gamertag', 'The Hailwood'); updateMeta(); } When the extension is invoked it calls popup.html and the document ready javascript is invoked. The check for first run fails, so it calls initialize() in background.html But this is where the error occurs. the actual error is Uncaught TypeError: Cannot call method 'getMetaData' of undefined. So why can it not see the stats class? its not a script include problem as if the path is wrong for the statsapi.js I get Uncaught ReferenceError: stats is not defined. The issue seems to be with the var stats {} as if under that I have a function called test() I can call that fine :/ Hmm, is there an issue because it is an external stylesheet?
