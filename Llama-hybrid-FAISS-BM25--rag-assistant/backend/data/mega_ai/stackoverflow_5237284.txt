[site]: stackoverflow
[post_id]: 5237284
[parent_id]: 
[tags]: 
Rails: organizations that have admins and moderators and users

Existing models: class Organization :admins class User :admins No sweat. @org.users returns a list of admin users. Now I need to add another role: moderators. I can't add another table in the middle (since an association can only have one target). A friend suggested I make moderators polymorphic. I read up on that in the Rails Guides, but not sure how to implement it here. I tried this: class Moderator true end ...and then add this to my User and Organization models: has_many :moderators, :as => :modable Technically this works, however, I can't get my users out of this. I tried to add a user_id column to the Moderator table, but without the association, Rails doesn't want to grab it: > @org.moderators.joins(:users) ActiveRecord::ConfigurationError: Association named 'users' was not found; perhaps you misspelled it? Any help is greatly appreciated. Thanks! UPDATE : Ended up with this (note: moderator is called a "network user"): class Organization :roles has_many :admin_roles, :conditions => {:role_type => "AdminRole"} has_many :admins, :through => :admin_roles, :source => "user", :class_name => 'User' has_many :network_user_roles, :conditions => {:role_type => "NetworkUserRole"} has_many :network_users, :through => :network_user_roles, :source => "user", :class_name => 'User' # This all lives in one table; it has a organization_id, user_id, and special_role_type columns class Role belongs_to :organization belongs_to :user end class AdminRole
