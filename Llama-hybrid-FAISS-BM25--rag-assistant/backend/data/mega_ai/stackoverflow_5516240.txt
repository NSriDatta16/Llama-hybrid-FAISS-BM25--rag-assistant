[site]: stackoverflow
[post_id]: 5516240
[parent_id]: 
[tags]: 
Persist Session State to a DB Table

Using ASP .Net C# 3.5 running on IIS 6 and a SQL Server 2005 backend. I'm implementing a complex multi-step/multi-purpose web form based Intranet web application which has many controls and uses form authentication. The steps are very dynamic with panels and controls presented to or hidden from users according to user selections made in various steps. The form is intense and time consuming for users and per mandate that won't change. I'm attempting to insure the user doesn't get frustrated if their session is interrupted for any reason by insuring the completed steps will be restored when they return to the application. Using an HTTPModule/HTTPHandler called FormStateKeeper (http://fsk.codeplex.com/) does exactly this for instances where the user's authentication times out. Since FormStateKeeper works well for authentication time outs, I've tried to extend/modify it by creating a storage provider that stores the serialized form state in a DB table as a varbinary instead of in the runtime cache which is FormStateKeeper's default. This appears to work i.e. the form when deserialized and reconstituted into the intermediate page looks perfect and identical to one stored in a runtime cache. Anyway, my attempts to use FormStateKeeper using DB storage haven't been successful. I realize I could just serialize the form but I'd like to get the viewstate/control state also since the entire page/app is very dynamic with controls/panels hidden/disabled, step indication graphics etc. I have no problem serializing/deserializing and storing the above but am a bit lost on the best approach to restore a web page to it's saved state for the user when they log back into the application i.e. generate a postback from an intermediate virtual page etc.. Info, suggestions and examples would be much appreciated. Steve
