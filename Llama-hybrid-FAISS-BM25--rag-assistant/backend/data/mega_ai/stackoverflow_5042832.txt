[site]: stackoverflow
[post_id]: 5042832
[parent_id]: 
[tags]: 
Android - image upload sending no content

I've been looking into this for the last day or two and can not seem to find a solution to my issue. I am trying to post an image to a server using httppost. I have tried two ways of doing this and both complete the post but with no content i.e. the content length is 0. The first is as follows: String url = "MYURL"; HttpClient httpClient = new DefaultHttpClient(); try { httpClient.getParams().setParameter("http.socket.timeout", new Integer(90000)); // 90 second HttpPost post = new HttpPost(url); File SDCardRoot = Environment.getExternalStorageDirectory(); File file = new File(SDCardRoot,"/DCIM/100MSDCF/DSC00004.jpg"); FileEntity entity; entity = new FileEntity(file,"binary/octet-stream"); entity.setChunked(true); post.setEntity(entity); post.addHeader("Header", "UniqueName"); HttpResponse response = httpClient.execute(post); if (response.getStatusLine().getStatusCode() != HttpStatus.SC_OK) { Log.e("Here","--------Error--------Response Status line code:"+response.getStatusLine()); }else { // Here every thing is fine. } HttpEntity resEntity = response.getEntity(); if (resEntity == null) { Log.e("Here","---------Error No Response!!-----"); } } catch (Exception ex) { Log.e("Here","---------Error-----"+ex.getMessage()); ex.printStackTrace(); } finally { httpClient.getConnectionManager().shutdown(); } and the second is: String url = "MYURL"; //File SDCardRoot = Environment.getExternalStorageDirectory(); File file = new File(Environment.getExternalStorageDirectory(),"/DCIM/100MSDCF/DSC00004.jpg"); try { HttpClient httpclient = new DefaultHttpClient(); HttpPost httppost = new HttpPost(url); InputStreamEntity reqEntity = new InputStreamEntity(new FileInputStream(file), -1); reqEntity.setContentType("binary/octet-stream"); reqEntity.setChunked(true); // Send in multiple parts if needed httppost.setEntity(reqEntity); HttpResponse response = httpclient.execute(httppost); Log.d("finishing", "The try catch function"); } catch (Exception e) { // show error }*/ As you can see I have hardcoded a path to a specific image, this is to be dynamic when I get it up and running. Can anyone see what i'm doing wrong? Am I leaving out something? I know I use setChunked and setContenttype - is there a setContent option? Any help would be grately appreciated. Thanks, jr83.
