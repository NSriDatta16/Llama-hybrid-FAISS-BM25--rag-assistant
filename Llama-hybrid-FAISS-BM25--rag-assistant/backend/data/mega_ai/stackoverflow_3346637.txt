[site]: stackoverflow
[post_id]: 3346637
[parent_id]: 
[tags]: 
C/C++: duplicate main() loop in many threads

I have this "interesting" problem. I have this legacy code that looks like int main() { while(true) { doSomething(); } } I would like to duplicate that doSomething() in many threads, so that now main() would look like int main() { runManyThreads(threadEntry) } void threadEntry() { while(true) { doSomething(); } } The problem is that doSomething() access many global and static variables, and I cannot alter its code. Is there a trick to duplicate those static variables, so each thread has its own set ? (somekind of thread local storage, but without affecting doSomething()).. I use VisualC++
