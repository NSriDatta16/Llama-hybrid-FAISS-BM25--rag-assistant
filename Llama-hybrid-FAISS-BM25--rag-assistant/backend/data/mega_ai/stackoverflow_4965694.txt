[site]: stackoverflow
[post_id]: 4965694
[parent_id]: 4964979
[tags]: 
JAI is pretty frustrating. I still wonder why, no matter what settings you do, it never matches the speed, quality and simplicity of ImageMagick . I prefer to use ImageMagick wherever I can. The code below is what gives me best result for image scaling. Please note that I have used RenderingHints.VALUE_RENDER_QUALITY and SubsampleAverage and not RenderingHints.VALUE_INTERPOLATION_BICUBIC . I have wrapped up JAI processing in a small block and always use it to scale down. The same code does not give good result when you scale-up -- a different setting applies for that. I have not tried with PNG, JPEG is what I worked with. Hope this helps //Set-up and load file PlanarImage image = JAI.create("fileload", absPath); RenderingHints quality = new RenderingHints(RenderingHints.KEY_RENDERING, RenderingHints.VALUE_RENDER_QUALITY); Properties p = new Properties(System.getProperties()); p.put("com.sun.media.jai.disableMediaLib", "true"); System.setProperties(p); //Setup the processes ParameterBlock pb = new ParameterBlock() .addSource(image) .add(scaleX) //scaleX = (double)1.0*finalX/origX .add(scaleY); //scaleY = (double)1.0*finalY/origY RenderedOp tempProcessingFile = JAI.create("SubsampleAverage", pb, quality); //Save the file FileOutputStream fout = new FileOutputStream(file); JPEGEncodeParam encodeParam = new JPEGEncodeParam(); encodeParam.setQuality(0.92f); //My experience is anything below 0.92f gives bad result ImageEncoder encoder = ImageCodec.createImageEncoder("JPEG", fout, encodeParam); encoder.encode(tempProcessingFile.getAsBufferedImage()); Also, the articles that helped me are. https://jaistuff.dev.java.net/docs/jaitutorial.pdf http://today.java.net/pub/a/today/2007/04/03/perils-of-image-getscaledinstance.html http://forums.sun.com/thread.jspa?threadID=5332078 Looks like after Oracle acquisition they have washed away the forum posts. This was an extra-ordinary discussion over JAI performance and quality. I still had it bookmarked. http://www.digitalsanctuary.com/tech-blog/java/how-to-resize-uploaded-images-using-java-better-way.html (The links above are from my bookmark, edit them if you find they are dead)
