[site]: stackoverflow
[post_id]: 3664542
[parent_id]: 3663489
[tags]: 
he_the_great has it basically right, but the following small change will make it work with opCall enabled structures/classes as well. import std.conv; import std.stdio; import std.traits; void fun ( T ) ( float value, T pred ) if ( __traits( compiles, pred( value ) ) && is( ReturnType!pred : int ) ) { writefln( "pred( %f ) -> %s", value, pred( value ) ); } struct impl1 { int opCall ( float f ) { return to!int( f ); } } int impl2 ( float f ) { return to!int( f ); } void main () { impl1 x; fun( 1.0, x ); fun( 2.0, &impl2 ); fun( 3.0, ( float f ){ return to!int( f ); } ); }
