[site]: crossvalidated
[post_id]: 591536
[parent_id]: 
[tags]: 
confidence interval for clustered bernoulli with different number of trials

I have a dataset of ~300 households with 1-8 kids in them (long tail in number of kids; median=2) and information about the parents. With the parent being the level/unit of observation, I need to know how the proportion of kids at or above reading level differs by parental traits (binary or categorical, such as binary parental college degree or categorical household composition). So I need to know the grand mean and confidence interval by these traits to figure out if there is a difference. Is it best to think of this as 300 series of 1-8 Bernoulli trials? If so, how to get a valid proportion and 95%CI of kids at reading level, and by each trait? It seems improper to pool the number of kids at reading level over the total number of kids because it doesn't account for differences across households. Would an averaged weighted by number of kids in the household be appropriate for the mean? How to then calculate mean for each different parental trait (ie, college degree vs not), which is ascribed to the entire household (which is the unit of analysis). What is the best way to calculate the confidence interval for what is essentially the mean of a series of proportions? *** Most importantly, I'd like to learn the best way to calculate these. I don't think that pooling overall is best, and would rather account for a differing number of "trials" in each group contributing to an overall mean with a confidence interval so that I can discern differences by household traits. *** But since it's obligatory, this is what I've tried thus far, along with a sample dataset. R code for dummy data, where ID is the parent, numkids is the number of kids in the household, numread is the number of kids in the household at or above reading level, and par1 and par2 are parental indicators (binary & categorical, respectively): df1 % rowwise %>% mutate(HH.atlvl=numread / numkids) an unweighted mean of the proportions overall and by trait is mean(df1$HH.atlvl) df1 %>% group_by(par1) %>% summarise_at(vars(HH.atlvl), list(avg = mean)) If this is sufficient, is there a way to prop.test by groups? The following code gives the error that overallmean must be a vector, not an 'htest' object. df1 %>% group_by(par1) %>% summarise_at(vars(numread, numkids), list(tot = sum)) %>% mutate(overallmean=prop.test(numread_tot, numkids_tot)) I appreciate any help, references, code, information, etc.
