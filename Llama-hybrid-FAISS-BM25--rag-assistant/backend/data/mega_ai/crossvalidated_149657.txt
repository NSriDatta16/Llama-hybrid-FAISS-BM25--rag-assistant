[site]: crossvalidated
[post_id]: 149657
[parent_id]: 149582
[tags]: 
As @ssdecontrol mentions, it sounds like you have a Markov chain. The Markov property is that your current state doesn't depend on states you visited previously. At each molecule, there is a 50% chance of going either way and doesn't depend on which other molecule you came from. The transition matrix describes the probability of going from one state to another. In this case, you would have the states {earth, 1, 2, 3, sun} and the matrix would be: $$ \left| \begin{array}{ccc} 1.0 & 0 & 0 & 0 & 0 \\ 0.5 & 0 & 0.5 & 0 & 0 \\ 0 & 0.5 & 0 & 0.5 & 0 \\ 0 & 0 & 0.5 & 0 & 0.5 \\ 0 & 0 & 0 & 0 & 1.0 \\ \end{array} \right| $$ So the first row would be: I am on earth, and I stay on earth. The second row would be: I am at the first molecule, and I have 0.5 chance of going to earth and 0.5 chance of going to molecule 2. Given my understanding if your problem, you're looking at the subset of the protons on earth that get to molecule 1. That is your starting state. Of course, you can change the model to start on earth and have a non-zero probability to make it to molecule 1. If do you this, you also probably want to have a non-zero probability to go from space to molecule 3. If you want to find out how many protons end up in earth or space, you're looking for the stationary/equilibrium/steady-state probability. The matrix represents the probability of where you'd end up in one step, given where you started. If you multiply the matrix by itself, it now represents where you'd end up in two steps given where you started. If you multiply the matrix infinite times, that will represent where you'd finally end up given where you started. There is a clean way of solving for this probability without multiplying, but this should be good enough for now. In this case, if you're starting at state 1, you have a 75% chance of ending on earth and 25% chance on space. m There are other questions you can solve by modeling the question this way. For instance, you can find out the expected number steps before the photon returns to a state. You can also find the number of visits to a specific state. Though you don't mention it, I would think you might have more than 3 molecules. In general, this is called a Countable state Markov chain instead of a Finite state Markov chain. But in this specific case, it looks like the probability of making it into space from molecule 1 is $\frac{1}{numberOfMolecules+1}$. I found this by experimenting and not through a formal mathematical proof.
