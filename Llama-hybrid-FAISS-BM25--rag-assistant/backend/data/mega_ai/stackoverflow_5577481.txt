[site]: stackoverflow
[post_id]: 5577481
[parent_id]: 
[tags]: 
Sending a File using Bluetooth OBEX Object Push Profile (OPP)

Is there any way to send a file using the android bluetooth API using OBEX? I need to send a file to a printer that supports OBEX OPP only. I can send the file using the android intent ACTION_SEND to the printer with no problems, but I'd need to send it programmatically.. I can connect to the bluetooth printer using OBEX OPP UUID (1105) with the method createRfcommSocketToServiceRecord(), but then I should follow obex specifications to send a file using OBEX.. it isn't as simple as writing bytes to the output socket.. But if the intent ACTION_SEND can handle this, why there isn't any api for developers to send the files? I also checked some third party libs like BlueCove, but I still didn't get it to work.. (Nexus One & Galaxy Tab throw an exception saying that native library bluecove_armv71 isn't available.. and LG Optimus One says that bluecove_armv61 isn't available..) i'm stuck, any ideas? WORKING SOLUTION For anyone trying to send a file to a bluetooth device with no luck, I provide a working solution using content providers (thanks to KPBird): Grab the java class BluetoothShare from here Than, the following code sends a file on the SD card to a bluetooth device: BluetoothDevice device; String filePath = Environment.getExternalStorageDirectory().toString() + "/file.jpg"; ContentValues values = new ContentValues(); values.put(BluetoothShare.URI, Uri.fromFile(new File(filePath)).toString()); values.put(BluetoothShare.DESTINATION, device.getAddress()); values.put(BluetoothShare.DIRECTION, BluetoothShare.DIRECTION_OUTBOUND); Long ts = System.currentTimeMillis(); values.put(BluetoothShare.TIMESTAMP, ts); Uri contentUri = getContentResolver().insert(BluetoothShare.CONTENT_URI, values); UPDATE Some people are experiencing problems with the solution above, it has been tested on the following devices: Works on: LG Optimus One (Android 2.1) HTC Desire (Android 2.2) Google Nexus One (Android 2.2 and 2.3) Samsung Galaxy S2 (Android 4.0.3) HTC Amaze (Android 2.3.4) Has issues on: LG P500 (Android 2.3.3) Galaxy TAB P500 (Android 2.2) Google Nexus S (Android 4.1.2) If you are able to test this snippet on devices which are not listed above, please provide the details of the devices (brand, name, android version, etc..) with which you tested it, and the test results, in a comment below, I will update the question including your data.
