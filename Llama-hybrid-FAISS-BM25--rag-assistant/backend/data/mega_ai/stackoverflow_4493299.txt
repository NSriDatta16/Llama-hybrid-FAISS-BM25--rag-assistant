[site]: stackoverflow
[post_id]: 4493299
[parent_id]: 
[tags]: 
Can't delete posts in forum. (CakePHP)

I'm using the Cupcake Forum plugin within CakePHP. There's a form for selecting the desired posts, and then submitting the form to delete the posts. The form data is apparently being sent to the 'moderate' function within the 'topics' controller using POST and GET methods simultaneously. The function first checks to see if the data sent in is POST. However, when the data is received, it shows that it's GET. A fellow programmer and I don't want to completely change someone else's internal code, but we can't figure out how the data is being sent by both methods and being received as GET. The code from the plugin is below: --------------moderate.ctp (view)--------------------- create('Post', array('url' => array('controller' => 'topics', 'action' => 'moderate', $topic['Topic']['slug']))); ?> -------------topics_controller.php (controller)------- public function moderate($id) { if ($this->RequestHandler->isGet()){ $this->log('Is GET!'); } $user_id = $this->Auth->user('id'); $topic = $this->Topic->getTopicForViewing($id, $user_id, 'id'); // Access $this->Toolbar->verifyAccess(array( 'exists' => $topic, 'permission' => $topic['ForumCategory']['accessRead'], 'moderate' => $topic['Topic']['forum_category_id'] )); $this->log('ID: '.$id.'\n'); if ($this->RequestHandler->isPost()){ $this->log('Is POST!'); } if ($this->RequestHandler->isGet()){ $this->log('Is GET!'); } $this->log($this->RequestHandler->getReferer()); $this->log(serialize($this->data)); // Processing if ($this->RequestHandler->isPost()) { $this->log('INSIDE POST!'); if (!empty($this->data['Post']['items'])) { $items = $this->data['Post']['items']; $action = $this->data['Post']['action']; foreach ($items as $post_id) { $this->log('Action: '.$action.'\n'); $this->log('PostID: '.$post_id.'\n'); if (is_numeric($post_id)) { if ($action == 'delete') { $this->Topic->Post->destroy($post_id); $this->Session->setFlash(sprintf(__d('forum', 'A total of %d post(s) have been permanently deleted', true), count($items))); } } } } } We added the log checks, which show the result of 'Is GET!' in Cake's log file. Since the method is GET, the statement 'if ($this->RequestHandler->isPost())' is never true; therefore, the submitted posts aren't deleted. What are we missing?
