[site]: stackoverflow
[post_id]: 4867988
[parent_id]: 
[tags]: 
How to send/receive layer 2 frames on wlan

What I wanna do: Implement a layer 2 protocol in user-space. So I'm using pcap under Linux 2.6.32 to sniff packets: ... struct pcap_t *pcap_h = pcap_open_live("wlan0", BUFSIZ, 1, 0, errbuf); ... while (1) { int ret = pcap_loop(pcap_h, -1, newpkt_callback, NULL); ... } ... Which works just fine for all packets. But, when I use pcap to send packets with no ether_head and no IP header: const char pkt[] = "WHATEVER"; nsent = pcap_sendpacket(pcap_h, (const u_char *)pkt, len); ... I can only sniff the packet on the localhost, and not on other laptops that are running the same program. So the question is "how can I broadcast messages without ether_head on a wlan"? Any pointers would be appreciated.
