[site]: stackoverflow
[post_id]: 2145678
[parent_id]: 2145510
[tags]: 
You have defined a random space of 4501 values (500-5000), and you are iterating 4500 times. You are basically guaranteed to get a collision in the test you wrote. To think about it another way: When the result array is empty P(dupe) = 0 1 value in Array P(dupe) = 1/4500 2 values in Array P(dupe) = 2/4500 etc. So by the time you get to 45/4500, that insert has a 1% chance of being a duplicate, and that probability keeps increasing with each subsequent insert. To create a test that truly tests the abilities of the random function, increase the universe of possible random values (eg: 500-500000) You may, or may not get a dupe. But you'll get far more iterations on average.
