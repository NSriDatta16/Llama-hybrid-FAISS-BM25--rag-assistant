[site]: stackoverflow
[post_id]: 3413762
[parent_id]: 
[tags]: 
Cross Origin Resource Sharing with PrototypeJS

I am having some trouble with Cross Origin Resource Sharing and Prototype. I have a simple post request to a foreign resource, and for a simple post request there are some rules that must be satisfied: the Content-Type must be on of application/x-www-form-urlencoded, multipart/form-data, or text/plain, a simple request does not set custom headers with the http Request, and the Server must set the Access-Control-Allow-Origin header correct. with a vanilla JavaScript XMLHttpRequest everything works fine but with PrototypeJS it won't work because it seams Prototype sets some custom headers and I don't know how to prevent it. I tried it in Prototype via: new Ajax.Request('some.foreign-host.com/res.php', { method: 'post', postBody: 'foo=bar', contentType: 'application/x-www-form-urlencoded', onSuccess: function(e){ // some custom code } }); Any idea how to get Prototype to send such a simple CORS Request? I have a dump of the Headers created by a plain JavaScript XMLHttpRequest : POST /bthesis/returnJSON.php HTTP/1.1 Host: foreign-host.com Connection: keep-alive Referer: this-host.com Content-Length: 9 Origin: this-host.com Content-Type: application/x-www-form-urlencoded; charset=UTF-8 Accept: */* User-Agent: [...] Accept-Encoding: gzip,deflate,sdch Accept-Language: de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4 Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 and the Headers created by a Prototype Request : OPTIONS /bthesis/returnJSON.php HTTP/1.1 Host: foreign-host.com Connection: keep-alive Referer: this-host.com Access-Control-Request-Method: POST Origin: this-host.com Access-Control-Request-Headers: X-Prototype-Version, X-Requested-With, Content-type, Accept Accept: */* User-Agent: [...] Accept-Encoding: gzip,deflate,sdch Accept-Language: de-DE,de;q=0.8,en-US;q=0.6,en;q=0.4 Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 Prototype uses a totally different header set... which leads to following error in the console: XMLHttpRequest cannot load foreign-host.com/bthesis/returnJSON.php. Request header field X-Prototype-Version is not allowed by Access-Control-Allow-Headers. Refused to get unsafe header "X-JSON" The strange thing is, that the Webserver returns in both cases the requested resource (I see it in the 'Resources' View of the developer console in chrome) but it seams that prototype has no access to it somehow
