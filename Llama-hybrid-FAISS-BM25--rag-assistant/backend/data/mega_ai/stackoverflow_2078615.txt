[site]: stackoverflow
[post_id]: 2078615
[parent_id]: 
[tags]: 
Behavior of omp_get_max_threads in parallel regions

I compile this bit of code on Snow Leopard and linux and I get different results. On Snow leopard, the first call of omp_get_max_threads returns 2, which is my number of cores, while the second returns 1. On linux, both calls return 4, which is my number of cores. I think Linux has the correct behavior, am I right? Are both correct and I just have a misunderstanding of this function? #include #include int main() { printf(" In a serial region; max threads are : %d\n", omp_get_max_threads()); #pragma omp parallel { #pragma omp master printf(" In a parallel region; max threads are : %d\n", omp_get_max_threads()); } } Mac output: In a serial region; max threads are : 2 In a parallel region; max threads are : 1 Linux output: In a serial region; max threads are : 4 In a parallel region; max threads are : 4
