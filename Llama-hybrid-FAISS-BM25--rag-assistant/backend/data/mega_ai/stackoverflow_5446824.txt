[site]: stackoverflow
[post_id]: 5446824
[parent_id]: 
[tags]: 
How to limit the amount of connections per second made to server in GET / PHP5?

Given the script below that fetches words in another language and makes a connection with the server. But, there are so many separate string entities that some of them return as empty values. StackOverflow fellow @Pekka correctly assessed this to the limitation of Google: Timing Out the result. Q1.How can I make the connection more strong/reliable, albeit at the cost of speed? Q2. How can I deliberatly limit the amount of connections made per second to the server? I am willing to sacrifice speed even its will cause a 120 second delay) as long as the returned values are correct. Now everything starts and finished in 0.5 second orso, with various gaps in the translation. Almost like Dutch Cheese ( with holes) and I want cheese withuot holes, even if that means longer waiting times. As you can see my own solution of putting the script to sleep for 1/4 of a second cannot be called elegant... How to proceed from here? $url='http://ajax.googleapis.com/ajax/services/language/translate?v=1.0&q=' . rawurlencode($string) . '&langpair=' . rawurlencode($from.'|'.$to); $response = file_get_contents($url, null, stream_context_create( array( 'http'=>array( 'method'=>"GET", 'header'=>"Referer: http://test.com/\r\n" ) ) )); usleep(250000); # means 1/4 of second deliberate pauze return self::cleanText($response); }
