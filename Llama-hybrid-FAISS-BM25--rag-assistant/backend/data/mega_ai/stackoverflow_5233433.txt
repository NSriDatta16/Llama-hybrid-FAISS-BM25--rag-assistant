[site]: stackoverflow
[post_id]: 5233433
[parent_id]: 5232743
[tags]: 
You're experiencing a known bug which affects Python 2.4-2.6. If you can't change or patch your version of Python, @jd's solution will work around the issue. However, if you need a more generic solution that works as a standard urljoin would, you can use a wrapper method which implements the workaround for that specific use case, and default to the standard urljoin() otherwise. For example: import urlparse def myurljoin(base, url, allow_fragments=True): if url[0] != "?": return urlparse.urljoin(base, url, allow_fragments) if not allow_fragments: url = url.split("#", 1)[0] parsed = list(urlparse.urlparse(base)) parsed[4] = url[1:] # assign params field return urlparse.urlunparse(parsed)
