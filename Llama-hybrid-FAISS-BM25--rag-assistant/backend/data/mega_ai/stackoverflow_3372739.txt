[site]: stackoverflow
[post_id]: 3372739
[parent_id]: 3372703
[tags]: 
yes, volatile int ready = 0; is always needed here. Update If you would like no optimization around some code snippet, you can either use #pragma directives around that code (if your compiler supports them) or - which is totally portable - move the code to separate files and compile these files with no or little optimizations. The latter approach might still require usage of the volatile keyword, since the ready variable might be used by other modules which you might want to optimize.
