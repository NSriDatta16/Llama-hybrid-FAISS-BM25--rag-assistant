[site]: crossvalidated
[post_id]: 162587
[parent_id]: 
[tags]: 
How to use a particle filter for Bayesian inference?

I'm not very well versed in probability theory, so I'm not sure how to assess if my approach is correct. I hope this is the right place to ask. I have implemented a particle filter to get an estimate of the state vector of an object that I'm tracking with some sensors. I choose a particle filter, because the state vector is subject to some nonlinear restrictions (walls, floor, etc.) that I can account for by setting the weights of invalid particles (states) to zero before resampling. My goal is to use the particles in a Bayesian classifier to see if the observed state is consistent with my hypothesis. If I have understood correctly, after the resampling, the particle collection is a representation of the posterior probability density function $p(x)$. The average $\bar{x}$ obtained by averaging all states (particles) would be my best estimate for the true state. I define my evidence $E$ as the observation of $x$. For the Bayesian classifier, I need to calculate the posterior probability $P(H|E) = \frac{P(E|H)}{P(E)} P(H)$. The prior probability $P(H)$ I can obtain from historical data regarding my hypothesis (in my case a Poisson distribution seems to be applicable). My question pertains to how to obtain the likelihood and $P(E|H)$, given the fact that I have the probability density function $p(x)$ (or at least an approximation of it) in the form of the particle distribution. I was thinking to use a normal distribution, with parameters $\mu,\sigma$ obtained from experiments, to approximate the probability density function $p(x|H)$, but then it is unclear how I would obtain the probability $P(E|H)$ from that. Any pointers or ideas would be much appreciated. Since it is a classifier, I don't need really need to calculate $P(E)$, but I think it would be helpful if I could, since I can then report actual probabilities $P(H|E=x)$ for various hypotheses, instead of only reporting the most likely hypotheses. UPDATE What I have so far is the following: The particle filter gives me a set of particles. From this I can obtain the estimate of the state as the average $\bar{x}$, together the standard deviation $\sigma$. With the particles I can also estimate the CDF of $x$ as $cdf(x) \approx \sum_{i=0}^{I_x} 1/N$, where $N$ is the number of particles and $I_x$ is the index of the particle nearest to $x$. For the classifier, $P(H)$ and $P(x|H)$ can be obtained from experiments and observations of the hypothesis. $P(x)$ can be approximated by calculating $P(\bar{x}-\sigma \leq x \leq \bar{x}+\sigma)$ using the approximated CDF. The last part is still what I'm most unsure of. I'm trying to implement some simulations. Any comments on the correctness of this approach are also appreciated.
