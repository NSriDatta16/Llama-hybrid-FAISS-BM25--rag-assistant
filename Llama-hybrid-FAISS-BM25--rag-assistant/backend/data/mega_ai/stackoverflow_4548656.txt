[site]: stackoverflow
[post_id]: 4548656
[parent_id]: 4548443
[tags]: 
Your problem is not Facebook related per se. There are many ways you could implement this, it also depends on your particular application. You could track every click a user makes (timestamp of the click) and then calculate the time spent from that (last click in session - first click in session). This approach is not very accurate off course since you don't know how many time a user was still using your application after the last click. One other solution that comes to mind right now, would be to fire a XHR (AJAX) request every X seconds that would also log the timestamp in some storage (db, redis, memcache, ...) and you could then do the same calculation from that. It would be more accurate (depending on your interval X).
