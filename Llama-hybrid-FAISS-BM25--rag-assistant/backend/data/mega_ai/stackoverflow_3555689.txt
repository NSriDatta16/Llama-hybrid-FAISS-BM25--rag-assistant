[site]: stackoverflow
[post_id]: 3555689
[parent_id]: 
[tags]: 
Selecting and analysing window of points in an array

Could someone please advise me on how to resolve this problem. I have a function which performs a simple regression analysis on a sets of point contained in an array. I have one array (pval) which contains all the data I want to perform regression analysis on. This is how I want to implement this. I get an average value for the first 7 elements of the array. This is what I call a 'ref_avg' in the programme. I want to perform a regression analysis for every five elements of the array taking the first element of this array as the 'ref_avg'. That is in every step of the regression analysis I will have 6 points in the array. e.g For the 1st step the ref_avg as calculated below is 70.78. So the 1st step in the simple regression will contain these points 1st = {70.78,76.26,69.17,68.68,71.49,73.08}, The second step will contain the ref_avg as the 1st element and other elements starting from the second element in the original array 2nd = {70.78,69.17,68.68,71.49,73.08,72.99}, 3rd = {70.78,68.68,71.49,73.08,72.99,70.36}, 4th = {70.78,71.49,73.08,72.99,70.36,57.82} and so on until the end. The regression function is also shown below. I don't understand why the first 3 elements of the 'calcul' array have value 0.00 on the first step of the regression, 2 elements on the 2nd step,1 elements on the 3rd. Also the last step of the regression function is printed 3 times. #include #include #include int main() { float pval[]={76.26,69.17,68.68,71.49,73.08,72.99,70.36,57.82,58.98,69.71,70.43,77.53,80.77,70.30,70.5,70.79,75.58,76.88,80.20,77.69,80.80,70.5,85.27,75.25}; int count,Nhour; const int MAX_HOUR = 24; float *calcul=NULL; float *tab_time =NULL; float ref_avg; int size_hour=7; float sum=0; int length = Nhour+1; float m; float b; calcul=(float*)calloc(MAX_HOUR,sizeof(calcul)); if (calcul==NULL) { printf(" error in buffer\n"); exit(EXIT_FAILURE); } tab_time= calloc(MAX_HOUR,sizeof(float)); /* Get the average of the first seven elements */ int i; for (i=0;i
