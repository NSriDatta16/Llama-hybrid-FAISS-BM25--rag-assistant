[site]: stackoverflow
[post_id]: 2418240
[parent_id]: 
[tags]: 
How to get back button to work with anchors (#) and iframes

I am working on a site where the main part of it is driven by an ajax style navigation system using anchors in the url to define the application state. On top of this I now need to support IFrames that are loaded on top of this application. The problem I'm having is that the back button breaks if I make use of fragments. I've created a very simple sample , that isn't using any of the ajax libraries. All it has is a link that adds an anchor to the url and an iframe, with some normal links in it. If I click then anchor link first, then I click the link in the iframe, I would expect the first back click to take back to the original iframe page and the second click to remove the anchor from the url. I'm aware of all the various solutions out there ( YUI , reallysimplehistory , jquery plugin ) and they all work great, but they don't cater for iframes. I'm also aware that I could add some JS to the framed pages and possibly route all navigation through the parent page, but I'm hoping that isn't necessary. So the question is, can anyone explain what is going on inside the history object in this sample ? Secondly is there anything I can do from the parent iframe to coax the history object to pick up these navigation entries? Note: I'm only enquiring about FF/Safari/Chrome in this sample. IE needs to looked at separately.
