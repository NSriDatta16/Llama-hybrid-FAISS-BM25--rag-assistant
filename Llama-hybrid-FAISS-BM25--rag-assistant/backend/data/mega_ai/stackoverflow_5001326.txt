[site]: stackoverflow
[post_id]: 5001326
[parent_id]: 
[tags]: 
PHP strange DOCUMENT_ROOT

So basically, I'm writing a framework, and as part of it features, it's supposed to provide a set of well-established URIs/paths to the end-developer. Some two of these paths make use of $_SERVER['DOCUMENT_ROOT'] : /** * Absolute filesystem path to web root install (aka docroot). * @example "C:/wamp/www" OR "/home/visitgoz/public_html/" */ CFG::set('ABS_WWW', str_replace( $tmpseps, DIRECTORY_SEPARATOR, truepath($_SERVER['DOCUMENT_ROOT']).'/' ) ); /** * K2F path relative to web root. * @example /K2F/ */ CFG::set('REL_K2F', str_replace( array('//','\\'), '/', str_replace(CFG::get('ABS_WWW'),'/',CFG::get('ABS_K2F')) ) ); The code has been fine-tuned to work on both Linux and Windows. Apparently, it works most of the time on Linux, quite seamless in fact on VPSes. However, as of late, I tried it on an HG Reseller Account (shared hosting) and it all broke up. I've printed out data inside $_SERVER on the problematic machine: Array ( ** [DOCUMENT_ROOT] => /usr/local/apache/htdocs [GATEWAY_INTERFACE] => CGI/1.1 [HTTP_ACCEPT] => text/html,application/xhtml+xml,application/xml;q=0.9;q=0.8 [HTTP_ACCEPT_CHARSET] => ISO-8859-1,utf-8;q=0.7,*;q=0.7 [HTTP_ACCEPT_ENCODING] => gzip,deflate [HTTP_ACCEPT_LANGUAGE] => en-gb,en;q=0.5 [HTTP_CONNECTION] => keep-alive [HTTP_COOKIE] => [HTTP_HOST] => [HTTP_KEEP_ALIVE] => 115 [HTTP_USER_AGENT] => [PATH] => /bin:/usr/bin [QUERY_STRING] => [REDIRECT_STATUS] => 200 [REMOTE_ADDR] => [REMOTE_PORT] => 49262 [REQUEST_METHOD] => GET [REQUEST_URI] => /~sitename/ ** [SCRIPT_FILENAME] => /home/sitename/public_html/index.php [SCRIPT_NAME] => /~sitename/index.php [SERVER_ADDR] => [SERVER_ADMIN] => [SERVER_NAME] => [SERVER_PORT] => 80 [SERVER_PROTOCOL] => HTTP/1.1 [SERVER_SIGNATURE] => Apache mod_fcgid/2.3.5 mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635 Server at Port 80 [SERVER_SOFTWARE] => Apache mod_fcgid/2.3.5 mod_auth_passthrough/2.1 mod_bwlimited/1.4 FrontPage/5.0.2.2635 [UNIQUE_ID] => TVox-Eo1Z8IAAG1kAh4AAAEZ [PHP_SELF] => /~sitename/index.php [REQUEST_TIME] => 1297756668 [argv] => Array ( ) [argc] => 0 ) And my machine: Array ( [HTTP_AUTHORIZATION] => [HTTP_HOST] => [HTTP_USER_AGENT] => [HTTP_ACCEPT] => text/html,application/xhtml+xml,application/xml;q=0.9;q=0.8 [HTTP_ACCEPT_LANGUAGE] => en-gb,en;q=0.5 [HTTP_ACCEPT_ENCODING] => gzip,deflate [HTTP_ACCEPT_CHARSET] => ISO-8859-1,utf-8;q=0.7,*;q=0.7 [HTTP_KEEP_ALIVE] => 115 [HTTP_CONNECTION] => keep-alive [PATH] => [SystemRoot] => C:\Windows [COMSPEC] => C:\Windows\system32\cmd.exe [PATHEXT] => .COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC [WINDIR] => C:\Windows [SERVER_SIGNATURE] => [SERVER_SOFTWARE] => Apache/2.2.11 (Win32) PHP/5.3.1 [SERVER_NAME] => [SERVER_ADDR] => [SERVER_PORT] => 80 [REMOTE_ADDR] => ** [DOCUMENT_ROOT] => C:/wamp/www/ [SERVER_ADMIN] => admin@localhost ** [SCRIPT_FILENAME] => C:/wamp/www/K2F/cms/cms-joomla-1.5/index.php [REMOTE_PORT] => 49947 [GATEWAY_INTERFACE] => CGI/1.1 [SERVER_PROTOCOL] => HTTP/1.1 [REQUEST_METHOD] => GET [QUERY_STRING] => [REQUEST_URI] => /K2F/cms/cms-joomla-1.5/ [SCRIPT_NAME] => /K2F/cms/cms-joomla-1.5/index.php [PHP_SELF] => /K2F/cms/cms-joomla-1.5/index.php [REQUEST_TIME] => 1297758541 ) ** Parts you ought to read out, should explain my problem perfectly. So basically, the expected DOCUMENT_ROOT is /home/sitename/public_html/ , but instead I got /usr/local/apache/htdocs . Oh, and sorry if I've been a bit too verbose ;) Edit: getcwd() => /home/visitgoz/public_html __FILE__ => /home/visitgoz/public_html/K2F/config.php
