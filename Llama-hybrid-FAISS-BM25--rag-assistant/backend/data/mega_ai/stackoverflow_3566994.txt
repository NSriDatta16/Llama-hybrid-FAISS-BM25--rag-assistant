[site]: stackoverflow
[post_id]: 3566994
[parent_id]: 3566870
[tags]: 
Connect to the device using ActiveSync and open a remote registry editor. Searcht eh HKLM\Drivers\Active key for a value of DSKx: where x is a number (you can also use FindFirstStore and FindNextStore for that). Once you have that you can open the store with OpenStore . Then you can find the first partition with FindFirstPartition and FindNextPartition , open the partition on the store and see the filesystem type (in the PARTINFO struct). Use the Storage Manager API to do all this.
