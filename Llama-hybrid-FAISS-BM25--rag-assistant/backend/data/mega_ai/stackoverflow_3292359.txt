[site]: stackoverflow
[post_id]: 3292359
[parent_id]: 
[tags]: 
Why can't I share Session state between 2 web apps with StateServer? What am I missing?

I'm having trouble getting 2 identical ASP.NET MVC applications to share the same Session using a Session StateServer. The reason I'm trying to do this is we will eventually be deploying this app across 3 web servers that need to share the same state. We need to use StateServer because we are trying to minimise use of the db for non data-related storage. The Setup: I've deployed the same code base to http://localhost/ App1 and http://localhost/ App2 both have identical Web.Config files with the following: //stateConnectionString="tcpip=192.168.1.52:42424" /> // also doesn't work I used this tool to generate these machine keys The Test: I put the following into one of my Controllers to test if it was working: ViewData["mode"] = requestContext.HttpContext.Session.Mode.ToString(); string timestamp = DateTime.Now.ToString(); if (requestContext.HttpContext.Session["timestamp"] == null) { requestContext.HttpContext.Session["timestamp"] = timestamp; } ViewData["timestamp"] = requestContext.HttpContext.Session["timestamp"].ToString(); ViewData["realtime"] = timestamp; with this in the view: Mode: Time: real time: The Result: For both deployments, when the page first loads I can see that the mode is StateServer and the timestamp is getting set to the same time as the realtime value.. However, if this was working, only the first page should have the same time as the realtime value. The second page load should read from the StateServer because that timestamp value is no longer null, and display that time value. But instead, it's displaying the realtime value again. When I refresh the page, I the timestamp stays the same and the realtime value is always updating. This indicates that the timestamp is being saved to the Session, but the time stamp value is always different for both deployments when it should be the same, so this indicates that the Session is not being shared. Can somebody point out if I'm doing something wrong or if there's something else I need to do to get this to work? Thanks
