[site]: stackoverflow
[post_id]: 3986452
[parent_id]: 
[tags]: 
Multiple animations and textures with Cocos2d - How to remove texture from memory?

I am writing an application where you push different buttons and a character gets animated. The thing is that I have many images, so I need to use one texture for each animation. Therefore I need to release sprite sheet and frame cash, but it does not seem to be working. Memory gets allocated more and more until the app crashes. Here is the code: // **** DEFINE THE ANIMATION - EATING 1: **** // Create a sprite sheet with all the images CCSpriteSheet *spriteSheet = [CCSpriteSheet spriteSheetWithFile:@"Eating4.png"]; // This loads an image of the same name (but ending in png), and goes through the // plist to add definitions of each frame to the cache. [[CCSpriteFrameCache sharedSpriteFrameCache] addSpriteFramesWithFile:@"Eating4.plist"]; [self addChild:spriteSheet]; ///[self addChild:spriteSheet2]; // Load up the frames of our animation NSMutableArray *eating1AnimFrames = [NSMutableArray array]; for(int i = 0; i 9) { [eating1AnimFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[NSString stringWithFormat:@"Eating4_00%d.png", i]]]; } } CCAnimation *eatingAnim = [CCAnimation animationWithName:@"eating" delay:0.05f frames:eating1AnimFrames]; // Create a sprite for the mouse CGSize winSize = [CCDirector sharedDirector].winSize; self.mouse = [CCSprite spriteWithSpriteFrameName:@"Eating4_0000.png"]; _mouse.position = ccp(winSize.width/2+20, winSize.height/2); // Adjust the size of the Sprite: [_mouse setScaleX: 1]; [_mouse setScaleY: 1]; //self.eatingAction = [CCRepeatForever actionWithAction:[CCAnimate actionWithAnimation:eatingAnim restoreOriginalFrame:NO]]; self.eatingAction = [CCAnimate actionWithAnimation:eatingAnim restoreOriginalFrame:NO]; [spriteSheet addChild:_mouse]; [_mouse runAction:_eatingAction]; I try to release memory like this: [[CCTextureCache sharedTextureCache] removeAllTextures]; [[CCSpriteFrameCache sharedSpriteFrameCache] removeSpriteFrames];
