[site]: crossvalidated
[post_id]: 263929
[parent_id]: 263880
[tags]: 
Typically, people do stratification on quantiles of the propensity score (e.g., the top 10%, then next 10%, etc.). Researchers should choose the number of strata based on which produces the best balance. Here is some R code to do the stratification for estimating the ATET: nstrata You can also use the MatchIt package as so: m.out and the subclasses will be in the m.out object. To assess balance on subclassified data, use the cobalt package as so: If you did subclassification manually (i.e., using the first code block), do the following: bal.tab(train ~ age + agesq + re74 + re75 + nodegree + black + hisp, subclass = strata, data = training, method = "subclassification", disp.subclass = TRUE) If you used MatchIt for the subclassification, do the following: bal.tab(m.out, disp.subclass = TRUE) The output is the standardized means differences (for continuous variables) and differences in proportion (for binary variables) in each subclass, followed by a summary averaging over the subclasses. If your mean differences are low, that's evidence you have achieved balance. For common support, you can see using bal.tab() how many units are in each subclass. If there are too few of either treatment or control, you may not have common support. You can graphically examine common support using bal.plot() in cobalt: bal.plot(prs_df, treat = training$train, var.name = "pr_score") All this is described in the documentation for cobalt .
