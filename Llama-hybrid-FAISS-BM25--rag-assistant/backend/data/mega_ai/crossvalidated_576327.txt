[site]: crossvalidated
[post_id]: 576327
[parent_id]: 
[tags]: 
Variations of difference-in-difference method

I have data from a group of patients and for each patient I have two time series A and B (continuous quantity) sampled on a weekly basis. My hypothesis is that quantity B has a 1-week lagged effect on quantity A, causing A to drop with increasing B and I want to estimate this causal effect using the difference-in-difference method. However, I don't think my problem fits the canonical setup for a difference-in-difference analysis since 1) I don't have a natural control and treatment group, but what I have done is match patients with similar characteristics to create synthetic control/treatment pairs to remove potentially unobserved confounders. Under this set up, first what I started with is $A_{i,t} = \alpha_i + \kappa_t + \beta x_{ i,t} + \tau B_{i,t-1} + \epsilon_{i,t}$ where $\alpha_i$ represents time-invariant measure of patient heterogeneity in A, and $\kappa_t$ presents time trend across patients; $x_{i,t}$ is a factor that vary across both patient and time. Then what I did was a two-step differencing, across time (first difference) and between the matched pairs: $\Delta_{x,y} \delta_t A = \beta \Delta_{x,y}\delta_t x + \tau \Delta_{x,y}\delta_t B + \Delta_{x,y}\delta_t \epsilon$ where $\alpha$ and $\kappa$ have dropped out because of the differencing. I then basically ran this regression at each time point $t$ for each matched pair. I am however skeptical about this method as (1) the canonical DiD method requires the parallel treatment assumption, but in this case there is no well defined pre-treatment period and so there is no way to test this, and (2) serial correlation between weekly measurements of A and B. I am wondering if there are variations of the DiD method that could be applied to such a problem, and if not what alternative solutions are there to estimate the causal effect (e.g. VAR/SVAR models with Granger causality?)
