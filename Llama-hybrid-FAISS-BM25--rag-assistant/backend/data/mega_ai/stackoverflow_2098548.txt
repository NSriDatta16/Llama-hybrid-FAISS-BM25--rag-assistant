[site]: stackoverflow
[post_id]: 2098548
[parent_id]: 
[tags]: 
android - save image from web server and set it as wallpaper

Can anyone please provide me some idea/guidance on how to save an image from a webserver and set it as wallpaper? i am developing an android application which needs to do that and i am new in android. Thanks a lot. I had tried writing my own code but it doesn't work as i can't find my images after download but the wallpaper has change to the downloaded picture. here is my existing code. Bitmap bmImg; void downloadFile(String fileUrl) { URL myFileUrl = null; try { myFileUrl = new URL(fileUrl); } catch (MalformedURLException e) { // TODO Auto-generated catch block e.printStackTrace(); } try { HttpURLConnection conn = (HttpURLConnection) myFileUrl .openConnection(); conn.setDoInput(true); conn.connect(); int length = conn.getContentLength(); InputStream is = conn.getInputStream(); bmImg = BitmapFactory.decodeStream(is); // this.imView.setImageBitmap(bmImg); } catch (IOException e) { // TODO Auto-generated catch block e.printStackTrace(); } try { String filepath=Environment.getExternalStorageDirectory().getAbsolutePath(); FileOutputStream fos = new FileOutputStream(filepath + "/" + "output.jpg"); bmImg.compress(CompressFormat.JPEG, 75, fos); fos.flush(); fos.close(); Context context = this.getBaseContext(); context.setWallpaper(bmImg); } catch (Exception e) { //Log.e("MyLog", e.toString()); TextView tv = (TextView) findViewById(R.id.txt_name); tv.setText(e.toString()); } }
