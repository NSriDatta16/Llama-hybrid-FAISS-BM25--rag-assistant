[site]: stackoverflow
[post_id]: 5075744
[parent_id]: 
[tags]: 
HTML5 Offline app always sending "error" event on iPod Touch iOS 4.2.1

I have an issue in iOS with a HTML5 Offline app. My app works fine offline in Firefox, Chrome and Android 2.2, but not on my iPod Touch running iOS 4.2.1. Here is my manifest (a JSP), called "1.cache.manifest.jsp". I use a "no-cache.jsp" JSP to ask that the manifest is not cached. I also add "index.jsp" to the manifest, though this is strictly not necessary as it is the resource that references the manifest. CACHE MANIFEST index.jsp cache-this.js.jsp Here is my index.jsp page. It listens to the applicationCache events and dumps out the event type. I use a "no-cache.jsp" JSP to ask that the HTML is not cached. var appCacheEvents = ["checking", "error", "noupdate", "downloading", "progress", "updateready", "cached", "obsolete"]; for (var i = 0; i "; }, false); } The "cache-this.js.jsp" is some javascript that adds some text to the page when loaded: // cache this window.addEventListener("load", function (evt) { var msg = "Script loaded " + new Date(); document.getElementById("cache-this-output").innerHTML = msg; }, false); This is the output on those user agents that work, the FIRST time the site is accessed: applicationCache checking event. applicationCache downloading event. applicationCache progress event. applicationCache progress event. applicationCache cached event. Script loaded Sun Feb 20 2011 13:22:33 GMT+0000 (GMT Standard Time) Subsequently the output is: applicationCache checking event. applicationCache noupdate event. Script loaded Sun Feb 20 2011 13:23:47 GMT+0000 (GMT Standard Time) And when offline (in Firefox) I get the following. Note the "error" event, but the app DOES work offline (even after I clear the HTTP cache). applicationCache checking event. applicationCache error event. Script loaded Sun Feb 20 2011 13:26:54 GMT+0000 (GMT Standard Time) On my iPod Touch I get the same output (as first access) EXCEPT the "cached" event is replaced by an "error" event. Any ideas why iOS is failing to cache the app initially?
