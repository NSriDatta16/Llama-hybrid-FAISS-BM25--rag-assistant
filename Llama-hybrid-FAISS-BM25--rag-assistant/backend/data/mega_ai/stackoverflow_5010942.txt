[site]: stackoverflow
[post_id]: 5010942
[parent_id]: 5010801
[tags]: 
I would wager a guess that this has to due with the differing expire times of your session cookie, and the expire times you set for your ID_my_site and Key_my_site cookies. If not overridden, the default session timeout is 30 minutes (expressed as seconds in the settings - so 1,800). Your cookies are set to expire after an hour. So you could find yourself in a situation where the session has expired, but the other cookies are still present. Depending on the order / way you are checking things and then redirecting, you will encounter this situation if the user was idle for more than 30 minutes but less than 1 hour. Since the only redirect you are performing in this code sample is the one to home.php , there is some sort of check occurring in that file, that is sending them on the never ending redirect spiral. As an aside, that code sample really is very messy. You are assigning and reassigning the $username variable so often for example (and to seemingly different types of things - though I wouldn't know without seeing actual input), that it is no wonder you are having mystery issues. These few lines for example are redundant: // Process the POST variables $username = $_SESSION["user_name"]; //$password = $_POST["password"]; // Set up the session variables $_SESSION["user_name"] = $username; You're assigning $username from the session and immediately assigning it back. From the beginning of the file: $SUBDOMAIN = mysql_real_escape_string($_GET['p_name']); $pname = mysql_real_escape_string($_GET['p_name']); These two variables are assigned the same $_GET value, but it doesn't appear that $SUBDOMAIN is ever used. And from the end of the file you are assigning the same value twice: $_POST['password'] = md5($_POST['password']); $_POST['password'] = $_POST['password']; I really would encourage you to step back from your code, look at your inputs and figure out what you need to accomplish and refactor or rewrite this code entirely. With stuff like this floating around it is no wonder you have mystery bugs in your system.
