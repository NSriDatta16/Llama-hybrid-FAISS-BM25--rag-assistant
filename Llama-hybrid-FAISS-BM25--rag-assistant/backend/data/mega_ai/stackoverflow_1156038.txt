[site]: stackoverflow
[post_id]: 1156038
[parent_id]: 
[tags]: 
unit testing datastores in PHP

I'm using PHPUnit but find it difficult to make it create good mocks and stubs for objects used as datastore. Example: class urlDisplayer { private $storage; public function __construct(IUrlStorage $storage) { $this->storage = $storage; } public function displayUrl($name) {} public function displayLatestUrls($count) {} } interface IUrlStorage { public function addUrl($name, $url); public function getUrl($name); } class MysqlUrlStorage implements IUrlStorage { // saves and retrieves from database } class NonPersistentStorage implements IUrlStorage { // just stores for this request } Eg how to have PHPUnit stubs returning more than one possible value on two calls with different $names? Edit: example test: public function testUrlDisplayerDisplaysLatestUrls { // get mock storage and have it return latest x urls so I can test whether // UrlDisplayer really shows the latest x } In this test the mock should return a number of urls, however in the documentation I only how to return one value.
