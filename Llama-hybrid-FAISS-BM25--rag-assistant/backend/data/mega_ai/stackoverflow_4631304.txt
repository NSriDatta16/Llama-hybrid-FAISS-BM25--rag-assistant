[site]: stackoverflow
[post_id]: 4631304
[parent_id]: 
[tags]: 
Updating listbox and variable changing to old value at the end of the function in MATLAB GUI

The below GUI simply lists some data in a listbox, plots it, and gives the user the option to delete entries from the listbox. I'm hitting my head against the wall trying to get to listbox updated correctly after the user deletes an entry (it should be obvious when you run it). The 2 problems I have are: While the callback to the pushbutton does indeed delete the entry correctly from array x, once the callback finishes, the array x reverts back to the original x array (thus, the value somehow restores itself). I try to use "drawnow" to refresh the listbox to reflect the current x array (which has been modified, at least where drawnow is issued below). Nothing changes though. How can I refresh the listbox with the new x array values? ----------------GUI code--------- function testgui clear; close all; % Create the data x = (10:20)'; % example data % Create a figure f = figure('Name', 'GUI Test',... 'NumberTitle', 'off',... 'MenuBar', 'none',... 'Units', 'pixels',... 'Position', [100 100 700 800],... 'Visible', 'off'); % Create a set of axes a = axes('Parent', f,... 'Units', 'pixels',... 'Position', [230 50 450 700]); % Create a pushbutton for modifying x array pb_x = uicontrol('Style', 'pushbutton', ... 'Parent', f,... 'String', 'Delete Selection',... 'Units', 'pixels',... 'Position', [50 7 100 35],... 'Callback', @pb_change_x); plot(x,'bo'); % graph xlabel('Index Number'); ylabel('Variable x'); % Create a listbox to hold the x values y=strtrim(cellstr(num2str(x))); lb = uicontrol('Style', 'listbox',... 'Parent', f,... 'String', y,... 'Units', 'pixels',... 'Position', [50 50 100 700],... 'Callback', @list_change); set(f,'Visible','on') function list_change(varargin) % Runs when the selection in listbox is changed curIdx = get(lb,'Value'); % Index the value curVal = str2double(cell2mat(y(curIdx))); % Get position of curVal in x posVal = find(ismember(x,curVal)); % Clear all the children currently on the axes delete(get(a,'Children')) % Plot the one data point of interest plot(posVal,curVal,'bo','MarkerFaceColor','b','MarkerSize',10) xlabel('Index Number'); ylabel('Variable x'); % Plot all the data hold on plot(x,'bo') hold off end function pb_change_x(varargin) % Runs when DUT
