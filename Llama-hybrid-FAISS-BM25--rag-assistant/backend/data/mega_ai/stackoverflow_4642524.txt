[site]: stackoverflow
[post_id]: 4642524
[parent_id]: 
[tags]: 
Maths! Approximating the mean, without storing the whole data set

Obvious (but expensive) solution: I would like to store rating of a track (1-10) in a table like this: TrackID Vote And then a simple SELECT AVERAGE(Vote) FROM `table` where `TrackID` = some_val to calculate the average. However, I am worried about scalability on this, especially as it needs to be recalculated each time. Proposed, but possibly stupid, solution: TrackID Rating NumberOfVotes Every time someone votes, the Rating is updated with new_rating = ((old_rating * NumberOfVotes) + vote) / (NumberOfVotes + 1) and stored as the TrackID 's new Rating value. Now whenever the Rating is wanted, it's a simple lookup, not a calculation. Clearly, this does not calculate the mean. I've tried a few small data sets, and it approximates the mean. I believe it might converge as the data set increases? But I'm worried that it might diverge! What do you guys think? Thanks!
