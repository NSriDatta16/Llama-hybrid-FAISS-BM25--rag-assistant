[site]: stackoverflow
[post_id]: 2293155
[parent_id]: 
[tags]: 
Apple Push Notification Service APNS - Notifications not arriving

I am trying to add push notifications to my app. I have am using an ad hoc profile. My appID does not have a wildcard. I am using the following php code... $deviceToken="****";masked $time = time(); $apnsHost = 'gateway.sandbox.push.apple.com'; $apnsPort = 2195; $apnsCert = 'apns-dev-maui.pem'; $streamContext = stream_context_create(); stream_context_set_option($streamContext, 'ssl', 'local_cert', $apnsCert); $apns = stream_socket_client('ssl://' . $apnsHost . ':' . $apnsPort, $error, $errorString, 2, STREAM_CLIENT_CONNECT, $streamContext); if($apns) { echo "Connection Established "; $payload = array(); $payload['aps'] = array('alert' => 'It works!!', 'badge' => 1, 'sound' => 'default'); $payload = json_encode($payload); $apnsMessage = chr(0) . chr(0) . chr(32) . pack('H*', str_replace(' ', '', $deviceToken)) . chr(0) . chr(strlen($payload)) . $payload; print "sending message :" . $apnsMessage . " "; print "sending payload :" . $payload . " "; fwrite($apns, $apnsMessage); } else { echo "Connection Failed"; echo $errorString; echo $error; } // socket_close($apns); fclose($apns); No connection errors are generated. Nothing seems to be coming from the feedback channel. I got the deviceTokens from the organizer console and an NSLog command. The notifications for this app are showing up in my settings menu. I have an ATT 3G and an old 2G that I use as an iPod. Neither work. With no errors to look at, I am out of ideas. Anyone have any insight? Jennifer
