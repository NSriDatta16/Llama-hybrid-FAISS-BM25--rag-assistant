[site]: crossvalidated
[post_id]: 136416
[parent_id]: 
[tags]: 
Discrepancy between hierarchical top level time series and direct sums - using package hts

I have an xls file with sales data from 12 shops, each selling two types of goods. If I read in the xls file and sum up sales for each month (ignoring the two types of goods and just looking at the overall total), and make it into a time series like this: myTS I get one result. I'll put it at the end for easy comparison. If I instead use the time series for each product in each shop, creating a time series matrix with 24 columns, and then convert it into a hts object. I get a slightly different result. The data at shop level is very sparse and I had to replace a lot of NAs with 0's in order to do any analysis on it. countsMatrix Where createCountsMatrix and getCounts I make the countsMatrix into a hierarchical time series matrix using myMTS and now for the output: With direct sums: > myTS Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec 2011 186 229 193 437 1122 1298 1223 808 277 145 162 306 2012 224 247 306 494 896 895 1019 843 213 154 157 245 2013 128 121 202 264 846 646 570 492 183 78 77 184 As hierarchical time series: > myHTS Hierarchical Time Series 3 Levels Number of nodes at each level: 1 12 24 Total number of series: 37 Number of observations per series: 36 Top level series: Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec 2011 186 232 214 480 1144 1295 1182 781 313 162 226 365 2012 235 259 330 531 993 956 1030 852 230 165 153 237 2013 117 108 178 228 720 574 494 438 161 71 72 158 Shouldn't myTS and the top level series of myHTS be identical? Why don't they agree? I hope somebody can help me understand why they're not. I can't provide the original data, but I hope that by providing the code I can still get an answer. Thanks in advance.
