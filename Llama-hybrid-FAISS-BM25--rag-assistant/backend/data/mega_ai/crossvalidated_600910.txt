[site]: crossvalidated
[post_id]: 600910
[parent_id]: 600652
[tags]: 
It seems like you have several questions, so please correct me if I'm wrong. What effect is estimated when using IPW? It depends on how you construct the weights. There is a formula for each of the main estimands, the ATE (average treatment effect in the population), ATT (average treatment effect on the treated), ATC (average treatment effect on the control), or ATO (average treatment effect in the overlap). There are yet other formulas for computing weights from propensity scores that target other populations and have different proprties. See Li for a general theory. The usual IPW weights, computed using the formula you wrote, targets the ATE. What these weights do when correctly specified is to make the distribution of covariates in the treated group and the distribution of covariates in the control group resemble the distribution of covariates in the full sample (and thereby, resemble each other). Of course, the ATE is only identified when all causes of the outcome are balanced by the weights. In observational studies, we don't know whether we have balanced all the causes of the outcome because not all of the have been measured. Is the ATE what you should be estimating with IPW? That depends on if you want the ATE. You need to choose the estimand that is most substantively relevant (see Greifer & Stuart (2021) for advice on how to make this choice) and then use the formula for that estimand to compute the weights. The ATT and the ATE are equal when there is no effect modification by the confounders OR when the distribution of effect modifiers is the same between the treated and control group prior to weighting. One should never count on these assumptions since they require a lot of evidence to validate. You should always choose the estimand and compute the weights for it assuming the estimands target different effects.
