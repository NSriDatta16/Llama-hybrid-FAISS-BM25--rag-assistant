[site]: stackoverflow
[post_id]: 5137021
[parent_id]: 5135977
[tags]: 
1) Try rollapply in the zoo package: > library(zoo) > rollapply(zoo(1:5), 3, function(x) x[2] * x[2] - x[1] * x[3]) 2 3 4 1 1 1 coredata(z) gives the data portion, i.e. c(1, 1, 1) , and time(z) gives the time portion, i.e. c(2, 3, 4) . 2) Another way to do it in zoo is: > z z*z - lag(z) * lag(z,-1) 2 3 4 1 1 1 3) This last approach also works in ts class found in the core of R: > tt tt * tt - lag(tt) * lag(tt, -1) Time Series: Start = 2 End = 4 Frequency = 1 [1] 1 1 1
