[site]: crossvalidated
[post_id]: 580124
[parent_id]: 579783
[tags]: 
given that the resulting null distribution of permuted risk ratios is skewed and centred on 1? You can express the risk ratio, the ratio of probabilities for the cases $x_0$ and $x_1$ given the other covariates $\mathbf{z}$ , as a function of the parameter $\beta_x$ and $\mathbf{\boldsymbol{\beta}_z}$ . $$RR = \frac{1+\text{exp}( - \beta_x x_1 - \mathbf{\boldsymbol{\beta}_z} \cdot \mathbf{z})}{1+\text{exp}(- \beta_x x_0 -\mathbf{\boldsymbol{\beta}_z} \cdot \mathbf{z})}$$ To compute a p-value you could just as well compute the p-value of the hypothesis $\beta_x = 0$ . The hypothesis $RR = 1$ is equivalent to the hypothesis $\beta_x = 0$ . But possibly you want to compute confidence intervals. In this case it is a bit more difficult... ...If the other $\mathbf{\boldsymbol{\beta}_z}$ would have been fixed, then you could convert the confidence intervals for $\beta_x$ directly to intervals for $RR$ because the function of $RR$ is a monotonous function of $\beta_x$ . But, here you have a function of $\beta_x$ and also of $\mathbf{\boldsymbol{\beta}_z}$ and the true value of $\mathbf{\boldsymbol{\beta}_z}$ is not known, as they are estimates. We could visualize this with a 2d plot of the value $\mathbf{\boldsymbol{\beta}_z} \cdot \mathbf{z}$ and $\beta_x$ and on top of that isolines of the value of $RR$ . For a given value of $\beta_x \neq 0$ the $RR$ will also depend on the value of $\mathbf{\boldsymbol{\beta}_z} \cdot \mathbf{z}$ . We can consider this $\mathbf{\boldsymbol{\beta}_z} \cdot \mathbf{z}$ as a nuisance parameter and compute p-values for alternative hypotheses $RR = a \neq 1$ by considering All points $\mathbf{\boldsymbol{\beta}_z} \cdot \mathbf{z}$ and $\beta_x$ on the iso-line $RR = a$ . the sample distribution of the estimates of $\mathbf{\boldsymbol{\beta}_z} \cdot \mathbf{z}$ and $\beta_x$ , which will be correlated and are approximately normal distributed. and compute the worst case p-value. Or use some average value, or some Bayesian value. Alternatively one could estimate a standard error for the distribution of $RR$ by using the Delta method. Then use the Wald interval by using the estimated $RR$ plusminus some constant times the estimated standard error. set.seed(1) n = 300 x = rbinom(n,1,0.5) zv = rnorm(n) z = cbind(rep(1,n) , zv) betax = 0.1 betaz = c(1,1) logistic = function(x) { (1+exp(-x))^-1 } ### gives beta as function of RR and other parameters z l_inv = function(RR,z) { log(RR/(1-exp(z)*(RR-1))) } experiment = function() { p = logistic(x * betax + z %*% betaz) y = rbinom(n,1,p) mod = glm(y ~ 0 + x + z, family = binomial) b = coefficients(mod) bx = b[1] bz = colMeans(z) %*% b[2:3] return (c(bx,bz)) } b = replicate(10^3, experiment()) plot(t(b), xlab = "beta_x", ylab = "beta_z * z", pch = 21, col = rgb(0,0,0,0.1), bg = rgb(0,0,0,0.1), main = "risk ratio as function of beta_x and beta_z*z \n scatter plot of simulations") for (RR in seq(0.84,1.12,0.04)) { t = seq(0.3,1.7,0.01) lines(l_inv(RR,t),t) text(l_inv(RR,1.7),1.7,RR,pos=3) }
