[site]: stackoverflow
[post_id]: 5278461
[parent_id]: 5250641
[tags]: 
NikoRoberts is 100% correct. I would only add the following suggestion: When creating a PHP regex pattern string, always use: single-quotes . There are far fewer chars which need to be escaped (i.e. only the single quote and the backslash itself needs to be escaped (and the backslash only needs to be escaped if it appears at the end of the string)). When dealing with backslash soup , it helps to print out the (interpreted) regex string. This shows you exactly what is being presented to the regex engine. Also, a "number" might have an optional sign? Yes? Here is my solution (in the form of a tested script):
