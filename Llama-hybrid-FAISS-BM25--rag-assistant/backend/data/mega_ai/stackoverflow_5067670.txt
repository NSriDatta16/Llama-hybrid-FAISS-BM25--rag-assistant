[site]: stackoverflow
[post_id]: 5067670
[parent_id]: 
[tags]: 
PHP session is empty even when Session ID is right

Yesterday I searched almost all topics about php sessions, I looked over manual and it still didn't work. I stayed up very late because of that. Scenario is: I log in using standard html form. My session is populated with some variables and it work fine. Then I use Flash uploadify to upload some photos and I pass with parametrs - PHPSESSID . My php script does not recognize session. It sees it as empty. Then I try to get that session with different client such as Firefox or Opera and it is empty too. Then I try to get that session with different Chrome tab and it works As you see my only protection is by IP. I don't scan other things so this should work when good PHPSESSID is passed and client IP is matching regardless of client type, version etc. This is init_session.php , file I include everytime at the begining of other files. Therefore I know that Session ID is beeing passed with Flash. But then session is empty. Directory is set on the top, and path is direct so there shouldn't be any problems with that. It also doesn't work when save path is default. I also turned of session autostart and session use only cookies. It didn't change a thing except I need to set cookie manually. Is there something here I can try? I think I ran out of options. EDIT: I forgot about most importat thing i think that turning off suhosin.session.cryptua will resolve case but i can't turn it off using ini_set, is there any other way? It seems that this option encrypts session using user-agent field wich would be the case. ini_set('session.auto_start', '0'); ini_set('session.save_path','/public_html/nowy/tmp'); if (isset($_POST["PHPSESSID"])) { session_id($_POST["PHPSESSID"]); } elseif (isset($_COOKIE['PHPSESSID'])) { session_id($_COOKIE["PHPSESSID"]); } elseif (isset($_GET["PHPSESSID"])) { session_id($_GET["PHPSESSID"]); } session_start(); setcookie("PHPSESSID", session_id(), time()+3600, "/"); if (!isset($_SESSION['user'])) { $_SESSION['user'] = 0; } if (!isset($_SESSION['initiate'])) { session_regenerate_id(); $_SESSION['initiate'] = true; $_SESSION['ip'] = $_SERVER['REMOTE_ADDR']; } echo ini_get('session.save_path').' '; echo $_POST["PHPSESSID"]; print_r($_SESSION); RESOLVED This problem has been solved. I couldn't set cryptua off because I needed to copy oryginal php5.ini and replace some variables to get it working. The problem was as expected suhosin.session.cryptua
