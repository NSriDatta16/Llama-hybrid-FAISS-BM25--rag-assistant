[site]: crossvalidated
[post_id]: 613587
[parent_id]: 613569
[tags]: 
The method to estimate representative treatment effects using regression is called g-computation and works with any outcome type as long as the effect measure can be specified as a contrast between means (e.g., a mean difference, a ratio between marginal probabilities, a ratio between marginal odds, etc.). Here's how this works: Fit a model for the outcome. Ideally this is a flexible model that includes interactions between the treatment and covariates. Generate predicted values from this model setting all units' treatment value to "treated" Generate predicted values from this model setting all units' treatment value to "control" Compute the mean of the predictions under treatment (2) and the mean of the predictions under control (3) Compute a contrast between these two means. This method of g-computation estimates the ATE. To estimate the ATT, steps 2 and 3 should be done using only the treated units. The control units are still used to fit the model in 1, but only the treated units are used to compute the predicted values. To get standard errors, you can use bootstrapping or the delta method (the latter of which is exactly accurate when the outcome model is linear and the contrast is the difference in means but only an approximation otherwise). In R, this is really easy using the marginaleffects package: #Fit the outcome model fit This works for any GLM, e.g., logistic regression, Poisson regression etc. To compute contrasts that aren't the difference in means/risk difference, just supply an argument to comparison and transform (e.g., to get the risk ratio/relative risk, you would set comparison = "lnratioavg", transform = "exp" ). This quantity is related to an AME, though that term is a bit ambiguous because of the multiple meanings of the word "marginal". The word "marginal" in AME means the instantaneous rate of change when the predictor is changed by a tiny amount. For a binary predictor, we are not changing it by a tiny amount; we are going from 0 to 1 (or whatever values you have). So AME is not an accurate way to describe this contrast, though I often use it because it is very closely related in computation and concept to a true AME. Rather, this is a "contrast between the average adjusted predictions". Kind of a mouthful.
