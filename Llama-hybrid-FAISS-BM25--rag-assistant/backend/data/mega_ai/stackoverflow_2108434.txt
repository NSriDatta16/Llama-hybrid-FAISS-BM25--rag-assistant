[site]: stackoverflow
[post_id]: 2108434
[parent_id]: 2108348
[tags]: 
There isn't a particularly eligant way of doing what you want. It's (probably) possible, but it would involve some pretty ugly (and slow) XPath queries using the following-sibling axis with filters on the preceding-sibling axis matching back to the current node. If it's at all a possibility, I would recommend creating the hierarchy outside of XSLT (in C#, Java, etc) If you choose to go down the scary path, you would be looking to do something like this (untested): ... This is only an example, and I can already see problems with the match. Coming up with the final XPath query would be quite involved, if it's actually possible at all.
