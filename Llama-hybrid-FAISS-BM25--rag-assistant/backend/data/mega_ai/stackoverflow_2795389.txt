[site]: stackoverflow
[post_id]: 2795389
[parent_id]: 2793624
[tags]: 
For text which is an immediate child of a paragraph use //p/text() irb> h = ' some text This should not be changed another one ' => ... irb> doc = Nokogiri::HTML(h) => ... irb> doc.xpath '//p/text()' => [# , # ] For text which is a descendent (immediate or not) of a paragraph use //p//text(). To exclude those texts which have an anchor as a parent, you could just subtract them off. irb> doc.xpath('//p//text()') - doc.xpath('//p//a/text()') => [# , # ] There is probably a way to do it with one call, but my xpath knowledge doesn't go that deep.
