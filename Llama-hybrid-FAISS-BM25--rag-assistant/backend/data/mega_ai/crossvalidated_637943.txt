[site]: crossvalidated
[post_id]: 637943
[parent_id]: 637933
[tags]: 
Here is my attempt at the distribution; more elegant/compact solutions quite possibly exist however. Let $A:=\sum_i M_{1i}$ and $B:=\sum_i M_{1i}M_{2i}$ . Also, suppose for some given $A$ , let $M_1^{A,k}$ correspond to a specific $M_1$ vector whose sum is $A$ . So, there are ${n\choose A}$ different $M_1^{A,k}$ vectors for a given value of $A$ . The joint PMF $P(A=a,B=b)$ where $b\leq a\leq n$ is \begin{align*} P(A,B) &= P(A)P(B|A)\\ &= P(A)\sum_kP(B|M_1^{A,k})P(M_1^{A,k}|A)\\ &= \sum_kP(B|M_1^{A,k})P(M_1^{A,k}) \end{align*} Now, $P(B|M_1^{A,k})$ is a Poisson-binominal PMF. Specifically, suppose $\{j\}$ is the set of indices of the "successful" components of $M_1^{A,k}$ . We then look at $M_2$ and focus on its $j$ components as well; $P(B|M_1^{A,k})$ is simply the probability that $B$ of those $M_{2j}$ components are successful. Now, we look at $P(M_1^{A,k})$ , which is simply the probability of having the $j$ components be the successful ones, ie $P(M_1^{A,k})=\prod_{i\in\{j\}}p_{1i}\cdot \prod_{i\not\in\{j\}}(1-p_{1i})$ Now that we have expressions for our summands in the joint PMF $P(A,B)$ , we turn to $Z=\frac{B}{A}$ . Clearly $Z$ is discrete and rational-valued. Its PMF will be $$P(Z=z)=\sum_{(a,b)\;st.\;b/a=z,\; b\leq a\leq n }P(A=a,B=b)$$ Technically that's it, and it's "closed-form" given all the sums/products are finite. But it's ugly sorry!
