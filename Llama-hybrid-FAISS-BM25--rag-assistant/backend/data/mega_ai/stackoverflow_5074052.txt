[site]: stackoverflow
[post_id]: 5074052
[parent_id]: 
[tags]: 
Using PHP and OAuth, I'm trying to authenticate and retrieve the email address and name of a Google account

I don't really know where to go from here. I'm using the "oauth-php" library from Google Code found here: http://code.google.com/p/oauth-php/ I'm able to go as far as receiving an HTTP response with the "oauth_verifier" and "oauth_token" variables. What do I do from here? How do I access the authenticated user's email address and possibly their name? I really JUST want to know their email address like "user@example.com". Thanks a million! Here's my code so far: CONSUMER_KEY, 'consumer_secret' => CONSUMER_SECRET, 'server_uri' => OAUTH_HOST, 'request_token_uri' => REQUEST_TOKEN_URL, 'authorize_uri' => AUTHORIZE_URL, 'access_token_uri' => ACCESS_TOKEN_URL ); // Note: do not use "Session" storage in production. Prefer a database // storage, such as MySQL. OAuthStore::instance('Session', $options); // OAUTH try { // STEP 1: If we do not have an OAuth token yet, go get one if (empty($_GET['oauth_token'])) { $getAuthTokenParams = array( 'scope' => 'http://docs.google.com/feeds/', 'xoauth_displayname' => 'OAuth test', 'oauth_callback' => '...' ); $tokenResult = OAuthRequester::requestRequestToken(CONSUMER_KEY, 0, $getAuthTokenParams); // redirect to the google authorization page, they will redirect back header('Location: ' . AUTHORIZE_URL . '?btmpl=mobile&oauth_token=' . $tokenResult['token']); } else { // STEP 2: Get an access token $oauthToken = $_GET['oauth_token']; $tokenResult = $_GET; try { OAuthRequester::requestAccessToken(CONSUMER_KEY, $oauthToken, 0, 'POST', $_GET); } catch (OAuthException2 $e) { return; } } } catch (OAuthException2 $e) { echo 'OAuthException: ' . $e->getMessage(); var_dump($e); }
