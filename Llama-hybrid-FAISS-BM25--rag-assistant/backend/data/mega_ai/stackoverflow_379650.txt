[site]: stackoverflow
[post_id]: 379650
[parent_id]: 
[tags]: 
Returning Array Fragments

I need to get array fragments from an array. I'm sick of using Array.Copy(). new ArraySegment(..).Array returns the original [full] array. The one below is what I came up with but I feel it's pretty lame. Is there a better way to do this? class Program { static void Main(string[] args) { var arr = new ArraySegment (new byte[5] { 5, 4, 3, 2, 1 }, 0, 2).ArrayFragment(); for (int i = 0; i (this ArraySegment segment) { var arr = new T[segment.Count]; Array.Copy(segment.Array, segment.Offset, arr, 0, segment.Count); return arr; } } Thanks in advance. Update: The above was just an example. I have a method: byte [] CalculateXXX(byte [] key, byte [] message); I do array manipulations inside this method. I want to return portion of an array. ArraySegment does not implement IEnumerable and it does NOT return an array with just the segment new ArraySegment(arr...).Array returns the complete original array. var rval = new byte[4]; //new ArraySegment(finalOutputBuffer, 0, 4).SegmentedArray(); Array.Copy(finalOutputBuffer, 0, rval, 0, 4); I find I had to do the above to return a array fragment. Was just wondering if there's a better way of returning fragments of an array [as new array].
