[site]: stackoverflow
[post_id]: 3041707
[parent_id]: 3034964
[tags]: 
Ok here is what I came up with: #!/usr/bin/env groovy import groovy.xml.StreamingMarkupBuilder import groovy.xml.XmlUtil def printSlurper={page-> println XmlUtil.serialize( new StreamingMarkupBuilder().bind { bind-> mkp.yield page } ) } def saxParser=new org.cyberneko.html.parsers.SAXParser() saxParser.setFeature('http://xml.org/sax/features/namespaces',false) saxParser.setFeature("http://cyberneko.org/html/features/balance-tags/document-fragment",true) def string="TEST" def middleClosureHelper={ builder-> builder."${string}" { mkp.yieldUnescaped " XML " } } def middleClosure={ MiddleClosure { middleClosureHelper(delegate) } } def original=new XmlSlurper(saxParser).parseText(""" """) original.depthFirst().find { it.name()=='MIDDLE' }.replaceNode { node-> mkp.yield middleClosure } printSlurper(original) assert original.depthFirst().find { it.name()=='INNER' } == null def modified=new XmlSlurper(saxParser).parseText(new StreamingMarkupBuilder().bind {mkp.yield original}.toString()) assert modified.depthFirst().find { it.name()=='INNER' } != null You have to reload the slurper, but it works! Misha
