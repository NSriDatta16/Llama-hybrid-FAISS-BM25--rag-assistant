[site]: stackoverflow
[post_id]: 5489991
[parent_id]: 
[tags]: 
sql c# delete syntax for div id

Hey guys I have a delete button tied to some Javascript like so: function confirm_delete() { if (confirm("Are you sure you want to delete this comment?")==true) return true; else return false; } In the code behind I have this: using (OdbcCommand cmd = new OdbcCommand("SELECT idWallPosting, wp.WallPostings, p.PicturePath FROM WallPosting wp LEFT JOIN User u ON u.UserID = wp.UserID LEFT JOIN Pictures p ON p.UserID = u.UserID WHERE wp.UserID=" + userId + " ORDER BY idWallPosting DESC", cn)) { using (OdbcDataReader reader = cmd.ExecuteReader()) { test1.Controls.Clear(); while (reader.Read()) { System.Web.UI.HtmlControls.HtmlGenericControl div = new System.Web.UI.HtmlControls.HtmlGenericControl("div"); div.Attributes["class"] = "test"; div.ID = String.Format("{0}", reader.GetString(0)); // the Div ID is set to my idWallPosting in my WallPosting Table Image img = new Image(); img.ImageUrl = String.Format("{0}", reader.GetString(2)); img.AlternateText = "Test image"; div.Controls.Add(img); div.Controls.Add(ParseControl(String.Format("&nbsp&nbsp&nbsp;" + "{0}", reader.GetString(1)))); div.Attributes.Add("onclick", "return confirm_delete();"); div.Style["clear"] = "both"; test1.Controls.Add(div); } } } } } protected void btnDelete_Click(object sender, EventArgs e) { //serverside code if confirm was pressed to delete from WallPosting table based on Div ID. } The first part of the code behind dynamicallys adds divs and adds the id = to idWallPosting I thought I should do this so when it came to delete them, all I had to do was refrence the div.ID but im unsure how to add in a string to convert the div id to string so I can pass that to my sql syntax? This has to be taken from the html side not from server side the output of which looks like this when the divs are loaded on execution: (firebug) How would I strip of the ct100 contentplaceholder etc etc to get the very end number (26) and place that in my delete button as a string? EDIT: (Patrick) protected void btnDelete_Click(object sender, EventArgs e) { idWallPosting = Div.ID; //serverside code if confirm was pressed. using (OdbcConnection cn = new OdbcConnection("Driver={MySQL ODBC 3.51 Driver}; Server=localhost; Database=gymwebsite2; User=root; Password=commando;")) { cn.Open(); using (OdbcCommand cmd = new OdbcCommand("DELETE FROM WallPosting WHERE idWallPosting = "+idWallPosting+")", cn)) { cmd.ExecuteNonQuery(); } } PopulateWallPosts(); //error here } Edit: protected void btnDelete_Click(object sender, EventArgs e) { string id = "ctl00_ContentPlaceHolder1_ContentPlaceHolder2_26"; string[] idFragments = id.Split('_'); id = idFragments[idFragments.Length - 1]; //serverside code if confirm was pressed. using (OdbcConnection cn = new OdbcConnection("Driver={MySQL ODBC 3.51 Driver}; Server=localhost; Database=gymwebsite2; User=root; Password=commando;")) { cn.Open(); using (OdbcCommand cmd = new OdbcCommand("DELETE FROM WallPosting WHERE idWallPosting = " + id + ")", cn)) { cmd.ExecuteNonQuery(); } } //PopulateWallPosts(); } Does nothing.
