[site]: crossvalidated
[post_id]: 493617
[parent_id]: 493614
[tags]: 
I think one possible solution for this test is to turn to regression to get the two means calculate the absolute value of their difference from the regression coefficients (a non-linear combination). Let's call this random variable $|\Delta|$ . Once this is done, you have two choices. You can look at the one-sided CI for $|\Delta|$ to see if it excludes your superiority threshold. You can get that easily from step (2), since the overlap between two one-sided 95% CIs makes a two-sided 90% CI, so you can work backwards from the usual 90% CI for $|\Delta|$ . Alternatively, you can perform a two-sided hypothesis test on $|\Delta|$ , and then calculate the one-sided p-value from that. This is a bit more work, but is just a matter of getting the sign of the inequality, a $\chi^2$ statistic from the two-sided test, and evaluating cumulative standard normal distribution. If your test returns an F-statistic, you will have to use that instead, along with the t distribution in place of the normal. If you don't want to go this route, when $|\Delta| - \delta$ is positive, you can simply divide the two-sided p-value by 2. In the other case, you need to calculate $1-\frac{p}{2}$ since you are in the other tail. This simpler division approach works for symmetric distributions only. Here is an example in Stata, where we will conduct two such hypotheses comparing the average price of foreign (foreign = 1) and domestic cars (foreign = 0): . sysuse auto, clear (1978 Automobile Data) . table foreign, c(mean price) ----------------------- Car type | mean(price) ----------+------------ Domestic | 6,072.4 Foreign | 6,384.7 ----------------------- . /* (1) Calculate the means using regression */ . regress price ibn.foreign, noconstant Source | SS df MS Number of obs = 74 -------------+---------------------------------- F(2, 72) = 159.91 Model | 2.8143e+09 2 1.4071e+09 Prob > F = 0.0000 Residual | 633558013 72 8799416.85 R-squared = 0.8162 -------------+---------------------------------- Adj R-squared = 0.8111 Total | 3.4478e+09 74 46592355.7 Root MSE = 2966.4 ------------------------------------------------------------------------------ price | Coef. Std. Err. t P>|t| [95% Conf. Interval] -------------+---------------------------------------------------------------- foreign | Domestic | 6072.423 411.363 14.76 0.000 5252.386 6892.46 Foreign | 6384.682 632.4346 10.10 0.000 5123.947 7645.417 ------------------------------------------------------------------------------ . /* (2) Calculate the absolute value of the foreign-domestic difference */ . nlcom av_diff:abs(_b[1.foreign] - _b[0.foreign]), level(90) post av_diff: abs(_b[1.foreign] - _b[0.foreign]) ------------------------------------------------------------------------------ price | Coef. Std. Err. z P>|z| [90% Conf. Interval] -------------+---------------------------------------------------------------- av_diff | 312.2587 754.4488 0.41 0.679 -928.6992 1553.217 ------------------------------------------------------------------------------ . /* (3a) We know that a one-sided 95% CI is (-inf,1553.217] */ . /* (3b) Transform two-sided test into a one-sided test and get p-values */ . // Test something just inside the CI */ . // H_0': (avg_price_foreign - avg_price_domestic) 1553 . test av_diff = 1553 ( 1) av_diff = 1553 chi2( 1) = 2.70 Prob > chi2 = 0.1001 . local sign_av_diff = sign(_b[av_diff] - 1553) // get the sign . display "p-value' = " normal(`sign_av_diff'*sqrt(r(chi2))) p-value' = .05002962 . // Test something just above the CI */ . // H_0'': (avg_price_foreign - avg_price_domestic) 1554 . test av_diff = 1554 ( 1) av_diff = 1554 chi2( 1) = 2.71 Prob > chi2 = 0.0998 . local sign_av_diff = sign(_b[av_diff] - 1554) // get the sign . display "p-value = " normal(`sign_av_diff'*sqrt(r(chi2))) p-value = .049893 The one-sided 95% CI is $(-\infty, 1553.217]$ , so $\delta>1553.217$ in order of us to reject. If we try testing a value below that upper bound like 1553, the one-sided p-value is .05003, so we cannot reject. If we test something just above the UB, like 1554, the p-value is .049893, so we can reject at $\alpha=5\%$ . I don't advocate using rigid thresholds for significance, this is just meant to illustrate the intuition. Note that you can also divide the two-sided p-values by 2 to get this (Stata's two-sided p-values are on the "Prob > chi2" line). Here the null is $H_0=|\Delta|\le \delta$ (practical equivalence) versus $H_a=|\Delta| > \delta$ (non-equivalence). We focus on testing $|\Delta| = \delta$ , so we calculate the probability at the most extreme point of the null hypothesis, closest to alternative parameter space. This means that the p-value is exact only for $|\Delta| = \delta$ . If $|\Delta| , then our p-value is just a conservative bound on the type I error rate (the error being finding a negative effect when there is none).
