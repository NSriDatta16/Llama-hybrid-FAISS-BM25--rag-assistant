[site]: stackoverflow
[post_id]: 4413427
[parent_id]: 
[tags]: 
Automated renaming of linux filenames to a new filenames that are legal in windows

I would like to rename a linux file to a filename that is legal in windows. It should not be longer than is allowed and should not have characters that are not allowed in windows. Sometimes I copy the title from papers to a filename and they have special characters such as – , ® , or ? Also there is there are some kind of characters sometimes at the ends of lines generated when copying and pasting a title from a pdf. You can see them when using sed -n 'l': echo 'Estrogen receptor agonists and estrogen attenuate TNF-α induced α apoptosis in VSC4.1 motoneurons.pdf' | sed -n 'l' Estrogen receptor agonists and estrogen attenuate TNF-\316\261 induce\ d$ \316\261$ apoptosis in VSC4.1 motoneurons.pdf$ or echo 'A synthetic review of the ﬁve molecular Sorlie’s subtypes in breast cancer' | sed -n 'l' A synthetic review of the \357\254\201ve molecular Sorlie\342\200\231\ s subtypes in$ breast cancer$ I have started a script but it is not elegant and incomplete. Has someone done something like this already or is there a fast elegant way to do it? fn2win="$1" testFn=$(echo "$fn2win" | sed -n 'l') #SPEC_CHAR="ÀÁÂÃÄÅÇÈÉÊËÌÍÎÏÐÑÒÓÔÕÖØÙÚÛÜÝÞàáâãäåçèéêëìíîïðñòóôõöøùúûüýþÿ" #NORM_CHAR="AAAAAACEEEEIIIIDNOOOOOOUUUUYPaaaaaaceeeeiiiionoooooouuuuyby" #SPEC_LOW_CHAR="aàáâãäåāăąbḃcćçčĉċdḑďḋđeèéěêëēĕęėfḟƒgǵģǧĝğġǥhĥħiìíîĩïīĭįıjĵkḱķǩlĺļľłmṁnńņňñoòóôõöōŏøpṗqrŕŗřsśşšŝṡſtţťṫŧuùúûũüůūŭųvwẁẃŵẅxyỳýŷÿzźžż" #NORM_LOW_CHAR="aaaaaaaaaabbccccccdddddeeeeeeeeeefffgggggggghhhiiiiiiiiiijjkkkklllllmmnnnnnoooooooooppqrrrrssssssstttttuuuuuuuuuuvwwwwwxyyyyyzzzz" #SPEC_CAP_CHAR="AÀÁÂÃÄÅĀĂĄBḂCĆÇČĈĊDḐĎḊĐEÈÉĚÊËĒĔĘĖFḞGǴĢǦĜĞĠǤHĤĦIÌÍÎĨÏĪĬĮİJĴKḰĶǨĸLĹĻĽŁMṀNŃŅŇÑOÒÓÔÕÖŌŎØPṖQRŔŖŘSŚŞŠŜṠTŢŤṪŦUÙÚÛŨÜŮŪŬŲVWẀẂŴẄXYỲÝŶŸZŹŽŻ" #SPEC_CAP_CHAR="AAAAAAAAAABBCCCCCCDDDDDEEEEEEEEEEFFGGGGGGGGHHHIIIIIIIIIIJJKKKKKLLLLLMMNNNNNOOOOOOOOOPPQRRRRSSSSSSTTTTTUUUUUUUUUUVWWWWWXYYYYYZZZZ" #sed -e "y/'$SPEC_CHAR'/'$NORM_CHAR'/" if [ "$fn2win" != "$testFn" ]; then newLinFn=$(echo "$fn2win" | fromdos | tr "\n" " " |\ sed -e " s/[?()\[\]=+<>:;©®”,*|]/_/g s/"$'\t'"/ /g s/–/-/g s/’/'/g s/α/alpha/g s/β/beta/g s/µ/micro/g s/Æ/AE/g s/Ǽ/AE/g s/æ/ae/g s/ǽ/ae/g s/Ǳ/DZ/g s/Ǆ/DZ/g s/ǅ/Dz/g s/ǲ/Dz/g s/ǳ/dz/g s/ǆ/dz/g s/ﬀ/ff/g s/ﬁ/fi/g s/ﬂ/fl/g s/ﬃ/ffi/g s/ﬄ/ffl/g s/ﬅ/ft/g s/Ĳ/IJ/g s/ĳ/ij/g s/Ǉ/LJ/g s/ǈ/Lj/g s/ǉ/lj/g s/Ǌ/NJ/g s/ǋ/Nj/g s/ǌ/nj/g s/Œ/OE/g s/œ/oe/g s/ß/SZ/g s/\"/_/g s/[[:cntrl:]]/_/g s/\ $//g " |\ fold -s -w 251 | head -1 | sed 's/\ $/.pdf/') if [ "$fn2win" != "$newLinFn" ]; then mv "$fn2win" "$newLinFn" fi fi winFn=$(echo "z:"$newLinFn | sed 's/\//\\/g' )
