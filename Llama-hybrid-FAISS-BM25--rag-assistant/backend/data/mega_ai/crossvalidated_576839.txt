[site]: crossvalidated
[post_id]: 576839
[parent_id]: 
[tags]: 
Power analysis of group proportions when sample sizes cannot be guaranteed to be equal

I have a new UX feature, which I need to test out on users on a social media platform. When a user creates a post, he/she can add hashtags to gain community traction. As owners of the platform, we want to incentivize users to adopt hashtags, with a binary variable used_hashtags = {0,1} . We will sample 10% of the global user population to divide between test and control. Test will receive the new UX and control will receive the old UX. We're chiefly interested in the hashtag adoption rate (HAR). Users vary in terms of how many posts they generate per day. A priori, we don't know which users will be sampled from the global population and how they will be divided amongst test and control groups. $test_{HAR} = \frac{\Sigma test_{hashtag}} {\Sigma test_{posts}}$ $ctrl_{HAR} = \frac{\Sigma ctrl_{hashtag}} {\Sigma ctrl_{posts}}$ I have no means to guarantee that the test and control populations will be equal (eg the number of posts created by each group.) The experiment goal is to compare HAR across groups. Python's Stats Models has a z-test power analysis solver which returns the Cohen's D or number of standard deviations between populations assuming the standard normal $N(0,1)$ . To determine the absolute MDE (eg the smallest difference in HAR between populations) I would need to scale Cohen's D by the standard deviation. Using SQL, I'm able to compute the average posts per day by user and the average used_hashtag posts per day by user. This informs the following bootstrap sampler: For itr in iterations: - sample 5% of users (10% sample = 5% test + 5% control) - Sum exp posts per user in sample AS exp_group_posts - Sum exp hashtag posts per user in sample AS exp_group_hashtags - (exp_group_hastags / exp_group_posts) AS HAR - sqrt( HAR * (1-HAR) ) AS HAR_std - compute MDE given exp_posts, alpha=0.95, beta=0.8 - Scale MDE by HAR_std AS abs_mde, append to array Take mean of abs_mde array My questions are: Is this a viable means to execute power analysis? Is the standard deviation of a success rate the std of a Bernoulli trial? (Or something else?) Is Bootstrap sampling applicable here or is this design suspect?
