[site]: stackoverflow
[post_id]: 4261827
[parent_id]: 4261181
[tags]: 
Ok, I gave up and rewrited how it works. In my views, I print the path to a controller method and pass a parameter to it with the file id. The controller checks the user id with the session, looks for the file in the database and then there is this code: if (file_exists($file['path'])) { header('Content-Description: File Transfer'); header('Content-Type: application/octet-stream'); header('Content-Disposition: attachment; filename='.$file['name']); header('Content-Transfer-Encoding: binary'); header('Expires: 0'); header('Cache-Control: must-revalidate, post-check=0, pre-check=0'); header('Pragma: public'); header('Content-Length: ' . filesize($file['path'])); ob_clean(); flush(); readfile($file['path']); exit; } It successfuly makes the browser to popup a download dialog also giving the option to open it with the associated application if it's installed.
