[site]: stackoverflow
[post_id]: 5092745
[parent_id]: 
[tags]: 
Rails 3: Difference between Relation.count and Relation.all.count

Moin, i stumbled upon a inconsistency in ActiveRecord. I tried to get all used combinations of values in two columns of a large table. First idea: SELECT DISTINCT col1, col2 FROM table Imagine a rails app that organizes meals as a model and each Meal has_many :noodles Each Noodle has the attributes (and hence the DB table columns) color and shape . My goal is to get the number of all present combinations of color and shape for a single meal. Since AR does not provide a "distinct" method i used my_meal.noodles.select("distinct color, shape") and got (in the rails console stdout) a six line output of 8 Noodle objects (respectively their String representations). But: >> my_meal.noodles.select("distinct color, shape").count => 1606 In fact my_meal contains 1606 noodles. If i convert the the Relation to an array and get the size of it or use .all.count the result is correct. So my question is, why does AR output 8 Objects but count all the DB lines? A similar problem seems to be mentioned here but no answer is given. Thanks and best regards, Tim
