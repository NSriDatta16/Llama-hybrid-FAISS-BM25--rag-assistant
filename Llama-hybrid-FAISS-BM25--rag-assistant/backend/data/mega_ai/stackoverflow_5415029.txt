[site]: stackoverflow
[post_id]: 5415029
[parent_id]: 5412037
[tags]: 
I do not have a good solution to your core problem of "hooking" the client to server. But I do have an interesting thought on your current problem of "traffic and CPU usage" for periodic pings. I assume you have a predefined heart-beat interval time, say 1 min. So, if there are 120 clients, your server would process heart beats at an average rate of 2 per second. Not good if half of them are "idle clients". Lets assume a client is idle for 15 minutes already. Does this client browser still need to send heart-beats at the constant pre-defined interval of 1 min?? Why not make it variable? My proposal is simple: Vary the heart-beats depending on activity levels of client. When the client is "active", heart-beats work at 1 per minute. When the client is "inactive" for more than 5 minutes, heart-beat rate slows down to 50% (one after every 2 minutes). Another 10 minutes, and heart-beat rate goes down another 50% (1 after every 4 minutes)... At some threshold point, consider the client as "unhooked". In this method, "idle clients" would not be troubling the server with frequent heartbeats, allowing your app server to focus on "active clients". Its a lot of javascript to do, but probably worth if you are having trouble with traffic and CPU usage :-)
