[site]: stackoverflow
[post_id]: 5251894
[parent_id]: 5243875
[tags]: 
What you want is a program transformation system . Such tools read source code, build compiler data structures, let you code custom analyzers/transformations on those structures, and the spit out the source code that corresponds to compiler data structures; this gives you the "extend a file" capability. New code generation is accomplished by simply building the corresponding compiler data structures and then spitting out the corresponding code. Our DMS Software Reengineering Toolkit is precisely such a system. It reads Java source, builds compiler data structures such as abstract syntax trees and symbol tables (it can build control flow graphs, call trees and data flows), lets you climb over these structures with procedural code, or write "source-to-source transformations" using the surface syntax of the target (in this case, Java) language, and then it can generate valid java code from these compiler data structures. It has been used to implement a variety of Java analysis and transformation tools that you can see that the web site. The easiest one to understand is using program transformations to build a test coverage tool .
