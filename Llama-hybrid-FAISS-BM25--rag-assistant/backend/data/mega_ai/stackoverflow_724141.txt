[site]: stackoverflow
[post_id]: 724141
[parent_id]: 724124
[tags]: 
To ensure that the server response as fast as possible, you should either have a second connection to a different port - this is useful if you want to test the route to the server, i.e. the wires - or a common thread for all incoming packets, that will decide whether an incoming packet is a ping request and respond immediately - which is useful if you want to test the current connection (which takes other packets on that connection into account). Either way the listening part (server) should have its own Thread or the processing of the request could stale while other packets are being processed. Note that, whatever you do to measure the speed of the connection, you will not have a reliable value. You should have an acceptable value, though, if you take the average of several such pings.
