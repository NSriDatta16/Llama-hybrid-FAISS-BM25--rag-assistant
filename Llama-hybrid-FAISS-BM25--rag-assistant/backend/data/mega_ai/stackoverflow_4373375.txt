[site]: stackoverflow
[post_id]: 4373375
[parent_id]: 
[tags]: 
rails route path not shown in browser (sometimes)

After deploying my rails 3 app in production I noticed that paths are not always shown in the browser window. For example going to login or my_profile links would still only show http://my_app.com instead of expected http://my_app.com/login or http://my_app.com/my_profile . The views did change and were functional. I could also see the database being hit and views being rendered from the logs (which led me to believe it was not a simple browser cache issue). Going directly to http://my_app.com/login worked, however, using the links in the app would take me to the expected place while leaving the login url displayed. I tried it in several browsers (firefox, opera and chrome) and got the same behavior. The app was deployed under nginx + passenger and later nginx + thin cluster. My question is, whats going on? Could it be nginx settings or my production environment settings? I am not sure where to start. Running curl -v my_app.com shows * About to connect() to my_app.com port 80 (#0) * Trying xx.xx.xx.xx... connected * Connected to my_app.com (xx.xx.xx.xx) port 80 (#0) > GET / HTTP/1.1 > User-Agent: curl/7.21.1 (x86_64-apple-darwin10.4.0) libcurl/7.21.1 OpenSSL/1.0.0a zlib/1.2.5 libidn/1.19 > Host: my_app.com > Accept: */* > * HTTP 1.0, assume close after body http://my_app.com/ http://my_app.com/ Please click here to view the non-framed versi on. So that is clearly a problem. The whole thing gets framed by the DNS redirect? The setup is not Phusion Passenger + nginx. It was originally, but now its thin + nginx. Also, when going directly to ip address of the app, things are just fine. When going to the domain name, I get the framed version. curl -v response of just the ip address also looks normal (like its loading the entire page).
