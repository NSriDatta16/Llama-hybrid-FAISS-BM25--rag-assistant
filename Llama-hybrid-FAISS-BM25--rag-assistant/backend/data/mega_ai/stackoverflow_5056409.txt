[site]: stackoverflow
[post_id]: 5056409
[parent_id]: 5055885
[tags]: 
As you mentioned the problem does not occur when you test locally, only occurs when you deploy in server --- I guess you have Google Adsense in your page. In that case, adsense crawler is crawling your page (sending the second http request to the url) To avoid this, add following in start of your php file: if(strpos($_SERVER['HTTP_USER_AGENT'],'Mediapartners-Google') !== false) { exit(); } I had faced similar issue in a script which sends emails. I was getting double emails per action :( Then, I investigated into the server access log, and discovered the second request per action from this user agent ...
