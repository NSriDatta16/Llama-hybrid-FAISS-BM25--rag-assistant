[site]: crossvalidated
[post_id]: 577661
[parent_id]: 577005
[tags]: 
The deliberate selection of farms by municipality leaders means you're outside the realm of a traditional randomized controlled trial. Selection could be based upon low yield in a previous year, but it could also be directly related to farm- or municipality-specific attributes. In short, a generalized difference-in-differences approach could work in this setting. Let's see if I can point you in the right direction. How would you go about estimating the causal effect of the new fertilizer now? It appears you answered your own question given the tags you selected. Difference-in-differences is one of the most popular statistical routines for estimating causal effects. This approach allows you to adjust for fixed farm-specific attributes, which appears to be one of your principal concerns. Note that a generalized difference-in-differences estimator is actually a linear two-way fixed effects equation, whereby we regress some outcome on unit (farm) fixed effects, time (year) fixed effects, and a treatment dummy which is just 'turning on' (i.e., switching from 0 to 1) whenever a specific farm $i$ adopts in year $t$ , 0 otherwise. The "treatment" in this case is allowed to be administered to different farms in different years. Which assumptions do you need to make? We make a lot of strong assumptions. I will discuss a few, which is by no means exhaustive. For one thing, you would be making very rigid functional form assumptions. In a setting where treatment is dichotomous, we assume constant treatment effects. The effect of the fertilizer program is immediate and this new jump in trend (level shift) is expected to last for all periods once the dichotomous treatment variable switches on. This assumption is a bit tenuous the longer a treatment is in place. Put simply, we often make the case that once you're treated that you're treated forever. This is not very practical, as we might suspect treatment fades after a couple of years. If so, then treatment isn't really constant across all time periods. It's important to note how this affects estimation of the causal parameter of interest. Note that the two-way fixed effects estimator is returning a "weighted average" of all the individualistic treatment effects, or the treatment effects in all farm-year observations where the treatment is active. But scholars have shown that some of these weights may be negative due to the differential timing of treatment; some farms receive the fertilizer early; others receive it late. What's driving the odd weighting patterns we observe in practice is the temporal changes in the treatment effects of those farms treated upstream. Andrew Goodman-Bacon (2019) was one of the first to expose all of the "forbidden comparisons" we make in this setting. Once you're comfortable with that, peruse Brantly Callaway's (2022) working paper on all the recent developments in difference-in-differences methods. Another assumption we make is that treatment assignment in the current period is not related to any feedback received from previous periods. In the context of your study, you'd be ruling out the possibility that the fertilizer policy is not administered on the basis of low yield in previous years. The technical term for this is the "strict exogeneity" assumption. Violations will bias your causal estimate. To go back to your earlier statement, you shouldn't concern yourself with measuring fixed farm-specific attributes. The farm fixed effects adjust for all time-constant factors specific to your farms. I imagine some of the variables you referenced might change over time, though I can't be sure. Soil quality likely varies during each growing season, but not so much over the years. I suppose annual sampling of the soil during stable climate is more appropriate, but I digress.
