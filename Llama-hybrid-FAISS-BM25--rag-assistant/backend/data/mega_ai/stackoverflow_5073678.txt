[site]: stackoverflow
[post_id]: 5073678
[parent_id]: 
[tags]: 
Problems with Test::Class startup / setup inheritance

G'day, I was using Test::Class perl module for some testing recently and ran into a strange problem. Basically, I have a base class inheriting from Test::Class package Base::Class; use base qw(Test::Class); setup : Test(startup) { # Create a DB from scratch } teardown : Test(shutdown) { # DROP database } And then I have a whole bunch of test classes inheriting this base class, package Some::Class; use base qw(Base::Class); sub actually_relevant_tests { } But when I run my test script: use Some::Class; Test::Class->runtests; The DB is created and dropped TWICE? Once for the base class and once for the sub-class! How do you avoid this without the solution being an ugly hack? Thanks. Edit: The closest thing to elegance I have right now is - use Test::Class; my $object = Some::Class->new(); Test::Class->runtests($object); package Some::Class; use Base::Class; sub actually_relevant_tests { } But keeping question open for better solutions.
