[site]: crossvalidated
[post_id]: 411736
[parent_id]: 
[tags]: 
Why do attention models need to choose a maximum sentence length?

I was going through the seq2seq-translation tutorial on pytorch and found the following sentence: Because there are sentences of all sizes in the training data, to actually create and train this layer we have to choose a maximum sentence length (input length, for encoder outputs) that it can apply to. Sentences of the maximum length will use all the attention weights, while shorter sentences will only use the first few. which didn't really make sense to me. My understanding of attention is that attention is computed as follows (according to the Pointer Network paper) at time step $t$ : $$ u^{ } = v^\top tanh( W_1 e_j + W_2 d_{t} ) = NN_u(e_j, d_t )$$ $$ \alpha^{ } = softmax( u^{ } ) = \frac{exp(u^{ })}{Z^{ }} = \frac{exp(u^{ })}{\sum^{T_x}_{k=1} exp( u^{ } ) } $$ $$ d'_{ } = \sum^{T_x}_{j=1} \alpha^{ } e_j $$ which basically means that a specific attention weight is not dependent on the length of the encoder (i.e. the encoder can change size and the above equation won't be affected because $T_x$ can be variable size). If that is true then why does the paper say this maximum sentence length thing? They also say: There are other forms of attention that work around the length limitation by using a relative position approach. Read about “local attention” in Effective Approaches to Attention-based Neural Machine Translation . which also confused me. Any clarification? Perhaps related: https://discuss.pytorch.org/t/attentiondecoderrnn-without-max-length/13473 Crossposted: https://discuss.pytorch.org/t/why-do-attention-models-need-to-choose-a-maximum-sentence-length/47201 https://www.reddit.com/r/deeplearning/comments/bxbypj/why_do_attention_models_need_to_choose_a_maximum/ ?
