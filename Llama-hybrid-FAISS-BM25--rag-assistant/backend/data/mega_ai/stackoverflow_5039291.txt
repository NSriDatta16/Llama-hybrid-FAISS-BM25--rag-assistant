[site]: stackoverflow
[post_id]: 5039291
[parent_id]: 
[tags]: 
How do I restrict the number of clients that a user can add in Rails 3?

Basically what I want to happen is, that each user ('designer') can only add the number of clients that are restricted by their plan. So if their plan only allows 1 client, that's all they can do. My user model looks like this: class User :client_ownerships, :order => 'created_at DESC' {edited for brevity} end The client model looks like this: class Client 'created_at DESC', :dependent => :destroy has_one :ownership, :dependent => :destroy has_one :designer, :through => :ownership validates :name, :presence => true, :length => {:minimum => 1, :maximum => 128} def number_of_clients Authorization.current_user.clients.count The plan model looks like this: # == Schema Information # Schema version: 20110214082231 # # Table name: plans # # id :integer not null, primary key # name :string(255) # storage :float # num_of_projects :integer # num_of_clients :integer # cached_slug :string(255) # created_at :datetime # updated_at :datetime # price :integer # class Plan true end
