[site]: stackoverflow
[post_id]: 3283587
[parent_id]: 
[tags]: 
QWidget - resize animation

Say I have a QHBoxLayout where there are 2 QTextEdit s and between them a button with an arrow to the right. When you click on the button, the right-side QTextEdit gradually closes by moving the left border until it meets the right one. Simultaneously, the right border of the left QTextEdit takes the place which the right QTextEdit released. And after pressing on the button, the state of the system is coming to the former one. EDIT: In order to organize this I have done the following: 1) In header file: class MyWidget : public QWidget { Q_OBJECT QTextEdit *m_textEditor1; QTextEdit *m_textEditor2; QPushButton *m_pushButton; QHBoxLayout *m_layout; int m_deltaX; public: MyWidget(QWidget * parent = 0); ~MyWidget(){} private slots: void closeOrOpenTextEdit2(bool isClosing); }; 2) In the source file: MyWidget::MyWidget(QWidget * parent):QWidget(parent),m_deltaX(0) { m_pushButton = new QPushButton(this); m_pushButton->setText(">"); m_pushButton->setCheckable(true); connect(m_pushButton, SIGNAL(clicked(bool)), this, SLOT(closeOrOpenTextEdit2(bool))); m_textEditor1 = new QTextEdit(this); m_textEditor1->setText("AAAAA AAAAAAAAAAA AAAAAAAAAAA AAAAAAA AAAAAAAAAAA AAAAAAAAAAA AA"); m_textEditor2 = new QTextEdit(this); m_layout = new QHBoxLayout; m_layout->addWidget(m_textEditor1); m_layout->addWidget(m_pushButton); m_layout->addWidget(m_textEditor2); setLayout(m_layout); } void MyWidget::closeOrOpenTextEdit2(bool isClosing) { QPropertyAnimation *animation1 = new QPropertyAnimation(m_textEditor2, "geometry"); QPropertyAnimation *animation2 = new QPropertyAnimation(m_pushButton, "geometry"); QPropertyAnimation *animation3 = new QPropertyAnimation(m_textEditor1, "geometry"); if(isClosing) //close the second textEdit { m_pushButton->setText(" geometry(); m_deltaX = te2_1.width()-3; QRect te2_2(te2_1.x()+m_deltaX, te2_1.y(), 3 ,te2_1.height()); QRect pb_1 = m_pushButton->geometry(); QRect pb_2(pb_1.x()+m_deltaX, pb_1.y(), pb_1.width() ,pb_1.height()); QRect te1_1 = m_textEditor1->geometry(); QRect te1_2(te1_1.x(), te1_1.y(), te1_1.width()+m_deltaX, te1_1.height()); //animation->setDuration(10000); animation1->setStartValue(te2_1); animation1->setEndValue(te2_2); animation2->setStartValue(pb_1); animation2->setEndValue(pb_2); animation3->setStartValue(te1_1); animation3->setEndValue(te1_2); } else //open { m_pushButton->setText(">"); QRect te2_1 = m_textEditor2->geometry(); QRect te2_2(te2_1.x()-m_deltaX, te2_1.y(), 3+m_deltaX ,te2_1.height()); QRect pb_1 = m_pushButton->geometry(); QRect pb_2(pb_1.x()-m_deltaX, pb_1.y(), pb_1.width() ,pb_1.height()); QRect te1_1 = m_textEditor1->geometry(); QRect te1_2(te1_1.x(), te1_1.y(), te1_1.width()-m_deltaX, te1_1.height()); //animation->setDuration(10000); animation1->setStartValue(te2_1); animation1->setEndValue(te2_2); animation2->setStartValue(pb_1); animation2->setEndValue(pb_2); animation3->setStartValue(te1_1); animation3->setEndValue(te1_2); } animation1->start(); animation2->start(); animation3->start(); } EDIT: And I have the following problem: When I close the second QTextEdit (by clicking on the button) and resize the MyWidget , then the QTextEdit restores its state (but it should stay closed of course). How can I solve this problem? Please provide me with a code snippet.
