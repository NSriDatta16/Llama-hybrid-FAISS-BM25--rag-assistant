[site]: stackoverflow
[post_id]: 1780430
[parent_id]: 1776827
[tags]: 
This should work: $tid = $_GET['tx']; $auth_token = "zzzzzzzzzzzzzzzzzzzz"; $paypal_url = "www.sandbox.paypal.com"; $url = "https://" . $paypal_url . "/cgi-bin/webscr"; $post_vars = "cmd=_notify-synch&tx=" . $tid . "&at=" . $auth_token; $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, $url); curl_setopt($ch, CURLOPT_POST, 1); curl_setopt($ch, CURLOPT_POSTFIELDS, $post_vars); curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); curl_setopt($ch, CURLOPT_TIMEOUT, 15); curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); curl_setopt($ch, CURLOPT_HEADER, false); curl_setopt($ch, CURLOPT_USERAGENT, 'cURL/PHP'); $fetched = curl_exec($ch); $lines = explode("\n", $fetched); $keyarray = array(); if (strcmp ($lines[0], "SUCCESS") == 0) { for ($i=1; $i Thank you for your purchase! "); } else if (strcmp ($lines[0], "FAIL") == 0) { echo (" Sorry, something went wrong "); // log for manual investigation } Also $_GET['tx'] look up stops working after ~5 minutes
