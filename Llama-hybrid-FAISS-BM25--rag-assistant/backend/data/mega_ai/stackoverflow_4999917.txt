[site]: stackoverflow
[post_id]: 4999917
[parent_id]: 4965480
[tags]: 
Pivot table stuff seems just too messy. I am thinking to just go with something simple like this (Thanks John Pick for showing me how to use CASE!): SELECT p.l_id, GROUP_CONCAT( CONCAT(f.name,'=', CASE WHEN p.stringval IS NULL THEN p.numval ELSE p.stringval END ) SEPARATOR '||' ) AS vals FROM params AS p LEFT JOIN fields AS f ON p.f_id=f.f_id WHERE p.l_id=1 GROUP BY p.l_id; and just post-process the "vals" string with explode() in PHP. +------+---------------------------------------------------------- ... -+ | l_id | vals | +------+---------------------------------------------------------- ... -+ | 1 | kv=50||ma=50||pressure=0||temp_ccd=-58||temp_sample=150|| ... | +------+--------------------------------------------------------- ... + What a cop out! I would've expected a much more elegant solution given that all the information required to return columns in correct format exists in the PARAMS AND FIELDS tables. And now I have to worry about stringvals with SEPARATORs in them :-/
