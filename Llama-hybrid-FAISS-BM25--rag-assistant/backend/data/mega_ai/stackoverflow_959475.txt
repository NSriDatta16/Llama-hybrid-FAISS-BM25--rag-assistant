[site]: stackoverflow
[post_id]: 959475
[parent_id]: 
[tags]: 
Shell fragment to make sure only one instance a shell script runs at any given time

Possible Duplicate: Quick-and-dirty way to ensure only one instance of a shell script is running at a time At a previous workplace we used to have a highly-refined bash function called run-only-once that we could write into any long-running shell script, and then call it at the start of the script, which would check to see whether the script was already running as another process, and if so exit with a notification to STDOUT. Does anyone have a function/fragment like this they could share? Our old function (which I no longer have) would check for a PID file (in scriptname.$$ format) in /var/run, and use then either exit or simply continue. In the case where a PID file existed, it would do some checks to make sure that the process was still active. It also had a few options for controlling whether a notification was output at all. From memory, our function only worked in bash. Bonus points for a /bin/sh version.
