[site]: stackoverflow
[post_id]: 822828
[parent_id]: 822815
[tags]: 
You could use the first idiom (user allocates) and if the space for the string is not sufficient you reallocate. This will work if you and the user agree to use the same allocation (like malloc/free). This will give you optimum performance (no allocation for every iteration) and is still convenient for the user. With this idiom the allocated storage grows as needed, but the user can at any time choose to "shrink" it by reallocating a smaller storage (which will start growing again if necessary).
