[site]: stackoverflow
[post_id]: 4252695
[parent_id]: 
[tags]: 
Ho Can I Smooth Audio Level Metering for a More Realistic Analog VU Meter?

I have built an emulated Analog VU Meter for a recording app and have everything hooked up properly and working the way I expect except for one aspect. If you watch this 13-second video of the VU meter in action, you will see that the needle bounces all over the place and is not really what would happen in a real VU meter. For an example of what I am looking for, try out the Apple "Voice Memos" app and see. My logic so far is easy: #define VU_METER_FREQUENCY 1.0/5.0 - (void)someMethod { _updateTimer = [NSTimer scheduledTimerWithTimeInterval:VU_METER_FREQUENCY target:self selector:@selector(_refresh) userInfo:nil repeats:YES]; } - (void)_refresh { // if we have no queue, but still have levels, gradually bring them down if (_delegate == nil) { CFAbsoluteTime thisFire = CFAbsoluteTimeGetCurrent(); // calculate how much time passed since the last draw CFAbsoluteTime timePassed = thisFire - _peakFalloffLastFire; needleValue = needleValue - timePassed * VU_METER_LEVEL_FALL_OFF_PER_SECOND; if (needleValue prevNeedleValue ? UIViewAnimationCurveEaseOut : UIViewAnimationCurveEaseIn)]; CGFloat radAngle = [self radianAngleForValue:needleValue]; self.needle.transform = CGAffineTransformMakeRotation(radAngle); [UIView commitAnimations]; } Basically, I setup a timer to run at VU_METER_FREQUENCY and update the needle rotation using a UIView animation with easing that is preferential to keep the needle higher. I am looking for a way to adjust this somehow to provide a smoother needle, with my benchmark being as close as possible to Apple's analog VU Meter. To get the needleValue , I am using AudioQueue 's mAveragePower and querying it every time currentDB is called. How can I smooth this?
