[site]: stackoverflow
[post_id]: 5120756
[parent_id]: 
[tags]: 
Fluent Nhibernate and Custom Collections

I have the following Fluent NHibernate configuration... public class TemplateMap : ClassMap { public TemplateMap() { Not.LazyLoad(); Id(t => t.Id).GeneratedBy.Sequence("TEMPLATE_ID_SEQ"); Map(t => t.Name); Component(t => t.Path, p => p.HasMany(f => f.Fragments) .Access.CamelCaseField(Prefix.Underscore) .Cascade.AllDeleteOrphan() .KeyColumn("template_id") ) .Access.CamelCaseField(Prefix.Underscore); } } Which results in the following HBM... TEMPLATE_ID_SEQ To treat the collection as a list, I add the "AsList" method... public class TemplateMap : ClassMap { public TemplateMap() { Not.LazyLoad(); Id(t => t.Id).GeneratedBy.Sequence("TEMPLATE_ID_SEQ"); Map(t => t.Name); Component(t => t.Path, p => p.HasMany(f => f.Fragments) .Access.CamelCaseField(Prefix.Underscore) .Cascade.AllDeleteOrphan() .KeyColumn("template_id") .AsList(index => index.Column("Position")) ) .Access.CamelCaseField(Prefix.Underscore); } } Which results in the following HMB... TEMPLATE_ID_SEQ However, whilst the first configuration (without "AsList") works OK, the second causes this runtime error: The element 'list' in namespace 'urn:nhibernate-mapping-2.2' has invalid child element 'index' in namespace 'urn:nhibernate-mapping-2.2'. List of possible elements expected: 'meta, subselect, cache, synchronize, comment, key' in namespace 'urn:nhibernate-mapping-2.2'. Any ideas? A bit more detail about my domain model: a template has an id, name and path . A path is an ordered list of fragments . Many thanks Sandy
