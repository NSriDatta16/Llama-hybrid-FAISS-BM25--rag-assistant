[site]: stackoverflow
[post_id]: 3859057
[parent_id]: 3858947
[tags]: 
A lot depends on the amount of extra storage you're willing to expend to make the selection faster. If you're not willing to use any extra storage, @Alex Emelianov's answer is pretty much what I was thinking of posting. If you're willing use some extra storage (and possibly a different data structure than std::set ) you could create a tree (like a set uses) but at each node of the tree, you'd also store the (weighted) number of items to the left of that node. This will let you map from a generated number to the correct associated value with logarithmic (rather than linear) complexity.
