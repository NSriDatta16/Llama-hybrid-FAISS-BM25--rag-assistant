[site]: stackoverflow
[post_id]: 5581050
[parent_id]: 
[tags]: 
Producer and consumer with notifications in C#

I have a producer (P) which pushes items into a consumer (C). C may decide not to consume all the items as soon as they arrive; instead it may asynchronously wait until there are n items in the queue or until a certain interval of time t has elapsed and then consume all items in the queue and restart the timer. P needs to be notified whenever an item it has pushed to C has indeed been consumed. This is because P is in charge of recovery in case of a failure (P persists the current state to a DB). So, in case of a restart, P needs to know which items it needs to push again because they have not been acknowledged by the consumer. My first idea was to have C notify P through a callback function (delegate): whenever an item is consumed, P's callback function is invoked with a list of consumed items. But I am wondering whether there might be other (better) ways of notifying the producer. What are your thoughts? Stefano UPDATE : thank you for your answers so far. I am currently investigating whether using asynchronous methods might be an elegant way to synchronize the publisher and the consumer on the status of the items being published.
