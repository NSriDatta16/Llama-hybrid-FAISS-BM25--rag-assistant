[site]: stackoverflow
[post_id]: 4430690
[parent_id]: 
[tags]: 
Optimising my Javascript/jQuery XML function

I have the following XML file: Blue purple Green Red 0 0 0 0 Blue Green Purple Red 0 0 0 0 10mph 15mph 30mph European or African swallow? 0 0 0 0 And I am parsing it with the following code: function runQuiz(whichQ) { if (window.XMLHttpRequest) { xmlhttp = new XMLHttpRequest(); } else { xmlhttp = new ActiveXObject("Microsoft.XMLHTTP"); //If browser == IE, get ActiveX object } xmlhttp.open("GET", whichQ, false); //Open the file using the GET routine xmlhttp.send(); //Send request xmlDoc = xmlhttp.responseXML; //xmlDoc holds the document information now var atext,btext,ctext,dtext = 0; $(xmlDoc).find("Question1").each(function() { var a = xmlDoc.childNodes[0].children[0]; $('#form').prepend( $(xmlDoc).find("Question1").attr('q') ); //Append Question $(a).find("a1").each(function() { $('#form').append(' 15mph '); atext = $(this).parent().children('a').text(); }); var a = xmlDoc.childNodes[0].children[0]; $(a).find("a2").each(function() { $('#form').append(' 20mph '); btext = $(this).parent().children('b').text(); }); var a = xmlDoc.childNodes[0].children[0]; $(a).find("a3").each(function() { $('#form').append(' 30mph '); ctext = $(this).parent().children('c').text(); }); var a = xmlDoc.childNodes[0].children[0]; $(a).find("a4").each(function() { $('#form').append(' European or African Swallow? '); dtext = $(this).parent().children('d').text(); }); $('.label, .cu-mid p').fadeOut(150); //Fade out the letters on the bars and the overhead labels $('.cu-mid','.cuboid.'+'green1').animate({ height: atext*2 }, 550,'easeOutBounce'); //animate 1 $('.cu-mid','.cuboid.'+'green2').animate({ height: btext*2 }, 550,'easeOutBounce'); //animate 2 $('.cu-mid','.cuboid.'+'green3').animate({ height: ctext*2 }, 550,'easeOutBounce'); //animate 3 $('.cu-mid','.cuboid.'+'green4').animate({ height: dtext*2 }, 550,'easeOutBounce', function() { //animate 4 then... $('.label1').html(atext+'%'); //Set all four labels $('.label2').html(btext+'%'); $('.label3').html(ctext+'%'); $('.label4').html(dtext+'%'); $('.label, .cu-mid p').fadeIn(150); //Fade it all back in }); }); } So my question is: Is there a better/more efficient/elegant way of doing this? I am iterating through the XML document and retrieving the child nodes of other elements. Any and all ideas welcome! :D
