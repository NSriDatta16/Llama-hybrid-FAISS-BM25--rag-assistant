[site]: stackoverflow
[post_id]: 5677565
[parent_id]: 
[tags]: 
Custom title using Fragments

I've got an app, that uses custom title feature. I'm trying to migrate it to fragments api. Resulting code, I've got, is like this: public class MainActivity extends CategoriesListActivity { protected static final String TAG = "MainActivity"; /** Called when the activity is first created. */ public void onActivityCreated(Bundle savedInstanceState) { getActivity().requestWindowFeature(Window.FEATURE_CUSTOM_TITLE); super.onActivityCreated(savedInstanceState); Thread.setDefaultUncaughtExceptionHandler(new MecomUncaughtExceptionHandler(getActivity())); getActivity().setContentView(R.layout.main); getActivity().getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.main_title); } } Where CategoriesListActivity extends ListFragment . main_title.xml is this: HeaderFragment is: public class HeaderFragment extends Fragment implements OnClickListener { private static final String TAG = "Header"; @Override public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) { return inflater.inflate(R.layout.main_title_fragment, container, false); } } and main_title_fragment.xml is: When I run this, it crashes after this Activity is inflated: E/AndroidRuntime( 545): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.mecom.berlingske/com.mecom.berlingske.MainActivity}: java.lang.ClassCastException: com.mecom.berlingske.MainActivity E/AndroidRuntime( 545): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417) E/AndroidRuntime( 545): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512) E/AndroidRuntime( 545): at android.app.ActivityThread.access$2200(ActivityThread.java:119) E/AndroidRuntime( 545): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863) E/AndroidRuntime( 545): at android.os.Handler.dispatchMessage(Handler.java:99) E/AndroidRuntime( 545): at android.os.Looper.loop(Looper.java:123) E /AndroidRuntime( 545): at android.app.ActivityThread.main(ActivityThread.java:4363) E/AndroidRuntime( 545): at java.lang.reflect.Method.invokeNative(Native Method) E/AndroidRuntime( 545): at java.lang.reflect.Method.invoke(Method.java:521) E/AndroidRuntime( 545): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) E/AndroidRuntime( 545): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) E/AndroidRuntime( 545): at dalvik.system.NativeStart.main(Native Method) E/AndroidRuntime( 545): Caused by: java.lang.ClassCastException: com.mecom.berlingske.MainActivity E/AndroidRuntime( 545): at android.app.Instrumentation.newActivity(Instrumentation.java:1021) E/AndroidRuntime( 545): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409) E/AndroidRuntime( 545): ... 11 more I don't see any cast problems here. Anyone tried to set a fragment to be a custom title?
