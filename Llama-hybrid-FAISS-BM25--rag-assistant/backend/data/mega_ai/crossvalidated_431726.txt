[site]: crossvalidated
[post_id]: 431726
[parent_id]: 431673
[tags]: 
I guess you want to understand why he began the proof with $\mathbb{E}[(Y-g(X))^2|X]$ instead of $\mathbb{E}[(Y-g(X))^2]$ . By the Law of Iterated Expectations we have that $$ \mathbb{E}[(Y-g(X))^2] = \mathbb{E}[\mathbb{E}[(Y-g(X))^2|X]]\quad.$$ So, if you want to minimize the first quantity, what you can do is, for each $X$ , minimize $\mathbb{E}[(Y-g(X))^2|X]$ . To be more rigorous, suppose that there is a function f such that $$ \mathbb{E}[(Y-g(X))^2|X] \geq \mathbb{E}[(Y-f(X))^2|X]\quad.$$ Consequently, using the properties of expectation, it follows that $$ \mathbb{E}[(Y-g(X))^2] = \mathbb{E}[\mathbb{E}[(Y-g(X))^2|X]] \geq \mathbb{E}[\mathbb{E}[(Y-f(X))^2|X]] = \mathbb{E}[(Y-f(X))^2] \quad.$$ This proves rigorously why you can focus on minimizing the conditional expectation.
