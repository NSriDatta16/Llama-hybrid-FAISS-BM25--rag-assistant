[site]: stackoverflow
[post_id]: 3523409
[parent_id]: 
[tags]: 
DOMDocument encoding problems / characters transformed

I am using DOMDocument to manipulate / modify HTML before it gets output to the page. This is only a html fragment, not a complete page. My initial problem was that all french character got messed up, which I was able to correct after some trial-and-error. Now, it seems only one problem remains : ' character gets transformed into ? . The code : loadHTML(utf8_decode($row->text)); //Some pretty basic modification here, not even related to text //reinsert HTML, and make sure to remove DOCTYPE, html and body that get added auto. $row->text = utf8_encode(preg_replace('/^ /', '', str_replace( array(' ', ' ', ' ', ' '), array('', '', '', ''), $dom->saveHTML()))); ?> I know it's getting messy with the utf8 decode/encode, but this is the only way I could make it work so far. Here is a sample string : Input : Sans doute parce qu’il vient d’atteindre une date déterminante dans son spectaculaire cheminement Output : Sans doute parce qu?il vient d?atteindre une date déterminante dans son spectaculaire cheminement If I find any more details, I'll add them. Thank you for your time and support!
