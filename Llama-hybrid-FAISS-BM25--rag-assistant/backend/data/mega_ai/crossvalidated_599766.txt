[site]: crossvalidated
[post_id]: 599766
[parent_id]: 
[tags]: 
zero-inflated negative binomial regression for time series data in R using glmmTMB

I am struggling to set up the correct formula for a zero-inflated negative binomial regression model in R which accounts for time series data. I read through a lot of manuels and blogs however I still don't really understand how to define the panel setting. I want to use the glmmTMB package and have a df which has time and county as grouping IDs. Here is a fraction of my df: county time region y x1 x2 x3 1 01001 2010 2 0 53155 -0.282 -0.997 2 01001 2011 2 1 53944 0.0873 -0.955 3 01001 2012 2 0 54590 0.400 -0.797 4 01001 2013 2 2 54907 0.627 -1.05 5 01001 2014 2 3 55136 0.371 -0.858 6 01001 2015 2 1 55221 0.116 -0.505 7 01001 2016 2 0 55049 -0.452 -0.315 8 01001 2017 2 0 55036 -0.566 0.258 9 01001 2018 2 0 55200 -0.850 0.539 10 01001 2019 2 0 55380 -0.992 0.372 11 01001 2020 2 0 55639 -1.22 0.400 12 01003 2010 3 0 175791 -0.168 -0.0510 13 01003 2011 3 5 179523 0.144 -0.107 14 01003 2012 3 0 183226 0.371 -0.123 15 01003 2013 3 0 187114 0.570 0.130 16 01003 2014 3 0 191205 0.400 0.302 17 01003 2015 3 0 195121 0.0873 0.433 18 01003 2016 3 1 199510 -0.254 0.556 19 01003 2017 3 0 203360 -0.481 0.583 20 01003 2018 3 0 208107 -0.793 0.558 21 01003 2019 3 0 212830 -0.822 0.497 22 01003 2020 3 0 218289 -0.935 0.439 23 01005 2010 6 0 27699 0.684 0.645 24 01005 2011 6 0 27546 1.65 0.355 25 01005 2012 6 0 27469 1.79 0.973 26 01005 2013 6 0 27321 2.02 0.695 27 01005 2014 6 0 27119 1.99 0.556 28 01005 2015 6 0 26932 2.96 0.650 29 01005 2016 6 0 26614 1.59 0.589 30 01005 2017 6 0 26201 1.48 0.595 31 01005 2018 6 0 25782 0.655 0.898 32 01005 2019 6 0 25361 0.570 1.32 33 01005 2020 6 0 25026 -0.0831 1.78 34 01007 2010 1 0 22610 0.542 -0.830 35 01007 2011 1 0 22746 0.684 -0.958 36 01007 2012 1 0 22769 0.939 -0.546 37 01007 2013 1 0 22754 1.42 0.255 38 01007 2014 1 0 22653 1.05 -0.121 39 01007 2015 1 0 22604 0.314 0.00468 40 01007 2016 1 0 22572 -0.0263 0.238 41 01007 2017 1 0 22580 0.286 0.305 42 01007 2018 1 0 22527 0.0873 -0.318 43 01007 2019 1 0 22493 0.0305 0.219 44 01007 2020 1 0 22374 0.0589 0.255 45 01009 2010 1 2 56692 0.0873 -0.524 46 01009 2011 1 1 57140 0.542 -0.646 47 01009 2012 1 0 57466 0.797 -0.825 48 01009 2013 1 0 57623 0.712 -0.735 49 01009 2014 1 0 57645 0.598 -0.763 50 01009 2015 1 0 57710 0.144 -1.03 51 01009 2016 1 0 57704 -0.339 -0.677 52 01009 2017 1 0 57667 -0.651 -0.296 53 01009 2018 1 0 57645 -0.878 -0.215 54 01009 2019 1 0 57681 -1.08 0.450 55 01009 2020 1 0 57755 -0.566 0.770 56 01011 2010 6 0 10923 1.14 2.56 57 01011 2011 6 0 10877 2.36 2.39 58 01011 2012 6 0 10779 2.02 1.59 59 01011 2013 6 0 10746 2.22 1.37 60 01011 2014 6 0 10693 2.90 0.144 61 01011 2015 6 0 10678 3.07 0.667 62 01011 2016 6 0 10552 1.73 0.814 63 01011 2017 6 0 10478 1.39 1.15 64 01011 2018 6 0 10352 1.11 2.13 65 01011 2019 6 0 10248 -0.935 0.898 66 01011 2020 6 0 10173 -1.08 1.60 67 01013 2010 6 0 20895 0.655 0.617 68 01013 2011 6 0 20860 1.39 0.439 69 01013 2012 6 0 20730 1.88 0.787 70 01013 2013 6 0 20624 2.16 0.698 71 01013 2014 6 0 20523 1.42 0.508 72 01013 2015 6 0 20354 1.05 0.272 73 01013 2016 6 0 20280 0.740 0.500 74 01013 2017 6 0 20126 0.116 0.241 75 01013 2018 6 0 20025 -0.140 0.834 76 01013 2019 6 0 19828 -0.112 0.586 77 01013 2020 6 0 19726 -0.197 0.720 78 01015 2010 3 0 117149 1.28 0.339 79 01015 2011 3 8 117614 1.37 0.366 80 01015 2012 3 0 117834 1.73 0.344 81 01015 2013 3 0 117714 1.99 0.517 82 01015 2014 3 0 117186 1.79 0.380 83 01015 2015 3 0 116648 1.45 0.155 84 01015 2016 3 0 115883 1.28 0.375 85 01015 2017 3 0 115527 0.826 0.614 86 01015 2018 3 0 115098 0.456 0.745 87 01015 2019 3 0 114618 0.258 0.625 88 01015 2020 3 0 114324 0.0305 0.481 89 01017 2010 6 1 34579 1.99 -0.441 90 01017 2011 6 0 34375 2.19 -0.0899 91 01017 2012 6 0 34228 2.50 0.467 92 01017 2013 6 0 34145 2.84 1.01 93 01017 2014 6 0 34091 1.56 1.71 94 01017 2015 6 0 34079 0.485 1.18 95 01017 2016 6 0 34018 0.0873 0.906 96 01017 2017 6 0 33895 -0.225 0.511 97 01017 2018 6 0 33826 -0.623 0.444 98 01017 2019 6 0 33660 -0.935 -0.496 99 01017 2020 6 0 33427 -1.02 -0.630 100 01019 2010 6 0 25700 1.48 -0.0510 So far I tried this: glmmTMB(y ~ x2 + x3 + region + time + offset(log(x1)) + (1|time) + (1|county), data=df, ziformula=~ x2 + x3 + region + time, family=nbinom2(link="log")) But I just don't know if I specified the formula correctly by just adding + (1|time) + (1|county) . If someone could help me to understand the logic behind the (1|var) expression without referring to the glmmTMB vignettes that would be great and much appreciated.
