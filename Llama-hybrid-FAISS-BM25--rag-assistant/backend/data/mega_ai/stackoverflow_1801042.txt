[site]: stackoverflow
[post_id]: 1801042
[parent_id]: 
[tags]: 
nokogiri: xml to html

I just want to do some straight conversion (almost just search and replace) but I'm having trouble just getting things to sit in place - I'm ending up with links out of place and duplicated content. I'm sure I'm doing something silly with my attempts at traversing the xml : ) I'm trying with: builder = Nokogiri::HTML::Builder.new do |doc| doc.html { doc.body { doc.div.wrapper! { doc.h1 "Short" xm.css('paragraph').each do |para| doc.h3.para(:id => para['number']) { doc.text para['number'] } doc.p.narrativeparagraph { xm.css('paragraph inner-section').each do |section| doc.span.innersection { doc.text section.content xm.css('inner-section xref').each do |xref| doc.a(:href => "#" + xref['number']) { doc.text xref['number'] } end xm.css('paragraph inner-text').each do |innertext| doc.span.innertext { doc.text innertext.content } end } end #inner-section } end#end paragraph }#end wrapper }#end body }#end html end#end builder on: blah one blah blah two blah blah blah three blah four blah blah five blah blah blah six to create: Short 1 blah one blah link1location blah two blah blah blah three 2 blah four blah link2location blah five blah blah blah six I've been trying all sorts of things to try to get this to work, the basic html structure comes out okay, but the children of the paragraphs are a mess - any help would be very much appreciated. Regards, Ritchie
