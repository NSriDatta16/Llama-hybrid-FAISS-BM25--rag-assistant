[site]: stackoverflow
[post_id]: 1122979
[parent_id]: 
[tags]: 
What is the best way to model a ragged hierarchy in SSAS for both ROLAP and MOLAP?

I'm currently trying to model a ragged hierarchy in SSAS and I'm stuck. First, I was trying to model it like so: ItemKey,Level0Key,Level1Key,Level2Key Item1,Lvl0-1,Lvl1-1,Lvl2-1 Item2,Lvl0-1,Lvl1-1,Lvl2-1 Item3,Lvl0-1,Lvl1-1,Lvl2-2 **Item4,Lvl0-1, , ** Where the last line in this example had blanks for the "missing" levels. Here, ROLAP managed to interpret the hierarchy okay, but MOLAP mode wound up mis-classifying members from the fact table, so the aggregations were off. Next, I changed it to this based on the AdventureWorksDW example SalesTerritory dimension which was a ragged hierarchy: ItemKey,Level0Key,Level1Key,Level2Key Item1,Lvl0-1,Lvl1-1,Lvl2-1 Item2,Lvl0-1,Lvl1-1,Lvl2-1 Item3,Lvl0-1,Lvl1-1,Lvl2-2 **Item4,Lvl0-1,Item4,Item4** I'm taking advantage of the HideIfOnlyChildAndSameNameAsParent to hide the members. Now MOLAP's numbers line up, but in ROLAP land, I'm having major slowdowns because level 1 of my hierarchy has about 10000 members - SSAS goes out to lunch on an expansion. So obviously I'm missing something, but I haven't seen many examples on the "right" way to do a ragged hierarchy. Thanks for any answers.
