[site]: stackoverflow
[post_id]: 1157140
[parent_id]: 1157094
[tags]: 
NextUnit returns the address of Unit, which is an array local to that function. That means that it is allocated on the stack, and "released" when the function returns, making the return value non-valid. To solve this problem you can: Dynamically allocate a new string each time NextUnit is called. Note that in that case you will have to delete the memory afterwards. Create a global string. That's fine for a small "test" application, but generally use of global variables is discouraged. Have main allocate a string (either dynamically or on the stack), pass it as a parameter to NextUnit, and have NextUnit copy to that string.
