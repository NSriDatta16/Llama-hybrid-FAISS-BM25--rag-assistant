[site]: stackoverflow
[post_id]: 1453901
[parent_id]: 1453885
[tags]: 
You can't do this reliably with regular expressions. Paragraphs are mostly OK because they're not nested generally (although they can be). Lists however are routinely nested and that's one area where regular expressions fall down. PHP has multiple ways of parsing HTML and retrieving selected elements. Just use one of those. It'll be far more robust. Start with Parse HTML With PHP And DOM . If you really want to go down the regex route, start with: function aantalPT($in){ preg_match_all('! (.*) !Us', $in, $out); return $out; } Note: PREG_PATTERN_ORDER is not required as it is the default value. Basically, use a backreference to find the matching tag. That will fail for many reasons such as nested lists and paragraphs nested within lists. And no, those problems are not solvable (reliably) with regular expressions. Edit: as (correctly) pointed out, the regex is also flawed in that it used a pipe delimeter and you were using a pipe character in your regex. I generally use ! as that doesn't normally occur in the pattern (not in my patterns anyway). Some use forward slashes but they appear in this pattern too. Tilde (~) is another reasonably common choice.
