[site]: stackoverflow
[post_id]: 4815372
[parent_id]: 4815284
[tags]: 
Either do the count and sum in the same iteration: tmp = @results.inject([0.0, 0]) { |sum, result| if RankedResult === result [sum.first + result.average_precision, sum.last+1] else sum end } tmp.first / tmp.last Or first filter the collection: tmp = @results.filter { |result| RankedResult === result } tmp.inject(0.0) { |sum, result| sum+result.avergage_precision } / tmp.length
