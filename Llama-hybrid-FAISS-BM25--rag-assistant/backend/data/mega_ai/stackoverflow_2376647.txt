[site]: stackoverflow
[post_id]: 2376647
[parent_id]: 1930900
[tags]: 
Is there a preferred way to do this? From my experience working with other people's modules, I can say there is certainly not consensus on the right way to do this. I have tried and rejected subclassing bits of distutils -- I found it fragile and difficult to get working across different Python versions and different systems. For our code, after trying the types of things you are considering, I have settled on doing detection and configuration right in setup.py before the main call to setup() . This is admittedly a bit ugly, but it means that someone trying compile your stuff has one place to figure out e.g. why the include path is wrong. (And they certainly don't need to be experts on distutils internals).
