[site]: crossvalidated
[post_id]: 636003
[parent_id]: 
[tags]: 
Hierarchical time series reconciliation - circular

I am working on a hierarchical time series forecasting on which I am using reconciliation methods. The problem is the circular dependency between two hierarchical time series as shown in the diagram: We have two hierarchical time series X (red) and time series Y (blue). In this example, we annotate the bottom-level time series with the letter B, and the middle-level with M. So the second time series from the middle-level Y hierarchy is annotated: M_Y2. The following equations hold: Top level = M_X1 + M_X2 M_X1 = B_X1 + B_X2 + B_X3 M_X2 = B_X4 + B_X5 Top level = M_Y1 + M_Y2 M_Y1 = B_Y1 + B_Y2 M_Y2 = B_Y3 One way to approach this is to do the bottom-up reconciliation, followed by the top-down reconciliation. $\hat{B_X} \rightarrow \hat{M_X} \rightarrow \hat{Top}$ Here we fix the reconciled prediction for the top level and follow with top-down reconciliation. $\hat{Top} \rightarrow \hat{M_Y} \rightarrow \hat{B_Y}$ This way we ensure that the top-level time series values are the same for the hierarchy Y and X. In my case, there are additional equations that hold: B_X1 = B_Y1 + B_Y2 B_X2 = B_Y1 + B_Y2 + B_Y3 B_X3 = B_Y2 B_X4 = B_Y2 + B_Y3 B_X5 = B_Y3 This is problematic because we would like to have fixed not only the Top level values but also the bottom during the send reconciliation process. Would you happen to have any idea how to handle this? Would adding a "mapping" layer between B_X and B_Y help? I have tried and could not figure out how. Literature: https://otexts.com/fpp2/hts.html
