[site]: stackoverflow
[post_id]: 4423856
[parent_id]: 
[tags]: 
How to use doctrine or symfony pager with different column selected from multiple table?

How can I implement pagination using Doctrine_Pager or sfDoctrinePager while my query selects multiple columns from two or more tables ? Edit1: Ok, now I figured out that it can be done how Nathan has described below! I got confused as I couldn't retrieve certain data from the query! Let me describe it below: This is my pager query: $pager = new sfDoctrinePager('sfGuardUser', '5'); $q = Doctrine_Query::create() ->select('u.id, u.username, p.org_name, g.name, l.status') ->from('sfGuardUser u') ->leftJoin('u.Profile p') ->leftJoin('u.Groups g') ->leftJoin('u.LicensedVendors l') ->where('g.name = \'client\''); $pager->setQuery($q); $pager->setPage($request->getParameter('page', 1)); $pager->init(); Now in my Template I can retrieve my sfGuardUser and Profile data like this: foreach ($pager->getResults() as $data) { echo $data->username ; //outputs 'username' from sfGuardUser table echo ' ' ; echo $data->Profile->org_name ; //outputs 'Organization name' from sfGuardUserProfile table } I was wrongly trying to retrieve the profile data by $data->org_name and not $data->Profile->org_name ! Now its working for this part correctly, but there is still an issue ! I am still unable to retrieve the Groups & LicensedVendors data using $data->Groups->name or $data->LicensedVendors->status ! It does not show any error or any value either! looks like it outputs an empty string. Shouldn't it get the value just like Profile data ? But when I hydrate the query by setting: $q->setHydrationMode(Doctrine_Core::HYDRATE_SCALAR); I can retrieve all data through: foreach ($pager->getResults() as $data) { echo $data['u_username']; echo $data['p_org_name']; echo $data['g_name']; echo $data['l_status']; } How to get those data without setting **Doctrine_Core::HYDRATE_SCALAR** ? Where I'm doing wrong for retrieving those Groups and LicensedVendors table data? Here is the schema definition of the tables described above: License: actAs: [Timestampable] tableName: licenses columns: id: type: integer(4) primary: true notnull: true autoincrement: true status: type: enum values: ['approved','pending_admin','pending_client','pending_vendor','rejected'] default: 'pending' client_id: type: integer(8) notnull: true vendor_id: type: integer(8) notnull: true product_desc: type: clob(16777215) supplier_name: type: string(80) other_desc: type: string(50) financial_statement: type: clob relations: VendorUser: class: sfGuardUser local: client_id foreign: id foreignAlias: LicensedVendors onDelete: cascade foreignType: many owningSide: true ClientUser: class: sfGuardUser local: vendor_id foreign: id foreignAlias: LicensedClients onDelete: cascade foreignType: many owningSide: true sfGuardUser: actAs: [Timestampable] columns: first_name: string(255) last_name: string(255) email_address: type: string(255) notnull: true unique: true username: type: string(128) notnull: true unique: true algorithm: type: string(128) default: sha1 notnull: true salt: string(128) password: string(128) is_active: type: boolean default: 1 is_super_admin: type: boolean default: false last_login: type: timestamp indexes: is_active_idx: fields: [is_active] relations: Groups: class: sfGuardGroup local: user_id foreign: group_id refClass: sfGuardUserGroup foreignAlias: Users sfGuardUserProfile: actAs: Timestampable: ~ columns: user_id: type: integer notnull: true email: type: string(80) notnull: true unique: true email_new: type: string(80) unique: true firstname: type: string(30) lastname: type: string(70) org_name: type: string(80) notnull: true relations: User: class: sfGuardUser foreign: id local: user_id type: one onDelete: cascade foreignType: one foreignAlias: Profile sfGuardGroup: actAs: [Timestampable] columns: name: type: string(255) unique: true description: string(1000) relations: Users: class: sfGuardUser refClass: sfGuardUserGroup local: group_id foreign: user_id foreignAlias: Groups Edit2: I posted my new issues which I described in first edit as a separate question here !
