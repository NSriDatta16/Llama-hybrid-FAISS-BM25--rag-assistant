[site]: stackoverflow
[post_id]: 4161149
[parent_id]: 4160313
[tags]: 
I had hoped for elegance, but this will have to do. CASE 1 represents 90% of use-cases, and the overhead is negligable. Percentage of use-cases depreciates to CASE 5 which applies to 1 out of 2000 cases. I analyzed the actual patterns for CASE 4, and the patterns did not have to be exhaustive. // FIRST, CREATE AN ARRAY OF $LocaleURL PATTERNS, TAKING INTO ACCOUNT THE VARIABLE USE OF HYPHENS $urlCityArray=explode("-",$LocaleURL); $countSegs = (count($urlCityArray)); // how many array elements if ($countSegs == 1) { $urlCityQuery = $urlCityArray[0]; } else if ($countSegs == 2) { $urlCityQuery = $urlCityArray[0] . " " . $urlCityArray[1] . "', '"; $urlCityQuery .= $urlCityArray[0] . "-" . $urlCityArray[1]; // city1 city2, city1-city2 } else if ($countSegs == 3) { $urlCityQuery = $urlCityArray[0] . " " . $urlCityArray[1] . " " . $urlCityArray[2] . "', '"; $urlCityQuery .= $urlCityArray[0] . "-" . $urlCityArray[1] . " " . $urlCityArray[2] . "', '"; $urlCityQuery .= $urlCityArray[0] . " " . $urlCityArray[1] . "-" . $urlCityArray[2] . "', '"; $urlCityQuery .= $urlCityArray[0] . "-" . $urlCityArray[1] . "-" . $urlCityArray[2]; // city1 city2 city3, city1-city2 city3, city1 city2-city3, city1-city2-city3 } else if ($countSegs == 4) { $urlCityQuery = $urlCityArray[0] . " " . $urlCityArray[1] . " " . $urlCityArray[2] . " " . $urlCityArray[3] . "', '"; $urlCityQuery .= $urlCityArray[0] . " " . $urlCityArray[1] . "-" . $urlCityArray[2] . " " . $urlCityArray[3] . "', '"; $urlCityQuery .= $urlCityArray[0] . "-" . $urlCityArray[1] . "-" . $urlCityArray[2] . "-" . $urlCityArray[3] . "', '"; $urlCityQuery .= $urlCityArray[0] . " " . $urlCityArray[1] . " " . $urlCityArray[2] . "-" . $urlCityArray[3]; // city1 city2 city3 city4, city1 city2-city3 city4, city1-city2-city3-city4, city1 city2 city3-city4 } else if ($countSegs == 5) { $urlCityQuery = $urlCityArray[0] . " " . $urlCityArray[1] . " " . $urlCityArray[2] . " " . $urlCityArray[3] . " " . $urlCityArray[4] . "', '"; $urlCityQuery .= $urlCityArray[0] . "-" . $urlCityArray[1] . "-" . $urlCityArray[2] . "-" . $urlCityArray[3] . "-" . $urlCityArray[4]; // Notre-dame-de-lile-perrot } SELECT 'city' FROM Cities WHERE 'city' IN (" . $urlCityQuery . ") LIMIT 1;
