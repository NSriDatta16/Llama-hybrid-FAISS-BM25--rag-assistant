[site]: stackoverflow
[post_id]: 5111279
[parent_id]: 4538143
[tags]: 
I finally came across the answer: the Rewrite gem by raganwald . Unfortunately, it was only a proof of concept and not much has come of it. It works by parsing the Ruby into an AST, mangling the tree and converting the result back to Ruby. This is of course incredibly powerful, but raganwald never got around to introducing general tools to implement specific manglings, and creating a new one is, in his own words, ‘torturous’. Implementing the in? method on String would mean searching the AST for the specific S-expression that represents calling in? on a String and converting that to a different method call; probably an in?(string, args) in the local namespace. This soon turns into the problem of static type checking, lest you interpret every in? as a String#in? .
