[site]: stackoverflow
[post_id]: 2761449
[parent_id]: 2755108
[tags]: 
Are you sure that the hash function you are using is not the bottleneck? Which time percentage takes the hash function? Can you do the same test and replace the insert/retrievals by a simple call to the hash.
