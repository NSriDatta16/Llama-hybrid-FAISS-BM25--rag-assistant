[site]: stackoverflow
[post_id]: 5583960
[parent_id]: 5583860
[tags]: 
Are you sure you want to use a ref and not an agent ? It sounds to me like you want to perform updates, but you don't care about when the updates actually happen (just so long as they happen eventually). This is exactly what agents are used for: sharing state in an asynchronous and independent manner. Refs are for sharing state in a synchronous and coordinated manner. Structuring application logic around whether or not a ref is in a transaction sounds like a bad idea to me. Maybe if you provide more details someone can come up with a better design.
