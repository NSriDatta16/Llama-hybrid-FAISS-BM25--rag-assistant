[site]: stackoverflow
[post_id]: 1712307
[parent_id]: 
[tags]: 
How can I "use lib" the appropriate directory depending on installation location?

I have an object-oriented web-app that is installed in multiple locations on my server. Once for "live", once for "beta", etc. Being object-oriented, it consists of many perl modules. In the main module, I must "use lib" the appropriate directory for all of the custom perl modules for that instance of the app. This is no big deal, I have a BEGIN block that checks the location of the main program and sets the library directory appropriately. However I also have a lot of utility, command line programs that need to do the same thing. I don't want to cut and paste this code everywhere. What is the best way to share this code snippet amongst the various programs that need it? I can't "use" it because the libary path isn't set up yet. Maybe "do" or "require" would the be the right answer, but both of those will search @INC, which is inappropriate. Maybe something like eval `cat GetLib.pl`; would be appropriate but it seems kind of clunky and fragile. Here is the BEGIN block that I currently use: BEGIN { use FindBin qw ($Bin); require lib; if ($Bin =~ /^\/home\/w\/myapp_live/) { lib->import('/home/w/myapp_live/lib'); print STDERR "live site\n"; } if ($Bin =~ /^\/home\/w\/myapp_beta/) { lib->import('/home/w/myapp_beta/lib'); print STDERR "beta site\n"; } if ($Bin =~ /^\/home\/w\/myapp_test/) { lib->import('/home/w/myapp_test/lib'); print STDERR "testing site\n"; } } Thank you!
