[site]: stackoverflow
[post_id]: 966829
[parent_id]: 966761
[tags]: 
The problem is that '|' is a special character in regular expressions. You need to use preg_quote to escape it here: $row->text = preg_replace( "#{dropcap}".preg_quote($_temp,'#')."{/dropcap}#s", $SimpleDropCapPlugin->html , $row->text ); Actually, there's no reason to even include $_temp in that regex, you could just do this: $row->text = preg_replace( "#{dropcap}.+?{/dropcap}#s", $SimpleDropCapPlugin->html , $row->text ); Correction : upon closer examination, you do need to use $_temp, at least in your implementation, because you are replacing on a whole row of text which could have multiple droptags in it.
