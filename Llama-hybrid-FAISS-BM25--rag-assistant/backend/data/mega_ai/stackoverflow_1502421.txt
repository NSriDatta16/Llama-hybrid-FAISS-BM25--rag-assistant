[site]: stackoverflow
[post_id]: 1502421
[parent_id]: 
[tags]: 
Add a Button in UIView on Tapped Point

Hi im trying to add a button on the point where users tapped on the screen. Here is the code in my UIView file - (void)drawRect:(CGRect)rect { // Drawing code NSLog(@"drawRect, %i, %i", firstTouch.x, firstTouch.y); [tagButton drawRect:CGRectMake(firstTouch.x, firstTouch.y, 100, 200)]; [self addSubview:tagButton]; } - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event { UITouch *touch = [touches anyObject]; firstTouch = [touch locationInView:self]; [self setNeedsDisplay]; } this is log from firstTouch 2009-10-01 17:27:23.743 text[2521:207] drawRect, 0, 1080311808 How do i get the x, y point of the touch, and create a uibutton on that point? any help would be appreciated, thanks This is what i come up with, it adds the button to the view. but when i pop this view, it crashes. i cant seem to find any problem. Can anyone see what the problem is? UIButton *newButton = [UIButton buttonWithType:UIButtonTypeRoundedRect]; [newButton setFrame:CGRectMake(self.firstTouch.x, self.firstTouch.y, width, 17)]; [newButton setTitle:[textField text] forState:UIControlStateNormal]; [newButton setFont:[UIFont boldSystemFontOfSize:12]]; [newButton setShowsTouchWhenHighlighted:YES]; [newButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal]; [newButton setTitleShadowColor:[UIColor blackColor] forState:UIControlStateNormal]; [newButton setContentHorizontalAlignment:UIControlContentHorizontalAlignmentCenter]; [newButton setContentVerticalAlignment:UIControlContentVerticalAlignmentCenter]; [newButton setBackgroundColor:[UIColor clearColor]]; UIImage *bgImg = [[UIImage imageNamed:@"button_greyblue.png"] stretchableImageWithLeftCapWidth:15.0 topCapHeight:0.0]; [newButton setBackgroundImage:bgImg forState:UIControlStateNormal]; [self setTagButton:newButton]; [self.view addSubview:tagButton]; [newButton release];
