[site]: stackoverflow
[post_id]: 3649596
[parent_id]: 
[tags]: 
How to get nested directories contents in Perl

i'm trying to write a script which would process certain files. The data are organized like this: there is a folder (let's call it X) where my script will be placed. In this same folder there is a subfolder called 'data'. This contains several more subfolders with various names and each of these contains many files (no other subfolders, just files). I need to process all files in a subfolder (more specifically, run a function on each file) and then merge the results for all files in the subfolder, so for each folder there is one result (no matter how many files it contains). The problem is, i'm not able to get to the files so i could run my function on them. What i have now is this: $dirname = "data"; opendir ( DIR, $dirname ) || die "Error in opening dir $dirname\n"; while( ($dirname2 = readdir(DIR)) ) { next if $dirname2 eq "."; next if $dirname2 eq ".."; opendir ( DIR2, $dirname2 ) || die "Error in opening dir $dirname2\n"; while( ($file = readdir(DIR2)) ) { next if $file eq "."; next if $file eq ".."; print( "file:$file\n" ); } closedir(DIR2); } closedir(DIR); It always fails with the message "Error in opening dir alex". 'alex' happens to be the first directory in the data directory. My question is - where is the problem? Is this even the correct way how to achieve what i'm trying to do? I'm also worried that this my fail if there is a file also in the data folder, since i cannot open it with opendir, or can I? PS: sorry for that horrible Perl code - i'm still trying to learn this language. Thanks, Peter
