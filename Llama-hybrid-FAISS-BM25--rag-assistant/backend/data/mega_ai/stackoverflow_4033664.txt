[site]: stackoverflow
[post_id]: 4033664
[parent_id]: 
[tags]: 
QTreeview mousePressEvent implementation prevents selection of items

Hello all I have class that inherited from Qtreeview and I implement simple ( empty ) mousePressEvent function But whenever I try to do this , the selection of the items in the Qtreeview are disabled , when I remove this function everything is working fine What im missing here ? Here Is the code: void MyTreeWidget::mousePressEvent(QMouseEvent *event) { QModelIndex index = this->indexAt(event->pos()); QAbstractItemModel *model = this->model(); QMap ItemData = model->itemData(index); QMap ::const_iterator i = ItemData.constBegin(); while (i != ItemData.constEnd()) { QString k = QString::number(i.key()); QString v = i.value().toString(); ++i; } if (event->button() == Qt::LeftButton) { QByteArray itemData ; QString urlTo; itemData.append(urlTo); QDrag *drag = new QDrag(this); QMimeData *mimeData = new QMimeData; mimeData->setData("application/x-dnditemdata", itemData); drag->setMimeData(mimeData); Qt::DropAction dropAction = drag->exec(Qt::MoveAction); if (dropAction == Qt::MoveAction) { UT::getInstance()->LogToFile("dropAction"); } } QTreeView::mousePressEvent(event); }
