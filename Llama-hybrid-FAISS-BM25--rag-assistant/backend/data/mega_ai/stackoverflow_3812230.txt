[site]: stackoverflow
[post_id]: 3812230
[parent_id]: 
[tags]: 
Crash in program using OpenMP, x64 only

The program below crashes when I build it in Release x64 (all other configurations run fine). Am I doing it wrong or is it an OpenMP issue? Well-grounded workarounds are highly appreciated. To reproduce build a project (console application) with the code below. Build with /openmp and /GL and (/O1 or /O2 or /Ox) options in Release x64 configuration. That is OpenMP support and C++ optimization must be turned on. The resulting program should (should not) crash. #include #include class EmptyClass { public: EmptyClass() {} }; class SuperEdge { public: SuperEdge() {mp_points[0] = NULL; mp_points[1] = NULL;} private: const int* mp_points[2]; }; EmptyClass CreateEmptyClass(SuperEdge s) { return EmptyClass(); } int main(int argc, wchar_t* argv[], wchar_t* envp[]) { std::vector v; long count = 1000000; SuperEdge edge; #pragma omp parallel for for(long i = 0; i
