[site]: stackoverflow
[post_id]: 3070858
[parent_id]: 3054635
[tags]: 
Thanks! public function onExpandCallout(event:MouseEvent):void{ // TODO: build this on startup or only on click? Speed vs memory if (calloutState == true) return; if (maskBitmapData.getPixel32(event.localX, event.localY) != 0){ calloutState = true; //create bitmap from source using scaled selection rect var ratio:Number = (sourceBMD.width /targetRect.width); var sRect:Rectangle = hotSpotSprite.getBounds(bkgnImageSprite); var destRect:Rectangle = new Rectangle(sRect.x * ratio, sRect.y * ratio, sRect.width * ratio, sRect.height * ratio); calloutBitmapData = new BitmapData(destRect.width, destRect.height, true, 0xFFFFFFFF); calloutBitmap = new Bitmap(calloutBitmapData); //-- scale alpha mask var scaledMaskBitmapData:BitmapData = new BitmapData(destRect.width, destRect.height, true, 0x00000000); var maskScale:Number = scaledMaskBitmapData.width / maskBitmapData.width; var mMatrix:Matrix = new Matrix(maskScale, 0, 0, maskScale); scaledMaskBitmapData.draw(maskBitmapData,mMatrix,null,null,null, false); // copy source with scaled alpha calloutBitmapData.copyPixels(sourceBMD, destRect, new Point(), scaledMaskBitmapData, new Point()); scaledMaskBitmapData = null; // apply filter to bitmap var myDropShadowFilter:DropShadowFilter = new DropShadowFilter(); myDropShadowFilter.distance = 12; myDropShadowFilter.alpha = .3 myDropShadowFilter.strength = 1; myDropShadowFilter.blurX = 8; myDropShadowFilter.blurY = 8; calloutBitmap.filters = [myDropShadowFilter]; //place on screen calloutSprite = new Sprite(); calloutSprite.addChild(calloutBitmap) calloutSprite.x = offsetPt.x; calloutSprite.y = offsetPt.y; // ADD TO PARENT DisplayContainer calloutLayer.addChild(calloutSprite); // calloutSprite.scaleX = 2; // calloutSprite.scaleY = 2; calloutSprite.doubleClickEnabled = true; calloutSprite.addEventListener(MouseEvent.DOUBLE_CLICK, onCollapseCallout); calloutSprite.addEventListener(MouseEvent.MOUSE_DOWN, onStartDrag); calloutSprite.addEventListener(MouseEvent.MOUSE_UP, onStopDrag); } }
