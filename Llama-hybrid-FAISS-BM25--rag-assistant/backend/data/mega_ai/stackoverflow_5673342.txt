[site]: stackoverflow
[post_id]: 5673342
[parent_id]: 
[tags]: 
How to erase the context I drawn on to the image in iphone sdk?

I am having an image on my view and i am painting on the image with colors like the code below: - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event { mouseSwiped = NO; UITouch *touch = [touches anyObject]; if ([touch tapCount] == 2) { //imageDraw.image = nil; return; } else { } lastPoint = [touch locationInView:imageDraw]; lastPoint.y -= 5; } - (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event { mouseSwiped = YES; UITouch *touch = [touches anyObject]; CGPoint currentPoint = [touch locationInView:mView]; currentPoint.y -= 5; UIGraphicsBeginImageContext(imageDraw.frame.size); [imageDraw.image drawInRect:CGRectMake(0, 0, imageDraw.frame.size.width, imageDraw.frame.size.height)]; CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound); CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0); //CGContextSetRGBStrokeColor(UIGraphicsGetCurrentContext(), 1.0, 0.0, 0.0, 0.5); DrawAppDelegate *appDelegate=(DrawAppDelegate*)[ [UIApplication sharedApplication] delegate]; UIColor *clr = appDelegate.txtColor; [clr setStroke]; CGContextBeginPath(UIGraphicsGetCurrentContext()); CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y); CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), currentPoint.x, currentPoint.y); CGContextStrokePath(UIGraphicsGetCurrentContext()); imageDraw.image = UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext(); lastPoint = currentPoint; mouseMoved++; if (mouseMoved == 10) { mouseMoved = 0; } } - (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event { DrawAppDelegate *appDelegate=(DrawAppDelegate*)[ [UIApplication sharedApplication] delegate]; UITouch *touch = [touches anyObject]; if ([touch tapCount] == 2) { //imageDraw.image = nil; return; } else { } if(!mouseSwiped) { UIGraphicsBeginImageContext(imageDraw.frame.size); [imageDraw.image drawInRect:CGRectMake(0, 0, imageDraw.frame.size.width, imageDraw.frame.size.height)]; CGContextSetLineCap(UIGraphicsGetCurrentContext(), kCGLineCapRound); CGContextSetLineWidth(UIGraphicsGetCurrentContext(), 5.0); UIColor *clr = appDelegate.txtColor; [clr setStroke]; CGContextMoveToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y); CGContextAddLineToPoint(UIGraphicsGetCurrentContext(), lastPoint.x, lastPoint.y); CGContextStrokePath(UIGraphicsGetCurrentContext()); CGContextFlush(UIGraphicsGetCurrentContext()); imageDraw.image = UIGraphicsGetImageFromCurrentImageContext(); UIGraphicsEndImageContext(); } } -(void)drawText { /*TextViewController *viewController = [[TextViewController alloc]init]; [self.navigationController pushViewController:viewController animated:YES]; [viewController release]; */ colorWheel = [[ColorPickerImageView alloc] initWithFrame:CGRectMake(20,20,300,340)]; [colorWheel setImage:[UIImage imageNamed:@"colorWheel1.png"]]; [colorWheel setUserInteractionEnabled:YES]; colorWheel.backgroundColor = [UIColor clearColor]; colorWheel.pickedColorDelegate = self; [mView addSubview:colorWheel]; [self animateColorWheelToShow:YES duration:0.3]; } - (void) pickedColor:(UIColor*)color { //mView.backgroundColor= color; DrawAppDelegate *appDelegate=(DrawAppDelegate*)[ [UIApplication sharedApplication] delegate]; [self animateColorWheelToShow:NO duration:0.3]; appDelegate.txtColor = color; //[self setNeedsDisplayInRect:CGRectMake(0, 0, 320, 480)]; [mView setNeedsDisplay]; } Now I want to erase some painted color on the image.Can anyone suggest me How I can I do any ideas pls with some sample code. Anyone's help will be deeply appreciate. Thanks to all, Monish.
