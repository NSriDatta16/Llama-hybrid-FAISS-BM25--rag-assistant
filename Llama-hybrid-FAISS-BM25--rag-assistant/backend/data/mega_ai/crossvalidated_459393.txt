[site]: crossvalidated
[post_id]: 459393
[parent_id]: 
[tags]: 
How to find the posterior predictive distribution of a hierarchical model where the dependent variable is group indexed?

I have data on $i = 1, \ldots, N$ units which belong in $s = 1, \ldots, M$ groups. The data is indexed by these two indices. I have an independent binary data $X$ corresponding to dependent binary data $Y$ . The hierarchical model is given by: $$ X_{is} \sim Bern(\theta_{s, y})\\ Y_{is} \sim Bern(\pi_s)\\ \theta_{s,y} \sim Beta(a_y,b_y)\\ \pi_s \sim Unif(0,1)\\ a_y \sim Gamma(0.5,0.5)\\ b_y \sim Gamma(0.5,0.5)\\ $$ I am wondering how I can obtain posterior predictive draws of $Y$ and $X$ after running MCMCs. For example, suppose I wanted to draw $Y$ . I would first take a set of draws from the chain on $\pi_s$ , then plug this into $Bern(\pi_s)$ to get a single draw of $Y$ . However, each draw of $\pi$ from the chain consists of $s$ values. Which of these $s$ values do I plug into the Bernoulli? Do I look at my observed data and randomly select a unit, and record their group membership indicator $s$ , and select the value of a chain draw $\pi_s$ off that?
