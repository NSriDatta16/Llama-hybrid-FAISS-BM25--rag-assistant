[site]: stackoverflow
[post_id]: 1735701
[parent_id]: 1735640
[tags]: 
top will tell you the amount of physical memory assigned to your process. Virtual memory is an abstraction on top of physical memory, and malloc / free provide an abstraction on top of that. malloc reserves space from the heap of your program. The heap is simply an area your program's virtual address space used for temporary storage. As you call malloc more, the heap is expanded using the brk system call. However, although the virtual size of your heap increases, physical memory isn't actually assigned until you read or write to your newly allocated memory. For instance, since you never write to the memory allocated to the inner fields of your records, those allocations will not take up any physical RAM. free just releases parts of the heap allocated by malloc . This doesn't necessarily reduce the virtual size of the heap, so the physical memory associated with it may not be released. This is why you're not seeing a reduction in physical memory usage.
