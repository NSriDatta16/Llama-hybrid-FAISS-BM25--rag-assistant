[site]: stackoverflow
[post_id]: 1946119
[parent_id]: 1946057
[tags]: 
I haven't use htmlentities before, but it seems like a bit more robust version of urlencode (which I use a lot). You might want to try: htmlentities(strip_tags($str,ENT_COMPAT),'UTF-8',false); Just as a little nugget, if you want to preserve as standard carrage returns, you could do this: htmlentities(strip_tags(str_replace(" ","\n",$str,ENT_COMPAT)),'UTF-8',false); I know that's something I sometimes like to do. Good Luck.
