[site]: stackoverflow
[post_id]: 5552328
[parent_id]: 
[tags]: 
ArgumentException when loading image from byte array using JpegBitmapDecoder

I'm having some trouble reading JPEG files in my class. I need to load metadata and bitmap from a JPEG file. So far, I have this: public void Load() { using (Stream imageStream = File.Open(this.FilePath, FileMode.Open, FileAccess.Read, FileShare.Read)) { BitmapDecoder decoder = new JpegBitmapDecoder(imageStream, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.OnLoad); BitmapSource source = decoder.Frames[0]; // load metadata this.metadata = source.Metadata as BitmapMetadata; // prepare buffer int octetsPerPixel = source.Format.BitsPerPixel / 8; byte[] pixelBuffer = new byte[source.PixelWidth * source.PixelHeight * octetsPerPixel]; source.CopyPixels(pixelBuffer, source.PixelWidth * octetsPerPixel, 0); Stream pixelStream = new MemoryStream(pixelBuffer); // load bitmap this.bitmap = new Bitmap(pixelStream); // throws ArgumentException } this.status = PhotoStatus.Loaded; } But the Bitmap constructor throws an ArgumentException when trying to create a Bitmap instance from a stream. The documentation says: System.ArgumentException stream does not contain image data or is null. -or- stream contains a PNG image file with a single dimension greater than 65,535 pixels. I'm not sure, what I did wrong. Can you please help me?
