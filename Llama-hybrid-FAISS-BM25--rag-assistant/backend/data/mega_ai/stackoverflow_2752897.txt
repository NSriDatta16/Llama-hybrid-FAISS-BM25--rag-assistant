[site]: stackoverflow
[post_id]: 2752897
[parent_id]: 
[tags]: 
PHP & MySQL username validation and storage problem

For some reason when a user enters a brand new username the error message Username unavailable is displayed and the name is not stored. I was wondering if some can help find the flaw in my code so I can fix this error? Thanks Here is the PHP code. if($_POST['username'] && trim($_POST['username'])!=='') { $u = "SELECT * FROM users WHERE username = '$username' AND user_id <> '$user_id'"; $r = mysqli_query ($mysqli, $u) or trigger_error("Query: $u\n MySQL Error: " . mysqli_error($mysqli)); if (mysqli_num_rows($r) == TRUE) { echo ' Username unavailable '; $_POST['username'] = NULL; } else if(isset($_POST['username']) && mysqli_num_rows($r) == 0 && strlen($_POST['username']) = 256) { echo ' Username can not exceed 255 characters '; } }
