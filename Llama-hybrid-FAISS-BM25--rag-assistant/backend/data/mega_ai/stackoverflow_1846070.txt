[site]: stackoverflow
[post_id]: 1846070
[parent_id]: 
[tags]: 
Ruby Array group and average by hour

We get our data from a sensor which records and stores data like hashes. At any time it measures a few stuff like that: {:temperature => 30, :pression => 100, :recorded_at => 14:34:23} {:temperature => 30, :pression => 101, :recorded_at => 14:34:53} {:temperature => 31, :pression => 102, :recorded_at => 14:34:24} {:temperature => 30, :pression => 101, :recorded_at => 14:34:55} {:temperature => 30, :pression => 102, :recorded_at => 14:34:25} {:temperature => 31, :pression => 101, :recorded_at => 14:34:56} We need to be able to export that data on a JSON format, but we have way too much data (the sensor records about every 30 seconds) and we need to remove some of the data. Ideally we'd want to export 1 measure per hour in the last 24 hours so we have something like {0 => {:temperature => 30, :pression => 100}, 1 => {:temperature => 30, :pression => 100}, 2 => {:temperature => 30, :pression => 100}, 3 => {:temperature => 30, :pression => 100}, 4 => {:temperature => 30, :pression => 100}} For each hour, the temperature is the average of all temperatures measured within that hour. Also, if for any reason some data is missing for 1hour, I'd like to to extrapolate it by being the mean between the previous and next hour. Anybody can help?
