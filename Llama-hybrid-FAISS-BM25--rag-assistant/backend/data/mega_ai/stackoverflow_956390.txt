[site]: stackoverflow
[post_id]: 956390
[parent_id]: 
[tags]: 
How can I prevent IE Caching from causing duplicate Ajax requests?

We are using the Dynamic Script Tag with JsonP mechanism to achieve cross-domain Ajax calls. The front end widget is very simple. It just calls a search web service, passing search criteria supplied by the user and receiving and dynamically rendering the results. Note - For those that aren’t familiar with the Dynamic Script Tag with JsonP method of performing Ajax-like requests to a service that return Json formatted data, I can explain how to utilise it if you think it could be relevant to the problem. The service is WCF hosted on IIS. It is Restful so the first thing we do when the user clicks search is to generate a Url containing the criteria. It looks like this... https://.../service.svc?criteria=john+smith We then use a dynamically created Html Script Tag with the source attribute set to the above Url to make the request to our service. The result is returned and we process it to show the results. This all works fine, but we noticed that when using IE the service receives the request from the client Twice . I used Fiddler to monitor the traffic leaving the browser and sure enough I see two requests with the following urls... Request 1: https://.../service.svc?criteria=john+smith Request 2: https://.../service.svc?criteria=john+smith&_=123456789 The second request has been appended with some kind of Id. This Id is different for every request. My immediate thought is it was something to do with caching. Adding a random number to the end of the url is one of the classic approaches to disabling browser caching. To prove this I adjusted the cache settings in IE. I set “Check for newer versions of stored pages” to “Never” – This resulted in only one request being made every time. The one with the random number on the end. I set this setting value back to the default of “Automatic” and the requests immediately began to be sent twice again. Interestingly I don’t receive both requests on the client. I found this reference where someone is suggesting this could be a bug with IE. The fact that this doesn’t happen for me on Firefox supports this theory. Can anyone confirm if this is a bug with IE? It could be by design. Does anyone know of a way I can stop it happening? Some of the more vague searches that my users will run take up enough processing resource to make doubling up anything a very bad idea. I really want to avoid this if at all possible :-)
