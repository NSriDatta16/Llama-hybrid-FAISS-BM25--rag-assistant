[site]: stackoverflow
[post_id]: 1179876
[parent_id]: 385532
[tags]: 
The following will work for Maven 2.1+ (prior to that there wasn't a phase between test and package that you could bind an execution to). You can use the maven-antrun-plugin to replace the persistence.xml with the test version for the duration of the tests, then restore the proper version before the project is packaged. This example assumes the production version is src/main/resources/META-INF/persistence.xml and the test version is src/test/resources/META-INF/persistence.xml, so they will be copied to target/classes/META-INF and target/test-classes/META-INF respectively. It would be more elegant to encapsulate this into a mojo, but as you're only copying a file, it seems like overkill. maven-antrun-plugin 1.3 copy-test-persistence process-test-resources run restore-persistence prepare-package run
