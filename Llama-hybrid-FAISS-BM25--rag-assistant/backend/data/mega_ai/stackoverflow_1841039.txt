[site]: stackoverflow
[post_id]: 1841039
[parent_id]: 
[tags]: 
MySQL query speed issues when counting from second table

So I'm having serious speed problems using a left join to count ticket comments from another table. I've tried using a sub-select in the count field and had precisely the same performance. With the count, the query takes about 1 second on maybe 30 tickets, and 5 seconds for 19000 tickets (I have both a production and a development server so times are skewed a tad). I'm trying to optimize this as four variations of the query need to be run each time per page refresh. Without the count, I see execution time fall from 1 second to 0.03 seconds, so certainly this count is being run across all tickets and not just the ones which are selected. Here's a trimmed down version of the query in question: SELECT tickets.ticket_id, ticket_severity, ticket_short_description, ticket_full_description, count(*) as commentCount, FROM tickets (LEFT JOIN tickets_comment on ticket_id = tickets_comment.ticket_id) WHERE ticket_status='Open' and ticket_owner_id='133783475' GROUP BY everything, under, the, sun Now, not all tickets have comments, so I can't just do a right or standard join. When doing that the speed is fairly good (1/10th the current), but any tickets without comments aren't included. I see three fixes for this, and would like any and all advice you have. Create a new column comment_count and use a trigger/update query on new comment Work with the UI and grab comments on the fly (not really wanted) Hope stackoverflow folks have a more elegant solution :Ã¾ Ideas?
