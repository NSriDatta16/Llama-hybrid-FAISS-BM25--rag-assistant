[site]: stackoverflow
[post_id]: 5518755
[parent_id]: 5517304
[tags]: 
SELECT feed.product.value('@id[1]', 'INT') AS ProductId, step3.data.value('ExternalId[1]', 'varchar(50)') AS ExternalId, step2.data.value('AverageRating[1]', 'decimal(10,1)') AS AveRating, step3.data.value('RatingRange[1]', 'int') AS RatingRange FROM @xmlData.nodes('/Feed/Product') feed ( product ) CROSS APPLY feed.product.nodes('NativeReviewStatistics/AverageRatingValues/AverageRatingValue') step2(data) CROSS APPLY step2.data.nodes('RatingDimension') step3(data)
