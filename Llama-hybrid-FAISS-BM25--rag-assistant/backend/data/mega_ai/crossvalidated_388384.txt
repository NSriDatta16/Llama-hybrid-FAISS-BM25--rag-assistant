[site]: crossvalidated
[post_id]: 388384
[parent_id]: 
[tags]: 
Which test should I use to predict a ratio from multilevel, time series data?

Thanks in advance for any help you can provide - I've done as much research as possible but I think it'll become obvious I'm somewhat unfamiliar with statistics. Let's say that you've noticed that purchases per customer has decreased over time and you're trying to figure out why that's the case. Your outcome variable is purchases/customer. For prediction variables, you have number of total customers, number of those customers who visited a store, and number of purchases they made while visiting the store (among other IVs). We also have the data broken out by each individual store location. So we have what appears to be multi-level (rolled up by store location) time series data we want to use to predict a ratio. We also have some IVs that directly impact that ratio, e.g., the number of customers who visited a store. Ultimately, I am trying to explain to what degree each IV has contributed to the decreased number of purchases/customer. My questions are: 1. What is the best way to set up my dataset, e.g., one row per customer per day? and 2. What is the best test to run on this dataset? Apologies if this question is vague! Let me know if there's anything I can do to help clarify.
