[site]: stackoverflow
[post_id]: 5706157
[parent_id]: 
[tags]: 
Deploy a Java Applet with Security Permission in HTML

I am having an extremely difficult time getting this to work. The applet is embed on my web page and it is trying to connect to a Java Servlet here . On some computers it connects fine, on others I get a can not connect error, which I believe is caused by java security permissions. Custom 1: access denied (java.net.SocketPermission 184.91.186.5:8080 connect,resolve) java.security.AccessControlException: access denied (java.net.SocketPermission 184.91.186.5:8080 connect,resolve) at java.security.AccessControlContext.checkPermission(Unknown Source) at java.security.AccessController.checkPermission(Unknown Source) at java.lang.SecurityManager.checkPermission(Unknown Source) at java.lang.SecurityManager.checkConnect(Unknown Source) at sun.plugin2.applet.Applet2SecurityManager.checkConnect(Unknown Source) at java.net.Socket.connect(Unknown Source) at sun.net.NetworkClient.doConnect(Unknown Source) at sun.net.www.http.HttpClient.openServer(Unknown Source) at sun.net.www.http.HttpClient.openServer(Unknown Source) at sun.net.www.http.HttpClient. (Unknown Source) at sun.net.www.http.HttpClient.New(Unknown Source) at sun.net.www.http.HttpClient.New(Unknown Source) at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source) at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source) at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source) at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(Unknown Source) at Calendar_Algorithm$Con.send_courses_to_server(Calendar_Algorithm.java:789) at Calendar_Algorithm$Con.run(Calendar_Algorithm.java:773) at Calendar_Algorithm.send_courses_to_server(Calendar_Algorithm.java:761) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at sun.plugin.javascript.JSInvoke.invoke(Unknown Source) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at sun.plugin.javascript.JSClassLoader.invoke(Unknown Source) at sun.plugin2.liveconnect.JavaClass$MethodInfo.invoke(Unknown Source) at sun.plugin2.liveconnect.JavaClass$MemberBundle.invoke(Unknown Source) at sun.plugin2.liveconnect.JavaClass.invoke0(Unknown Source) at sun.plugin2.liveconnect.JavaClass.invoke(Unknown Source) at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$DefaultInvocationDelegate.invoke(Unknown Source) at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$3.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo.doObjectOp(Unknown Source) at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$LiveConnectWorker.run(Unknown Source) at java.lang.Thread.run(Unknown Source) I have signed the jar file, yet it still doesn't fix the issue. Here is how I generated the key file and signed the jar. keytool -genkey -alias cal -keystore keys -keypass #### -dname "cn=feldman" -storepass #### jarsigner -keystore keys -storepass #### -keypass #### -signedjar CalSigned.jar Cal.jar cal Here is how I am embedding it into the html page: var attributes = {code:'Calendar_Algorithm.class', archive:'Cal39.jar', width:150, height:50, id:"ClientApp", name:"ClientApp" } ; var parameters = {fontSize:16} ; var version = '1.6' ; deployJava.runApplet(attributes, parameters, version); I also tried doing a jnlp file, and I could not even get that to start the jar, here is my jnlp file content: Easy Course Selector Group Boba Easy Course Selector Easy Course Selector And the embed code var attributes = {id:"ClientApp", name:"ClientApp", code:'Calendar_Algorithm', width:150, height:50} ; var parameters = {jnlp_href: 'Cal_Info.jnlp'} ; deployJava.runApplet(attributes, parameters, '1.6'); This is the error log of when I use it to connect to the external server: java.security.AccessControlException: access denied (java.net.SocketPermission 184.91.186.5:8080 connect,resolve) at java.security.AccessControlContext.checkPermission(Unknown Source) at java.security.AccessController.checkPermission(Unknown Source) at java.lang.SecurityManager.checkPermission(Unknown Source) at java.lang.SecurityManager.checkConnect(Unknown Source) at sun.plugin2.applet.Applet2SecurityManager.checkConnect(Unknown Source) at java.net.Socket.connect(Unknown Source) at sun.net.NetworkClient.doConnect(Unknown Source) at sun.net.www.http.HttpClient.openServer(Unknown Source) at sun.net.www.http.HttpClient.openServer(Unknown Source) at sun.net.www.http.HttpClient. (Unknown Source) at sun.net.www.http.HttpClient.New(Unknown Source) at sun.net.www.http.HttpClient.New(Unknown Source) at sun.net.www.protocol.http.HttpURLConnection.getNewHttpClient(Unknown Source) at sun.net.www.protocol.http.HttpURLConnection.plainConnect(Unknown Source) at sun.net.www.protocol.http.HttpURLConnection.connect(Unknown Source) at sun.net.www.protocol.http.HttpURLConnection.getOutputStream(Unknown Source) at Calendar_Algorithm$Con.send_courses_to_server(Calendar_Algorithm.java:789) at Calendar_Algorithm$Con.run(Calendar_Algorithm.java:773) at Calendar_Algorithm.send_courses_to_server(Calendar_Algorithm.java:761) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at sun.plugin.javascript.JSInvoke.invoke(Unknown Source) at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) at java.lang.reflect.Method.invoke(Unknown Source) at sun.plugin.javascript.JSClassLoader.invoke(Unknown Source) at sun.plugin2.liveconnect.JavaClass$MethodInfo.invoke(Unknown Source) at sun.plugin2.liveconnect.JavaClass$MemberBundle.invoke(Unknown Source) at sun.plugin2.liveconnect.JavaClass.invoke0(Unknown Source) at sun.plugin2.liveconnect.JavaClass.invoke(Unknown Source) at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$DefaultInvocationDelegate.invoke(Unknown Source) at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$3.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo.doObjectOp(Unknown Source) at sun.plugin2.main.client.LiveConnectSupport$PerAppletInfo$LiveConnectWorker.run(Unknown Source) at java.lang.Thread.run(Unknown Source) Any help would be amazing. Also here is the code that causes the error: class Con implements PrivilegedExceptionAction { private final String text; boolean res; public Con(String t) { text=t; } public Boolean run() { res=send_courses_to_server(); return res; } public boolean send_courses_to_server(){ try { URL url = new URL(server); HttpURLConnection con; con=(HttpURLConnection) url.openConnection(); con.setRequestProperty("Content-type", "text/xml; charset=UTF-8"); con.setRequestMethod("POST"); con.setDoOutput(true); con.setDoInput(true); OutputStream out = con.getOutputStream(); Writer writer = new OutputStreamWriter(out, "UTF-8"); String xml=""; writer.write(" \n" +" Validation_2 \n"); xml=" \n" +" Validation_2 \n"; Scanner in=new Scanner(text); while(in.hasNext()){ String temp=in.nextLine().trim(); writer.write(" "+temp+" \n"); xml=xml+" "+temp+" \n"; } writer.write(" \n"); xml=xml+" \n"; writer.flush(); writer.close(); InputStream is= con.getInputStream(); if(con.getContentType().equals("text/xml")){ status_message= new Scanner(is).nextLine(); return false; } else{ return set_courses(is); } } catch (Exception e){ e.printStackTrace(); status_message= "Custom 1: "+e.getMessage(); return false; } } private boolean set_courses(InputStream is){ courses=new Vector (); try { ObjectInputStream ois=new ObjectInputStream(is); Course c; while(true){ try{ c=(Course)ois.readObject(); courses.add(c); }catch(EOFException e){ break; } } ois.close(); } catch (Exception e){ status_message= "Custom 3 "+e.getMessage(); return false; } status_message="Good"; return true; } }
