[site]: stackoverflow
[post_id]: 4675944
[parent_id]: 4675853
[tags]: 
The problem is that your Accept-Encoding states gzip so you're probably getting a gzipped image. I just tried your code with your gzip decompression on and it works without any problems. pic = download("http://media2.ct.yelpcdn.com/photo/2MdauidaMUazuew2h0pdgQ/l", g=True) s = getSize(pic) So does changing your 'Accept-Encoding' from 'gzip' to 'image.*' ree.add_header('User-Agent',random.choice(agents)) ree.add_header('Accept-Encoding', 'image.*') Part 2: You could always ask for gzip and wrap with try/except here to return the data unaltered if gzip complains. try: compressedstream = StringIO(h) gzipper = gzip.GzipFile(fileobj=compressedstream) data = gzipper.read() return data except IOError: # not gzip return h
