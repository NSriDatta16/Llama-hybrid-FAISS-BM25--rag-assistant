[site]: stackoverflow
[post_id]: 4775438
[parent_id]: 
[tags]: 
magento advanced catalog product search filter by categories

What would be the easiest way to do an advanced catalog search for a product and filter by a category and its sub-categories? currently I'm searching on a keyword found in the products title or short description or long description. While this does work when I don't include any categories, I'm lost how to include multiple categories as a filter in my productCollection. Here is some of the code I'm working w/ /** * Retrieve advanced search product collection * * @return Mage_CatalogSearch_Model_Mysql4_Advanced_Collection */ public function getProductCollection(){ if (is_null($this->_productCollection)) { $this->_productCollection = Mage::getResourceModel('catalogsearch/advanced_collection') ->addAttributeToSelect(Mage::getSingleton('catalog/config')->getProductAttributes()) ->addMinimalPrice() ->addStoreFilter(); Mage::getSingleton('catalog/product_status')->addVisibleFilterToCollection($this->_productCollection); Mage::getSingleton('catalog/product_visibility')->addVisibleInSearchFilterToCollection($this->_productCollection); /* include category filtering */ /* if ($category = filter_input(INPUT_GET, 'category', FILTER_VALIDATE_INT)) { $this->_productCollection->addCategoryFilter(Mage::getModel('catalog/category')->load($category),true); } */ } return $this->_productCollection; } UPDATE: this is exactly what I'm trying to do - except I need to to search for products in any of the categories not all the categories, product category search
