[site]: stackoverflow
[post_id]: 1971451
[parent_id]: 1925455
[tags]: 
This is based on the same daringfireball.net regular expression , but adds a bit more logic than Eric Coleman's example, as well as configuration for maximum URL depth (SO seems to be 50), maximum path depth when URL is truncated (SO seems to be 2), and ellipsis character ( &hellip; ). As far as I know this replicates all of the SO URL rewriting functionality, at least as far as what was discussed so far in the comments and responses here. function auto_link_text($text) { $pattern = '#\b(([\w-]+://?|www[.])[^\s()<>]+(?:\([\w\d]+\)|([^[:punct:]\s]|/)))#'; return preg_replace_callback($pattern, 'auto_link_text_callback', $text); } function auto_link_text_callback($matches) { $max_url_length = 50; $max_depth_if_over_length = 2; $ellipsis = '&hellip;'; $url_full = $matches[0]; $url_short = ''; if (strlen($url_full) > $max_url_length) { $parts = parse_url($url_full); $url_short = $parts['scheme'] . '://' . preg_replace('/^www\./', '', $parts['host']) . '/'; $path_components = explode('/', trim($parts['path'], '/')); foreach ($path_components as $dir) { $url_string_components[] = $dir . '/'; } if (!empty($parts['query'])) { $url_string_components[] = '?' . $parts['query']; } if (!empty($parts['fragment'])) { $url_string_components[] = '#' . $parts['fragment']; } for ($k = 0; $k = $max_depth_if_over_length || strlen($url_short) + strlen($curr_component) > $max_url_length) { if ($k == 0 && strlen($url_short) $url_short "; } Sample Input: This is my text. I wonder if you know about asking questions on StackOverflow: Check This out http://www.stackoverflow.com/questions/1925455/how-to-mimic-stackoverflow-auto-link-behavior Also, base_convert php function? http://pt.php.net/manual/en/function.base-convert.php#52450 http://pt.php.net/manual/en/function.base-convert.php?wtf=hehe#52450 http://a.b/c/d/e/f/test and http://a.b/c/d/e/f/g/h/i/j/k/l/m/n/o/p/q/r/s/t/u/v/z/y/w/z/test Sample Output: This is my text. I wonder if you know about asking questions on StackOverflow: Check This out http://stackoverflow.com/questions/1925455/&hellip; Also, base_convert php function? http://pt.php.net/manual/en/&hellip; http://pt.php.net/manual/en/&hellip; http://a.b/c/d/e/f/test and http://a.b/c/d/&hellip;
