[site]: stackoverflow
[post_id]: 1053992
[parent_id]: 1051895
[tags]: 
Depends on your situation, it may be better for you to create a separate table "whose-online" with the columns: "ip" and "last-updated-time" and query/update this table every time a user loads a page. On page load queries may include : Update/insert "whose-online" table for current user based on ip. Delete "expired" rows (can also be done periodically using cronjob). Count "active" users. Benefits of using this technique : If a user is not logged in, he/she is still being counted/tracked. Depends on the amount of users you have, querying this table may be quicker. Note: If you use this you should want to take into consideration that any pageview will create a row in your table so based on useragent you can disregard bots or only count the popular ones (Firefox, IE, Safari, Opera, etc).
