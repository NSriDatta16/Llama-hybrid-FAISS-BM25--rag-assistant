[site]: stackoverflow
[post_id]: 4950077
[parent_id]: 
[tags]: 
Magento - Checking if an Admin and a Customer are logged in

I have a web server with Magento 1.4.0.1 installed. I have another web site that shares credential with it. I've managed to check if the customer is logged in or not (after having changed the cookies location in Magento), but things got complicated when I also tried to figure out if an admin was logged in. I can only get the proper answer for the first session I asked for (either the customer OR the admin, the second one is NEVER logged in). How can I have both answers? Here is the code I'm using to test that out: require_once '../app/Mage.php'; umask(0) ; Mage::app(); // Checking for customer session Mage::getSingleton('core/session', array('name'=>'frontend') ); $session=Mage::getSingleton('customer/session', array('name'=>'frontend') ); if ($session->isLoggedIn()) { echo "Customer is logged in"; } else { echo "Customer is not logged in"; } // Checking for admin session Mage::getSingleton('core/session', array('name'=>'adminhtml') ); $adminsession = Mage::getSingleton('admin/session', array('name'=>'adminhtml')); if($adminsession->isLoggedIn()) { echo "Admin Logged in"; } else { echo "Admin NOT logged in"; } So with the code like this, the admin is never logged in. If you put the part about the admin first, then the customer is never logged in. It seems like I'm missing a line between the two requests. This may be the same problem than this unanswered question: Magento how to check if admin is logged in within a module controller This seems like a popular problem, but I could not find the proper solution... Thanks for your help!
