[site]: stackoverflow
[post_id]: 5335277
[parent_id]: 
[tags]: 
Populating ListView from Cursor

I've been looking on here for quite some time and I cannot find an answer to my problem. There are many similar issues. But I haven't been able to come up with any solution that works. I am very new to android/java programming so I really appreciate any help. Background: I have an activity screen that contains 2 listviews. The first listview contains a list of names coming from a database. (This is working correctly). Then when a user clicks on one of the names in the list, the onItemClick event fires and builds a cursor from all the data associated from the name. (Have verified that I am getting a cursor with valid results). Problem: When I try to put the resulting cursor into a SimpleCursorAdapter to set my listadpter to, I am receiving no errors, but I'm not getting anything displayed to the screen. I have data coming from a SQLite database. It is simply 4 columms with X number of rows. All I want to do is display everything on the list and then maybe do some analysis. Here is my code: public class TipCalculator_w_Database extends Activity { @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.databaseinfoscreen); ListView lv1 = null; lv1 = (ListView) findViewById (R.id.List1); final ListView lv2; lv2 = (ListView) findViewById (R.id.List2); final DataBase showData = new DataBase(getApplicationContext()); showData.open(); Cursor NameList = showData.GetAllNames(); startManagingCursor(NameList); // Create an ArrayAdapter, that will actually make the Strings above // appear in the ListView int i = NameList.getCount(); String[] FinalString = new String[i]; int j = 0; while (NameList.moveToNext()) { FinalString[j] = NameList.getString(0); j++; } if(j != 0) { lv1.setAdapter(new ArrayAdapter (this, android.R.layout.simple_gallery_item, FinalString)); } NameList.close(); showData.close(); lv1.setOnItemClickListener(new OnItemClickListener() { public void onItemClick(AdapterView parent, View view, int position, long id) { String selectedName = ((TextView) view).getText().toString(); Context ctx= parent.getContext(); final DataBase showData = new DataBase(getApplicationContext()); showData.open(); final String[] columns = new String[] { showData.KEY_ROWID, showData.KEY_NAME, showData.KEY_BILL, showData.KEY_TIP}; final int[] to = new int[] { R.id.ID_list, R.id.Name_list, R.id.Bill_list, R.id.Tip_list}; Cursor NewEntry = showData.GetRowByName(selectedName); startManagingCursor(NewEntry); lv2.setAdapter(new SimpleCursorAdapter(ctx, R.layout.listlayout, NewEntry, columns, to)); showData.close(); NewEntry.close(); // Back Button Functionality Button backButton = (Button) findViewById(R.id.Back); backButton.setOnClickListener(new View.OnClickListener() { public void onClick(View v) { Intent myIntent = new Intent(v.getContext(), Tipscreen.class); startActivityForResult(myIntent, 0); } } ); } } Here is my XML Files listlayout.xml -- databaseinfoscreen.xml -- Hopefully this is enough to go off of, if there is any more information needed please let me know. I am getting all the information I need in the cursor it just isn't being displayed. I am open to alternate means of doing this. However, I cannot make this particular class extend ListActivity since it needs to be extending activity. Also of note. I have been able to display to that listview using the following line of code. Unfortunately this is only displays one column rather than all columns which I want. lv2.setAdapter(new ArrayAdapter (ctx, android.R.layout.simple_gallery_item, FinalString)); Where FinalString is simply a full column of data from the database that was manipulated into an array. Thanks for the help.
