[site]: stackoverflow
[post_id]: 840059
[parent_id]: 837644
[tags]: 
Not sure what the API will let you do but the Bluetooth Host Controller Interface (HCI) command underlying this is the 'Inquiry Command' This will let you inquire about devices either for a fixed time and/or a fixed number of responses. I'm a Bluetooth neophyte, not an expert but... To get at least 1 response from a Bluetooth device that is in a low power mode takes 1.28 seconds, so inquiry time is in multiples of that period up to a maximum of 61.44 seconds (48 periods), so the time range is 1 (1.28 seconds) to 48 (61.44 seconds). There might be several devices that could respond in a single 1.28 second period though. You can also specify the number of responses you will accept (1..255) or 0 for unlimited e.g. until the time runs out. You can also cancel an inquiry, if you found a particular device you were looking for. Unscientific test from my desk using a CSR bluetooth chip with Bluetooth 2.1 +EDR firmware running inquiry on the chip with debug output via the chip UART. Ran each inquiry 10 times and took an average of the results: 1 period inquiry time (1.28 seconds) yeilded an average of 10 unique bluetooth addresses. 5 period inquiry time (6.4 seconds) yielded an average of 23 unique bluetooth addresses. 10 period inquiry time (12.8 seconds) yielded an average of 29 unique bluetooth addresses. I say 'unique', actually the results repeated a lot of the same addresses over and over, this may be implementation dependent though and the Apple API may only return unique addresses. However, this is not representative of the 'real world' as most of the Bluetooth Devices around here (my office) are not in a low power mode. I guess, I could filter out PCs, laptops and test kit by Class of Device. That would get mobile phones, headsets that were discoverable etc... Inquiry can also be combined with RSSI to get the the devices with the strongest signal but they may not necessarily be the closest. For your scenario you might want to do an inquiry bases on time and number of devices e.g 4 * 1.28 seconds or 10 devices. To summarise: The shortest time you can do an inquiry for is 1.28 seconds and that could get 10+/-? devices in the area IF they are awake and near by. If you've got a saturated Bluetooth environment or (a microwave oven going in the same room) it could take longer to find all the devices within range.
