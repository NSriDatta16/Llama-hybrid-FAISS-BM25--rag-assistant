[site]: stackoverflow
[post_id]: 3049362
[parent_id]: 
[tags]: 
Mystery: How does Google do cross-domain iframe communication?

When you host Googles web search element on a page, a div is created which incorporates an iframe which points to a Google adsense ads page. However, if there are no ads for the specific query, Google somehow changes the class on YOUR domain to render the div (and iframe) invisible. They are NOT using postMessage, as it also works in IE7. They are also not using the fragment identifier method, as no hash appears in the url. So how do they do it? To check what I'm saying just put the following into a regular html page: Loading google.load('search', '1'); google.setOnLoadCallback(function(){ new google.search.CustomSearchControl().draw('cse'); }, true); and then do a search for "cars" (or anything else that will definitely have ads) and then for "wzxv", which has no ads...
