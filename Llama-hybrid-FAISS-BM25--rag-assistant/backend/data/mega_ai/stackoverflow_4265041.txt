[site]: stackoverflow
[post_id]: 4265041
[parent_id]: 
[tags]: 
nexus http proxy error

I'm trying to configure a nexus server which is behind a proxy. I entered the proxy settings for one repository[maven central] but it could not connect to the remote repository and threw the following error. I tried giving the "NT LAN Manager Domain" then it keeps on checking for remote service and the logs show the following. The settings are saved in nexus.xml as entered. I'm using 1.7.1 version. I tried 1.8.0 version and then found that the password entry is not stored in the nexus.xml and hence tried installing 1.7.1. Kindly let me know how do I configure the http proxy =============================================================================== Logs with NTLM domain:- vm 1 | 2010-11-24 13:33:34 DEBUG [ool-2-thread-11] - o.s.n.p.s.r.c.Commo~ - Invoking HTTP HEAD method against remote location http://repo1.maven.or /maven2/ vm 1 | 2010-11-24 13:33:34 INFO [ool-2-thread-11] - o.s.n.p.s.r.c.Commo~ - Remote storage settings change detected for ProxyRepository ID="central ("Maven Central"), updating HttpClient... vm 1 | 2010-11-24 13:33:34 INFO [ool-2-thread-11] - o.s.n.p.s.r.c.Commo~ - ... proxy setup with host "10.66.184.116" vm 1 | 2010-11-24 13:33:34 WARN [ool-2-thread-11] - o.s.n.p.s.r.c.Commo~ - ... proxy authentication setup for NTLM domain "mydomain" vm 1 | 2010-11-24 13:33:34 DEBUG [c=1290585733815] - org.mortbay.log - RESPONSE /nexus/service/local/repository_statuses 202 vm 1 | 2010-11-24 13:33:34 DEBUG [c=1290585783872] - org.mortbay.log - RESPONSE /nexus/service/local/repository_statuses 202 vm 1 | 2010-11-24 13:33:34 DEBUG [ool-2-thread-11] - o.s.n.p.s.r.c.Commo~ - HEAD method failed, will attempt GET. Status: 400 vm 1 | 2010-11-24 13:33:34 DEBUG [qtp-22562823-11] - org.mortbay.log - EXCEPTION vm 1 | java.io.IOException: An established connection was aborted by the sof ware in your host machine vm 1 | at sun.nio.ch.SocketDispatcher.read0(Native Method) vm 1 | at sun.nio.ch.SocketDispatcher.read(Unknown Source) vm 1 | at sun.nio.ch.IOUtil.readIntoNativeBuffer(Unknown Source) vm 1 | at sun.nio.ch.IOUtil.read(Unknown Source) vm 1 | at sun.nio.ch.SocketChannelImpl.read(Unknown Source) vm 1 | at org.mortbay.io.nio.ChannelEndPoint.fill(ChannelEndPoint.java: 31) vm 1 | at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:290) vm 1 | at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:2 2) vm 1 | at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:4 4) vm 1 | at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEnd oint.java:409) vm 1 | at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThre dPool.java:520) =============================================================================== Logs without NTLM domain:- 2010-11-24 12:49:57 DEBUG [c=1290583197018] - o.s.n.p.m.m.M2Repos~ - Failed mirror URL:http://repo1.maven.org/maven2/ 2010-11-24 12:49:57 DEBUG [c=1290583197018] - o.s.n.p.m.m.M2Repos~ - The method execution returned result code 407. [repositoryId="central", requestPath="/.meta/repository-metadata.xml", remoteUrl="http://repo1.maven.org/maven2/.meta/repository-metadata.xml"] org.sonatype.nexus.proxy.RemoteStorageException: The method execution returned result code 407. [repositoryId="central", requestPath="/.meta/repository-metadata.xml", remoteUrl="http://repo1.maven.org/maven2/.meta/repository-metadata.xml"] at org.sonatype.nexus.proxy.storage.remote.commonshttpclient.CommonsHttpClientRemoteStorage.retrieveItem(CommonsHttpClientRemoteStorage.java:247) at org.sonatype.nexus.proxy.repository.AbstractProxyRepository.doRetrieveRemoteItem(AbstractProxyRepository.java:1272) at org.sonatype.nexus.proxy.maven.AbstractMavenRepository.doRetrieveRemoteItem(AbstractMavenRepository.java:445) at org.sonatype.nexus.proxy.repository.AbstractProxyRepository.doRetrieveItem0(AbstractProxyRepository.java:1000) at org.sonatype.nexus.proxy.repository.AbstractProxyRepository.doRetrieveItem(AbstractProxyRepository.java:890) at org.sonatype.nexus.proxy.maven.AbstractMavenRepository.doRetrieveItem(AbstractMavenRepository.java:393) at org.sonatype.nexus.proxy.repository.AbstractRepository.retrieveItem(AbstractRepository.java:714) at org.sonatype.nexus.repositories.metadata.NexusRawTransport.readRawData(NexusRawTransport.java:49) at org.sonatype.nexus.repository.metadata.DefaultRepositoryMetadataHandler.readRepositoryMetadata(DefaultRepositoryMetadataHandler.java:47) at org.sonatype.nexus.repository.metadata.DefaultRepositoryMetadataHandler.readRepositoryMetadata(DefaultRepositoryMetadataHandler.java:38) at org.sonatype.nexus.repositories.metadata.DefaultNexusRepositoryMetadataHandler.readRepositoryMetadata(DefaultNexusRepositoryMetadataHandler.java:46) at org.sonatype.nexus.rest.mirrors.RepositoryPredefinedMirrorListPlexusResource.getMetadata(RepositoryPredefinedMirrorListPlexusResource.java:104) at org.sonatype.nexus.rest.mirrors.RepositoryPredefinedMirrorListPlexusResource.get(RepositoryPredefinedMirrorListPlexusResource.java:82) at org.sonatype.plexus.rest.resource.RestletResource.represent(RestletResource.java:276) at org.sonatype.nexus.rest.NexusRestletResource.represent(NexusRestletResource.java:34) at org.restlet.resource.Resource.getRepresentation(Resource.java:302) at org.restlet.resource.Resource.handleGet(Resource.java:464) at org.restlet.Finder.handle(Finder.java:353) at org.restlet.Filter.doHandle(Filter.java:150) at org.restlet.Filter.handle(Filter.java:195) at org.restlet.Router.handle(Router.java:504) at org.restlet.Filter.doHandle(Filter.java:150) at org.restlet.Filter.handle(Filter.java:195) at org.restlet.Router.handle(Router.java:504) at org.restlet.Filter.doHandle(Filter.java:150) at org.restlet.Filter.handle(Filter.java:195) at org.restlet.Filter.doHandle(Filter.java:150) at org.sonatype.plexus.rest.RetargetableRestlet.doHandle(RetargetableRestlet.java:39) at org.restlet.Filter.handle(Filter.java:195) at org.restlet.Filter.doHandle(Filter.java:150) at org.restlet.Filter.handle(Filter.java:195) at org.restlet.Filter.doHandle(Filter.java:150) at org.restlet.Filter.handle(Filter.java:195) at org.restlet.Filter.doHandle(Filter.java:150) at com.noelios.restlet.StatusFilter.doHandle(StatusFilter.java:130) at org.restlet.Filter.handle(Filter.java:195) at org.restlet.Filter.doHandle(Filter.java:150) at org.restlet.Filter.handle(Filter.java:195) at com.noelios.restlet.ChainHelper.handle(ChainHelper.java:124) at com.noelios.restlet.application.ApplicationHelper.handle(ApplicationHelper.java:112) at org.restlet.Application.handle(Application.java:341) at org.restlet.ext.wadl.WadlApplication.handle(WadlApplication.java:705) at org.restlet.Filter.doHandle(Filter.java:150) at org.restlet.Filter.handle(Filter.java:195) at org.restlet.Router.handle(Router.java:504) at org.restlet.Filter.doHandle(Filter.java:150) at org.restlet.Filter.handle(Filter.java:195) at org.restlet.Router.handle(Router.java:504) at org.restlet.Filter.doHandle(Filter.java:150) at org.restlet.Filter.handle(Filter.java:195) at com.noelios.restlet.ChainHelper.handle(ChainHelper.java:124) at org.restlet.Component.handle(Component.java:673) at org.restlet.Server.handle(Server.java:331) at com.noelios.restlet.ServerHelper.handle(ServerHelper.java:68) at com.noelios.restlet.http.HttpServerHelper.handle(HttpServerHelper.java:147) at com.noelios.restlet.ext.servlet.ServerServlet.service(ServerServlet.java:881) at javax.servlet.http.HttpServlet.service(HttpServlet.java:820) at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:502) at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) at org.jsecurity.web.servlet.FilterChainWrapper.doFilter(FilterChainWrapper.java:52) at org.jsecurity.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:105) at org.jsecurity.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:135) at org.jsecurity.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:180) at org.jsecurity.web.servlet.FilterChainWrapper.doFilter(FilterChainWrapper.java:57) at org.jsecurity.web.servlet.AdviceFilter.executeChain(AdviceFilter.java:105) at org.jsecurity.web.servlet.AdviceFilter.doFilterInternal(AdviceFilter.java:135) at org.jsecurity.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:180) at org.jsecurity.web.servlet.FilterChainWrapper.doFilter(FilterChainWrapper.java:57) at org.jsecurity.web.servlet.JSecurityFilter.doFilterInternal(JSecurityFilter.java:382) at org.jsecurity.web.servlet.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:180) at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1148) at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:387) at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216) at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:181) at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765) at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:417) at org.mortbay.jetty.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:230) at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) at org.mortbay.jetty.Server.handle(Server.java:322) at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:534) at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:864) at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:539) at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212) at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409) at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:520)
