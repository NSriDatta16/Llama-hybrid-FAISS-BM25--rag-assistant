[site]: stackoverflow
[post_id]: 4885071
[parent_id]: 
[tags]: 
MediaRecorder : IOexception prepare failed error . Help me please

Oh.. i always have error in prepare (of mediarecorder). Error tell me what prepare failed i can't record not audio, not video (( /* ERROR/audio_input(34): unsupported parameter: x-pvmf/media-input-node/cap-config-interface;valtype=key_specific_value 02-02 12:59:04.813: ERROR/audio_input(34): VerifyAndSetParameter failed */ this error what always i have ((( Please can anyone help me.. i realy need help. How to fix this. I tested many examples.. i watch many post's here - but nothing not help me. Guys - Help please :(((( Regards, Peter. p.s. sorry for my bad english - hope you understand me. 02-02 12:59:04.623: DEBUG/dalvikvm(9334): GC_FOR_MALLOC freed 4 objects / 307296 bytes in 69ms 02-02 12:59:04.813: ERROR/audio_input(34): unsupported parameter: x-pvmf/media-input-node/cap-config-interface;valtype=key_specific_value 02-02 12:59:04.813: ERROR/audio_input(34): VerifyAndSetParameter failed 02-02 12:59:04.833: ERROR/CameraInput(34): Unsupported parameter(x-pvmf/media-input-node/cap-config-interface;valtype=key_specific_value) 02-02 12:59:04.833: ERROR/CameraInput(34): VerifiyAndSetParameter failed on parameter #0 02-02 12:59:04.873: WARN/AuthorDriver(34): Video encoding bit rate is set to 320000 bps 02-02 12:59:04.933: INFO/MediaRecorderJNI(9334): prepare: surface=0x20fad8 (id=1) 02-02 12:59:04.943: ERROR/PVOMXEncNode(34): PVMFOMXEncNode-Audio_AMRNB::DoPrepare(): Got Component OMX.PV.amrencnb handle 02-02 12:59:04.973: ERROR/CameraInput(34): Camera is not available 02-02 12:59:04.973: ERROR/AuthorDriver(34): Command 13 completed with error -1 02-02 12:59:04.983: ERROR/MediaRecorder(9334): prepare failed: -1 02-02 12:59:06.273: DEBUG/dalvikvm(9334): GC_FOR_MALLOC freed 201 objects / 319048 bytes in 190ms yeah, sorry forgot about code : code here function : private MediaRecorder mediaRecorder; private File file = null; static final String PREFIX = "record"; static final String EXTENSION = ".3gpp"; private void startRecording() throws Exception { mediaRecorder = new MediaRecorder(); mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC); mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP); mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB); if (file == null) { File rootDir = Environment.getExternalStorageDirectory(); file = File.createTempFile(PREFIX, EXTENSION, rootDir); } mediaRecorder.setOutputFile(file.getAbsolutePath()); mediaRecorder.prepare(); mediaRecorder.start(); Log.i("Start","RECORD STARTED"); } so.. i never see message("record started") in logcat ((,if add videosurse and videoencode - i have error in IOException - prepare failed. I always have erros and can't find anything what can help me to solved this problem :( . I read more post's about it - and more guys have too problem.. but other guys - have not problem and all be ok. Now im try only record audio - my emulator is handsup, and in logcat i see only erros what i write before function code. :'( oh.. android v 2.2 im programming in exclipse galileo red colors of errors only here : 02-03 13:36:22.783: ERROR/audio_input(34): unsupported parameter: x-pvmf/media-input-node/cap-config-interface;valtype=key_specific_value 02-03 13:36:22.783: ERROR/audio_input(34): VerifyAndSetParameter failed 02-03 13:36:23.004: ERROR/PVOMXEncNode(34): PVMFOMXEncNode-Audio_AMRNB::DoPrepare(): Got Component OMX.PV.amrencnb handle 02-03 13:36:23.073: ERROR/AudioFlinger(34): Error reading audio input p.s. edited : After updating eclipse and android sdk (all patch's and other function which aviable for downloads. My camera on "all" emulators work perfectly . I can test record/capture photo/ just review on camera. One minus - if bug with preview (green lines or other similar ) than this not showing in emulator. But bugs with rotation ( when on preview all ok and than click on capture or record video we can see what our screen rotated on 90 degree) can be fixed. Hope it's help :)
