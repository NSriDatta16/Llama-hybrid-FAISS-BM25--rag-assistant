[site]: stackoverflow
[post_id]: 1718978
[parent_id]: 1718382
[tags]: 
I managed to solve this one myself (it was very helpful just asking the question and organising my own thoughts!). My suspicions that the lists of files were being built too soon were correct. By placing the ItemGroup inside the Target element you can specify when it is evaluated. Corrected snippet is:
