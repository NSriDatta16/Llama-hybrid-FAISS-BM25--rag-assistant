[site]: crossvalidated
[post_id]: 487975
[parent_id]: 
[tags]: 
Truncation based on two variables

I have some data, which has been constructed from multiple API pulls. Observations have an expiry date, $x_i$ , which means that observations which expire before the API pull is done do not appear in the data. If we define $p$ as a vector of API pull dates then selection is determined by: $$ S_i = 1 \quad if \space x_i API pulls haven't been carried out regularly, instead being done roughly every couple of months for the last few years until recently when they have been conducted daily. This means that our newer samples will contain all observations, but older samples do not. Expiry dates seem to be set differently across observations and the difference between an observations creation date and expiry date has a causal relationship with the Y variable. How can I correct for this sample selection in order to run regressions and obtain an average treatment effect? Any help is much appreciated
