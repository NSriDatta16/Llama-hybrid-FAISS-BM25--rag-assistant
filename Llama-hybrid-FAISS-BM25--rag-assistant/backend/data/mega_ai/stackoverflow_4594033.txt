[site]: stackoverflow
[post_id]: 4594033
[parent_id]: 
[tags]: 
Undefined properties in localStorage's 'storage' event

The event that should be fired when localStorage is changed seems to be lacking information in Firefox. I set up the following event handler: function storageEventHandler(e){ alert("key " + e.key); alert("oldValue " + e.oldValue); alert("newValue " + e.newValue); alert("url " + e.url); } window.addEventListener('storage', storageEventHandler, false); which should be triggered by this: localStorage.setItem('foo', 'bar'); However, all the properties in the event (e.g. e.key and everything else) are all undefined. I am using Firefox 3.16. Why are the event properties undefined? EDIT. Here is all the code I am using. The storage event fires in Firefox 3.16 but not in Firefox 4.0b8 Also, important, I am running it from XAMPP http://localhost/index.html Running it from file:// make it die localStorage Getting NULL? $(function() { var edit = document.getElementById('edit'); $(edit).blur(function() { localStorage.setItem('todoData', this.innerHTML); }); // when the page loads if (localStorage.getItem('todoData')) { edit.innerHTML = localStorage.getItem('todoData'); } window.addEventListener('storage', storageEventHandler, false); function storageEventHandler(e){ alert('localStorage event fired') } }); My Simple To-Do List Add some items, and refresh the page. It'll remember what you typed. EDIT #2: Here's a simpler example that shows the problem between the browsers... function storageEventHandler(e){ alert('localStorage event fired') } window.addEventListener('storage', storageEventHandler, false); localStorage.setItem('foo', 'bar'); alert('ok') Test
