[site]: stackoverflow
[post_id]: 554525
[parent_id]: 554509
[tags]: 
Pay attention to the other answer regarding indexing. NOT EXISTS is typically quite fast if you have good indexes. But I have had performance issues with statements like you describe. One method I've used to get around that is to use a temp table for the candidate values, perform a DELETE FROM ... WHERE EXISTS (...), and then blindly INSERT the remainder. Inside a transaction, of course, to avoid race conditions. Splitting up the queries sometimes allows the optimizer to do its job without getting confused.
