[site]: crossvalidated
[post_id]: 267644
[parent_id]: 267635
[tags]: 
The procedure you suggest is correct, as PCA does not "see" the class labels. It would be wrong to select features before cross-validation if you were using a method that uses any information about the class labels, in this case you are 'leaking data' from your validation set into your training set. With PCA, however, you're not doing that. All of this is nicely explained in Sect. 7.10.2 of Elements of Statistical Learning by Hastie, Tibshirani and Friedman.
