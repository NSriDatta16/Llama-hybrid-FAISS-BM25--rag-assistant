[site]: stackoverflow
[post_id]: 4901752
[parent_id]: 
[tags]: 
Android 2.2 SDK - Droid X Camera Activity doesn't finish properly

I noticed the default camera activity I call on a Droid X is different looking than the one on my Droid and Nexus One. After selecting "OK" on the Droid and Nexus One, the activity would finish - the Droid X has a "Done" button (which takes you back to the Camera, instead of finishing the activity), and the only way to get to the screen I want is to hit the "Back" button. Here is the class that works on Android 2.2/2.3, but not for Droid X's: package com.android.xxx; import java.io.File; import android.content.Intent; import android.net.Uri; import android.os.Bundle; import android.os.Environment; import android.provider.MediaStore; import android.view.Window; public class CameraView extends MenusHolder { protected String _path; protected boolean _taken; protected static final String PHOTO_TAKEN = "photo_taken"; @Override public void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); requestWindowFeature(Window.FEATURE_NO_TITLE); setContentView(R.layout.create_event_view); /* * save to sd */ File imageDirectory = new File( Environment.getExternalStorageDirectory() + "/MyPath/"); imageDirectory.mkdirs(); /* * temp image overwrites each time for space */ _path = Environment.getExternalStorageDirectory() + "/MyPath/temporary_image.jpg"; startCameraActivity(); } protected void startCameraActivity() { File file = new File(_path); Uri outputFileUri = Uri.fromFile(file); Intent intent = new Intent( android.provider.MediaStore.ACTION_IMAGE_CAPTURE); intent.putExtra(MediaStore.EXTRA_OUTPUT, outputFileUri); startActivityForResult(intent, 0); } @Override protected void onActivityResult(int requestCode, int resultCode, Intent data) { switch (resultCode) { case 0: setResult(5); finish(); break; case -1: onPhotoTaken(); break; } } protected void onPhotoTaken() { _taken = true; setResult(0); finish(); } @Override protected void onSaveInstanceState(Bundle outState) { outState.putBoolean(CameraView.PHOTO_TAKEN, _taken); } @Override protected void onRestoreInstanceState(Bundle savedInstanceState) { if (savedInstanceState.getBoolean(CameraView.PHOTO_TAKEN)) { onPhotoTaken(); } } }
