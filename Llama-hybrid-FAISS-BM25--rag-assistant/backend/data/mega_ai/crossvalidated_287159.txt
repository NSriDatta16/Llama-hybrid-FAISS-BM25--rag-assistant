[site]: crossvalidated
[post_id]: 287159
[parent_id]: 286645
[tags]: 
I understand you to want the correlation between creativity for a single teacher and emotional intelligence for a single student. However, you have measurement of emotional intelligence for 4 students of each teacher and could calculate an estimate of the correlation in a large number of ways. (You could throw away three students for each teacher but this doesn't seem helpful.) If you take the average of the four students' values for each teacher you can compute the correlation of $x$ (creativity) with $\bar{y}$ (average emotional intelligence). This is not what you want, however, but it seems close and you use all the information about students in one estimate so let's look at the covariance of $x$ with $\bar{y}$. This is $Cov(x,\bar{y}) = Cov( x, {1\over 4} \sum\limits_{i=1}^{4}y_i)$ so $Cov(x,\bar{y}) = {1\over 4} \sum\limits_{i=1}^{4} Cov( x, y_i)$ There is no reason to distinguish one measurement of $y$ from another, they all have the same variance and the same covariance with $x$. So $Cov(x,\bar{y}) = {1\over 4} 4 Cov( x, y) = Cov(x,y)$ This is just the numerator of the correlation of a single observation of $y$ with a single observation of $x$. If you calculate the correlation of $x$ with $\bar{y}$ using standard statistical software then you will get the covariance above divided by the standard deviation of $y$ and the standard deviation of $\bar{y}$. This isn't correct. Get the estimate of the variance among the $\bar{y}_i$'s from a one-factor ANOVA of them. Treat the $n$ teachers as the Treatments and the scores of students, the $y_i$'s, as the observations. In the random effects model $y_{ij} = \mu + \tau_i + \epsilon_i$. both $\tau$ and $\epsilon$ are random effects, the first with n - 1 degrees of freedom and the second with k(n-1) degrees of freedom. The variance of a single observation is $Var(y) = \sigma_{\tau}^2 + \sigma_{\epsilon}^2$ I suggest you use the estimate of this for the denominator of the correlation. This can be estimated from the mean squares of the random effects ANOVA. The expected value of the $MS_{treat} = \sigma_{\tau}^2 + k \sigma_{\epsilon}^2$. The expected value of the $MS_{error} = \sigma_{\epsilon}^2$. The estimate of $\sigma_{\tau}^2$ is $MS_{treat} - kMS_{error}$. Then the estimate of the variance of a single observation of $y$ is $MS_{treat} -(k-1) MS_{error}$. The square root of this should be used in the denominator of the correlation. The correlation estimate is $corr(x,\bar{y}) = cov( x,\bar{y})/(var(x)(MSy_{treat} -(k-1) MSy_{error}))^{1/2}$ Note that if the students all have identical scores on $y$ then the $MS_{error}$ is zero and the estimate only uses the $MS_{treat}$. If the individual students of a teacher vary a lot then it is efficient to get more students per teacher. It might not help here but there is an obvious generalization to several measurements per teacher. Each variance, for x and y, would be estimated from an ANOVA. This all assumes an equal number of student observations for each teacher.
