[site]: stackoverflow
[post_id]: 2058680
[parent_id]: 
[tags]: 
How do I dynamically add Image objects to the display and then interact with them?

Below is sample code from a Module I have in my Flex app. I want to dynamically create mx.controls.Image objects and add them to the display. I want the user to be able to move them (this works as below) and be able to change their z-index as well as record new X and Y coords after moving back to the database. How do I determine which object in this.getChildren() is the 'selected' item the user is working with? When I add a MOUSE_OVER event, for example, it does not work. import flash.display.DisplayObject; import flash.events.MouseEvent; import mx.controls.Image; public var draggedObject:DisplayObject; public var selectedObject:DisplayObject; public var offsetX:Number; public var offsetY:Number; public function Add():void { var _image:Image = new Image; _image.source = "myimage.png"; _imagem.x = 100; _image.y = 100; _image.addEventListener(MouseEvent.MOUSE_DOWN, startDragging); _image.addEventListener(MouseEvent.MOUSE_UP, stopDragging); this.addChild(_image); } // This function is called when the mouse button is pressed. public function startDragging(event:MouseEvent):void { // remember which object is being dragged draggedObject = DisplayObject(event.target); selectedObject = draggedObject; // Record the difference (offset) between where the cursor was when // the mouse button was pressed and the x, y coordinate of the // dragged object when the mouse button was pressed. offsetX = event.stageX - draggedObject.x; offsetY = event.stageY - draggedObject.y; // move the selected object to the top of the display list //stage.addChild(draggedObject); // Tell Flash Player to start listening for the mouseMove event. stage.addEventListener(MouseEvent.MOUSE_MOVE, dragObject); } // This function is called when the mouse button is released. public function stopDragging(event:MouseEvent):void { // Tell Flash Player to stop listening for the mouseMove event. stage.removeEventListener(MouseEvent.MOUSE_MOVE, dragObject); } // This function is called every time the mouse moves, // as long as the mouse button is pressed down. public function dragObject(event:MouseEvent):void { // Move the dragged object to the location of the cursor, maintaining // the offset between the cursor's location and the location // of the dragged object. draggedObject.x = event.stageX - offsetX; draggedObject.y = event.stageY - offsetY; // Instruct Flash Player to refresh the screen after this event. event.updateAfterEvent(); } ]]>
