[site]: stackoverflow
[post_id]: 3162148
[parent_id]: 
[tags]: 
jQuery tabs selecting specific tab

I have a page containing a set of jQuery tabs. All the tabs point at the same target div, but load it with different content via ajax. When I perform the initial full page load I need to set the active tab differently depending upon various factors. The content in the target div is already set on the server for this initial load, so I don't need to click the tab, I just need to set the correct tab to 'selected'. I have tried setting the class of the relevant "li" html element to "ui-tabs-selected". This has the initial desired effect, but once the page is loaded then on selecting another tab the preselected one does not switch off, leaving two tabs selected. So, does anyone know an alternative way to preselect a tab (without causing it to be clicked), or a solution to the strange "ui-tabs-selected" behaviour that I am seeing. Thanks. $(function() { $("#panelTabs").tabs({ ajaxOptions: { error: function(xhr, status, index, anchor) { $(anchor.hash).html("Couldn't load this tab. We'll try to fix this as soon as possible."); } } }); $("#panelTabs").tabs({ select: function(event, ui) { getPage('hps.aspx?cmd=zz_' + ui.tab.id, 'panelA'); } }); }); And the C# fragment that builds the UL: StringBuilder tabsLiteral = new StringBuilder(); tabsLiteral.Append(" "); foreach (KeyValuePair kvp in tabs) { tabsLiteral.Append(" "); // Note - the kvp.Value.URI determines what should happen when the Tab is clicked tabsLiteral.Append(" " + kvp.Value.Caption + " "); tabsLiteral.Append(" "); } tabsLiteral.Append(" "); _panelTabs.Controls.Add(new LiteralControl(tabsLiteral.ToString())); HtmlGenericControl ctl = new HtmlGenericControl(); StringBuilder html = new StringBuilder(); html.Append(" "); html.Append("$(\"#panelTabs\").tabs({selected: 2});"); html.Append(" "); ctl.InnerHtml = html.ToString(); _panelTabs.Controls.Add(ctl); Another version: StringBuilder tabsLiteral = new StringBuilder(); tabsLiteral.Append(" "); foreach (KeyValuePair kvp in tabs) { string active = ""; if (currentTabCaption == kvp.Value.Caption) { //active = " class=\"ui-tabs-selected\""; } tabsLiteral.Append(" "); // Note - the kvp.Value.URI determines what should happen when the Tab is clicked tabsLiteral.Append(" " + kvp.Value.Caption + " "); tabsLiteral.Append(" "); } tabsLiteral.Append(" "); _panelTabs.Controls.Add(new LiteralControl(tabsLiteral.ToString())); HtmlGenericControl ctl = new HtmlGenericControl(); StringBuilder html = new StringBuilder(); html.Append(" "); //html.Append("$(\"#panelTabs\").tabs('option','selected', 2);"); html.Append(@"$(function() { alert('initialising tabs'); $(""#panelTabs"").tabs({ ajaxOptions: { error: function(xhr, status, index, anchor) { $(anchor.hash).html(""Couldn't load this tab. We'll try to fix this as soon as possible.""); } }, select: function(event, ui) { getPage('hps.aspx?cmd=zz_' + ui.tab.id, 'panelA'); } }); });"); html.Append("$(\"#panelTabs\").tabs({selected: 2});"); html.Append(" "); ctl.InnerHtml = html.ToString(); //_panelTabs.Controls.Add(ctl); Page.Controls.Add(ctl);
