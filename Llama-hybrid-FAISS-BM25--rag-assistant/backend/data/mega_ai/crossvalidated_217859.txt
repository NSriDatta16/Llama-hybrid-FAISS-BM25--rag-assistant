[site]: crossvalidated
[post_id]: 217859
[parent_id]: 217809
[tags]: 
From what you explain, you have multiple-seasonalities : intra-daily and intra-weekly. We have had previous questions on this. Searching here for "multiple seasonalities" will yield a couple of posts that may be enlightening. I'd recommend using the tbats() function in the forecast package for R , which can deal with multiple seasonalities. I'd use the data up to but not including the data point you are interested in to train a model, then calculate a high quantile forecast, say 95%, then check whether the actual observation falls above that quantile. Let's run an example. We first simulate four weeks of hourly data with both intra-daily and intra-weekly seasonality and a slight upward trend and store this as a msts object (which stands for "multiple seasonal time series" - see ?msts ): library(forecast) time Next, we fit a TBATS model. This step can take a while if you have more data, or it can even hang your R - if so, I'd recommend taking only the last few weeks of data. model You can inspect the components of your TBATS model using tbats.components() : tbats.components(model) Time Series: Start = c(1, 1) End = c(4, 168) Frequency = 168 observed level slope season1 season2 1.000000 1.134778283 0.7732623 -6.515840e-04 0.2648350787 -0.138887537 1.005952 1.539228665 0.7643020 -1.301022e-04 0.4956773250 -0.059885259 1.011905 1.543731059 0.7622478 -9.689533e-06 0.6878854679 0.015076437 1.017857 2.190081564 0.7495647 7.692112e-04 0.8374512716 0.086414814 1.023810 2.038077381 0.7450848 1.078842e-03 0.9304295810 0.149071774 Now we calculate a mean and a quantile forecast using forecast.tbats() . Note that if we set level=90 , we get a 90% prediction interval bounded by a 5% and a 95% quantile forecast, which is what we want - since we are only interested in larger than expected outcomes, we will simply disregard the lower bound. fcst Finally, we can plot the forecast, including the prediction intervals: plot(fcst) As we see, the thresholds will be quite different during different times of day (and different days of the week).
