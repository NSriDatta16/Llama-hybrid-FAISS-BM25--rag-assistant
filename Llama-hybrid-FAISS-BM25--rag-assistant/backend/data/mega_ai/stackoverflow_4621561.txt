[site]: stackoverflow
[post_id]: 4621561
[parent_id]: 
[tags]: 
Is there a way to Memorize or Materialize an IEnumerable?

When given an d you could be dealing with a fixed sequence like a list or array, an AST that will enumerate some external datasource, or even an AST on some existing collection. Is there a way to safely "materialize" the enumerable so that enumeration operations like foreach, count, etc. don't execute the AST each time? I've often used .ToArray() to create this represenation but if the underlying storage is already a list or other fixed sequence, that seems like wasted copying. It would be nice if i could do var enumerable = someEnumerable.Materialize(); if(enumberable.Any() { foreach(var item in enumerable) { ... } } else { ... } Without having to worry that .Any() and foreach try to enumerate the sequence twice and without it unccessarily copying the enumerable.
