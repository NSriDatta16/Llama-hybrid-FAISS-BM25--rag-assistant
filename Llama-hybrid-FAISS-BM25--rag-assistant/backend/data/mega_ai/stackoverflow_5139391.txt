[site]: stackoverflow
[post_id]: 5139391
[parent_id]: 5135283
[tags]: 
This code uses the "Magento way" and accesses the data through the Model layer which insulates you from changes in the table structure (e.g. flat vs EAV). Create a new PHP file containing this skeleton code in the root of your Magento install (if elsewhere update the path for the first require statement). This gives you some examples of how to add attributes to the collection, you should be able to follow the examples to add more if required. It shows you how to filter by attributes, and sort by attributes. Examples also for echo'ing out the fields that you need. HTH, JD require_once 'app/Mage.php'; umask(0); Mage::app('default'); $orders = Mage::getResourceModel('sales/order_collection') ->addAttributeToSelect('*') ->joinAttribute('billing_firstname', 'order_address/firstname', 'billing_address_id', null, 'left') ->joinAttribute('billing_lastname', 'order_address/lastname', 'billing_address_id', null, 'left') ->joinAttribute('billing_street', 'order_address/street', 'billing_address_id', null, 'left') ->joinAttribute('billing_company', 'order_address/company', 'billing_address_id', null, 'left') ->joinAttribute('billing_city', 'order_address/city', 'billing_address_id', null, 'left') ->joinAttribute('billing_region', 'order_address/region', 'billing_address_id', null, 'left') ->joinAttribute('billing_country', 'order_address/country_id', 'billing_address_id', null, 'left') ->joinAttribute('billing_postcode', 'order_address/postcode', 'billing_address_id', null, 'left') ->joinAttribute('billing_telephone', 'order_address/telephone', 'billing_address_id', null, 'left') ->joinAttribute('billing_fax', 'order_address/fax', 'billing_address_id', null, 'left') ->joinAttribute('shipping_firstname', 'order_address/firstname', 'shipping_address_id', null, 'left') ->joinAttribute('shipping_lastname', 'order_address/lastname', 'shipping_address_id', null, 'left') ->joinAttribute('shipping_street', 'order_address/street', 'shipping_address_id', null, 'left') ->joinAttribute('shipping_company', 'order_address/company', 'shipping_address_id', null, 'left') ->joinAttribute('shipping_city', 'order_address/city', 'shipping_address_id', null, 'left') ->joinAttribute('shipping_region', 'order_address/region', 'shipping_address_id', null, 'left') ->joinAttribute('shipping_country', 'order_address/country_id', 'shipping_address_id', null, 'left') ->joinAttribute('shipping_postcode', 'order_address/postcode', 'shipping_address_id', null, 'left') ->joinAttribute('shipping_telephone', 'order_address/telephone', 'shipping_address_id', null, 'left') ->joinAttribute('shipping_fax', 'order_address/fax', 'shipping_address_id', null, 'left') ->addFieldToFilter('status', array("in" => array( 'complete', 'closed') )) ->addAttributeToFilter('store_id', Mage::app()->getStore()->getId()) ->addAttributeToSort('created_at', 'asc') ->load(); foreach($orders as $order): echo $order->getIncrementId().' '; echo $order->getShippingTelephone().' '; endforeach;
