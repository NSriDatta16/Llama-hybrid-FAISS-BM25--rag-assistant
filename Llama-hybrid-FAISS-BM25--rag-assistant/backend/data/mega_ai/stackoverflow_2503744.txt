[site]: stackoverflow
[post_id]: 2503744
[parent_id]: 2503701
[tags]: 
Your approach sounds reasonable - you would essentially be embedding message size into a message header, which is likely the most robust way to handle it in your situation. Alternatively you could either use fixed length packets (ick) or use some sort of delimeter character (which will NOT work well at all for binary messages). This link socket-protocol-fundamentals has some additional information which might help.
