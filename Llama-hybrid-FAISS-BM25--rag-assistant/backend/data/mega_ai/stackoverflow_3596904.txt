[site]: stackoverflow
[post_id]: 3596904
[parent_id]: 3596881
[tags]: 
You can't use aggregate functions in the WHERE clause - only the HAVING . I did my best to re-write your query as: SELECT b.id as b_id FROM BANNER b JOIN BANNERHITS bl ON b.id = bl.bannerid AND bl.userid = '".$this->userid."' JOIN BANNERHITS blog ON b.id = blog.bannerid JOIN BANNERKLIK bk ON b.id = bk.bannerid WHERE ( b.placement = '".$place."' AND b.usertype IN ('".$usertype."', '') AND b.userpostalcode LIKE ',".$postcode.",' AND (b.userage LIKE ',".$ageYears.",' OR b.userage IS NULL) AND b.maxviewsprday IS NULL) OR remainingshow = '1' GROUP BY bl.id, bk.id, blog.id HAVING b.maxhits > count(blog.id) AND b.maxklik > count(bk.id) AND b.maxviewsprday > count(bl.id) ORDER BY remainingshow ASC LIMIT 1 You appear to have a syntax error here: AND b.maxklik > count(bk.id) ".$ubid.") I don't know how you want to incorporate the $ubid variable into the query...
