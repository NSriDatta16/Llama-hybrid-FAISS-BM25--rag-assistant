[site]: stackoverflow
[post_id]: 5595202
[parent_id]: 
[tags]: 
Sending e-mail programmatically in Magento is failing

Why is there nowhere in the Configuration/System/Mail Sending Settings to specify a user name and password for your smtp server? To get around this, do you need to make the changes to getMail() outlined in this post: http://www.magentocommerce.com/boards/viewthread/1073/P30/ I want to do something very simple: - create an e-mail template - do not have to make reference to that template in any config files. - programmatically send an e-mail using the template defined above - supply values to replace any tags in the template - supply recipient e-mail addresses - supply other bits, like a from address So first step - create a template. - In Confguration/Transactional Emails I believe I am supposed to see a list of templates. I see nothing. But if I add a new template, I can select from a list of templates. - Give template a name of "Bob". - Add a few vars to the template: myvar1={{var myvar1}} myvar2={{var myvar2}} - Save the template; it is given an Id of 1. Now send the e-mail programmatically from a controller action: - No need to make change to LINEEND in Mime.php as it is already set to \n in version 1.4.2.0 - Make changes to getMail() in Template.php as specified in this post: http://www.magentocommerce.com/boards/viewthread/1073/P30/ - Write code in the controller action to send the e-mail: This returns nothing: $emailTemplate = Mage::getModel('core/email_template')->loadDefault('no matter what goes here emailTemplate is not set'); This does return an email template: $emailTemplate = Mage::getModel('core/email_template')->loadByCode('Bob'); but the call to send below fails: $emailTemplate->setSenderEmail('sent@byme.com'); $emailTemplate->setSenderName('Steve'); $emailTemplateVariables = array(); $emailTemplateVariables['myvar1'] = 'TestValue1'; $emailTemplateVariables['myvar2'] = 'TestValue2'; // $processedTemplate = $emailTemplate->getProcessedTemplate($emailTemplateVariables); -- this returns nothing $emailTemplate->send('thisisme@mydomain.com','John', $emailTemplateVariables); In the system.log I get the warning below, and no e-mail ever arrives. Warning: stream_socket_enable_crypto() [ streams.crypto ]: this stream does not support SSL/crypto in C:\Applications\Apache Software Foundation\Apache2.2\htdocs\magento\lib\Zend\Mail\Protocol\Smtp.php on line 206 Should I be using loadByCode? I wish there was some worthwhile documentation (the help for loadByCode is "Load template by code" !!). Should I be using send, sendTransactional? Oh for a bit of quality documentation. Thanks
