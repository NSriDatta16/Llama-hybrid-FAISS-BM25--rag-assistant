[site]: stackoverflow
[post_id]: 5480694
[parent_id]: 
[tags]: 
NumPy: calculate averages with NaNs removed

How can I calculate matrix mean values along a matrix, but to remove nan values from calculation? (For R people, think na.rm = TRUE ). Here is my [non-]working example: import numpy as np dat = np.array([[1, 2, 3], [4, 5, np.nan], [np.nan, 6, np.nan], [np.nan, np.nan, np.nan]]) print(dat) print(dat.mean(1)) # [ 2. nan nan nan] With NaNs removed, my expected output would be: array([ 2., 4.5, 6., nan])
