[site]: stackoverflow
[post_id]: 3973441
[parent_id]: 
[tags]: 
conditionally load javascript (external and internal) and keep execution order

I'm looking for a way to conditionally load and keep the execution order of some javascript files (external and internal) without any library dependency. Basically, what I want to do is load them up only if the browser supports localStorage. Here's basically my shell: if (window.localStorage) { //load up JS only if it's needed var body = document.getElementsByTagName('body')[0], js1 = document.createElement('script'), js2 = document.createElement('script'), js3 = document.createElement('script'), js4 = document.createElement('script'), js5 = document.createElement('script'); js1.src = 'http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'; js2.src = 'http://www.google.com/jsapi'; js3.src = 'my_file1.js'; js4.src = 'my_file2.js'; js5.src = 'my_file3.js'; body.appendChild(js1); body.appendChild(js2); body.appendChild(js3); body.appendChild(js4); body.appendChild(js5); } else { //no localStorage support, display messaging } I've tried dynamically adding script nodes via createElement/body.appendChild but those don't seem to work. Is there an easy way to achieve this? Right now everything works, but IE6 and IE7 folks download script they aren't even executing, which is what I want to fix.
