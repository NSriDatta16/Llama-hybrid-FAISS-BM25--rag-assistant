[site]: crossvalidated
[post_id]: 91196
[parent_id]: 
[tags]: 
Regression Tree when target is a ratio

I am learning a regression tree for data of the form $(x_i,y_i)$: $x_i = (1, 0, 1, ...., 1 , 1)$ a multiple input vector and $y$ is a ratio of the number of observations divided by the number of trials for that input. so $y_i = (obs/trials)$. My problem is that most of the data is sparse, meaning that most of the inputs will have 0 observations and some trials and then its corresponding $y_i$ will be zero (let's say no input has trials =0). My problem is that when I learn a tree, in each leaf the tree calculates the average of $y_i$ and that is not what I need since all the $y_i=0$ are being discarded in the average. What I would like to do is to sum up, the number of trials in each leaf, and the number of observations and make the division for each leaf instead of averaging the ratios (or even each one by itself (observation, trials)). I am using sci-kit for the tree model. Is there any intelligent way to do what i want without implementing it from scratch. I mean suing tree libraries as sci-kit?
