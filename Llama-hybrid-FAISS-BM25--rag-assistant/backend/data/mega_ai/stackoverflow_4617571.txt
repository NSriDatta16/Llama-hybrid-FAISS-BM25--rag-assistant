[site]: stackoverflow
[post_id]: 4617571
[parent_id]: 
[tags]: 
How to implement this with a pattern or maybe lambda syntax?

I have several methods that execute the same setup code and then some cleanup code. The stuff in between changes. I could do it like this: void method1() { var x = DoSetupStuff(); // Method 1 specific code that uses x DoCleanupStuff(x); } void method2() { var x = DoSetupStuff(); // Method 2 specific code that uses x DoCleanupStuff(x); } But I'd rather do something where I don't have to call both setup and cleanup methods every time. Maybe like one call where the method specific stuff can be passed in? void SetupAndCleanup( method-specific-code ) { // Setup code here int x = 1; // method-specific code injected here. // note that it uses x. // cleanup code here x = 0; } The method1, method2 approach works perfectly well, I'm just wandering if there is a way to improve it or make it more elegant.
