[site]: stackoverflow
[post_id]: 875415
[parent_id]: 
[tags]: 
PHP: Only include files when running phing?

I have the following folder structure: /main /loader.php /build.xml /components /package1 /class1.php /package2 /class2.php /tests /package1 /class1.test.php /package2 /class2.test.php When I run the web application I load loader.php at first and include other components by calling Loader::load( 'package_name' ) . Then all neccessary files are included. The good thing here is that I don't need to include loader.php within the class files because I can rely on having a working instance of Loader . The Unit Test classes simulate this behaviour by including all neccessary classes explicitly. So there is also no problem with phing and PHPUnit. But now I want to generate a coverage report with phing and Xdebug. The problem here is that phing seems to load every single PHP file to create the coverage database. Unfortunately it stops because it cannot find the Loader class that is used in the PHP files. I could easily add an include statement to every class file, but I wonder whether there is a way to include files only if code coverage analysis is inspecting the file? Other idea: I could also configure the coverage analysis in a way that it scans the unit tests directory and therefore finds all neccessary includes. Then I'd need to filter classes that match to a pattern like /Test$/i or so. Possible?
