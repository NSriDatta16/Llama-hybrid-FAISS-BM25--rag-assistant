[site]: stackoverflow
[post_id]: 5191850
[parent_id]: 
[tags]: 
How can I handle multiple AJAX results in a userscript?

I'm currently developing a Greasemonkey script to translate fields in an Intranet app, using Google Translation API. But some texts are way too large to be translated with only one request. I get this error when trying : Request entity too large Anyway, I found a way to cut the texts in fragments, and send them in separate requests. Where it gets tricky, is how I should replace those fragments in their original textareas, and especially at the right place. After trying several methods without any success, I inserted placeholders in the textarea, corresponding to the fragments of text that have to be translated : {1} {2} ... But now in the success callback of my XHR, I have to replace the placeholder with the translated text. The thing is, my XHR is inside a for loop, iterating over my table containing the fragments of original text, and when the requests finish, the loop is long finished and I don't know how to get where to put the translation. Here's the code : //Array text[] contains the fragments of original text var translated_text = []; var l = text.length; for(var i = 0; i "); textarea.text(textarea.text().replace("{"+i+"}",translated_text[i])); } else { alert('Request Failed : '+responseDetails.status+"\nError : "+responseDetails.statusText); } } }); } PS : I cannot use jQuery's AJAX methods, because this is a Cross Domain request, so the new $.when functionality cannot be used here (sadly)
