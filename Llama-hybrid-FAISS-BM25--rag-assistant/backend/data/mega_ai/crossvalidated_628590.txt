[site]: crossvalidated
[post_id]: 628590
[parent_id]: 
[tags]: 
Identification of average treatment effect in Pearl's introductory article

I'm trying to understand the identification of the average treatment effect in Pearl's introductory paper on causal inference . We have the following structural equation model: \begin{align} z &= f_Z(u_Z) \\ x &= f_X(z, u_X) \\ y &= f_Y(x, u_Y) \end{align} where the exogenous variables $U_Z, U_X, U_Y$ are assumed mutually independent. Regarding the average effect of $X$ on $Y$ , Pearl shows that $E(Y | do(x_0)) = E(Y | X = x_0)$ by deriving expressions for each of these quantities individually. First, Pearl states that $E(Y | do(x_0)) = E(f_Y(x_0, u_Y))$ . How can I arrive at this expression? I can see that \begin{align} E(Y | do(x_0)) &= \sum_y y P(y | do(x_0)) \\ &= \sum_{y, z} f_Y(x_0, u_Y) P(y, z | do(x_0)), \end{align} but how do I eventually equate this to $\sum_{x, y, z} f_Y(x_0, u_Y) P(x, y, z)$ ? Second, Pearl shows that \begin{align} E(Y | X = x_0) &= E(f_Y(X, u_Y) | X = x_0) \\ &= E(f_Y(x_0, u_Y) | X = x_0) \\ &= E(f_Y(x_0, u_Y)). \end{align} I understand the second equality on an intuitive level, I guess. How can I justify the last equality? I appreciate your help!
