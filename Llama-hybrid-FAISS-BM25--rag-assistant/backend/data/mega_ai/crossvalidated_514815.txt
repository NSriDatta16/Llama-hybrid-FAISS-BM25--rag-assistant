[site]: crossvalidated
[post_id]: 514815
[parent_id]: 
[tags]: 
Q-learning convergence with stochastic reward function

Every proof for convergence of Q-learning I can find assumes that the reward is a function $r(s, a, s')$ i.e. deterministic. However, MDPs are often defined with a stochastic reward, as exemplified in the following Bellman equation: $$q_{\pi}(s,a) = \sum_{s',r}p(s',r|s,a)( r + \gamma \sum_{a'}\pi(a'|s') q_{\pi}(s',a'))$$ Here the reward is stochastic (part of the MDP dynamics $p$ ). Does Q-learning converge in this more general case? Is there a proof somewhere?
