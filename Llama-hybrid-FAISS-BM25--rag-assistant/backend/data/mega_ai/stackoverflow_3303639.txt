[site]: stackoverflow
[post_id]: 3303639
[parent_id]: 
[tags]: 
PHP GD2: how to maintain alpha channel transparency and correct gamma

I was intrigued by this discussion of image scaling and subsequently found out that the PHP code I'm using to create thumbnails from uploaded images suffers from the same problem. I decided to try the PHP fix posted near the bottom (converting gamma from 2.2 to 1.0, resizing the image, converting gamma back from 1.0 to 2.2). This works to solve the issue noted in the article, however this modification to the code has the unfortunate side effect of knocking out PNG alpha channel transparency. Here is the code I have with the gamma correction in place. Anyone know how to resize the image, employing the gamma correction trick, while maintaining the alpha channel transparency of the original image? Edit sample images: original file - PNG with alpha channel transparency resized file with both imagegammacorrect() function calls commented out resized file with both imagegammacorrect() function calls in place You can see that the transparency is fine until you attempt to correct the gamma. (easiest way to see the transparency is working below is to inspect the paragraph tag wrapped around the images and add a background: black; to its style attribute via FireBug or similar.) original image http://ender.hosting.emarketsouth.com/images/test-image.png no gamma correction http://ender.hosting.emarketsouth.com/images/test-image-resized-no-gamma.png gamma corrected - no transparency http://ender.hosting.emarketsouth.com/images/test-image-resized.png
