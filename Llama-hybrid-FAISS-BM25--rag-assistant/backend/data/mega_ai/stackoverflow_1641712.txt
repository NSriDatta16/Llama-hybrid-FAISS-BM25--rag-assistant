[site]: stackoverflow
[post_id]: 1641712
[parent_id]: 688325
[tags]: 
I once had a similar situation. I hoisted some code out of a loop to make it faster, but it got slower. Confusing. Turns out, the average number of times though the loop was less than 1. The lesson (which you don't need, obviously) is that a change doesn't make your code faster unless you measure it actually running faster.
