[site]: stackoverflow
[post_id]: 2466071
[parent_id]: 2465548
[tags]: 
You need to set up the form's fields every request. try this: public function indexAction() { $form = new Baseball_Form_Transactions(); $options = array( 'teamId' => $this->teamId, 'position' => 'C', 'leagueShortName' => $this->league ); $form->setMyPlayers($options); $form->setFreeAgents($options); $form->setTeamId($options); $form->setShortLeagueName($options); $this->transactionForm = $form; if ($this->getRequest()->isPost()) { if ($form->isValid($this->_request->getPost())) { $data = $form->getValues(); $leagueInfo = Doctrine::getTable('League')->findOneByShortName($data['shortLeagueName'])->toArray(); // Create the request top drop an existing player $transactionInfo = array( 'league_id' => $leagueInfo['id'], 'team_id' => $data['teamId'], 'player_id' => $data['players'], 'type' => 'drop', 'target_team_id' => 0, 'transaction_date' => date('Y-m-d H:m:s') ); $transaction = new Transaction(); $transaction->fromArray($transactionInfo); $transaction->save(); // Now we do the request to add a player $transactionInfo['team_id'] = 0; $transactionInfo['player_id'] = $data['freeAgents']; $transactionInfo['target_team_id'] = $data['teamId']; $transactionInfo['type'] = 'add'; $transaction = new Transaction(); $transaction->fromArray($transactionInfo); $transaction->save(); $this->_flashMessenger->addMessage('Added transaction'); } } $this->view->transactionForm = $form; $this->view->messages = $this->_flashMessenger->getMessages(); $transaction = new Transaction(); $this->view->transactions = $transaction->byTeam($options); }
