[site]: stackoverflow
[post_id]: 4703393
[parent_id]: 4703309
[tags]: 
Whenever I have to parse or modify HTML or XML I reach for a parser. I almost never bother with regex or instring unless it's absolutely a no-brainer. Here's how to do it using Nokogiri, without any regex: text = foo bar meow EOT require 'nokogiri' fragment = Nokogiri::HTML::DocumentFragment.parse(text) print fragment.to_html fragment.css('h5').select{ |n| n.text == 'foo' }.each do |n| n.name = 'h2' n.content = 'something_else' end print fragment.to_html After parsing, this is what Nokogiri has returned from the fragment: # >> foo # >> bar # >> meow # >> This is after running: # >> something_else # >> bar # >> meow # >>
