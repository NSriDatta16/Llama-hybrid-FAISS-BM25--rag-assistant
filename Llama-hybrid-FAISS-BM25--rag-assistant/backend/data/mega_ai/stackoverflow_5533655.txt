[site]: stackoverflow
[post_id]: 5533655
[parent_id]: 
[tags]: 
Cocoa - mouse events from only a particular window? KeyDown event?

I’m sure this has a simple answer I’m just not seeing (the bane with APIs like Cocoa that are enormous..). I’m working with a version of Apple’s Sketch sample (I think it was the original, before they added the Accessibility stuff and made the entire thing based on KVO). I’m working with the ‘kiss’ version that is floating around out there that adds Bezier and polygon tools, trying to get it so the Bezier point tracking loop will toss end the path if you click on the tool palette while creating it. The relevant lines for working with the point in the tracking list are such: // SKTGraphicView* view // Tracking loop while (1) { event = [[view window] nextEventMatchingMask: (NSLeftMouseDownMask | NSLeftMouseDraggedMask | NSLeftMouseUpMask)]; point = [view convertPoint:[event locationInWindow] fromView:nil]; How do I tell if this point is inside the document’s window or not? I tried BOOL insideView = [view mouse:point inRect:[view bounds]]; which works as long as it’s tracking MouseDragged events, but fails if I click in the tool palette window. From the coordinates that come out of locationInWindow, it looks like if I click in a separate window, it spits out the points relative to the origin of the enclosing window - whatever that window is. How do I get it to convert from whatever ‘screen coordinates are’ ([event locationOnScreen]?) and then convert onto a specific view’s coordinate system? I can use ([view window] == [event window]) - but this doesn’t seem to change for MouseDragged events where the initial click was inside the window (but I can check against a bounding rectangle there). But it seems like if nextEventMatchingMask: is called on a particular NSWindow object, it should only return events that happen to be in that window.
