[site]: stackoverflow
[post_id]: 5401397
[parent_id]: 5399260
[tags]: 
Edit : In my initial reply (below) I thought that the value of the select attribute was required to be a pattern and now I see that I was misled by the spec. In this case, the reported behavior is most likely a bug. @Jahangir, congratulations for discovering a bug in at least three XSLT 2.0 processors. The W3C XSLT 2.0 spec says (about the select attribute of xsl:for-each-group ): "â€¢If the group-starting-with attribute is present, then its value must be a pattern." And the rules for pattern allow only the child:: or attribute:: axes to be used in the pattern. Therefore, descendant::* is not allowed as a pattern . I guess that the XSLT processor treats this as "recoverable error" and takes its own action as recovery. The solution is to put the first milestone element in its proper place as the immediate following sibling of div , and change the select attribute of xsl:for-each-group to: div/*`: First line text in FIRST fragment Second line text in FIRST fragment Third line text in FIRST fragment First line text in SECOND fragment Second line text in SECOND fragment Third line text in SECOND fragment First line text in THIRD fragment Second line text in THIRD fragment Third line text in THIRD fragment and:
