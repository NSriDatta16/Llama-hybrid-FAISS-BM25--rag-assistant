[site]: stackoverflow
[post_id]: 1996847
[parent_id]: 1979612
[tags]: 
I have found the following procedure which has worked very well for me. I hope it can serve for future reference. As I suspected, I wasn't correctly compiling readline. The giveaway for this was 1. file explicity told me that the library was 64 bit 2. as per rtperson advice, compiling a test example was illuminating: linking was failing for that. Look at the output: ghc --make test_readline.hs Linking test_readline ... ld: warning: in /usr/local/lib/libreadline.dylib, file is not of required architecture So I set up to compile readline with the correct architecture, it was not guessing correctly. I simply cleaned the build dirs (make distclean), then configured passing the flag -m32 to gcc: ./configure CC="gcc -m32" and then rebuilt everything (make everything) and installed it (sudo make install). Now the filetype is encouraging: ~ 628 $ file /usr/local/lib/libreadline.dylib /usr/local/lib/libreadline.dylib: Mach-O dynamically linked shared library i386 and readline is working, at last. PS: you can also build the readline-1.0.1.0 package by hand, as detailed on the "Configuring cabal install readline on Snow Leopard with MacPorts" thread in the haskell-cafe mailing list on 29 dec 2009.
