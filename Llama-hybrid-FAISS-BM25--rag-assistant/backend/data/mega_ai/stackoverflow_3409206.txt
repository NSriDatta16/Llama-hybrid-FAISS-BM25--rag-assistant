[site]: stackoverflow
[post_id]: 3409206
[parent_id]: 
[tags]: 
jQuery Scroll to Anchor Within Div

I'm trying to get it to where I can scroll #page to the anchor within the ajax response which is displayed withinin the #page div. The below code works for the first click, but not for subsequent clicks. What gives? Thank you for your time... Code: Example resources/js/jqueryFileTree.css" media="all" /> resources/js/jquery-1.4.2.min.js"> resources/js/jqueryFileTree.js"> $(document).ready(function() { $("#tree").fileTree( {root: 'county_code/', script: 'welcome/get_code', expandSpeed: 250, collapseSpeed: 250 }, function(file) { var split = file.split('/'); var anchor = '#x' + split[split.length-1]; var last_chapter = split[split.length-2]; if ($("#last_chapter").html() != last_chapter) { $("#page").html('Loading...'); $.ajax({ type: 'post', url: 'welcome/get_page', data: {page: file}, success: function(resp) { $("#page").html(resp); $("#page").prepend(' ' + last_chapter + ' '); anchor = anchor.replace(".", ""); console.log($("#page").offset().top); console.log($(anchor).offset().top); var scrollTo = $(anchor).offset().top - $("#page").offset().top; console.log(scrollTo); $("#page").animate({scrollTop: scrollTo}, "slow"); } }); } else { var split = file.split('/'); var anchor = '#x' + split[split.length-1]; anchor = anchor.replace(".", ""); console.log($("#page").offset().top); console.log($(anchor).offset().top); var scrollTo = $(anchor).offset().top + 246; console.log(scrollTo); $("#page").animate({scrollTop: scrollTo}, "slow"); } }); }); body { background-color: #fff; margin: 40px; font-family: Lucida Grande, Verdana, Sans-serif; font-size: 12px; color: #4F5155; } img.loading { display: block; margin-left: auto; margin-right: auto; margin-top: 150px; } a { color: #003399; background-color: transparent; font-weight: normal; } h1 { color: #444; background-color: transparent; border-bottom: 1px solid #D0D0D0; font-size: 16px; font-weight: bold; margin: 24px 0 2px 0; padding: 5px 0 6px 0; } h2 { color: #444; background-color: transparent; font-size: 14px; font-weight: bold; margin: 10px 0 2px 0; padding: 5px 0 6px 0; text-align: center; } h3 { color: #444; background-color: transparent; font-size: 12px; font-weight: bold; margin: 20px 0 2px 0; padding: 5px 0 6px 0; text-align: center; text-transform: uppercase; text-decoration: underline; } p.section_title span { padding-right: 10px; } p.section_title { margin-bottom: 0; } li { padding: 4px 0; } ol { margin-top: 0; padding-top: 0; } ol ol { list-style-type: lower-alpha; } p { padding: 5px; } #tree { width: 45%; float: left; margin: 5px; border: 1px solid #545454; height: 600px; overflow: auto; } #page { width: 45%; float: left; margin: 5px; border: 1px solid #545454; height: 590px; padding: 5px; overflow: auto; } .clear { clear: both; } Demo Below you will find a table of contents and the code itself. It is not official, blah blah blah. This would be the page content. Page rendered in {elapsed_time} seconds The ajax response (just a sample...): Chapter 1 General Provisions 1.010 County Code: Title; citation; reference. This code shall be known as the County Code, and it is sufficient to: Refer to the code as the County Code in any prosecution for the violation of any provision thereof or in any legal proceeding. Designate any ordinance adding to, amending, correcting or repealing all or any part or portion thereof as an addition to, amendment to, correction or repeal of the County Code. Further reference may be had to the chapters, sections and subsections of the County Code, and such references shall apply to that numbered chapter, section or subsection as it appears in the code. 1.020 Definitions. As used in the County Code, unless the context otherwise requires, the words and terms defined in sections 1.030 to 1.180, inclusive, have the meanins ascribed to them in those sections. 1.030 "Board of county commissioners" defined. "Board of county commissioners" means the board of county commissioners of County, State. 1.040 "County" defined. "County" means County, State. 1.050 "County commissioners" defined. "County commissioners" means the board of county commissioners of County, State. 1.060 "District health department" defined. "District health department" means the district health department of County, State. 1.070 "District health officer" defined. "District health officer" means the executive officer of the district health department. 1.080 "Intoxicating liquor" defined. "Intoxicating liquor" means beer, wine, gin, whiskey, cordials, ethyl alcohol or rum, and every liquid or solid, patented or not, containing one-half of 1 percent or more of alcohol by volume and which is used for beverage purposes. "Intoxicating liquor" is synonymous with "alcoholic beverage." 1.090 "May" defined. "May is permissive. 1.100 "Month" defined. "Month" means a calendar month unless otherwise expressed. 1.110 "Must" defined. "Must" is mandatory. 1.120 "Oath" defined. "Oath" includes an affirmation or declaration in all cases in which, by law, an affirmation may be substituted for an oath, and in such cases "swear" and "sworn" shall be equivalent to "affirm" and "affirmed." 1.130 "Person" defined. "Person" includes a company, partnership, association or corporation as well as a natural person. 1.140 "Planning commission" defined. "Planning commission" means the regional planning commission created by chapter 110 of the County Code or any successor planning commission legally created to perform the functions of planning for County. 1.150 "Shall" defined. "Shall" is mandatory. 1.160 "Sheriff" defined. "Sheriff" means the sheriff of County or in the case of his absence or inability to discharge the powers and duties of his office, then the person next in command of the County sheriff's department. 1.170 "State" defined. "State" means the State of State. 1.180 "Year" defined. "Year" means a calendar year. 1.190 Construction. The provisions of the County Code are to be construed with a view to effect its objects and to promote justice. All provisions of the County Code shall be considered to speak as of the same date, except that in cases of conflict between two or more provisions, or of any ambiguity in a provision, reference may be had to the ordinances from which the provisions are derived for the purpose of applying the rules of construction relating to repeal or amendment by implication, or for the purpose of resolving the ambiguity. The provisions of the County Code shall be considered as substituted in a continuing way for the prior ordinances repealed by section 2 of the ordinance enacting this code. The various analyses contained in the County Code, constituting enumerations or lists of chapters and sections of the County Code, and the descriptive headins or catchlines immediately preceding or within the texts of individual sections, except the section numbers included in the headings or catchlines immediately preceding the texts of such sections, do not constitute part of the law. Whenever any reference is made to any portion of the County Code or of any law of the State of State or the United States, such reference shall apply to all amendments and additions thereto now or hereafter made.
