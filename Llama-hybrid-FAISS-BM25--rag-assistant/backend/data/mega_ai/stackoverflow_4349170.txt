[site]: stackoverflow
[post_id]: 4349170
[parent_id]: 4339699
[tags]: 
If you take a look at the source for that module's admin controller, you can see the code they use to perform a mass delete #File: app/code/local/Mage/Imaclean/controllers/Adminhtml/ImacleanController.php public function massDeleteAction() { $imacleanIds = $this->getRequest()->getParam('imaclean'); if(!is_array($imacleanIds)) { Mage::getSingleton('adminhtml/session')->addError(Mage::helper('adminhtml')->__('Please select item(s)')); } else { try { $model = Mage::getModel('imaclean/imaclean'); foreach ($imacleanIds as $imacleanId) { $model->load($imacleanId); unlink('media/catalog/product'. $model->getFilename()); $model->setId($imacleanId)->delete(); } Mage::getSingleton('adminhtml/session')->addSuccess( Mage::helper('adminhtml')->__( 'Total of %d record(s) were successfully deleted', count($imacleanIds) ) ); } catch (Exception $e) { Mage::getSingleton('adminhtml/session')->addError($e->getMessage()); } } $this->_redirect('*/*/index'); } So, this controller action accepts a number of "imaclean/imaclean" model ids, uses these ids to perform a delete. So, the key code in that action is $imacleanIds = $this->getRequest()->getParam('imaclean'); $model = Mage::getModel('imaclean/imaclean'); foreach ($imacleanIds as $imacleanId) { $model->load($imacleanId); unlink('media/catalog/product'. $model->getFilename()); $model->setId($imacleanId)->delete(); } So, you could replicated the above code in a stand-alone version with something like //itterates through all 'imaclean/imaclean' models in the database $models = Mage::getModel('imaclean/imaclean')->getCollection(); foreach ($models as $model) { unlink('media/catalog/product'. $model->getFilename()); $model->setId($model->getId())->delete(); } Finally, it looks like an "imaclean/imaclean" models are used to keep track which images are no longer needed. It looks like the module creates these (i.e. Runs a check for unused images), in the newAction with the compareList method of the default helper. public function newAction(){ Mage::helper('imaclean')->compareList(); $this->_redirect('*/*/'); } So, we can add that to the start of our script, as well as the de-facto Magento initialization, which should give us what we need. #File: cleanup.php require_once "app/Mage.php"; $app = Mage::app("default"); Mage::helper('imaclean')->compareList(); $models = Mage::getModel('imaclean/imaclean')->getCollection(); foreach ($models as $model) { unlink('media/catalog/product'. $model->getFilename()); $model->setId($model->getId())->delete(); } That should at least get you started. Good luck!
