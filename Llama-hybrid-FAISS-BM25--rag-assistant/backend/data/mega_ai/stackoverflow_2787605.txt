[site]: stackoverflow
[post_id]: 2787605
[parent_id]: 2784896
[tags]: 
The way you've phrased to rules don't make the game entirely clear to me, but here's some general advice on how you might solve your problem. First of all, sit down with pen and paper, and see if you can make some progress towards an analytic solution. If the game is sufficiently complicated, this might not be possible, but you may get some more insight into how the game works. Next step, if that fails, is to run a simulation. This means writing a function that accepts a starting level of player cash, and house cash (optionally this could be infinite), and a maximum number of bets to place. It then simulates playing the game, placing bets according your your betting system until either i. The player goes broke ii. The house goes broke iii. You reach the maximum number of bets. (You need this maximum so you don't get stuck simulating forever.) The function should return the amount of cash that the player has after all the bets have been placed. Run this function lots of times, and compare the end cash with the starting cash. The average of end cash / start cash is a measure of your expectation. Try the simulation with different inputs. (For instance, with many gambling games, even if you could theoretically make an infinite amount of money in the long run, stochastic variation means that you go broke before you get there.)
