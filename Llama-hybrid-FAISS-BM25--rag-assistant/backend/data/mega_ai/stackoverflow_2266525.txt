[site]: stackoverflow
[post_id]: 2266525
[parent_id]: 
[tags]: 
"Failed to load Premain-Class manifest attribute" while trying to get the size of an object using java agent

When i try to run a java program ( java -javaagent:size.jar ObjectSizeTest ) i get the following error: Failed to load Premain-Class manifest attribute from D:\workspace\ObjectSizeTest\size.jar Error occurred during initialization of VM agent library failed to init: instrument Here is ObjectSizeTest's code: public class ObjectSizeTest { public static void main(String[] args) { String s = new String("sai"); System.out.println(ObjectSizeFetcher.getObjectSize(s)); } } MANIFEST.MF (for size.jar): Manifest-Version: 1.0 Created-By: 1.5.0_18 (Sun Microsystems Inc.) Premain-Class: ObjectSizeFetcher and here is ObjectSizeFetcher's code: import java.lang.instrument.Instrumentation; public class ObjectSizeFetcher { private static Instrumentation instrumentation; public static void premain(String args, Instrumentation inst) { instrumentation = inst; } public static long getObjectSize(Object o) { return instrumentation.getObjectSize(o); } }
