[site]: crossvalidated
[post_id]: 302431
[parent_id]: 
[tags]: 
Computation of correlation between variables pertaining to groups and variables pertaining to subjects included in groups

I have a number of observations that are organized in groups and subgroups. I would like to estimate the correlation coefficient between a variable that refers to each group and a variable that refers to each subject, while accounting for the existing correlation induced by the specificities of each group and subgroup. Since it is a bit difficult to explain my variables, I will provide an equivalent fictitious example: Say I want to calculate the correlation between the altitude of a school with the performance of its students. I have a dataset in which the students are organized by school and classroom. It is known that the school and the classroom (say because of the teacher) influence the performance of the students. On the other hand, the altitude refers to the school and is common for all the students of each school. It is unclear to me which type of model I would need to use.
