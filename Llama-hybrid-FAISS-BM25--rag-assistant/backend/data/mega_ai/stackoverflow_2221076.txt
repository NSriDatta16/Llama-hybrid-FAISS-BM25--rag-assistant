[site]: stackoverflow
[post_id]: 2221076
[parent_id]: 2220269
[tags]: 
We can use DBMS_XMLGEN.SETNULLHANDLING() to control the way the XQuery handles NULLs. Setting it to 2 generates an empty tag. Unfortunately, manipulating the format of the resultset requires us to specify a context and so leads to a slightly more verbose syntax. SQL> set long 5000 SQL> var c clob SQL> SQL> declare 2 ctx dbms_xmlgen.ctxhandle; 3 begin 4 ctx := dbms_xmlgen.newcontext('select * from emp where deptno = 10'); 5 -- set EMPTY_TAG flag 6 dbms_xmlgen.SETNULLHANDLING (ctx, 2); 7 :c := dbms_xmlgen.getxml(ctx); 8 end; 9 / PL/SQL procedure successfully completed. SQL> SQL> print c C -------------------------------------------------------------------------------- 7782 BOEHMER MANAGER 7839 09-JUN-81 2450 10 7839 SCHNEIDER PRESIDENT 17-NOV-81 5000 10 8070 DUGGAN SALES 7782 19-NOV-09 2500 10 SQL>
