[site]: stackoverflow
[post_id]: 3496130
[parent_id]: 154163
[tags]: 
VMware has a Mechanisms to determine if software is running in a VMware virtual machine Knowledge base article which has some source code. Microsoft also has a page on "Determining If Hypervisor Is Installed" . MS spells out this requirement of a hypervisor in the IsVM TEST" section of their "Server Virtualization Validation Test" document The VMware and MS docs both mention using the CPUID instruction to check the hypervisor-present bit (bit 31 of register ECX) The RHEL bugtracker has one for "should set ISVM bit (ECX:31) for CPUID leaf 0x00000001" to set bit 31 of register ECX under the Xen kernel. So without getting into vendor specifics it looks like you could use the CPUID check to know if you're running virtually or not.
