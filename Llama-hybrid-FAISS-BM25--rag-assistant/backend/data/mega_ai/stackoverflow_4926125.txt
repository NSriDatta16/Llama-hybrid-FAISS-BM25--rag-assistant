[site]: stackoverflow
[post_id]: 4926125
[parent_id]: 
[tags]: 
MySQL Getting a count on two parameters

I have a table of orders, which contains a little over 200 million records. For statistics, I need to get three different counts. The first is the number of orders placed within a certain date range, then the number of orders placed from a specific state, and finally the number of orders from a specified state during a certain date range. The first two queries return 10-20 million records on average, and usually take under five seconds. However, I have not been able to get the third query to return results in under an hour. Here are the actual queries: SELECT COUNT(*) FROM orders WHERE order_date BETWEEN date1 AND date2; The above has 10 mil records to summarize, query takes 4 seconds. SELECT COUNT(*) FROM orders LEFT JOIN customers ON orders.customer_id = customers.customer_id WHERE customer.state = 'PA'; The above has 15mil records to summarize, query takes 5 seconds. (SELECT COUNT(*) FROM orders WHERE order_date BETWEEN date1 AND date2) UNION (SELECT COUNT(*) FROM orders LEFT JOIN customers ON orders.customer_id=customers.customer_id WHERE customer.state = 'PA'); The above has 4500 records to summarize, query takes 2 hours. Is there another approach I can take for that third query that would give me the count in a more reasonable amount of time? Preferably less than a minute?
