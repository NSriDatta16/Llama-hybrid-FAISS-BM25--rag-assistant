[site]: stackoverflow
[post_id]: 3316261
[parent_id]: 
[tags]: 
prevent long running averaging from overflow?

suppose I want to calculate average value of a data-set such as class Averager { float total; size_t count; float addData (float value) { this->total += value; return this->total / ++this->count; } } sooner or later the total or count value will overflow, so I make it doesn't remember the total value by : class Averager { float currentAverage; size_t count; float addData (float value) { this->currentAverage = (this->currentAverage*count + value) / ++count; return this->currentAverage; } } it seems they will overflow longer, but the multiplication between average and count lead to overflow problem, so next solution is: class Averager { float currentAverage; size_t count; float addData (float value) { this->currentAverage += (value - this->currentAverage) / ++count; return this->currentAverage; } } seems better, next problem is how to prevent count from overflow?
