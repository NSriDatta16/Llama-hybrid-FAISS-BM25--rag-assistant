[site]: stackoverflow
[post_id]: 5409704
[parent_id]: 
[tags]: 
Caesar Cipher over TCP connection Android

I am building this application in android using eclipse. I am building a program that takes a coded caesar cipher string and finds the number of shifts then sends back the decoded text. I have been having a lot of problems so I broke the program down to only decode two letter words. I am rarely getting a string returned to the client and when I get anything returned it is usually "null". Below are my classes: This class decodes the message: package com.mafia.ceasarCipher; import java.util.ArrayList; import android.util.Log; public class ceasar{ static Boolean cDB = new Boolean( false ); int shift=0; fileInput dict= new fileInput(); public String cDecode(String input){ char[] s = input.toCharArray(); int length=0; for(int i=0;i d2=new ArrayList (); d2=dict.readD2(); String st=s; if(length==2){ for(int i=0; i This is the Server package com.mafia.ceasarCipher; import java.io.BufferedReader; import java.io.DataOutputStream; import java.io.InputStreamReader; import java.net.ServerSocket; import java.net.Socket; import android.util.Log; public class Server implements Runnable { // Public boolean cDecodeStatus= new boolean(); public static final String SERVERIP = "127.0.0.1"; // 'Within' the emulator! public static final int SERVERPORT = 4444; public ceasar c = new ceasar(); public int byteCounter; public void run () { try{ String clientSentence; String modifiedSentence; ServerSocket welcomeSocket = new ServerSocket(SERVERPORT); while(true) { Socket connectionSocket = welcomeSocket.accept(); BufferedReader inFromClient = new BufferedReader(new InputStreamReader(connectionSocket.getInputStream())); DataOutputStream outToClient = new DataOutputStream(connectionSocket.getOutputStream()); clientSentence = inFromClient.readLine(); Log.e( "Jake" ,"RECIEVED from client" + clientSentence); //modifiedSentence = clientSentence.toUpperCase() + '\n'; modifiedSentence = c.cDecode(clientSentence ); Log.d("face", modifiedSentence); System.out.println("before while"+' '+ ceasar.cDB); while(ceasar.cDB!=true){ //System.out.println("before if"+' '+ ceasar.cDB); //if(ceasar.cDB==true) //Log.d("send", "sending Loop"); //System.out.println(ceasar.cDB); outToClient.writeBytes(modifiedSentence); } } } catch (Exception e) { Log.e("UDP", "S: Error", e); } } } This is class reads the dictionary in package com.mafia.ceasarCipher; import java.io.*; import android.os.Environment; import android.util.Log; import java.util.ArrayList; public class fileInput { public ArrayList readD2(){ File sdcard = Environment.getExternalStorageDirectory(); //Get the text file File file = new File(sdcard,"d2.txt"); //Read text from file try { BufferedReader br = new BufferedReader(new FileReader(file)); ArrayList x = new ArrayList () ; String str; str = br.readLine(); while(str != null) { str = br.readLine(); x.add(str) ; } return x; } catch (IOException e) { return null; } } This is the Client package com.mafia.ceasarCipher; import java.io.BufferedReader; import java.io.DataOutputStream; import java.io.InputStreamReader; import java.net.Socket; import android.util.Log; public class Client implements Runnable { static String messageInput = new String(); // static String modifiedSentence= new String(); /*public static String getOutput(){ return modifiedSentence; }*/ public static void setCode(String x) { messageInput= x; } @Override public void run() { try{ Log.d("Step", "1"); Socket clientSocket = new Socket("localhost", 4444); Log.d("Step", "2"); DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream()); Log.d("Step", "3"); Log.d("Step", "4"); BufferedReader inFromServer = new BufferedReader(new InputStreamReader(clientSocket.getInputStream())); Log.d("Step", "5"); outToServer.writeBytes(messageInput + '\n'); Log.d("Step", "6"); String modifiedSentence; modifiedSentence = inFromServer.readLine(); Log.d("Step", "7"); Log.e( "Jake" ,"RECIEVED BACK FROM SERVER: " + modifiedSentence); clientSocket.close(); } catch (Exception e) { Log.e("UDP", "C: Error", e);} } } This class handles the onCreate and onClick methods package com.mafia.ceasarCipher; import android.app.Activity; import android.os.Bundle; import android.util.Log; import android.view.View; import android.widget.Button; import android.widget.EditText; public class udpConnection extends Activity { String input = ""; /** Called when the activity is first created. */ @Override public void onCreate(Bundle icicle) { super.onCreate(icicle); setContentView(R.layout.main); final Button button1 = (Button)findViewById(R.id.button1); button1.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { /* Kickoff the Server, it will * be 'listening' for one client packet */ new Thread(new Server()).start(); final EditText et = (EditText)findViewById(R.id.editText1); input = et.getText().toString(); /*Log.d("UDP","input is"+ input); final TextView TV = (TextView)findViewById(R.id.textView2); String out= Client.getOutput(); TV.setText(out);*/ /* GIve the Server some time for startup */ try { Thread.sleep(500); } catch (InterruptedException e) { } // Kickoff the Client new Thread(new Client()).start(); Client.setCode(input ); } }); } public String getInput() { return input; } } The GUI
