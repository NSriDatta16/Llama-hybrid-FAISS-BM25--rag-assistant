[site]: stackoverflow
[post_id]: 4526460
[parent_id]: 
[tags]: 
azure reading mounted VHD

I am developing "azure web application". I have created drive and drivePath static members in WebRole as follows: public static CloudDrive drive = null; public static string drivePath = ""; I have created development storage drive in WebRole.OnStart as follows: LocalResource azureDriveCache = RoleEnvironment.GetLocalResource("cache"); CloudDrive.InitializeCache(azureDriveCache.RootPath, azureDriveCache.MaximumSizeInMegabytes); CloudStorageAccount.SetConfigurationSettingPublisher((configName, configSetter) => { // for a console app, reading from App.config //configSetter(ConfigurationManager.AppSettings[configName]); // OR, if running in the Windows Azure environment configSetter(RoleEnvironment.GetConfigurationSettingValue(configName)); }); CloudStorageAccount account = CloudStorageAccount.DevelopmentStorageAccount; CloudBlobClient blobClient = account.CreateCloudBlobClient(); blobClient.GetContainerReference("drives").CreateIfNotExist(); drive = account.CreateCloudDrive( blobClient .GetContainerReference("drives") .GetPageBlobReference("mysupercooldrive.vhd") .Uri.ToString() ); try { drive.Create(64); } catch (CloudDriveException ex) { // handle exception here // exception is also thrown if all is well but the drive already exists } string path = drive.Mount(azureDriveCache.MaximumSizeInMegabytes, DriveMountOptions.None); IDictionary listDrives = Microsoft.WindowsAzure.StorageClient.CloudDrive.GetMountedDrives(); drivePath = path; The drive keeps visible and accessible till execution scope remain in WebRole.OnStart, as soon as execution scope leave WebRole.OnStart, drive become unavailable from application and static members get reset (such as drivePath get set to "") Am I missing some configuration or some other error ?
