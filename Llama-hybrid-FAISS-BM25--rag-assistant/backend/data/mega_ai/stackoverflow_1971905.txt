[site]: stackoverflow
[post_id]: 1971905
[parent_id]: 1957308
[tags]: 
I vaguely remember that you also need to call RealizePalette(hdc) after a palette is selected into a DC. We ditched our palette code so long ago that the code isn't even in our source tree anymore. I see from your code that you alrady tried this, but I suggest that you might want to play with that some more. I do remember that the palette code was pretty fragile, and we stopped using it as soon as we could. Some older AVI files would have 8 bit palettized video with a palette imbedded in the file, so playback code for those files would need to load an realize a palette. I remember that realize didn't do anything unless you were the foreground app, but that SHOULD only apply to screen DC's and not memory DC's. If you searched around for sample source code that could play palettized AVI's you might find something that shows the magic formula for getting palettes to work. Sorry I can't be more help.
