[site]: stackoverflow
[post_id]: 2038877
[parent_id]: 2033833
[tags]: 
Parse the string containing entity references as a fragment of XML. To safely output the Unicode characters in XML, you can be paranoid and use XML entity references for them, as per the function escape scala>import xml.parsing.ConstructingParser import xml.parsing.ConstructingParser scala>import io.Source import io.Source scala> val d = ConstructingParser.fromSource(Source.fromString(" &#12420; "), true).documnent d: scala.xml.Document = や scala>val t = d(0).text res0: String = や scala> import xml._ import xml._ scala> def escape(xmlText: String): NodeSeq = { | def escapeChar(c: Char): xml.Node = | if (c > 0x7F || Character.isISOControl(c)) | xml.EntityRef("#" + Integer.toString(c, 10)) | else | xml.Text(c.toString) | | new xml.Group(xmlText.map(escapeChar(_))) | } escape: (xmlText: String)scala.xml.NodeSeq scala> {escape(t)} res3: scala.xml.Elem = &#12420;
