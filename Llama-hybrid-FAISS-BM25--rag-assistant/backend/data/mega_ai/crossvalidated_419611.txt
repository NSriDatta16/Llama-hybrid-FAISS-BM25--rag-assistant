[site]: crossvalidated
[post_id]: 419611
[parent_id]: 
[tags]: 
OOB error prediction in RF if case weights are used

I have a dataset for which grossing-up factors are given. I am using these factors as case weights for a random forest (R package ranger). Until now I was using the OOB prediction error for tuning, but I wonder whether this procedure is legitimate. In my understanding case weights change the calculation compared to the standard case as follows: Samples with higher weights are sampled more frequently, which leads to a lower probability to be OOB and samples with lower weights are sampled less frequently which leads to a higher probability to be OOB. Consequently, the OOB set of samples predominantly consists of samples with low weights and these are used to calculate the OOB error. In my case (for grossing-up factors), in which I want to use the OOB instead of a validation set, this means that I am optimizing my model on a test set that is made of the samples that are somehow least important (=low grossing-up factor/weighting). Am I correct that the OOB prediction error cannot be used if case weights are set or do I get anything wrong?
