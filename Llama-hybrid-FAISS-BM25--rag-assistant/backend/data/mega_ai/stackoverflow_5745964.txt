[site]: stackoverflow
[post_id]: 5745964
[parent_id]: 5745672
[tags]: 
It looks like you're running up against the limitations of regular languages . If you're doing things like full-on recursive embedding, without any easy tricks to tell you where the deepest level of nesting is (like Ingo's suggestion of no braces), you want to use a context-free grammar.
