[site]: stackoverflow
[post_id]: 426363
[parent_id]: 
[tags]: 
Running out of DB connections using LINQ to SQL

In developing a relatively simple web service, that takes the data provided by a post and records it in a database table, we're getting this error: Exception caught: The remote server returned an error: (500) Internal Server Er or. Stack trace: at System.Net.HttpWebRequest.GetResponse() on some servers, but no others. The ones that are getting this are the physical machines, the others are virtual, and obviously the physical servers are far more powerful. As far as we can tell, the problem is that the DB connections aren't being released back to the pools after each query. I'm using the using pattern below: using (VoteDaoDataContext dao = new VoteDaoDataContext()) { dao.insert_response_and_update_count(answerVal, swid, agent, geo, DateTime.Now, ip); dao.SubmitChanges(); msg += "Thank you for your vote."; dao.Dispose(); } I added the dao.Dispose() call to ensure that connections are released when the method finishes, but I don't know whether or not it's necessary. Am I using this pattern correctly? Is there something else I need to do to ensure that connections get returned to the pools correctly? Thanks!
