[site]: stackoverflow
[post_id]: 5049672
[parent_id]: 
[tags]: 
Devise session immediately expiring on .js call [AJAX]

Through much trial and error, I have narrowed the problem down to line 5 below. For some reason, the .js response is ending the user session. Using 3.0.4 and devise 1.1.7 (and jQuery 1.5). Additionally, @organization is being updated and Completed 200 OK shows in the log, so the user does no know he/she is logged out until the next action is attempted. Any help and guidance is greatly appreciated. *Controller* 1 def make_featured 2 @organization = Organization.find(params[:id]) 3 @organization.is_featured ? @organization.update_attribute(:is_featured,"false") : @organization.update_attribute(:is_featured,"true") 4 respond_to do |format| 5 format.js {render :action => "update", :layout => false} 6 end 7 end and *update.js.haml* $("#organization_" + "#{@organization.id}" ).replaceWith("#{ escape_javascript(render :partial => 'users/supplier_view', :locals => {:organization => @organization}) }");
