[site]: stackoverflow
[post_id]: 1960746
[parent_id]: 1959777
[tags]: 
You can't use a barrier inside an omp parallel for, you can pretty much only use a barrier inside an omp parallel region. The reason for this is because if your loop is from 1 to N, a barrier inside will effectively create N threads which will have a negative perf impact if N is large. I didn't lookup the algorithm here, but two reasonable choices are to refactor to use 2 parallel for loops one after the other where the barrier is, or to refactor your algorithm to use a #pragma parallel region. I looked up the list ranking algorithm, you will be well served to find an implementation of prefix sum or scan if you must use openmp. -Rick
