[site]: stackoverflow
[post_id]: 4244997
[parent_id]: 4244780
[tags]: 
You don't actually have to follow 2-stage reserve/commit allocation scheme. The point is that VirtualAlloc and VirtualFree may do several things. And sometimes it's really useful to do so. You don't have to however. Committed memory region is the one for which the system allocates physical storage. You don't have to worry about where exactly it's allocated: RAM or page file. This should be transparent to you (unless you're writing a kernel-mode device driver). Moreover, most of the memory pages can be swapped out to the page file and loaded into RAM on-demand. It's just some committed memory pages don't require binding with the page file, because they're already bound to another physical storage. Memory-mapped files are the example of this. In normal scenario when you commit a memory pages, use it for some time period and free it - most likely it won't reach the page file at all.
