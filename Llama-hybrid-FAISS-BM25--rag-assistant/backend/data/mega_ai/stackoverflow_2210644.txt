[site]: stackoverflow
[post_id]: 2210644
[parent_id]: 2209335
[tags]: 
I would strongly encourage you to use http://htmlpurifier.org/ , which will not only make it easy to write a link filter ( http://htmlpurifier.org/docs/enduser-uri-filter.html ) but also protect you from XSS attacks. If you aren't using a whitelisted HTML parser, you need to be treating user-supplied data as literal and escaping html special characters.
