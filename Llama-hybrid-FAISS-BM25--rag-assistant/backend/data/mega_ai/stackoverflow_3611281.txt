[site]: stackoverflow
[post_id]: 3611281
[parent_id]: 3611182
[tags]: 
static variables in C and C++ are not thread safe. That means that race conditions (bad thing) can happen if two threads try to access your singleton object. One approach to fix your problem is to use Thread Local Storage. This is supported by the pthreads library and also some compilers directly support thread local storage. The alternative, if your singleton MUST be global to all threads, is to provide lock to ensure that only one thread can access your data at a time. Since however, the problem arises only in unit testing. I would suggest to not run multi-threaded unit tests unless you intend to use your singleton in multiple threads.
