[site]: stackoverflow
[post_id]: 3562929
[parent_id]: 
[tags]: 
How can I get an event to fire every time localStorage is updated in Safari 5+?

I have tried to follow the examples on the Safari Developer Site . The documentation suggests adding an event listener like so: window.addEventListener('storage', storage_handler, false); And then setting your handler function like this: function storage_handler(evt) { alert('The modified key was '+evt.key); alert('The original value was '+evt.oldValue); alert('The new value is '+evt.newValue); alert('The URL of the page that made the change was '+evt.url); alert('The window where the change was made was '+evt.source); } But I can't seem to get this code to work on my machine (OS X 10.6, Safari 5.01) nor on Safari on my iPhone 3GS (iOS 4.02). This article offers a separate method: window.onload = function() { ... document.body.setAttribute("onstorage", "handleOnStorage();"); } function handleOnStorage() { if (window.event && window.event.key.indexOf("index::") == 0){ $("stats").innerHTML = ""; displayStats(); } } But I haven't had any luck with that either. Am I doing something wrong? Is this a bug?
