[site]: stackoverflow
[post_id]: 5206599
[parent_id]: 
[tags]: 
g_io_channel + socket = server , still just get one client ? in C language

folks, here ma code : #include #include // gio channel #include //socket(); #include // structure #include // printf void deal(GIOChannel *in, GIOCondition condition, gpointer data) { struct sockaddr_storage income; int insock = g_io_channel_unix_get_fd(in); socklen_t income_len = sizeof(income); int newsock = accept(insock, (struct sockaddr*)&income, &income_len ); if(newsock == -1) { printf("failure on newsock\n"); } char buff[128]; int recv_total = 0; int recv_byte = 128; int recv_sizing; while (recv_total these is how it get compiled and running : $ gcc -o dengersocket_glib dengersocket_glib.c `pkg-config --cflags --libs glib-2.0` $ ./dengersocket_glib the client wanna try to send : $ echo wew | nc -v localhost 3000 nc: connect to localhost port 3000 (tcp) failed: Connection refused Connection to localhost 3000 port [tcp/*] succeeded! the server receiving : $ ./dengersocket_glib connection lost or error while recv(); [ just guess ] number : 0 data : wew receiving ok, but when another client trying to connecting : $ echo dor | nc -v localhost 3000 nc: connect to localhost port 3000 (tcp) failed: Connection refused Connection to localhost 3000 port [tcp/*] succeeded! nothing happen on server, how to make server could accept more than one client ? do fd_set really needed on these case ?
