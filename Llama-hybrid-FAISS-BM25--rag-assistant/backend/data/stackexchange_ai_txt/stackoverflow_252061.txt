[site]: stackoverflow
[post_id]: 252061
[parent_id]: 251957
[tags]: 
As close as I can get is this: select "type" as '@name', "group" as 'row/column1', "value" as 'row/column2' from tableName for xml path('variable'), root('data') Naming two items the same ("column" and "column") isn't something I know how to do in one pass, but on the other hand it is an odd XML schema choice; normally elements have unique names if they contain distinct data. The obvious choice (name them both 'row/column') simply concatenates them in the output into one value. Also note that each returned row will be a "variable" element distinct from the others. To get the nesting without redundant records will require a subquery: select distinct "type" as '@name' from Agent for xml path('variable'), root('data') was my first thought, but the distinct prevents nesting. All this makes me think that to get the exact output you need you might have to use EXPLICIT mode. Perhaps my problem is for something like this I punt and use a DOMDocument in code :).
