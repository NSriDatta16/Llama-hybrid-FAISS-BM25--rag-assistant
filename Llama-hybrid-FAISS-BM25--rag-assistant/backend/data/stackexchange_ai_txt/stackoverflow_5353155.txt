[site]: stackoverflow
[post_id]: 5353155
[parent_id]: 
[tags]: 
Setting javaagent in ant

I am trying to run JUnit tests from an Ant script. The tests use the JMockit mocking framework, which for Java 5 requires specifying it as a javaagent to run correctly. Here is the script I am running: I have a feeling that I'm not setting the javaagent correctly. The tests error with this exception: java.lang.reflect.InvocationTargetException at java.lang.reflect.Constructor.newInstance(Constructor.java:515) at org.eclipse.ant.internal.ui.antsupport.EclipseDefaultExecutor.executeTargets(EclipseDefaultExecutor.java:32) at org.eclipse.ant.internal.ui.antsupport.InternalAntRunner.run(InternalAntRunner.java:423) at org.eclipse.ant.internal.ui.antsupport.InternalAntRunner.main(InternalAntRunner.java:137) at java.lang.J9VMInternals.initialize(J9VMInternals.java:140) at java.lang.J9VMInternals.initialize(J9VMInternals.java:140) at java.lang.J9VMInternals.initialize(J9VMInternals.java:167) Caused by: java.lang.RuntimeException: com.sun.tools.attach.AttachNotSupportedException: Unable to enqueue operation: the target VM does not support attach mechanism at mockit.internal.startup.JDK6AgentLoader.attachToThisVM(JDK6AgentLoader.java:113) at mockit.internal.startup.JDK6AgentLoader.loadAgent(JDK6AgentLoader.java:77) at mockit.internal.startup.AgentInitialization.initializeAccordingToJDKVersion(AgentInitialization.java:41) at mockit.internal.startup.Startup.initializeIfNeeded(Startup.java:203) at java.lang.J9VMInternals.initializeImpl(Native Method) at java.lang.J9VMInternals.initialize(J9VMInternals.java:200) at java.lang.J9VMInternals.initialize(J9VMInternals.java:167) at java.lang.J9VMInternals.initialize(J9VMInternals.java:167) Caused by: com.sun.tools.attach.AttachNotSupportedException: Unable to enqueue operation: the target VM does not support attach mechanism at sun.tools.attach.WindowsVirtualMachine.(WindowsVirtualMachine.java:58) at sun.tools.attach.WindowsAttachProvider.attachVirtualMachine(WindowsAttachProvider.java:58) at com.sun.tools.attach.VirtualMachine.attach(VirtualMachine.java:207) at mockit.internal.startup.JDK6AgentLoader.attachToThisVM(JDK6AgentLoader.java:110) Is my javaagent setting correct? If it is, what else could be causing this error?
