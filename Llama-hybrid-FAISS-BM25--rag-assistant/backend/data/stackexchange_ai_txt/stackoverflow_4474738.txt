[site]: stackoverflow
[post_id]: 4474738
[parent_id]: 4474076
[tags]: 
The output buffer is supposed to be resized to the output image, but you have not specified an explicit size with the buf object. At least this is mentioned from your referenced doc page at http://opencv.willowgarage.com/documentation/cpp/reading_and_writing_images_and_video.html Can you try setting an explicit size on buf ? Right now in your code sample, it is just an empty vector. EDIT: Yes, I think you're right, if I squint some more at the doc page, it seems to indicate that cv::imencode will do the allocation, so you shouldn't have to. If that's true then, is your input image really large, are you running out of memory? Also can you step into the debug version of cv::imencode ? EDIT: There's another code sample at this page http://opencv.willowgarage.com/documentation/cpp/core_basic_structures.html#Mat IplImage* img = cvLoadImage("greatwave.jpg", 1); Mat mtx(img); // convert IplImage* -> cv::Mat Can you also try the "convert to cv::Mat" step, and pass that into cv::imencode ?
