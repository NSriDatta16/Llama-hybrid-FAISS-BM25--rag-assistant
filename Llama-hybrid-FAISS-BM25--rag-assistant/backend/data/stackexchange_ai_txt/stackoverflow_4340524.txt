[site]: stackoverflow
[post_id]: 4340524
[parent_id]: 4340380
[tags]: 
Assign a probability of recording each event and store the event in an indexable data structure. When the size of the structure gets to the threshold, remove a random element and add new elements. In Ruby, you could do this: @storage = [] prob = 0.002 while ( message = getnextMessage) do @storage.delete((rand() * @storage.length).floor) if @storage.length > MAX_LEN @storage This addresses your max size AND your non-bias toward when the event occurred. You could also choose which element gets deleted by partitioning your stored elements into buckets and then removing an element from any bucket that has more than one element. The bucket method allows you to keep one from each hour, for example. You should also know that sampling theory is Big Math. If you need more than a layman's idea about this you should consult a qualified mathematician in your area.
