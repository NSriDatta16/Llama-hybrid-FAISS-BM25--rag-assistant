[site]: stackoverflow
[post_id]: 1404772
[parent_id]: 1364733
[tags]: 
def redirect_from_appspot(wsgi_app): def redirect_if_needed(env, start_response): if env["HTTP_HOST"].startswith('my_app_name.appspot.com'): import webob, urlparse request = webob.Request(env) scheme, netloc, path, query, fragment = urlparse.urlsplit(request.url) url = urlparse.urlunsplit([scheme, 'www.my_domain.com', path, query, fragment]) start_response('301 Moved Permanently', [('Location', url)]) return ["301 Moved Peramanently", "Click Here" % url] else: return wsgi_app(env, start_response) return redirect_if_needed
