[site]: stackoverflow
[post_id]: 4751082
[parent_id]: 
[tags]: 
What is the best way to keep app.config and app.vshost.config synchronized? (or extend ConfigurationManager)

There are many examples of how to read/write app.config in Stack Overflow (and the rest of the Internet). However the answers are not consistent, and neither the question nor answer usually indicate that the data may be saved in app.vshost.config during debugging. Some answers even recommend using an XMLReader/XMLWriter to do this, which shouldn't be the correct answer since there is a specialized Configuration class for this purpose. My testing (code below) shows that ConfigurationManager reads and writes occur to app.vshost.config during debugging, and to app.config when running normally. I understand why this is happening, but I'd like to find a standard way to read/write a config file when debugging and not debugging. Perhaps this requires reflection, perhaps this requires writing data in two locations. Either way, I'd rather not have my testers look in both app.config and app.vshost.config; I want to standardise on a fixed behaviour for all my components that use config (WCF Bindings, Tracing, Log4Net, etc) A non-standard implementation may occur when an application hard-codes the path and name of the configuration file to read. Then, during debugging, the wrong config file may be read or updated. My working code is below (though many people think it doesn't work): var config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None); config.AppSettings.Settings.Remove("AgentID1"); config.AppSettings.Settings.Add("AgentID1", "test12"); config.Save(ConfigurationSaveMode.Full);
