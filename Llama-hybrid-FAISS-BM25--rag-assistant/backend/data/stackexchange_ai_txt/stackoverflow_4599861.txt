[site]: stackoverflow
[post_id]: 4599861
[parent_id]: 
[tags]: 
Object property saving via $object->save(); problems

I'm a magento programmer and I've been loosing several long minutes to figure out why a property on an object was not saved in the database. Let's explain, here are 3 pieces of code that I would expect to do the same thing : First code $order = Mage::getModel('sales/order')->load(1873); $myInfo = 'important piece of information'; $order->getPayment()->setAdditionalInformation('my_info',$myInfo); $order->getPayment()->save(); //No information in the database is saved No value saved in database. Second code $order = Mage::getModel('sales/order')->load(1873); $myInfo = 'important piece of information'; $payment = $order->getPayment(); $payment->setAdditionalInformation('my_info',$myInfo); $payment->save(); //No information in the database is saved No value saved in database. Third code $order = Mage::getModel('sales/order')->load(1873); $myInfo = 'important piece of information'; $order->getPayment()->setAdditionalInformation('my_info',$myInfo)->save(); //YEAHHH ! It works ! I now have that in my database. Finally, I got it ! The code from setAdditionalInformation /** * Additional information setter * Updates data inside the 'additional_information' array * or all 'additional_information' if key is data array * * @param string|array $key * @param mixed $value * @return Mage_Payment_Model_Info * @throws Mage_Core_Exception */ public function setAdditionalInformation($key, $value = null) { if (is_object($value)) { Mage::throwException(Mage::helper('sales')->__('Payment disallow storing objects.')); } $this->_initAdditionalInformation(); if (is_array($key) && is_null($value)) { $this->_additionalInformation = $key; } else { $this->_additionalInformation[$key] = $value; } return $this->setData('additional_information', $this->_additionalInformation); } note: The final setData() always returns $this Question, Why ? I think I've forgot some specificities about the way PHP works, especially for the first code. I would understand that it doesn't work because of some memory stuff with PHP. But the two other pieces of code, why doesn't it work ? Thanks, Hugues.
