[site]: stackoverflow
[post_id]: 3864057
[parent_id]: 3863769
[tags]: 
If you can't use Tidy then you can leverage the DOM to get unclosed and badly nested tags cleaned up. The following will wrap the fixed markup in html and body container tags but you can easily take care of that with a quick preg_replace or str_replace . error_reporting(0); header('Content-type: text/plain'); $html = ' Some badly formatted content '; $xml = ' ' . $html; $dom = new DomDocument(); $valid = $dom->loadXML($xml); if (false === $valid) { $doc = new DOMDocument(); $doc->encoding = 'UTF-8'; $doc->loadHTML($xml); $html = simplexml_import_dom($doc)->asXML(); } echo $html;
