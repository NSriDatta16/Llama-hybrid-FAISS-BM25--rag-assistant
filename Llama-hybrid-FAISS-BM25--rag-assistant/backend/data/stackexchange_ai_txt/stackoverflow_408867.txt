[site]: stackoverflow
[post_id]: 408867
[parent_id]: 408556
[tags]: 
If you want the SQL repository to be able to use the existing xml layer, then I'm sure some kind of interface-based abstraction (provider / IoC / DI / etc) is possible, so that the SQL repository can consume the xml stack without having to know about it explicitly. Of course, if the object model itself defined the xml structure (via the attributes for XmlSerializer etc), then this is simpler, and the xml repo becomes fairly trivial. As for knowing the structure inside the db: it depends whether you need to query the data inside the database. If so, there is a lot you can do in SQL Server - for example, you can bind the xml column to an xsd, or you can promote portions of the xml (via udf/xquery) to persisted, indexed columns. However, if you are just using the database for storage, then this isn't necessary - and indeed, using xsd in the database is a major PITA if you need to change the xsd at a later date (it isn't trivial).
