[site]: stackoverflow
[post_id]: 5044755
[parent_id]: 
[tags]: 
How do I upload a file from an android device to a restful wcf service?

I'm building an Android app and I need to upload a photo taken with the camera. I need to upload it to a restful WCF service. I have looked at many tutorials but I just can't seem to get it working. I think my problem lies with the WCF service. I do not get any exceptions but I get a response 400 BAD REQUEST. Since the WCF service is currently running on my localhost, I am using 10.0.2.2 to access it from the android emulator. I am able to call other service methods on my local service but this one fails. Java HttpPost httppost = new HttpPost("http://10.0.2.2:53943/ImageService/UploadInspectionPhoto"); File photo = new File(Environment.getExternalStorageDirectory(), "01.jpg"); MultipartEntity t = new MultipartEntity(); t.addPart("t", new FileBody(photo)); //t.addPart(new FormBodyPart("t", new FileBody(photo))); I tired this too httppost.setEntity(t); HttpResponse response = httpclient.execute(httppost); WCF [ServiceContract] [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)] [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)] public class ImageService { [WebInvoke(Method = "POST")] public void UploadInspectionPhoto(Stream t) { // I put a breakpoint here but it never gets here // Do something with the stream } } Config file --> element below --> What am I doing wrong?
