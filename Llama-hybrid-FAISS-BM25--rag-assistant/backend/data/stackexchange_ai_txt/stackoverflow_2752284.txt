[site]: stackoverflow
[post_id]: 2752284
[parent_id]: 
[tags]: 
How can I force PHP's fopen() to return the current version of a web page?

The current content of this google docs page is: alt text http://www.deviantsart.com/upload/i9k01q.png However, when reading this page with the following PHP fopen() script, I get an older, cached version: (source: deviantsart.com ) I've tried two solutions proposed in this question (a random attribute and using POST) and I also tried clearstatcache() but I always get the cached version of the web page. What do I have to change in the following script so that fopen() returns the current version of the web page? '; echo loadFile($url); function loadFile($sFilename) { clearstatcache(); if (floatval(phpversion()) >= 4.3) { $sData = file_get_contents($sFilename); } else { if (!file_exists($sFilename)) return -3; $opts = array('http' => array( 'method' => 'POST', 'content'=>'' ) ); $context = stream_context_create($opts); $rHandle = fopen($sFilename, 'r', $context); if (!$rHandle) return -2; $sData = ''; while(!feof($rHandle)) $sData .= fread($rHandle, filesize($sFilename)); fclose($rHandle); } return $sData; } function getRandomDigits($numberOfDigits) { $r = ""; for($i=1; $i ADDED: taking out the $opts and $context gives me a cached page as well: function loadFile($sFilename) { if (floatval(phpversion()) >= 4.3) { $sData = file_get_contents($sFilename); } else { if (!file_exists($sFilename)) return -3; $rHandle = fopen($sFilename, 'r'); if (!$rHandle) return -2; $sData = ''; while(!feof($rHandle)) $sData .= fread($rHandle, filesize($sFilename)); fclose($rHandle); } return $sData; } ADDED: this curl script which sends a Firefox user agent returns the cached version as well:
