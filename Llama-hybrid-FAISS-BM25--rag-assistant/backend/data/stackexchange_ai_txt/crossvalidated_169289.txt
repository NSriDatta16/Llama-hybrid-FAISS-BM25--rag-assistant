[site]: crossvalidated
[post_id]: 169289
[parent_id]: 168938
[tags]: 
There are a couple questions in your question, I am going to separate them out and answer one of them. If you want me to answer others let me know and I'll give it a try. First let's forget about the lying. Model a coin as a Bernoulli distribution with $p = $ probability of heads. 1) If you flip the coin $N$ times and get $h$ heads, $h/N$ is the maximum likelihood estimate (MLE) for the parameter $p$. 2) In a Bayesian setting, a Beta distribution is typically used as a prior for $p$ because Beta is the conjugate prior to Bernoulli. If you use and uninformative prior $B(\alpha=1, \beta=1)$, the posterior distribution after $h$ heads and $t$ tails is $B(\alpha=1+h, \beta=1+t)$. Then if we do MAP estimation we predict the mode of the posterior $p=h/(h+t)$. If you begin with a uniform prior the map estimate is always the same as the MLE. Or we can do the more robust Bayesian inference and take the expected value of the posterior which is $p = (h+1)/(h+t+2)$ Now let's get back to your lying friend, and at least apply MLE. I will use slightly different notation than you because I think all the $p$'s will get confusing. $p$ = Probability the coin lands on heads. $q$ = Probability your friend tells the truth when it lands on heads. $r$ = Probability your friend tells the truth when it lands on tails. Then we can compute the probability that we the observer sees heads: Probability we see heads $=pq + (1-p)(1-r) = 1 - r + (r+q-1)p.$ Probability we see tails $=p(1-q) + (1-p)r = r - (r+q-1)p.$ So the log-likelihood of $p$, the log of the probability of seeing the data we saw in that exact order is: $$ f(p) = h\cdot log(1 - r + (r+q-1)p) + t\cdot log(r - (r+q-1)p) $$ We want to maximize $f(p)$, so let's take the derivative with respect to $p$ and set it to zero. $$ f'(p) = \frac{h(r+q-1)}{(1 - r + (r+q-1)p} - \frac{t(r+q-1)}{r - (r+q-1)p} = 0. $$ Solving for $p$ we get: $$ p = \frac{t - tr - hr}{(h+t)(1-r-q)}. $$ Reality check . Note when $r=q=1$ (never lies) this simplifies to $h/(h+t)$. When $r=q=0$ this simplifies to $t/(h+t)$, makes sense. Let me know if you want me t go further than MLE.
