[site]: stackoverflow
[post_id]: 3256961
[parent_id]: 
[tags]: 
Listview with headers. SeparatedListAdapter using database data crash

I am trying to create a ListView with headers based on a number of predefined categories. I am using Jeff Sharkey's separating lists with headers as a basis. The classes and XML are identical except for SimpleAdapter. The difference is my data is coming from a local SQLite database. The code crashes when I switch out of the view. Any ideas why this could be? Error and code below. 07-15 14:58:44.950: ERROR/AndroidRuntime(582): Uncaught handler: thread main exiting due to uncaught exception 07-15 14:58:44.970: ERROR/AndroidRuntime(582): java.lang.NullPointerException 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.widget.SimpleCursorAdapter.bindView(SimpleCursorAdapter.java:149) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.widget.CursorAdapter.getView(CursorAdapter.java:186) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at com.XYZ.XYZ.SeparatedListAdapter.getView(SeparatedListAdapter.java:94) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.widget.AbsListView.obtainView(AbsListView.java:1256) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.widget.ListView.makeAndAddView(ListView.java:1668) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.widget.ListView.fillDown(ListView.java:637) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.widget.ListView.fillSpecific(ListView.java:1224) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.widget.ListView.layoutChildren(ListView.java:1499) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.widget.AbsListView.onLayout(AbsListView.java:1113) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.view.View.layout(View.java:6830) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.widget.FrameLayout.onLayout(FrameLayout.java:333) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.view.View.layout(View.java:6830) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.widget.FrameLayout.onLayout(FrameLayout.java:333) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.view.View.layout(View.java:6830) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.widget.FrameLayout.onLayout(FrameLayout.java:333) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.view.View.layout(View.java:6830) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1119) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.widget.LinearLayout.layoutVertical(LinearLayout.java:998) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.widget.LinearLayout.onLayout(LinearLayout.java:918) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.view.View.layout(View.java:6830) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.widget.FrameLayout.onLayout(FrameLayout.java:333) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.view.View.layout(View.java:6830) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.widget.FrameLayout.onLayout(FrameLayout.java:333) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.view.View.layout(View.java:6830) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.widget.FrameLayout.onLayout(FrameLayout.java:333) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.view.View.layout(View.java:6830) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.view.ViewRoot.performTraversals(ViewRoot.java:996) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.view.ViewRoot.handleMessage(ViewRoot.java:1633) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.os.Handler.dispatchMessage(Handler.java:99) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.os.Looper.loop(Looper.java:123) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at android.app.ActivityThread.main(ActivityThread.java:4363) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at java.lang.reflect.Method.invokeNative(Native Method) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at java.lang.reflect.Method.invoke(Method.java:521) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) 07-15 14:58:44.970: ERROR/AndroidRuntime(582): at dalvik.system.NativeStart.main(Native Method) Category.java - my equivalent to SimpleAdapter from Starkey's tutorial: package com.XYZ.ipantrylite; import java.util.HashMap; import java.util.Map; import android.app.Activity; import android.database.Cursor; import android.os.Bundle; import android.util.Log; import android.widget.ListView; import android.widget.SimpleCursorAdapter; public class Category extends Activity { public final static String ITEM_TITLE = "title"; public final static String ITEM_CAPTION = "caption"; public SeparatedListAdapter adapter; private static final String TAG = "Category"; public Map createItem(String title, String caption) { Map item = new HashMap (); item.put(ITEM_TITLE, title); item.put(ITEM_CAPTION, caption); return item; } @Override // protected void onCreate(Bundle savedInstanceState) { // // TODO Auto-generated method stub // super.onCreate(savedInstanceState); public void onCreate(Bundle icicle) { super.onCreate(icicle); // create our list and custom adapter adapter = new SeparatedListAdapter(this); fillData(); ListView list = new ListView(this); list.setTextFilterEnabled(false); list.setAdapter(adapter); this.setContentView(list); } private void fillData() { String[] types = new String[] { "Baby Food", "Baking Supplies", "Beverages", "Dairy Products & Eggs", "Fresh Produce, Fruits & Vegetables", "Canned, Dried, Frozen Goods", "Grains, Cereals, Breads, Pasta", "Herbs & Spices", "Misc Canned Goods", "Oils & Fats", "Prepackaged Foods", "Protein, Meat, Fish", "Snacks & Sweets", "Soups, Sauces, & Gravies", "Toiletries"}; for(int i = 0; i Line of code referred to in debugger at crash: Line 94 if(position
