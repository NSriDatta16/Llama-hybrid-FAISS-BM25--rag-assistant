[site]: stackoverflow
[post_id]: 4265303
[parent_id]: 4265132
[tags]: 
This is a single function, if the performance gain provides a significant benefit I would keep the ugly version. But as others mentioned, document it well and maybe include in a comment the small and beautiful version, so that people looking at the code can understand the choice. In this specific case it looks like the choice has no impact on a large architecture, it's just the implementation of a "leaf function", so if there is a valid reason I won't keep the slow version just for the sake of code aesthetics. I'm happy knowing that when I call the Sort function of some library it uses QuickSort instead of a two-lines super elegant but slow BubbleSort :-)
