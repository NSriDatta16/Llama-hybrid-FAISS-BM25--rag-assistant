[site]: stackoverflow
[post_id]: 1239888
[parent_id]: 1239855
[tags]: 
One way of working around the problem would be to replace the hardcoded 64 with a multiple of size(long), turning the padding into something like this: char pad[4*sizeof(unsigned long) - sizeof(internal_)]; It's ugly but it should be portable to 64-bit. That said, an API that requires the message size to be a power of 2 sounds a bit odd and like a design issue. Requiring the size being an even number makes sense as on some processors to pay quite a penalty for accessing data on odd addresses but your #pragma pack almost makes that inevitable.
