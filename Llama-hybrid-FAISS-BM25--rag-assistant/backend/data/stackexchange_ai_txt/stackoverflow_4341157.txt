[site]: stackoverflow
[post_id]: 4341157
[parent_id]: 
[tags]: 
Aggregate or summarize to get ratios

The following is a toy problem that demonstrates my question. I have a data frame that contains a bunch of employees; for each employee, it has a name, salary, gender and state. aggregate(salary ~ state) # Returns the average salary per state aggregate(salary ~ state + gender, data, FUN = mean) # Avg salary per state/gender What I actually need is a summary of the fraction of the total salary earned by women in each state. aggregate(salary ~ state + gender, data, FUN = sum) returns the total salary earned by women (and men) in each state ,but what I really need is salary_w / salary_total on a per-state level. I can write a for-loop, etc -- but I am wondering if there is some way to use aggregate to do that.
