[site]: stackoverflow
[post_id]: 2037376
[parent_id]: 
[tags]: 
Flaky file deletion under Windows 7?

I have a Python test suite that creates and deletes many temporary files. Under Windows 7, the shutil.rmtree operations sometimes fail ( It also looks like a timing issue between two threads or processes, but there is no concurrency here either. Two examples of (partial) stack traces: File "C:\ned\coverage\trunk\test\test_farm.py", line 298, in clean shutil.rmtree(cleandir) File "c:\python23\lib\shutil.py", line 142, in rmtree raise exc[0], (exc[1][0], exc[1][1] + ' removing '+arg) WindowsError: [Errno 5] Access is denied removing xml_1 File "C:\ned\coverage\trunk\test\test_farm.py", line 298, in clean shutil.rmtree(cleandir) File "c:\python23\lib\shutil.py", line 142, in rmtree raise exc[0], (exc[1][0], exc[1][1] + ' removing '+arg) WindowsError: [Errno 3] The system cannot find the path specified removing out On Windows XP, it never failed. On Windows 7, it fails like this, across a few different Python versions (2.3-2.6, not sure about 3.1). Anyone seen anything like this and have a solution? The code itself is on bitbucket for the truly industrious.
