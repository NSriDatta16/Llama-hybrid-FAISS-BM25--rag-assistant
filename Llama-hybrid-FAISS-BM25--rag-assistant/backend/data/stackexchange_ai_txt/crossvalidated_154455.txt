[site]: crossvalidated
[post_id]: 154455
[parent_id]: 
[tags]: 
Deriving mean of percentages from clustered data

I am getting into a roadblock about how to analyse this data set. I hope folks here will be able to give me some hints and suggestions. Here is an example of the data: I'm using sugar as the target nutrient. We recorded the three meals of a day, and figured out how many percent of total intake of sugar was contributed by each meal. I feel that averaging columns C, D, and E can be problematic because each person has different total sugar. So, I suppose weighting the total sugar then computing the mean of columns C through E would be a better approach. It worked out fine, I got the mean percentage with SE and the results made sense. Then suddenly, I was informed that the respondents could be related. And they provided me with the household id (column B.) Now, I am a bit confused because I have never face a situation that I need to control for clustering (probably through mixed model using household as random intercept) and weighting. My questions are: What would be your general advice in deriving the mean of these percentages? I'm afraid I've worked myself into an ivory tower. If there is such a thing as weighted mixed effects model, could you kindly point me to the technical documents? Either R, SPSS, Stata, or SAS is fine.
