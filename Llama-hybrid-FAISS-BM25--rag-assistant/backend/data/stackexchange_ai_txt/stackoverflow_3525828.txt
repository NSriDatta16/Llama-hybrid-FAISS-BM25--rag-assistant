[site]: stackoverflow
[post_id]: 3525828
[parent_id]: 3525810
[tags]: 
Event handlers run before default actions. Short of nasty tricks involving setTimeout you can't get the link to be followed before the function completes. Read this.href instead. That said, it sounds like you are using arbitrary fragment identifiers instead of URIs to sensible things. If so: I'd fix up the href so it points to a real URL that loads the image. Build on things that work .
