[site]: stackoverflow
[post_id]: 3935111
[parent_id]: 
[tags]: 
Content unparsed through Glassfish 3 though deployment descriptors appear correct

I have dropped a war into the autodeploy of a GlassFish 3 domain and it has exploded fine, showing a subdirectory tree domain1>applications>myApp under which is a WEB-INF>classes>myApp folder tree which stores the classes for myApp. The app originally used JSF1.2 and Facelets (1.1.15) and was deployed to tomcat 6, but I'm now trying a build using Java EE 6 and GlassFish v3. I know that Java EE 6 has JSF 2 onboard and Facelets so I've stripped out all the unnecessary jars from my app library leaving RichFaces, and Log4J jars and some Apache commons jars needed to support the app. The app deploys, but I've got this problem: The index.xhtml JSF file loads once the app deploys. The page content appears unparsed as the richfaces and jsf tags are ignored although the whole file is sent to the browser. The whole page is encapsulated in a ui:composition facelets tag. I've read elsewhere that this is because the page isn't going through the FacesServlet. Can anyone suggest what I need to do to my deployment descriptors to make this work if they are indeed the problem? My faces-config.xml has managed-bean setups only; my web.xml contains: Faces Servlet javax.faces.webapp.FacesServlet 1 Faces Servlet *.jsf javax.faces.DEFAULT_SUFFIX .xhtml among a load of other tags. My sun-web.xml contains: /MyApp Keep a copy of the generated servlet class java code. EDIT I pointed the browser at http://localhost:9090/myApp/index.jsf and the problem is unchanged, although in the server log I get this [#|2010-10-15T12:27:17.603+0100|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=29;_ThreadName=Thread-1;||STDOUT| 2010-10-15 12:27:17,603 | INFO | [http-thread-pool-9090-(12)]: Selected [org.ajax4jsf.cache.LRUMapCacheFactory] cache factory |#] [#|2010-10-15T12:27:17.603+0100|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=29;_ThreadName=Thread-1;||STDOUT| 2010-10-15 12:27:17,603 | INFO | [http-thread-pool-9090-(12)]: Creating LRUMap cache instance using parameters: {javax.faces.DEFAULT_SUFFIX=.xhtml, com.sun.faces.validateXml=true, com.sun.faces.forceLoadConfiguration=true, facelets.RECREATE_VALUE_EXPRESSION_ON_BUILD_BEFORE_RESTORE=true, org.richfaces.LoadStyleStrategy=ALL, javax.faces.STATE_SAVING_METHOD=server, org.richfaces.CONTROL_SKINNING=enable, org.richfaces.SKIN=glassX, org.richfaces.CONTROL_SKINNING_CLASSES=enable} |#] [#|2010-10-15T12:27:17.603+0100|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=29;_ThreadName=Thread-1;||STDOUT| 2010-10-15 12:27:17,603 | INFO | [http-thread-pool-9090-(12)]: Creating LRUMap cache instance of default capacity |#] [#|2010-10-15T12:27:17.635+0100|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=29;_ThreadName=Thread-1;||STDOUT| 2010-10-15 12:27:17,635 | INFO | [http-thread-pool-9090-(12)]: Selected [org.ajax4jsf.cache.LRUMapCacheFactory] cache factory |#] [#|2010-10-15T12:27:17.635+0100|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=29;_ThreadName=Thread-1;||STDOUT| 2010-10-15 12:27:17,635 | INFO | [http-thread-pool-9090-(12)]: Creating LRUMap cache instance using parameters: {javax.faces.DEFAULT_SUFFIX=.xhtml, com.sun.faces.validateXml=true, com.sun.faces.forceLoadConfiguration=true, facelets.RECREATE_VALUE_EXPRESSION_ON_BUILD_BEFORE_RESTORE=true, org.richfaces.LoadStyleStrategy=ALL, javax.faces.STATE_SAVING_METHOD=server, org.richfaces.CONTROL_SKINNING=enable, org.richfaces.SKIN=glassX, org.richfaces.CONTROL_SKINNING_CLASSES=enable} |#] [#|2010-10-15T12:27:17.635+0100|INFO|glassfish3.0.1|javax.enterprise.system.std.com.sun.enterprise.v3.services.impl|_ThreadID=29;_ThreadName=Thread-1;||STDOUT| 2010-10-15 12:27:17,635 | INFO | [http-thread-pool-9090-(12)]: Creating LRUMap cache instance of default capacity so it looks like it likes the faces-config.xml contents but it's still not rendering. To confirm, I've specified *.jsf in my web.xml deployment descriptor, my javax.faces.DEFAULT_SUFFIX has a param-value of .xhtml and my welcome page and all other web content pages end .xhtml . Is there any significance in the server returning the same info twice? Thanks for your help. EDIT 2 The richfaces-[api|impl-jsf2|ui]-3.3.3.Final jars are in the lib, along with jsf-facelets.jar which is 1.1.15 as recommended here . My web-app descriptor is version="2.5" . Because of the fact that I needed to include 1.1.15 of Facelets, and I'm using GlassFish 3 ie. Java EE 6, I've tried setting to false to try and get my Facelets 1.1.15 jar picked up and used as a preference by the class loader, but it hasn't made any difference. The faces-config.xml is set to version="2.0" :
