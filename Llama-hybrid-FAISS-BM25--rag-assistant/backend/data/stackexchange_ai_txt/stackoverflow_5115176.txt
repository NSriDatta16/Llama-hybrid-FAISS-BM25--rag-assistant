[site]: stackoverflow
[post_id]: 5115176
[parent_id]: 
[tags]: 
PrimeFaces and JasperReports

i'm trying to develop a web app for reporting, and have built a site with EJB3 + primefaces already. Now i'm head aching how to integrate Jasperreport into primefaces... I found no guide or discussion about this topic, I wonder is it not possible? or actually it is not a right way to do? I'm actually quite new to develop JavaEE6, dont plan to use frameworks like spring and seam yet. model @Stateless @LocalBean public class BookEJB { // @Override public void printReport() throws ClassNotFoundException, IOException, JRException, SQLException { Connection connection; Map parameterMap = new HashMap(); FacesContext ctx = FacesContext.getCurrentInstance(); HttpServletResponse response = (HttpServletResponse) ctx .getExternalContext().getResponse(); InputStream reportStream = ctx.getExternalContext() .getResourceAsStream("reports/report1.jasper"); ServletOutputStream servletOutputStream = response.getOutputStream(); Class.forName("com.mysql.jdbc.Driver"); connection = DriverManager.getConnection("jdbc:mysql://localhost/bookdb?user=root&password=******"); ctx.responseComplete(); response.setContentType("application/pdf"); JasperRunManager.runReportToPdfStream(reportStream, servletOutputStream, parameterMap, connection); connection.close(); servletOutputStream.flush(); servletOutputStream.close(); } } Controller @ManagedBean(name = "bookCtrl") @RequestScoped public class BookController { @EJB private BookEJB bookEJB; public void doPrintReport() throws ClassNotFoundException, IOException, JRException, SQLException { bookEJB.printReport(); } } view (JSF) Jasper The error occurred when I click the button of JSF, below log is from glassfish WARNING: A system exception occurred during an invocation on EJB BookEJB method public void blah.BookEJB.printReport() throws java.lang.ClassNotFoundException,java.io.IOException,net.sf.jasperreports.engine.JRException,java.sql.SQLException javax.ejb.EJBException..... SEVERE: javax.ejb.EJBException javax.faces.el.EvaluationException: javax.ejb.EJBException at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:102) WARNING: #{bookCtrl.doPrintReport}: javax.ejb.EJBException javax.faces.FacesException: #{bookCtrl.doPrintReport}: javax.ejb.EJBException... Caused by: javax.faces.el.EvaluationException: javax.ejb.EJBException... SEVERE: javax.faces.FacesException: #{bookCtrl.doPrintReport}: javax.ejb.EJBException... Caused by: javax.faces.FacesException: #{bookCtrl.doPrintReport}: javax.ejb.EJBException... Caused by: javax.faces.el.EvaluationException: javax.ejb.EJBException... Caused by: javax.ejb.EJBException... Caused by: java.lang.NullPointerException... WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception java.lang.IllegalStateException: PWC3991: getOutputStream() has already been called for this response..... WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception java.lang.IllegalStateException: PWC3991: getOutputStream() has already been called for this response..... WARNING: StandardWrapperValve[Faces Servlet]: PWC1406: Servlet.service() for servlet Faces Servlet threw exception java.lang.IllegalStateException: PWC3991: getOutputStream() has already been called for this response.....
