[site]: crossvalidated
[post_id]: 506369
[parent_id]: 115011
[tags]: 
Here's a hybrid of the two previous solutions. The variance of the $i$ th residual, by @Glen_b's answer, is $$\operatorname{Var}(y_i-\hat y_i)=\sigma^2(1-h_{ii})$$ where $h_{ii}$ is the $(i,i)$ entry of the hat matrix $H:=X(X^TX)^{-1}X^T$ . This entry can be computed as the multiplication $$h_{ii}=(X)_{i\bullet}\ (X^TX)^{-1}\ (X^T)_{\bullet i}$$ where $(X)_{i\bullet}$ denotes row $i$ of matrix $X$ , and $(X^T)_{\bullet i}$ denotes column $i$ of matrix $X^T$ (i.e., row $i$ of $X$ as a column vector). To simplify @AlecosPapadopoulos's calculation of $(X^TX)^{-1}$ , the trick is to observe that the residual vector remains unchanged if we switch the regression model to: $$y_i=\beta_0+\beta_1(x_i-\bar x)+u_i.$$ (In essence we've shifted the $x$ values so that they average to zero.) The design matrix for this model is $$ X=\begin{pmatrix}1&x_1-\bar x\\ 1&x_2-\bar x\\ \vdots&\vdots\\ 1&x_n-\bar x\end{pmatrix},$$ and it is straightforward to calculate: $$ X^TX=\begin{pmatrix}n&0\\ 0&S_{xx}\end{pmatrix},\qquad (X^TX)^{-1}=\begin{pmatrix}\frac1n&0\\0&\frac1{S_{xx}}\end{pmatrix}$$ and finally $$ h_{ii}= \begin{pmatrix}1 &x_i-\bar x\end{pmatrix} \begin{pmatrix}\frac1n&0\\0&\frac1{S_{xx}}\end{pmatrix} \begin{pmatrix}1 \\x_i-\bar x\end{pmatrix} =\frac1n +\frac{(x_i-\bar x)^2}{S_{xx}}. $$
