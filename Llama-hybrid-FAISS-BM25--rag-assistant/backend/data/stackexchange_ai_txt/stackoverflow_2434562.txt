[site]: stackoverflow
[post_id]: 2434562
[parent_id]: 1079619
[tags]: 
This is what I use: # feature Scenario: creator archives fragment When fragment 1 exists And I am the fragment owner And I am on fragment 1 #steps def create_fragment(attribs) force_id = attribs[:force_id] attribs.delete(:force_id) if force_id fragment = Fragment.create!({ :owner_id => @current_user.id, :originator_id => @current_user.id}.merge(attribs)) if force_id fragment.id = force_id.to_i fragment.save! end fragment end When /^fragment (.*) exists$/ do |frag| @fragment = Fragment.find_by_id(frag) @fragment.destroy if @fragment @fragment = create_fragment(:force_id => frag.to_i,:description => "test fragment #{frag}",:narrative => "narrative for fragment #{frag}") end # paths.rb when /fragment (.*)/ fragment_path($1) Have fun.
