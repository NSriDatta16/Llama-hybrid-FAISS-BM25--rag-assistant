[site]: stackoverflow
[post_id]: 4834223
[parent_id]: 4834184
[tags]: 
Here are the changes you requested: Rating Tool Test '; if ( (!isset($_POST['submit'])) ) { echo ' Your Rating: '; for ($i = 1; $i $i "; } echo ' '; } $rate = isset ($_POST['rate']) ? $_POST['rate'] : 0; $filename = "ratings"; $alreadyRated = false; $totalRates = 0; $totalPoints = 0; $ip = getenv('REMOTE_ADDR'); $oldResults = file('results/'.$filename.'.txt'); foreach ($oldResults as $value) { $oneRate = explode(':',$value); if ($ip == $oneRate[0]) $alreadyRated = true; $totalRates++; $totalPoints += $oneRate[1]; } if ((!$alreadyRated) && ($rate > 0)){ $f = fopen('results/'.$filename.".txt","a+"); fwrite($f,$ip.':'.$rate."\n"); fclose($f); $totalRates++; $totalPoints+=$rate; } echo 'Total Average Rating: '.substr(($totalPoints/$totalRates),0,3).' Out Of 5. Total Votes: '.$totalRates.' '; for ($i=0;$i '; } echo ' '; ?>
