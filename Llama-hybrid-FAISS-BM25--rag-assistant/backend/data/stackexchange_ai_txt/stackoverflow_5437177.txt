[site]: stackoverflow
[post_id]: 5437177
[parent_id]: 
[tags]: 
cURL on local dev network problem with virtual host naming

Trying to do some local testing on a virtual server, the problem is cURL is returning a http_code => 0 I think it's to do with my virtual host naming. Virtual Host Name: dev.project the cURL request is adding http:// if I ping: dev.project from the command line, I get a hit. If I try it with http://dev.project I get unknown host. Is there a curl_setopt option just to use the hostname? I'm no sure if I can use the IP as there are several projects on the server, or would Apache handle this? Here is what I have tried: $request_url = 'dev.project'; $request_args = 'parm=1234'; $user_agent = 'Mozilla/5.0 (X11; U; Linux i686; en-US) AppleWebKit/534.16 (KHTML, like Gecko) Chrome/10.0.648.151 Safari/534.16'; $ch = curl_init(); // set curl options (GET) curl_setopt($ch, CURLOPT_URL, $request_url.'?'.$request_args); curl_setopt($ch, CURLOPT_HEADER, FALSE); //curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE); //curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); //curl_setopt($ch, CURLOPT_FAILONERROR, TRUE); //curl_setopt($ch, CURLOPT_USERAGENT, $user_agent); //curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt"); //curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt"); //curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); // CHANGE THIS TO TRUE // Set curl options (POST) //curl_setopt($ch, CURLOPT_URL, $request_url); //curl_setopt($ch, CURLOPT_POST, TRUE); //curl_setopt($ch, CURLOPT_POSTFIELDS, $request_args); //curl_setopt($ch, CURLOPT_FOLLOWLOCATION, TRUE); //curl_setopt($ch, CURLOPT_RETURNTRANSFER, TRUE); //curl_setopt($ch, CURLOPT_USERAGENT, $user_agent); //curl_setopt($ch, CURLOPT_COOKIEJAR, "cookie.txt"); //curl_setopt($ch, CURLOPT_COOKIEFILE, "cookie.txt"); //curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); $response = curl_exec($ch); echo " ".print_r($response,true)." \n"; // nothing is returned print_r(curl_getinfo($ch)); curl_close($ch); Response from curl_getinfo() : (NOTE: the http:// is pre-pended in the url) Array ( [url] => http://dev.project?parm=1234 [http_code] => 0 [header_size] => 0 [request_size] => 0 [filetime] => -1 [ssl_verify_result] => 0 [redirect_count] => 0 [total_time] => 0 [namelookup_time] => 0 [connect_time] => 0 [pretransfer_time] => 0 [size_upload] => 0 [size_download] => 0 [speed_download] => 0 [speed_upload] => 0 [download_content_length] => 0 [upload_content_length] => 0 [starttransfer_time] => 0 [redirect_time] => 0 )
