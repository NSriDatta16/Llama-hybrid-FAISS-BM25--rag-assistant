[site]: stackoverflow
[post_id]: 4159979
[parent_id]: 
[tags]: 
Send file for conversion to least loaded server, based on load and probability(in php)

I have several ffmpeg processing servers that do conversions of video files. I have a poller that grabs the load averages from these servers, and updates a mysql table with them, every 5 minutes. I could just say... give me server with lowest load, but the problem with that, in those 5 minutes, it might queue 20 files to be converted on that 1 server, while the other servers which might free up in 10 minutes, will be idle. So i wanted to add a probability aspect to the selection of the least loaded server, so the least loaded server has a high chance of getting selected, but other servers will still get something.
