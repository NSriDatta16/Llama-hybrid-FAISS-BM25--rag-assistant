[site]: stackoverflow
[post_id]: 4614434
[parent_id]: 
[tags]: 
How can I use XPath and DOM to replace a node/element in php?

Say I have the following html $html = ' some text some text some text some text some text some text '; And I want to replace #old_div with the following: $replacement = ' this is new '; To give an end result of: $html = ' this is new '; Is there an easy cut-and-paste function for doing this with PHP? Final working code thanks to all Gordon's help: some text some text some text some text some text some text HTML; $dom = new DOMDocument; $dom->loadXml($html); // use loadHTML if it's invalid XHTML //create replacement $replacement = $dom->createDocumentFragment(); $replacement ->appendXML(' this is new '); //make replacement $xp = new DOMXPath($dom); $oldNode = $xp->query('//div[@id="old_div"]')->item(0); $oldNode->parentNode->replaceChild($replacement , $oldNode); //save html output $new_html = $dom->saveXml($dom->documentElement); echo $new_html; ?>
