[site]: crossvalidated
[post_id]: 355983
[parent_id]: 355978
[tags]: 
Interpreting the question as @whuber did in his comment, here is a quite vague hint: https://en.wikipedia.org/wiki/Law_of_total_expectation Edit after the spoilers: graphical illustration of the application of the hint, as well as shorter version of Ben's answer: Here are the two dependent random variables $X$ and $Y$. You can see the distribution of $Y$ "sliced" at some values of $X$. The law of total expectation says, that if you want to integrate an expression of $X$ and $Y$, then you can first integrate it on each slice, and then integrate over the slices. Which is very handy in this case. The expression of the question at a slice $x_0$ becomes $E((Y|X=x_0) - g(x_0))^2$, and it is well known (and mentioned by you in the question), that it is minimized by the average $g(x_0) = E(Y|X=x_0)$. Since such $g$ minimizes the value of the expression at every slice, it minimizes the slice integral as well.
