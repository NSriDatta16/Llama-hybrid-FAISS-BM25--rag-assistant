[site]: stackoverflow
[post_id]: 3129972
[parent_id]: 
[tags]: 
How should I implement a database cron job logger?

I use PHP and Oracle, with crontab executing the PHP scripts at scheduled times. My current logging/auditing solution involves simple log files. I'd like to save my cron execution logs to a database instead. Right now I'm trying to design the process so that when a cron job starts I create a record in an CronExecution table. Then every time I want to log something for that cron I'll put a record in a CronEvent table which will have a foreign key to the CronExecution table. I plan to log all events using a PRAGMA AUTONOMOUS pl/sql procedure. With this procedure I will be able to log events inside of other pl/sql procedures and also from my PHP code in a consistent manner. To make it more robust, my plan is to have a fallback to log errors to a file in the event that the database log calls fail. Has anybody else written something similar? What suggestions do you have based on your experience?
