[site]: stackoverflow
[post_id]: 3907780
[parent_id]: 3907414
[tags]: 
If SELECT prodid, uid FROM usermap produces 500K rows, but the SQL in your question produces 4 million rows, it means that each value of prodid is found (on average) in 8 rows of the table locmapping. That is causing the original 500K rows to be multiplied by 8 and those rows are coming back with a variety of catid values. If locmapping is intended to provide a single catid per prodid, you should protect the prodid column in that table with a UNIQUE index.
