[site]: crossvalidated
[post_id]: 530783
[parent_id]: 
[tags]: 
emmeans: compare treatment effect across two levels of a category

I want to compare the difference between treatment and placebo across two levels of a factor, lets say gender. This, to answer the question whether there is a significant difference in treatment effect across the two levels of gender. The input to emmeans() is a repeated measures gls() model with a biomarker as an outcome. The biomarker was measured over multiple visits. Currently I use the following code: emmeans(gls.fit, specs = trt.vs.ctrl ~ TREATMENT|GENDER) This returns the treatment effect for each level of gender, but not the difference in effect. I also tried: emm1 con contrast(con, "pairwise", by = "GENDER") The latter appears to give an estimate for the TREATMENT:GENDER interaction similar to the original gls() model averaged across visits. This confuses me, because I though the gls coefficient only looks at the interaction, as it returns separate coefficients for all the visits. What is the correct approach? I can calculate the difference manually using the first approach and the standard errors, but this is kinda cumbersome and doesn't give a p-value. Thank you.
