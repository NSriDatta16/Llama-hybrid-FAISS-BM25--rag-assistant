[site]: stackoverflow
[post_id]: 779517
[parent_id]: 
[tags]: 
A CFML variable name cannot end with a "." character error

I get this error when posting a form. The strangest thing, though, is that this error only occurs in Chrome and Safari. FF, IE and Opera all post the form without a problem. The Stack Trace does not point to a file to where this error occurs. A cfdump of cfcatch gives me some insight as to what the problem is, but I can't find any instance of where the problem actually exists. Here's the partial dump: Column 1 Detail The variable attributes. ends with a "." character. You must supply an additional structure key or delete the "." character. KnownColumn -1 KnownLine -1 KnownText "unknown" Line 1 Message A CFML variable name cannot end with a "." character. Here's the code handling the posted data. Everything is wrapped inside cftransaction and there's a loop, not sure why it's not being displayed. (thanks Peter Boughton for clearing that up) DELETE FROM ProductListings_categories WHERE listingID = SELECT categoryID FROM categories WHERE CategoryName = INSERT into Categories ( categoryname, dateCreated ) VALUES ( , ) SELECT LAST_INSERT_ID() as newID FROM Categories INSERT into ProductListings_categories ( listingID, CategoryID ) VALUES ( , ) Any insight would be great. Thanks! Here's the form and the Javascript. I haven't had a chance to rewrite the code by the previous developer (up until this point, it was working, so there was no need to visit the code in the first place), but CFFORM isn't used, nor are other CF form items. Various JS functions are used for AJAX calls and are included as well. Step 2: First, choose a top-level category This category will show up as the first tag on your listing. 1. selected="selected" >#capFirstTitle(ReplaceNoCase(getTopCats.categoryName, "_"," ", "all"))# Add a tag 2. //some variables var listCount=1; var tagLimit=14; var maxSuggestions=100; var allTags=new Array(); var allTags=new Array(); var allTagPointers=new Array(); var currentTags=0; // XML document var xmlDoc; var req; //this function will run anything upon page load function addLoadEvent(func) { var oldonload = window.onload; if (typeof window.onload != 'function') { if(func)window.onload = func; } else { window.onload = function() { oldonload(); func(); } } } //let's rebuild the page! addLoadEvent(rebuildTags()); function rebuildTags() { //grab the tag tree left for us by PHP var passedTags=document.getElementById('tagInput').value; //only run if we got a value if(passedTags.replace(/^\s+|\s+$/g, "")) { //split the string into an array passedTags=passedTags.split("."); //run functions to rebuild the world mainCategorySelector(passedTags[0]); for(var i=1;i x '; newDiv.className='list_tag'; var newReccomendDiv=makeRelatedDiv(relatedTags); //let's give IDs to all of the new divs so we can't kill 'em later newDiv.setAttribute('id','tagDiv'+listCount); newReccomendDiv.setAttribute('id','reccomendDiv'+listCount); //add new divs to the master list tagLand.appendChild(newNumberDiv); tagLand.appendChild(newDiv); tagLand.appendChild(newReccomendDiv); //remove and re-append the input div to keep it at the end var inputDiv=document.getElementById('inputDiv'); tagLand.removeChild(inputDiv); tagLand.appendChild(inputDiv); //make the inputDiv visible if it is not already inputDiv.style.visibility='visible'; //run the reorderizer reorderizer(); //clear input field document.getElementById('newTag').value=""; document.getElementById('newTag').focus(); } } } } //removes a tag from the list -- called through the "x" link on each tag function removeTag(tagNumber) { //get master div var tagLand=document.getElementById('tagLand'); //get reference to all three divs that make up a tag listing var deathRowNumberDiv=document.getElementById('number_'+tagNumber); var deathRowTagDiv=document.getElementById('tagDiv'+tagNumber); var deathRowReccomendDiv=document.getElementById('reccomendDiv'+tagNumber); //any last words, boys? tagLand.removeChild(deathRowNumberDiv); tagLand.removeChild(deathRowTagDiv); tagLand.removeChild(deathRowReccomendDiv); //find where we are in the master array var tagIndex=getArrayIndex(allTagPointers,tagNumber); //splice this tag out of master tag array allTags.splice(tagIndex,1); allTagPointers.splice(tagIndex,1); updateForm(); //alert(allTags.join(".")); //since we just changed the page structure, let's run reorderizer //run the reorderizer reorderizer(); //make the inputDiv visible if we're below the tag limit var inputDiv=document.getElementById('inputDiv'); if(currentTags Add related tags: '; var numTags=0; //loop through suggested tag array for ( keyVar in relatedTags ) { //add comma if necessary if(numTags) { newReccomendDiv.innerHTML+=", "; } newReccomendDiv.innerHTML+=' '+relatedTags[keyVar]+' '; numTags++; } return newReccomendDiv; } function mainCategorySelector(tag) { //only run if we're not the dead selection if(tag!="- - -") { //query server and get list of related tags //random number to kill the cache var cacheKiller=Math.random(); xmlDoc=ajaxRequest("/sell/get_categories_xml/tag/"+tag+"/random/"+cacheKiller); relatedTags=new Array; var root=xmlDoc.getElementsByTagName('root')[0]; var tags=root.getElementsByTagName('tag'); for(var i=0;(i tagLimit) { var inputDiv=document.getElementById('inputDiv'); inputDiv.style.visibility='hidden'; } else { //after looping through dynamic list entries, let's change the submit field's number too var number_last=document.getElementById('number_last'); if(number_last) { number_last.innerHTML=displayNumber+"."; } } } function pausecomp(millis) { date = new Date(); var curDate = null; do { var curDate = new Date(); } while(curDate-date
