[site]: stackoverflow
[post_id]: 4475872
[parent_id]: 
[tags]: 
How to preserve browser history in a photo gallery like facebook does?

I'm developing a photo gallery that uses ajax . I'm using _escaped_fragment_ (#!) too, it already works but when you use the back and fwd browser buttons the url change (the hash fragment) but the image doesn't. I read about the onHashChange event but i wanto to know if there's an automatic way to do this, i mean, if there's a way to preserve the DOM changes in the history just like Facebook does. I change the hash fragment with: window.location.hash = "!"+sth I load ajax content retrieving the hash fragment and using it as index of my photo: var fragment = window.location.hash.replace("#!",""); if (fragment != ""){ currentItem = fragment; currentItemBZ = fragment-1; focused = currentItemBZ; } Any help or suggestion will be appreciated
