[site]: stackoverflow
[post_id]: 4943403
[parent_id]: 4941210
[tags]: 
Sure, when you try to add a comment and a log entry in a single transaction the ID of Comment isn't yet generated, unless you use "Manual ID assignment" approach or flush your session to persist changes you made. In your original post there is no "Flush" after you add the comment and you want to add the log for that comment (for which ID isn't defined yet). Not sure about why Nhibernate takes such a reverse order but seems like its at least an ID generation issue. Another thing that caught my attention is that you use Comment and Args.Comment side by side. What is difference? Anyway, if Comment is somewhat your domain entity, you have to: Insert it; Make sure it is attached to the current ISession (you should have the session-attached Comment entity object available) ; Use exatly that entity (which is in repository already) for log entry (NHibernate will take care of relations).
