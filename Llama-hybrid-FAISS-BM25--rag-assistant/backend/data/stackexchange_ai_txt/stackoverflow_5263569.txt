[site]: stackoverflow
[post_id]: 5263569
[parent_id]: 
[tags]: 
How to optimize count of new posts in favorites

I would like to say, that I will be glad for any reply. I will try to structure my text for better understanding. Situation I run thematic internet forum, where you can add topics as your favorites in the menu and the menu shows the number of new posts in these topics. So everytime you reload the page (go anywhere on the whole site), new posts for all topics in your favorites are checked. Problem This is of course quite expensive on DB, because it is common to have 20-50 favorites and I have to check the DB if any post was added in any of these topics. The average topic has 1000-2000 posts. And this happens for every pageview for every user which is approximately 900 000 pageviews per month. Possible solution 1 I store number of total posts in every topic and I store number of last viewed posts for every topic, for every user. This may be fastest, but it has a lot of disadvantages, which are functional (deleting, filtering of posts, etc.). Possible solution 2 I store id of last viewed post for every topic, for every user. This is very good solution, but about ten times slower then previous one. Database I store all posts for all topics in one huge table = hunderds of thousands of posts. Question I would like to remove problems that brings solution 1, but I need to keep the speed. I thought of creating a table for each topic and use Solution 2, but I dont know if it will help. So if you have any experiences please just tell me what would be the fastest solution. Thank you very much.
