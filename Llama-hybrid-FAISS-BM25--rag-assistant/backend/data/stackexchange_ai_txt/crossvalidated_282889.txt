[site]: crossvalidated
[post_id]: 282889
[parent_id]: 
[tags]: 
Confusion: Conditioning a Discrete rv on a Continuous rv, "Sampling Importance Resampling"

Background In Introducing Monte Carlo Methods with R by Robert and Casella, in the discussion on "Sampling Importance Resampling", I'm confused by the following argument. Suppose $f$ and $g$ are pdfs. Sample $X_1 , X_2, \ldots, X_n \sim g$ and then define $X^* = X_i $ with probability $f(X_i)/(ng(X_i))$ (assume for now these probabilities sum to $1$, and I also remark that I assume the authors intend to say they are defining the conditional distribution $X^*|X_1, \ldots, X_n$ even though not stated explicitly...) The argument is that $ \begin{aligned} Pr(X^* \in A)&= \sum_{i=1}^n Pr(X^* \in A \text{ and } X^* = X_i) \\ &= \int_{A}\frac{f(x)}{g(x)}g(x) dx \\ &= \int_A f(x) dx \end{aligned} $ so that creating $X^*$ in this way is a valid way to create draws from $f$. (They then talk about how the ratios $f(X_i)/(ng(X_i))$ must be normalized, but that's not important for my source of confusion.) My Question I'm confused by the step that $Pr(X^* \in A \text{ and } X^* = X_i) = \int_A \frac{f(x)}{n g(x)}g(x) dx = \int_A \frac{f(x)}{n} dx$ because $X_i$ is continuous and $X^*$ is discrete. If they were both discrete, and we momentarily considered $g$ a probability MASS function, $ \begin{aligned} Pr(X^* \in A \text{ and } X^* = X_i) &= Pr(X_i \in A \text{ and } X^* = X_i) \quad \text{ (The event sets are the same )}\\ &= \sum_{a\in A} Pr(X_i =a \text{ and } X^* = X_i) \\ &= \sum_{a\in A} Pr(X_i = a)P(X^* = X_i \mid X_i = a) \\ &= \sum_{a\in A} g(a)\frac{f(a)}{ng(a)}\\ &= \sum_{a\in A} \frac{f(a)}{n}.\\ \end{aligned} $ Now if I converted the sum to an integral, then my proof would be complete. Thus, on a heuristic level, I know how to complete this argument. The problem is I fundamentally don't understand how this argument translates to a continuous $X_i$ . In such a case, there is no notion of $P(X^* = X_i \mid X_i = a)$ because when $X_i$ is continuous, this leads to a division by zero $(P(X_i = a) =0)$. How do I understand this with continuous $X_i$?
