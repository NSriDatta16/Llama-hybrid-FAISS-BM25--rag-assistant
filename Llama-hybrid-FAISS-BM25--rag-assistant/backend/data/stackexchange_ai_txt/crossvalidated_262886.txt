[site]: crossvalidated
[post_id]: 262886
[parent_id]: 
[tags]: 
How to properly calculate the cross-correlation?

I'm writing a simple C program that calculates the cross-correlation between two data sets. Although I've done a good search on how the calculation should be performed, I couldn't figure out some important details. I'm particularly concerned about the average calculation. It seems that some algorithms utilize the average of the entire data set to perform the correlation calculation for every shift (or delay). In other words, they use a constant average. I've even found some algorithms that calculate the denominator just once, using it as a constant value for the rest of the delays. However, I believe that both average and denominator should be calculated iteratively, considering only the data inside the superposition range, but I'm not sure of that. So, in order to clear up this doubt, I want to know: 1 - Should I first calculate the average taking into account the entire data sets, and then use these values for all lag calculations? Or should I calculate the average for every individual step (lag), taking into account only the points inside their respective overlaps? 2 - Same as above, but for the denominator of the correlation equation. Here are some references: http://www.jot.fm/issues/issue_2010_03/column2.pdf http://paulbourke.net/miscellaneous/correlate/
