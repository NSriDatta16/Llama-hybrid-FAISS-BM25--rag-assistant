[site]: stackoverflow
[post_id]: 2695440
[parent_id]: 2695012
[tags]: 
It can not possibly know how will I implement these functions in some other compilation unit. This is the key - since the compiler cannot know (in general) about the implementation of the function calls, it can't move the store to _field outside those function calls. Generally, since _field is accessible outside of SomeClass::store() (it's not a local), the compiler can't know whether or not it's modified by the external function, therefore it must perform the store to _field between the function call sequence points. The underlying hardware platform might need some attention in the form of memory barriers or cache flushes to deal with caching or out of order operations that occur in the hardware. The platform's implementation of the mutex APIs will deal with those issues if necessary.
