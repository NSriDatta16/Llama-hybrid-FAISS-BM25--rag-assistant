[site]: stackoverflow
[post_id]: 3853435
[parent_id]: 
[tags]: 
How to config kannel gateway to receive messages from mobile phone?

I'm using Kannel as an SMS gateway to send and receive SMS messages. I have downloaded, installed, and configured Kannel according to the document guided. I can send an SMS by typing http://localhost:13013/cgi-bin/sendsms?username=tester&password=foobar&from= "from number" &to= "to number" &text=Testing in a browser. However, when I send an SMS from a phone to the gateway, I got the error ERROR: request failed . I'm using Kannel 1.4.3 installed on Ubuntu 10.04 LTS. I use a wavecom modem whose model is WAVECOM FASTRACK type DUAL BRANCH MODEM connected to kannel via serial port. Should you need further information, please let me know. I'm really thankful for your help. Kannel.conf group = core admin-port = 13000 admin-password = bar smsbox-port = 13001 smsbox-port-ssl = false log-file = "/tmp/kannel.log" log-level = 0 access-log = "/home/sambath/kannel/access.log" access-log-clean = true # SMSC GSM group = smsc smsc = at smsc-id = abc modemtype = wavecom device = /dev/ttyUSB0 pin = 0000 alt-charset = "ASCII" group = modems id = wavecom name = "wavecom" detect-string = "wavecom" message-storage = sm speed = 115200 # SMSBOX SETUP group = smsbox bearerbox-host = localhost sendsms-port = 13013 sendsms-chars = "0123456789 +-" log-file = "/tmp/smsbox.log" #log-level = 0 access-log = "/home/sambath/kannel/access.log" mo-recode = true # SEND-SMS USERS group = sendsms-user username = tester password = foobar access.log 2010-10-04 14:36:30 Log begins Receive SMS [SMSC:abc] [SVC:] [ACT:] [BINF:] [FID:] [from:+85516635262] [to:1234] [flags:-1:0:-1:0:-1] [msg:5:Hello] [udh:0:] Sent SMS [SMSC:abc] [SVC:] [ACT:] [BINF:] [FID:] [from:1234] [to:+85516635262] [flags:-1:0:-1:-1:-1] [msg:14:Request Failed] [udh:0:] 2010-10-04 14:36:55 Log ends Receive SMS [SMSC:abc] [SVC:] [ACT:] [BINF:] [FID:] [from:+85516635262] [to:1234] [flags:0:0:-1:0:-1] [msg:113:Your message on has been received by +85516635262 on Thank you for using hello.] [udh:0:] kannel.log 2010-10-04 14:36:15 [2524] [0] INFO: Added logfile `/tmp/kannel.log' with level `0'. 2010-10-04 14:36:15 [2524] [0] INFO: Started access logfile `/home/sambath/kannel/access.log'. 2010-10-04 14:36:15 [2524] [0] INFO: SSL not supported, no SSL initialization done. 2010-10-04 14:36:15 [2524] [0] INFO: HTTP: Opening server at port 13000. 2010-10-04 14:36:15 [2524] [0] DEBUG: Started thread 1 (gwlib/fdset.c:poller) 2010-10-04 14:36:15 [2524] [1] DEBUG: Thread 1 (gwlib/fdset.c:poller) maps to pid 2524. 2010-10-04 14:36:15 [2524] [0] DEBUG: Started thread 2 (gwlib/http.c:server_thread) 2010-10-04 14:36:15 [2524] [2] DEBUG: Thread 2 (gwlib/http.c:server_thread) maps to pid 2524. 2010-10-04 14:36:15 [2524] [0] DEBUG: Started thread 3 (gw/bb_http.c:httpadmin_run) 2010-10-04 14:36:15 [2524] [3] DEBUG: Thread 3 (gw/bb_http.c:httpadmin_run) maps to pid 2524. 2010-10-04 14:36:15 [2524] [0] DEBUG: starting smsbox connection module 2010-10-04 14:36:15 [2524] [0] INFO: BOXC: 'smsbox-max-pending' not set, using default (100). 2010-10-04 14:36:15 [2524] [0] DEBUG: Started thread 4 (gw/bb_boxc.c:sms_to_smsboxes) 2010-10-04 14:36:15 [2524] [4] DEBUG: Thread 4 (gw/bb_boxc.c:sms_to_smsboxes) maps to pid 2524. 2010-10-04 14:36:15 [2524] [0] DEBUG: Started thread 5 (gw/bb_boxc.c:smsboxc_run) 2010-10-04 14:36:15 [2524] [5] DEBUG: Thread 5 (gw/bb_boxc.c:smsboxc_run) maps to pid 2524. 2010-10-04 14:36:15 [2524] [0] INFO: Set SMS resend frequency to 60 seconds. 2010-10-04 14:36:15 [2524] [0] INFO: SMS resend retry set to unlimited. 2010-10-04 14:36:15 [2524] [0] DEBUG: smsbox MO concatenated message handling enabled 2010-10-04 14:36:15 [2524] [0] INFO: DLR rerouting for smsc id disabled. 2010-10-04 14:36:15 [2524] [0] INFO: AT2[abc]: configuration shows modemtype 2010-10-04 14:36:15 [2524] [0] DEBUG: AT2[abc]: Reading modem definitions from 2010-10-04 14:36:15 [2524] [0] DEBUG: AT2[abc]: Found modems in config 2010-10-04 14:36:15 [2524] [0] INFO: AT2[abc]: read modem definition for 2010-10-04 14:36:15 [2524] [0] DEBUG: Started thread 6 (gw/smsc/smsc_at.c:at2_device_thread) 2010-10-04 14:36:15 [2524] [6] DEBUG: Thread 6 (gw/smsc/smsc_at.c:at2_device_thread) maps to pid 2524. 2010-10-04 14:36:15 [2524] [0] DEBUG: Started thread 7 (gw/bb_smscconn.c:sms_router) 2010-10-04 14:36:15 [2524] [6] INFO: AT2[abc]: trying to use speed from modem definition 2010-10-04 14:36:15 [2524] [7] DEBUG: Thread 7 (gw/bb_smscconn.c:sms_router) maps to pid 2524. 2010-10-04 14:36:15 [2524] [0] INFO: ---------------------------------------- 2010-10-04 14:36:15 [2524] [6] INFO: AT2[abc]: opening device 2010-10-04 14:36:15 [2524] [0] INFO: Kannel bearerbox II version 1.4.3 starting 2010-10-04 14:36:15 [2524] [0] INFO: MAIN: Start-up done, entering mainloop 2010-10-04 14:36:15 [2524] [0] DEBUG: AT2[abc]: start called 2010-10-04 14:36:15 [2524] [6] DEBUG: AT2[abc]: device opened. Telnet mode = 0 2010-10-04 14:36:15 [2524] [6] DEBUG: AT2[abc]: device opened 2010-10-04 14:36:15 [2524] [6] INFO: AT2[abc]: speed set to 115200 2010-10-04 14:36:15 [2524] [6] DEBUG: AT2[abc]: --> ^M 2010-10-04 14:36:17 [2524] [6] DEBUG: AT2[abc]: --> AT^M 2010-10-04 14:36:17 [2524] [6] DEBUG: AT2[abc]: ATZ^M 2010-10-04 14:36:17 [2524] [6] DEBUG: AT2[abc]: AT^M 2010-10-04 14:36:18 [2524] [6] DEBUG: AT2[abc]: AT&F^M 2010-10-04 14:36:18 [2524] [6] DEBUG: AT2[abc]: ATE0^M 2010-10-04 14:36:18 [2524] [6] DEBUG: AT2[abc]: AT+IFC=2,2^M 2010-10-04 14:36:18 [2524] [6] DEBUG: AT2[abc]: AT+CPIN?^M 2010-10-04 14:36:18 [2524] [6] DEBUG: AT2[abc]: AT+CMGF=0^M 2010-10-04 14:36:29 [2524] [6] DEBUG: AT2[abc]: AT+CSMS=?^M 2010-10-04 14:36:29 [2524] [6] DEBUG: AT2[abc]: AT+CSMS=1^M 2010-10-04 14:36:29 [2524] [6] DEBUG: AT2[abc]: AT+CNMI=1,2,0,1,0^M 2010-10-04 14:36:29 [2524] [6] DEBUG: AT2[abc]: 2010-10-04 14:36:30 [2524] [5] DEBUG: Started thread 8 (gw/bb_boxc.c:function) 2010-10-04 14:36:30 [2524] [8] DEBUG: Thread 8 (gw/bb_boxc.c:function) maps to pid 2524. 2010-10-04 14:36:30 [2524] [8] DEBUG: Started thread 9 (gw/bb_boxc.c:boxc_sender) 2010-10-04 14:36:30 [2524] [9] DEBUG: Thread 9 (gw/bb_boxc.c:boxc_sender) maps to pid 2524. 2010-10-04 14:36:46 [2524] [6] DEBUG: AT2[abc]: 2010-10-04 14:36:46 [2524] [6] DEBUG: AT2[abc]: User data length read as (5) 2010-10-04 14:36:46 [2524] [6] DEBUG: AT2[abc]: Udh decoding done len=5 udhi=0 udhlen=0 udh='' 2010-10-04 14:36:46 [2524] [6] DEBUG: AT2[abc]: --> AT+CNMA^M 2010-10-04 14:36:46 [2524] [9] DEBUG: send_msg: sending msg to box: 2010-10-04 14:36:46 [2524] [9] DEBUG: boxc_sender: sent message to 2010-10-04 14:36:46 [2524] [8] DEBUG: boxc_receiver: sms received 2010-10-04 14:36:46 [2524] [8] DEBUG: send_msg: sending msg to box: 2010-10-04 14:36:46 [2524] [8] DEBUG: boxc_receiver: got ack 2010-10-04 14:36:46 [2524] [6] DEBUG: AT2[abc]: AT+CMGS=27^M 2010-10-04 14:36:47 [2524] [6] DEBUG: AT2[abc]: 2010-10-04 14:36:47 [2524] [6] DEBUG: AT2[abc]: send command status: 1 2010-10-04 14:36:47 [2524] [6] DEBUG: AT2[abc]: --> 0011000B915815665362F20000A70ED272BC5E9ED341C6709A5D2603 2010-10-04 14:36:47 [2524] [6] DEBUG: AT2[abc]: --> ^Z 2010-10-04 14:36:49 [2524] [6] DEBUG: AT2[abc]: 2010-10-04 14:36:49 [2524] [6] DEBUG: AT2[abc]: 2010-10-04 14:36:55 [2524] [9] DEBUG: send_msg: sending msg to box: 2010-10-04 14:36:55 [2524] [9] DEBUG: Thread 9 (gw/bb_boxc.c:boxc_sender) terminates. 2010-10-04 14:36:55 [2524] [8] DEBUG: Thread 8 (gw/bb_boxc.c:function) terminates. 2010-10-04 14:36:58 [2524] [6] DEBUG: AT2[abc]: 2010-10-04 14:36:58 [2524] [6] DEBUG: AT2[abc]: User data length read as (113) 2010-10-04 14:36:58 [2524] [6] DEBUG: AT2[abc]: Udh decoding done len=113 udhi=0 udhlen=0 udh='' 2010-10-04 14:36:58 [2524] [6] WARNING: smsbox_list empty! 2010-10-04 14:36:58 [2524] [6] DEBUG: AT2[abc]: --> AT+CNMA^M 2010-10-04 14:36:58 [2524] [4] WARNING: smsbox_list empty! 2010-10-04 14:36:58 [2524] [4] WARNING: smsbox_list empty! 2010-10-04 14:36:58 [2524] [6] DEBUG: AT2[abc]: = 2010-10-04 14:36:30 [2535] [0] DEBUG: = 2010-10-04 14:36:30 [2535] [0] DEBUG: = 2010-10-04 14:36:30 [2535] [0] DEBUG: Started thread 4 (gw/smsbox.c:obey_request_thread) 2010-10-04 14:36:30 [2535] [4] DEBUG: Thread 4 (gw/smsbox.c:obey_request_thread) maps to pid 2535. 2010-10-04 14:36:30 [2535] [0] DEBUG: Started thread 5 (gw/smsbox.c:url_result_thread) 2010-10-04 14:36:30 [2535] [5] DEBUG: Thread 5 (gw/smsbox.c:url_result_thread) maps to pid 2535. 2010-10-04 14:36:30 [2535] [0] DEBUG: Started thread 6 (gw/smsbox.c:http_queue_thread) 2010-10-04 14:36:30 [2535] [6] DEBUG: Thread 6 (gw/smsbox.c:http_queue_thread) maps to pid 2535. 2010-10-04 14:36:30 [2535] [0] INFO: Connected to bearerbox at localhost port 13001. 2010-10-04 14:36:30 [2535] [0] DEBUG: Started thread 7 (gw/heartbeat.c:heartbeat_thread) 2010-10-04 14:36:30 [2535] [7] DEBUG: Thread 7 (gw/heartbeat.c:heartbeat_thread) maps to pid 2535. 2010-10-04 14:36:46 [2535] [4] WARNING: No translation found for from to **2010-10-04 14:36:46 [2535] [4] ERROR: request failed** 2010-10-04 14:36:46 [2535] [4] DEBUG: message length 14, sending 1 messages 2010-10-04 14:36:46 [2535] [0] DEBUG: Got ACK (0) of 51b64a81-5f2a-488c-8cd8-9649b7cc9e0c 2010-10-04 14:36:46 [2535] [0] DEBUG: No client - multi-send or ACK to pull-reply 2010-10-04 14:36:55 [2535] [0] ERROR: SIGINT received, aborting program... 2010-10-04 14:36:55 [2535] [0] INFO: Received (and handled?) 1 requests in 9 seconds (0.11 per second) 2010-10-04 14:36:55 [2535] [0] INFO: Kannel smsbox terminating. 2010-10-04 14:36:55 [2535] [7] DEBUG: Thread 7 (gw/heartbeat.c:heartbeat_thread) terminates. 2010-10-04 14:36:55 [2535] [0] DEBUG: Waiting for 2 (gwlib/http.c:server_thread) to terminate 2010-10-04 14:36:55 [2535] [3] DEBUG: HTTP: No clients with requests, quitting. 2010-10-04 14:36:55 [2535] [3] DEBUG: Thread 3 (gw/smsbox.c:sendsms_thread) terminates. 2010-10-04 14:36:55 [2535] [2] DEBUG: Thread 2 (gwlib/http.c:server_thread) terminates. 2010-10-04 14:36:55 [2535] [1] DEBUG: Thread 1 (gwlib/fdset.c:poller) terminates. 2010-10-04 14:36:55 [2535] [0] DEBUG: Waiting for 4 (gw/smsbox.c:obey_request_thread) to terminate 2010-10-04 14:36:55 [2535] [4] DEBUG: Thread 4 (gw/smsbox.c:obey_request_thread) terminates. 2010-10-04 14:36:55 [2535] [6] DEBUG: Thread 6 (gw/smsbox.c:http_queue_thread) terminates. 2010-10-04 14:36:55 [2535] [0] DEBUG: Waiting for 5 (gw/smsbox.c:url_result_thread) to terminate 2010-10-04 14:36:55 [2535] [5] DEBUG: Thread 5 (gw/smsbox.c:url_result_thread) terminates. 2010-10-04 14:36:55 [2535] [0] DEBUG: Immutable octet strings: 162.
