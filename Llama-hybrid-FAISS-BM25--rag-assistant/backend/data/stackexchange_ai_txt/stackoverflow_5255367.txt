[site]: stackoverflow
[post_id]: 5255367
[parent_id]: 
[tags]: 
Magento incorrect product count when limit=all on product list page

In the process of upgrading a pre-1.4 Magento site to version 1.4.1.2, I've run across a problem. On the product list view pages, the option to view all products only shows 10 (in categories with more than 10 products). Here are some relevant settings from the catalog section of the system configuration: List Mode: Grid Only Products per Page on Grid Allowed Values: 8,16,32 Products per Page on Grid Default Value: 8 Allow All Products per Page: Yes There are no explicit limits set in the layout file THEME/layout/catalog.xml. On the product list view, if the "limit" parameter is set to one of the allowed integer values (8,16,32), the listing works as expected. But if the parameter "limit=all" is used, only 10 products are displayed. Using the firephp extension to look at the product list page for a category with 184 products, I see the following: limit=16 THEME/template/catalog/product/list.phtml: $this->getLoadedProductCollection()->count() returns 16 THEME/template/catalog/product/list/toolbar.phtml: $this->getCollection()->getSize() returns 184 limit=all THEME/template/catalog/product/list.phtml: $this->getLoadedProductCollection()->count() returns 10 THEME/template/catalog/product/list/toolbar.phtml: $this->getCollection()->getSize() returns 184 I've looked in the _getProductCollection() method in Mage_Catalog_Block_Product_List, but don't see the query limit set anywhere. Any ideas where this limit of 10 is coming from or how to get the "all" limit to work correctly? Update count() and getSize() return different values in THEME/template/catalog/product/list.phtml limit=16 THEME/template/catalog/product/list.phtml: $this->getLoadedProductCollection()->count() returns 16 THEME/template/catalog/product/list.phtml: $this->getLoadedProductCollection()->getSize() returns 184 THEME/template/catalog/product/list/toolbar.phtml: $this->getCollection()->getSize() returns 184 limit=all THEME/template/catalog/product/list.phtml: $this->getLoadedProductCollection()->count() returns 10 THEME/template/catalog/product/list.phtml: $this->getLoadedProductCollection()->getSize() returns 184 THEME/template/catalog/product/list/toolbar.phtml: $this->getCollection()->getSize() returns 184 This only occurs in my custom theme. If I switch the theme to the "base" package, the limit=all condition returns 184 products for both count() and getSize(). My custom theme has only minor markup / CSS changes to list.phtml (the PHP code is the same).
