[site]: stackoverflow
[post_id]: 4282793
[parent_id]: 4281983
[tags]: 
First, there were many issues with your code, but unless this is performance critical code, where you'll be looping hundreds of times a second (which could potentially create many autoreleased objects), using alloc] init] method will just make the code harder to follow. (Since you'll have to mentally go through and continually balance an alloc with a release). Don't get me wrong, it is important that you understand retain and release, etc. but this is the way I would approach the problem. Remember that you're in control. Make your parking annotation classes be able to "think for themselves" a bit. In the example below, I added an -(id)initWithDictionary: so that your other class doesn't have to sit there and do all the grunt work of setting the keys one by one. (There are some fictional parts where I'd assume you'd fill in the blanks... NSString * const PPAnnotationsKey = @"annotations"; NSString * const PPTitleKey = @"title"; NSString * const PPSubtitleKey = @"subtitle"; NSString * const PPLatitudeKey = @"latitude"; NSString * const PPLongitudeKey = @"longitude"; NSLog(@"loadAnnotations"); NSString *plistPath = [[NSBundle mainBundle] pathForResource:@"PermitData" ofType:@"plist"]; // autoreleased NSDictionary *permitDictionary = [NSDictionary dictionaryWithContentsOfFile:plistPath]; // autoreleased if ([[self title] isEqualToString:@"All Permits"]) { for (NSString *parkingGroup in permitDictionary) { NSLog(@"parkingGroup == %@", parkingGroup); NSArray *annotations = [parkingGroup objectForKey:PPAnnotationsKey]; for (NSDictionary *entry in annotations) { PPParkingAnnotation *annotation = [PPParkingAnnotation parkingAnnotationWithDictionary:entry]; // autoreleased if (annotation) { // assuming here that mapView's addAnnotation: will retain the // annotation [mapView addAnnotation:annotation]; } } } } @interface PPParkingAnnotation : NSObject { CLLocationCoordinate2D coordinate; NSString *title; NSString *subtitle; } + (id)parkingAnnotationWithDictionary:(NSDictionary *)dictionary; - (id)initWithDictionary:(NSDictionary *)dictionary; @properties... @end @implementation PPParkingAnnotation + (id)parkingAnnotationWithDictionary:(NSDictionary *)dictionary { return [[[[self class] alloc] initWithDictionary:dictionary] autorelease]; } - (id)initWithDictionary:(NSDictionary *)dictionary { [self setTitle:[dictionary objectForKey:PPTitleKey]]; [self setSubtitle:[dictionary objectForKey:PPTitleKey]]; // and so on. }
