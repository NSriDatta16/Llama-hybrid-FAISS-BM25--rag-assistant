[site]: stackoverflow
[post_id]: 5697824
[parent_id]: 
[tags]: 
OpenMP GCC GOMP wasteful barrier

I have the following program. nv is around 100, dgemm is 20x100 or so, so there is plenty of work to go around: #pragma omp parallel for schedule(dynamic,1) for (int c = 0; c however with GCC 4.4, GOMP v1, the gomp_barrier_wait_end accounts for nearly 50% of runtime. Changing GOMP_SPINCOUNT aleviates the overhead but then only 60% of cores are used. Same for OMP_WAIT_POLICY=passive . The system is Linux, 8 cores. How can i get full utilization without spinning/waiting overhread
