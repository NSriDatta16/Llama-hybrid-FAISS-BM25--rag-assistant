[site]: stackoverflow
[post_id]: 4128534
[parent_id]: 4128061
[tags]: 
Folowing Nathon's post, I tried about the same thing on my computer: #include #if defined PACK_FIRST || defined PACK_BOTH #pragma pack(1) #endif struct inner { char a; double b; }; #if defined PACK_SECOND || defined PACK_BOTH #pragma pack(1) #endif struct outer { char a; struct inner b; char c; double d; }; int main(void) { printf("sizeof (char): %d (1, of course)\n", (int)sizeof (char)); printf("sizeof (double): %d\n", (int)sizeof (double)); printf("sizeof (inner): %d\n", (int)sizeof (struct inner)); printf("sizeof (outer): %d\n", (int)sizeof (struct outer)); return 0; } $ gcc 4128061.c $ ./a.out sizeof (char): 1 (1, of course) sizeof (double): 8 sizeof (inner): 16 sizeof (outer): 40 $ gcc -DPACK_FIRST 4128061.c $ ./a.out sizeof (char): 1 (1, of course) sizeof (double): 8 sizeof (inner): 9 sizeof (outer): 19 $ gcc -DPACK_SECOND 4128061.c $ ./a.out sizeof (char): 1 (1, of course) sizeof (double): 8 sizeof (inner): 16 sizeof (outer): 26 $ gcc -DPACK_BOTH 4128061.c $ ./a.out sizeof (char): 1 (1, of course) sizeof (double): 8 sizeof (inner): 9 sizeof (outer): 19 Apparently my gcc packs from the point where the #pragma line appears.
