[site]: stackoverflow
[post_id]: 4073955
[parent_id]: 4073114
[tags]: 
You asked for Perl (or PCRE) and nothing else. Ok. If you just want to escape unescaped double quotes no matter where you find them, do this: s{ (? If you want to escape unescaped double quotes between unescaped single quotes, and you only have one pair of such single quotes, do this: 1 while s{ (?(DEFINE) (? (? (?&unescaped) ' ) (? (?&unescaped) " ) (? [^'] *? ) ) (? (?&single_quote) (?&unquoted) ) (? (?&double_quote) (?&unquoted) (?&single_quote) ) } xg; But if you may have multiple sets of paired unescaped single quotes per line, and you only want to escape the unescaped double quotes that fall between those unescaped single quotes, then do this: sub escape_quote { my $_ = shift; s{ (? (? (?&unescaped) ' ) (? [^'] *? ) ) (? (?&single_quote) ) (? (?&unquoted) ) (? (?&single_quote) ) }{ $+{HEAD} . escape_quote($+{TARGET}) . $+{TAIL} }xeg; Note that this all presupposed you have no legitimate paired unescaped double quotes containing unescaped single quotes. Even something like this will throw you off: my $cute = q(') . "stuff" . q('); Probably, though, you want to use a proper parsing module. Please pay no attention to all the garish and deceitfully incorrect SO coloring. For some reason, it doesn't seem to be able to parse Perl as well as perl does. Can't imagine why. â˜º
