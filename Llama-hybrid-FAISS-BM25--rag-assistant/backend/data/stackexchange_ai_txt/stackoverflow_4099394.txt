[site]: stackoverflow
[post_id]: 4099394
[parent_id]: 
[tags]: 
Need help with timer

For last 2 weeks am trying to learn timer & interrupt & wrote a program (with my understanding) to blink LEDs on ATMEGA2560 but no matter what I do TCNT0 never increments & ISR() function never gets called. Where am I going wrong and how can I fix it? Here is my code: #include #include #define READ_ATMEGA(ADDR) *((P_CHAR)(BASE_ADDR + ((ADDR) * ADDR_MULTIPLIER))) #define WRITE_ATMEGA(ADDR, DATA) *((P_CHAR)(BASE_ADDR + ((ADDR) * ADDR_MULTIPLIER))) = DATA #define BASE_ADDR 0x20 void init_timer0_ovf_interrupt(void); void timer0_interrupt_isr(void); void initialize_ports(void); void delay(unsigned int no_65_5ms_interrupts); void __attribute__((ISR)) timer0_interrupt_isr(void); //#pragma interrupt_handler timer0_interrupt_isr:24 unsigned int delay_timer; int main(void) { initialize_ports(); init_timer0_ovf_interrupt(); delay(46); return 0; } void initialize_ports(void) { READ_ATMEGA(4) = 0xff; WRITE_ATMEGA(5, 0x00); } void delay(unsigned int no_65_5ms_interrupts) { TCNT0 = 0x00; delay_timer = 0; while(delay_timer = OCR0A) { PORTB = ~(PORTB); delay_timer = 0; } }
