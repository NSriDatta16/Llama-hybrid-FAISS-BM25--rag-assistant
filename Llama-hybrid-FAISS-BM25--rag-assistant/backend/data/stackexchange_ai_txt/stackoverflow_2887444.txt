[site]: stackoverflow
[post_id]: 2887444
[parent_id]: 2736544
[tags]: 
NT kernels and device drivers use virtual memory for data structures and objects that can be safely paged out to storage. For example, a driver can request virtual memory as a usermode program does. However, the kernel has data and code that: 1) must be kept always in memory for efficiency reasons 2) must be kept in memory because a page fault cannot be serviced . A typical example is entering ISRs (interrupt service routine) (such as the page fault handling code itself). Code and data of this type is kept on physical memory always, and it's called nonpaged pool on NT kernels. The latter does not means that nonpaged memory addresses are referenced directly. They are always translated to physical addresses (and viceversa) by the kernel memory manager. I think (i listen for corrections) the only physical addresses used without virtual mapping is the first 1MB when the system boots up (in WinNT, the NTLDR / NTDETECT.COM phase until protected mode is activated).
