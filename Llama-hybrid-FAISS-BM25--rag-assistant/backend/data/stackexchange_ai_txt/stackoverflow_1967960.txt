[site]: stackoverflow
[post_id]: 1967960
[parent_id]: 1967882
[tags]: 
The buffer passed to getline() MUST be malloced. The reason is that getline() may call realloc() on the buffer if more space is required. realloc() like free() should only be used with memory allocated by malloc(). This is because malloc() and new allocate memory from different storage areas: See: What is the difference between new/delete and malloc/free? Basically new uses "The "Free Store" while malloc uses "The Heap". Both of these areas are part of the "application Heap" (Though the standard does not actually require an application heap as that is an implementation detail). Though they are both on the "Application Heap" these areas need not overlap. Whether they do is a detail of the implementation. The man page for getline(): http://linux.die.net/man/3/getline http://www.kernel.org/doc/man-pages/online/pages/man3/getline.3.html Notice this line: Alternatively, before calling getline(), *lineptr can contain a pointer to a malloc()-allocated buffer *n bytes in size. If the buffer is not large enough to hold the line, getline() resizes it with realloc(), updating *lineptr and *n as necessary.
