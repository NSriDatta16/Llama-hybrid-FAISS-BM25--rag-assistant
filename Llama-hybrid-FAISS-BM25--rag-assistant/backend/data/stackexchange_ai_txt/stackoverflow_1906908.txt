[site]: stackoverflow
[post_id]: 1906908
[parent_id]: 
[tags]: 
TeamCity returns No such file to load -- rubygems (LoadError) but terminal runs fine

I've just setup 3 osx agents to run the CI for our ruby project. 2 of these agents are running our specs perfectly, starting their agents correctly etc. The third machine constantly returns No such file to load -- rubygems (LoadError). I have navigated to the work folder (the check out folder for the project) and i can run the commands i need the CI to run (specifically a rake task rake spec) and they run fine. It would seem my agent is picking up an incorrect version of ruby or rubygems somehow which ruby returns (on all machines) /opt/local/bin/ruby which gems returns (on all machines) /opt/local/bin/gem i'm not sure what to try next?
