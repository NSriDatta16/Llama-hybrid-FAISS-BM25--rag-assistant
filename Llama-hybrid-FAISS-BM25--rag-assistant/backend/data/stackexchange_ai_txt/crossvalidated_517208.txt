[site]: crossvalidated
[post_id]: 517208
[parent_id]: 
[tags]: 
Defining test- and control groups for geo-test with balanced covariates and group size

I'm currently designing an A/B-Test on a geo level, where the test- and controlgroup will be made up of various (US) States. Each state has a few specific characteristics (e.g. mean income, urbanization, etc) and a sample size (absolute and relative). I would like to find an elegant way to define my control- and test-group and keep the covariates as comparable as possible. Ideally I would also be able to control the size of the groups (say, 25% percent of the population size each) and have the groups defined in a "bottom up" way, that can be checked afterwards. I've looked into R packages such as MatchIt or cobalt , which seem great and generally appropriate, though they seem by default to focus more on matching "individual cases" rather than "aggregated entities". I'm looking for general support how to tackle this question as well as software recommendations. :)
