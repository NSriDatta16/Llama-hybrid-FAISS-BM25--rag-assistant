[site]: stackoverflow
[post_id]: 4426084
[parent_id]: 4425981
[tags]: 
hINetOpen = InternetOpen(_T("SplashID"), INTERNET_OPEN_TYPE_DIRECT, NULL, NULL, 0);//AK if (hINetOpen != NULL){ hINetConnect = InternetConnect(hINetOpen, sServerName, INTERNET_DEFAULT_HTTP_PORT, NULL, NULL, INTERNET_SERVICE_HTTP, INTERNET_FLAG_IDN_PROXY, 0); if (hINetConnect != NULL){ hINetRequest = HttpOpenRequest(hINetConnect, _T("POST"), sObjectName, HTTP_VERSION, 0, NULL, INTERNET_FLAG_RELOAD |INTERNET_FLAG_IGNORE_CERT_CN_INVALID | SECURITY_FLAG_IGNORE_UNKNOWN_CA | INTERNET_FLAG_IGNORE_CERT_DATE_INVALID | INTERNET_FLAG_NO_AUTO_REDIRECT | INTERNET_FLAG_PRAGMA_NOCACHE | INTERNET_FLAG_NO_CACHE_WRITE, 0); if (hINetRequest != NULL){ if(HttpSendRequest(hINetRequest, strHeaders, strHeaders.GetLength(), (LPVOID) StrFormdata.GetString(), StrFormdata.GetLength())) { CString sBodyText; DWORD nRead= 1024; char szBuf[ 1025 ] = {0}; while ( nRead > 0 ) { // Read in a temporary buffer InternetReadFile(hINetRequest, szBuf, 1024, &nRead); szBuf[nRead] = '\0'; sBodyText = szBuf; result = atoi(szBuf); break; } } } }
