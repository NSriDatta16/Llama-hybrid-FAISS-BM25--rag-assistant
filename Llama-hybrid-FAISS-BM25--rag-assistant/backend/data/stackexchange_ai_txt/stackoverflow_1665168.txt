[site]: stackoverflow
[post_id]: 1665168
[parent_id]: 1665002
[tags]: 
this works for me: type TForm1 = class(TForm) Panel1: TPanel; procedure FormCreate(Sender: TObject); private originalPanelWindowProc : TWndMethod; procedure PanelWindowProc (var Msg : TMessage) ; procedure PanelImageDrop(var Msg: TWMDROPFILES); public end; var Form1: TForm1; implementation {$R *.dfm} procedure TForm1.FormCreate(Sender: TObject); begin originalPanelWindowProc := Panel1.WindowProc; Panel1.WindowProc := PanelWindowProc; DragAcceptFiles(panel1.Handle, true); end; procedure TForm1.PanelImageDrop(var Msg: TWMDROPFILES); var numFiles : longInt; buffer : array[0..MAX_PATH] of char; src,dest : string; begin numFiles := DragQueryFile(Msg.Drop, $FFFFFFFF, nil, 0) ; try if numFiles > 1 then ShowMessage('You can drop only one image file at a time!') else begin DragQueryFile(Msg.Drop, 0, @buffer, sizeof(buffer)) ; src := string(AnsiString(buffer)); showmessage( src + #13 + booltostr(fileexists(src), true) ); end; finally DragFinish(Msg.Drop); end; end; procedure TForm1.PanelWindowProc(var Msg: TMessage); begin if Msg.Msg = WM_DROPFILES then PanelImageDrop(TWMDROPFILES(Msg)) else originalPanelWindowProc(Msg) ; end; delphi 2007, firefox 3.5
