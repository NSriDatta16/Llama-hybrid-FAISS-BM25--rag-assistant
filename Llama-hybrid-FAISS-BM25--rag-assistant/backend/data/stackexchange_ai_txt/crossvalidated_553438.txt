[site]: crossvalidated
[post_id]: 553438
[parent_id]: 
[tags]: 
Metropolis Hastings on hierarchical bayes update question:

[ I have this somewhat complicated hierarchical bayesian model ] 1 Here the $y$ on $\theta$ are Poisson, $\theta$ are deterministically generated from the $att, def$ (and $home$ ). Then the last conditionals are all normals, i.e, for example $P(att_{h(g)}|\mu_{att}, \tau_{att}) \sim \mathcal{N}(\mu_{att}, \tau_{att})$ , and similar for the rest. Finally we have hyper-priors on $home, \mu_{att}, \tau_{att}, \mu_{def}, \tau_{def}$ and these prior distributions are chosen to be conjugate priors , so $\mu_{att}, \mu_{def} \sim \mathcal{N}(0, \tau_1^{-1})$ for instance, and $\tau_{att},\tau_{def} \sim Gamma(\alpha, \beta)$ . I want to sample $P(\theta, \eta | y)$ using Metropolis-Hastings, but I am a bit confused. ( $\eta$ are the hyper parameters, i.e the variables at the top of the picture) Suppose I use an isotropic $\mathcal{N}(0, \sigma^2I)$ as my proposal distribution. Then metropolis-hastings samplings essentially works as: sample $x'$ fro $x$ using the proposal distribution. Then we have an acceptance probability $A = min(1, p(x')/p(x))$ that decides if we throw away or keep $x'$ . This samples $p$ . So how do we use it in this case to sample $p(\theta, \eta | y)$ . What is $x$ in this scenario? Seems to me it can't just be $(\theta, \eta)$ as for instance, $\theta$ is a deterministic function of $\eta$ and so if we were to sample $\eta'$ somehow, then it seems that should determine $\theta'$ . But then $\eta'$ themselves are dependent on the hyper-parameters $\tau_1, \alpha, \beta$ . So do we actually sample $\tau_1, \alpha, \beta$ using the proposal distribution, and use $\alpha', \beta', \tau_1'$ to sample $\eta'$ and then $\theta'$ ? I'm confused what the Metropolis-Hasting update is applied to in the first place.
