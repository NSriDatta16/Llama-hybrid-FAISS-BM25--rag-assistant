[site]: stackoverflow
[post_id]: 804382
[parent_id]: 804336
[tags]: 
You might use urlparse.urlsplit instead, but otherwise you seem to have a very straightforward solution, there. protocol, domain, path, query, fragment = urlparse.urlsplit(url) (You can access the domain and port separately by accessing the returned value's named properties, but as port syntax is always in ASCII it is unaffected by the IDNA encoding process.)
