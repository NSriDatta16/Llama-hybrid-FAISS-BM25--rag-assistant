[site]: stackoverflow
[post_id]: 4076015
[parent_id]: 668286
[tags]: 
This fragment incorporates all of the above - For some reason - StackOverflow is excluding the first and last lines of code in the code block below, so I wrote a blog on it. For a full explanation and the rest of the (downloadable) code have a look at my blog at thecodeabode.blogspot.com var PopupWarning = { init : function() { if(this.popups_are_disabled() == true) { this.redirect_to_instruction_page(); } }, redirect_to_instruction_page : function() { document.location.href = "http://thecodeabode.blogspot.com"; }, popups_are_disabled : function() { var popup = window.open("http://localhost/popup_with_chrome_js.html", "popup_tester", "width=1,height=1,left=0,top=0"); if(!popup || popup.closed || typeof popup == 'undefined' || typeof popup.closed=='undefined') { return true; } window.focus(); popup.blur(); // // Chrome popup detection requires that the popup validates itself - so we need to give // the popup time to load, then call js on the popup itself // if(navigator && (navigator.userAgent.toLowerCase()).indexOf("chrome") > -1) { var on_load_test = function(){PopupWarning.test_chrome_popups(popup);}; var timer = setTimeout(on_load_test, 60); return; } popup.close(); return false; }, test_chrome_popups : function(popup) { if(popup && popup.chrome_popups_permitted && popup.chrome_popups_permitted() == true) { popup.close(); return true; } // // If the popup js fails - popups are blocked // this.redirect_to_instruction_page(); } }; PopupWarning.init();
