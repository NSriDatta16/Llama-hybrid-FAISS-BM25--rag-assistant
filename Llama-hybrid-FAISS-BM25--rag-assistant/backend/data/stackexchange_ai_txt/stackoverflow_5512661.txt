[site]: stackoverflow
[post_id]: 5512661
[parent_id]: 5512587
[tags]: 
Generally you are better off letting a library or database do the work for you. You may not want to have an SQL database and there are plenty of simple databases which don't use SQL. http://nosql-database.org/ lists 122 of them. At a minimum, if you are going to write this I suggest you read the source for one of these databases to see how they work. Depending on the size of the records, 3 million isn't that much and I would suggest you keep as much in memory as possible. The problem you are likely to have is ensuring the data is consistent and recovering the data when a corruption occurs. The second problem is dealing with fragmentation efficiently (some thing the brightest minds working on the GC deal with) The third problem is likely to be maintain the index in a transaction fashion with the source data to ensure there are no inconsistencies. While this may appear simple at first, there are significant complexities in making sure there data is reliable, maintainable and can be accessed efficiently. This is why most developers use an existing database/datastore library and concentrate on the features which are unqiue to their application.
