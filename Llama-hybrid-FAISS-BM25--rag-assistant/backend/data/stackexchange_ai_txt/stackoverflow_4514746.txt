[site]: stackoverflow
[post_id]: 4514746
[parent_id]: 
[tags]: 
paperclip processors in rails3

I'm trying to upload mp3s to S3 using paperclip which works fine, but when I try using a custom processor to create a lower quality audio file I run into problems. It seems to work, but instead of outputting the whole song in 128k, it only does the first 6 seconds. (it works fine when i try using ffmpeg at the command line) And it does it for both "styles" not just the snippet style, the original gets processed as well which I don't want. song.rb class Song { :snippet => { :processors => [:audio_prehear] } }, :storage => 's3', :s3_credentials => "#{RAILS_ROOT}/config/s3_credentials.yml".... My processor module Paperclip class AudioPrehear log [paperclip] ffmpeg -y -i /var/folders/Ue/UehOEbyxHkS9voyeIiUx3++++TI/-Tmp-/stream20101223-93966-18vy7po-0.mp3 -ab 128k /var/folders/Ue/UehOEbyxHkS9voyeIiUx3++++TI/-Tmp-/stream20101223-93966-18vy7po-0.mp3 2>/dev/null .... [paperclip] Saving attachments. [paperclip] saving music/7635/snippet/monkey.mp3 [paperclip] saving music/7635/original/monkey.mp3 ....
