[site]: stackoverflow
[post_id]: 1085820
[parent_id]: 1084413
[tags]: 
-- INET ATON en INET NTOA and helper function GET TOKEN CREATE OR REPLACE function inet_ntoa (ip integer) return varchar2 is ip1 integer; ip2 integer; ip3 integer; ip4 integer; ipi integer := ip; begin ip1 := floor(ipi/power(2,24)); ipi := ipi - (ip1*power(2,24)); ip2 := floor(ipi/power(2,16)); ipi := ipi - (ip2*power(2,16)); ip3 := floor(ipi/power(2,8)); ipi := ipi - (ip3*power(2,8)); ip4 := ipi; return ip1||'.'||ip2||'.'||ip3||'.'||ip4; end; / CREATE OR REPLACE FUNCTION get_token (the_list VARCHAR2,the_index NUMBER, delim VARCHAR2 := '.') RETURN VARCHAR2 IS start_pos INTEGER; end_pos INTEGER; BEGIN IF the_index = 1 THEN start_pos := 1; ELSE start_pos := INSTR (the_list, delim, 1, the_index - 1); IF start_pos = 0 THEN RETURN NULL; ELSE start_pos := start_pos + LENGTH (delim); END IF; END IF; end_pos := INSTR (the_list, delim, start_pos, 1); IF end_pos = 0 THEN RETURN SUBSTR (the_list, start_pos); ELSE RETURN SUBSTR (the_list, start_pos, end_pos - start_pos); END IF; END get_token; / CREATE OR REPLACE function inet_aton (ip varchar2) return integer is invalid_ip_adres exception; pragma exception_init(invalid_ip_adres,-6502); ipi integer; begin ipi := get_token(ip,4) +(get_token(ip,3)*power(2,8)) +(get_token(ip,2)*power(2,16)) +(get_token(ip,1)*power(2,24)); return ipi; exception when invalid_ip_adres then return null; end; /
