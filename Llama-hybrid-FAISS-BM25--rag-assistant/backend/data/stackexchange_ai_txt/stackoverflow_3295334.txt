[site]: stackoverflow
[post_id]: 3295334
[parent_id]: 2151827
[tags]: 
Use Fakeweb to stub out the internet responses. For the Google example, first go to the website and save the html of the page you desire. In this case, let's assume you saved www.google.com via your browser or curl. Add the Fakeweb gem to your test.rb file Then your code is stream = File.read("saved_google_page.html") FakeWeb.register_uri(:get, "http://www.google.com", :body => stream, :content_type => "text/html") When you do your standard Mechanize call of agent = Mechanize.New page = agent.get("http://www.google.com/") Fakeweb will return the page you saved with the content_type headers set in a way that Mechanize will think it accessed the internet successfully. Make sure that content_type header is set since otherwise Mechanize treats the response as Mechanize::File instead of Mechanize::Page. You can test that it's fully working by running tests on your machine with the network connection unplugged. p.s. I'm answering this 6 months after the question was asked since this is the top result in Google but it's unanswered. I just spent 30 minutes figuring this out myself and thought I'd share the solution.
