[site]: stackoverflow
[post_id]: 3762459
[parent_id]: 3761759
[tags]: 
THe XSLT processor you are using may have a bug, or you haven't provided the real xslt code and xml document. The provided XSLT code fragment when included in a complete stylesheet : and applied on the provided XML document : produces the wanted, correct result : This transformation produced the same result when performed with several different XSLT processors , such as MSXML3,4,6, Saxon6.5 and AltovaXML (XML-SPY). Do note , that the transformation can be refactored into a much shorter and readable one:
