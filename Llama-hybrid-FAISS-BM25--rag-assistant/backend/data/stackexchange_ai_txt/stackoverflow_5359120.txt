[site]: stackoverflow
[post_id]: 5359120
[parent_id]: 5351382
[tags]: 
In Ruby, using Nokogiri to massage the XML: xml = hi bar EOT NAMESPACE = %w[m http://host.com/m] require 'nokogiri' doc = Nokogiri::XML::DocumentFragment.parse(xml) ns = doc.at('foo').add_namespace_definition(*NAMESPACE) doc.xpath('foo/math | foo/math//*').each { |n| n.namespace = ns } puts doc.to_xml The output looks like: >> >> hi >> >> bar >> >> If the namespace can't be added to , then you can munge the tag names directly without messing with namespaces: xml = hi bar EOT NAMESPACE = %w[m http://host.com/m] require 'nokogiri' doc = Nokogiri::XML::DocumentFragment.parse(xml) doc.xpath('foo/math | foo/math//*').each { |n| n.name = "m:" > # >> hi # >> # >> bar # >> # >>
