[site]: stackoverflow
[post_id]: 1041920
[parent_id]: 1041859
[tags]: 
I would build a test database and a script to benchmark the choices. Just guessing at it, I believe doing the INSERT first and retrying with UPDATE is the faster way on average. This is because if the data is not already in the database then you saved another query. If your data is more often in the database then do an UPDATE first and retry with INSERT if it fails. However, an error may cause a transaction to abort and need rollback. If that is bad for you then you will need to do a SELECT first. I do not know about MySQL but I know that where I work we use a stored procedure on our PostgreSQL databases to do this. The stored procedure does a SELECT and then an INSERT or UPDATE.
