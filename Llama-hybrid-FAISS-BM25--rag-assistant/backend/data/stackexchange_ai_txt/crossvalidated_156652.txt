[site]: crossvalidated
[post_id]: 156652
[parent_id]: 156629
[tags]: 
can I use the whole data set to calculate the PCA if I then use only training & validation sets to fit the model parameters (i.e., regression weights and number of PCA components)? No, this may lead to very overoptimistic test results. For the data sets I typically work with (spectroscopic data sets, wide matrices wrt. the number of independent specimen/patients; classification) I've seen the number of misclassifications being underestimated by an order of magnitude when using the whole data set to calculate the loadings. I think of it this way: the PCA/PLS projection reduces (for my data) 100 - 1000 variates to maybe 10, i.e. 10 $\times$ 100 - 1000 coefficients are calculated. The regression (or in my case classification) calculates only maybe 10 more coefficients. Thus, I'd intuitively expect that the more crucial (and difficult) step is to get the loadings. Thus, independence of test and training data is crucial for the step of loading calculation / validation of the calculated loadings. Here's my recommendation: do it both ways and have a look at the difference. Maybe even report the results here.
