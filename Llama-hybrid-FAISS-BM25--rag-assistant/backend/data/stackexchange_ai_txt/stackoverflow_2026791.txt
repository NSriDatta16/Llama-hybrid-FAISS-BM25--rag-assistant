[site]: stackoverflow
[post_id]: 2026791
[parent_id]: 2026740
[tags]: 
The rendering process first loads and executes the action template, then decorates the template with the selected layout. The layout is rendered from top to botton, thus you can't add more content to :head after :head is already rendered. You need to change your strategy. Either place the fragment in a partial and attach it to your action views or use a post-processing strategy such as a Rack module/after_filter to alter the html code directly. I probably would try to find a better solution based on what I actually need. If you are encountering this issue, chances are the error is somewhere else, perhaps in the app architecture.
