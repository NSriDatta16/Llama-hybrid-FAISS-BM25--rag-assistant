[site]: stackoverflow
[post_id]: 5657299
[parent_id]: 5073013
[tags]: 
I stumbled across store.js the other day which might help solve the cross browser local storage. It was from this article about local storage. I think your best option for tracking online/offline is to ping the server via an AJAX call when the page is turned. Always try and update the server on a page turn, but if it fails, handle the failure and store the progress locally. Each page turn will either amend the locally stored progress file or if connection is restored then simply update the server with the progress. The issue I am thinking might occur is if a book is finished offline then there are no more clicks that would trigger the syncing, regardless of a restored connection. You may want to think about a manual sync link/button at the end of a book. Or maybe have a manual sync available at all times anyway? Give some control to the users and describe the whole offline/online reading scenario. You might find that it is easier to just let the users do the workâ€¦ if they don't sync then it's their problem!
