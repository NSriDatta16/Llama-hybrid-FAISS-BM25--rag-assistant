[site]: stackoverflow
[post_id]: 4459152
[parent_id]: 
[tags]: 
JavaScript: How to solve this race condition

I have a UI that allows sorting of an ul of li . For that I use jQuery-UI's sortable . However, the sorting is disabled by default and only activated on click of a button. At the same time, I have a click-event on each li, that displays a preview of the paragraph the li is representing on the sorting screen. This works fine, except that if I am actively sorting, the click event is also being triggered. What happens is, every time I sort an li , I automatically see a preview, which i don't want to happen. What I have done to prevent it is the following: The click-event is only triggered if the li misses the class no_preview . That class is added to the li whenever I start sorting, and removed whenever sorting completed. jQuery('ul.wiki_ul_layout_coloumns>li:not(.no_preview)').live('click', function() { //show preview }) jQuery('ul.wiki_ul_layout_coloumns').sortable({ connectWith: 'ul.wiki_ul_layout_coloumns', start: function(event, ui) { jQuery(ui.item).addClass('no_preview'); }, stop: function(event, ui) { jQuery(ui.item).removeClass('no_preview'); } }); Testing this new solution, I saw that I have created a race condition (since both react on a keyup). Now, I could solve this by adding a timer to jQuery(ui.item).removeClass('no_preview') but I consider that solution to be more of a hack. Is there a proper way (or at least a nicer way) to solve this problem? EDIT 1 I have updated the code to show that I use multiple lists which are interconnected. Up until now I thought it was irrelevant to the problem.
