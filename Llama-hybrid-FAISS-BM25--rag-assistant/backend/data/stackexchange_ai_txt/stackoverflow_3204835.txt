[site]: stackoverflow
[post_id]: 3204835
[parent_id]: 
[tags]: 
Ensure that file state on the client is in sync with NFS server

I'm trying to find proper way to handle stale data on NFS client. Consider following scenario: Two servers mount same NFS shared storage with number of files Client application on 1 server deletes some files Client application on 2 server tries to access deleted files and fails with: Stale NFS file handle (nothing strange, error is expected) (Also it may be useful to know, that cache mount options are pretty high on both servers for performance reasons). What I'm trying to understand is: Is there reliable method to check, that file is present? In the scenario given above lstat on the file returns success and application fails only after trying to move file. How can I manually sync contents of directory on the client with server? Some general advise on how to write reliable file management code in case of NFS? Thanks.
