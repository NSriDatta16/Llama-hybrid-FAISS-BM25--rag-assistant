[site]: crossvalidated
[post_id]: 243586
[parent_id]: 243574
[tags]: 
Let's say you have 24 batches of $n$ emails per day. You want to have an interval which includes the average spam rate with 95% confidence, and you want this interval to represent a difference of $\pm0.1$ (so that when you take any sample of $n$ mails, you want the spam rate to be no more than $\pm0.1$ away from the true rate with 95% confidence). Your goal is to find $n$ sufficiently large to provide you this confidence interval. So, let's find $n$! Calculation A common formula that would be helpful for this case is: $$n = \frac{z^2 \cdot \sigma^2}{E^2}$$ Where: $n$ is your ideal sample size $z$ is the z-score corresponding to the desired confidence interval $E$ is the error margin ($+/-$) that you can accept (the interval in which you want to be 95% percent confident). Since you don't know the standard deviation of your ratio beforehand, let's approximate it to the range divided by $4$, in other words $(1 - 0)\ /\ 4 = 0.25$, since your spam rate can be anywhere between $0\%$ and $100\%$. So your first approximation of $\sigma$ is $\sigma = 0.25$. The $z$ value, when looking for a confidence interval of 95%, is close to $2$ (not exactly, but let's assume that). We already talked about the $E$ value, which is $0.1$. So in this case, the result will be: $$n = \frac{2^2 \cdot 0.25^2}{0.1^2}$$ $$n = \frac{0.25}{0.01}$$ $$n = 25$$ Interpretation If you collect random samples of 25 mails each, for 100 of those samples, 95 of them will have a spam rate which is closer than $0.1$ to the true, actual spam rate of all your emails. Example Let's say you collect a random sample of 25 emails. You find that the spam rate of these 25 emails is 23%. Now you can be confident at 95% that the interval of $[ 13\%, 33\% ]$ includes the true spam rate of all your emails (provided that this rate is constant in time). You collect another sample of 25 emails and find that the spam rate of these 25 emails is 31%. You can be, similarly, 95% confident that the interval of $[ 21\%, 41\% ]$ includes your true spam rate. Now once you've collected some samples of 25 emails (say, 10 or 20), try to come up with the standard deviation of these samples' rates, and use it in replacement for the $\sigma = 0.25$ value that we approximated in the beginning. This will allow you to find a better suited $n$ for future samples.
