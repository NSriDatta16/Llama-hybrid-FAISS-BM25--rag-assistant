[site]: stackoverflow
[post_id]: 4176335
[parent_id]: 
[tags]: 
Making a file format extensible

I'm writing a particular serialisation system. The first version works well. It's a hierarchial string-key, data-value system. So to get a particular value, you navigate to a particular node and say getInt("some key") etc. etc. My issue with the current system is that the file size gets quite large very quickly. I'm going to combat this by adding a string table. The issue with this is that I can't think of a way to support the old system. All I have is a file identifier which is 32 bits long. I can change the file identifier, but everytime I make another change to the format, I'll need to change the identifier again. What's an elegant way to implement new features while still supporting the old features? I've studied the PNG format and creating chunks seems like a good way to go. Is there any other advice you can give me on chunk dependencies and so forth?
