[site]: stackoverflow
[post_id]: 777142
[parent_id]: 770515
[tags]: 
I can see multiple ways of doing this: Expect over telnet, rsh, or ssh pros: single connection, fewer escaping issues cons: fragility in a changing environment rsh/ssh each command individually pros: fewer escaping issues, more reliable in a changing environment cons: each connection takes time for authentication, and, for ssh, handshaking the encryption rsh/ssh all commands at once pros: single connection (less overhead), more reliable than expect cons: fragility in maintenance especially as you get more than a handful of statements in there, escaping issues are more prevalent (escape in perl so that it's still escaped by rsh/ssh so that it's still escaped by the remote shell so that it's properly handled by the sudo'd remote shell?) rsh/ssh and run a script pros: single connection, more reliable, more maintainable cons: finding a way to get it over there (rcp/scp work, NFS works, you need to determine the best way for you). All things considered, this is the most minor con as you could simply do something like open my $fh, "|ssh user@host 'cat > /tmp/myscript'"; print $fh $script; system qw(ssh user@host), "chmod u+x /tmp/myscript; /tmp/myscript; rm /tmp/myscript"; Of course, you'd add in some error handling (failed open, what if /tmp/myscript exists, etc.), but that's the idea.
