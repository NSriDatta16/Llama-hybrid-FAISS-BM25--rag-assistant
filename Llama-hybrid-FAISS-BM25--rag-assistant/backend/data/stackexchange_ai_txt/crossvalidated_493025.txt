[site]: crossvalidated
[post_id]: 493025
[parent_id]: 
[tags]: 
Does using a grouper algorithm in an explanatory or causal inference model use up degrees of freedom?

For example, say I'm performing a regression to explain how much various factors (age, sex, diagnosis, procedure) affect total annual medical cost among patients. There are thousands of diagnosis and procedure codes so it seems prudent to group them into similar categories based on average medical cost to avoid overfitting. There are various ways to do this, one would be using a decision tree . Question : Am I "using up" degrees of freedom in my data if I apply the grouper algorithm followed by the regression on the same dataset? Should I apply the grouper on a random subset (or prior year's data) and then code the grouper categories into the holdout dataset?
