[site]: stackoverflow
[post_id]: 4881126
[parent_id]: 4880966
[tags]: 
For a number of compiler specific solutions you can take a look at the fips_premain.c file from the OpenSSL distribution (you can view it online in a bunch of places, here for instance). The MSVC specific part looks something like ( FINGERPRINT_premain being the function to be executed before main ): # ifdef _WINDLL __declspec(dllexport) /* this is essentially cosmetics... */ # endif void FINGERPRINT_premain(void); static int premain_wrapper(void) { FINGERPRINT_premain(); return 0; } # ifdef _WIN64 # pragma section(".CRT$XCU",read) __declspec(allocate(".CRT$XCU")) # else # pragma data_seg(".CRT$XCU") # endif static int (*p)(void) = premain_wrapper; /* This results in pointer to premain to appear in .CRT segment, * which is traversed by Visual C run-time initialization code. * This applies to both Win32 and [all flavors of] Win64. */ # pragma data_seg()
