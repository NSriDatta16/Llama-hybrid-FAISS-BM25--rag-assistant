[site]: stackoverflow
[post_id]: 3146878
[parent_id]: 3141384
[tags]: 
OK, so I found a permutation that seem to work -- First I need a wrapper script that will give an indication when done: #!/bin/bash "$@" echo "done" Then the expect script becomes: #!/usr/bin/expect -f set user_at_host [lrange $argv 0 0] set password [lrange $argv 1 1] # no need for timeout 1 set timeout 60 # use the wrapper spawn wrapper ssh -S ~/.ssh/tmp.$user_at_host -M -N -f $user_at_host expect { "*yes/no*" { send "yes\r" ; exp_continue } "*assword:" { send "$password\r" ; exp_continue } # use the wrapper "done" { exit } } Thanks for Douglas Leeder (voted up) and glenn jackman (voted up) for the helpful advice. I will gladly un-accept this answer, and accept any more elegant answer, perhaps one that do away with the wrapper script. Thank you all for your attention.
