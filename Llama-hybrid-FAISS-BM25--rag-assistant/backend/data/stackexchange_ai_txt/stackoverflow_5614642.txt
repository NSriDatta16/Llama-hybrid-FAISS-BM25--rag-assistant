[site]: stackoverflow
[post_id]: 5614642
[parent_id]: 
[tags]: 
Help with transforming arrays and hashes

I'm trying to use Highcharts in my web app, but I'm having some trouble getting my arrays to match the output that highcharts needs, essentially hightcharts needs output like this in it's JS: series: [{ name: 'person', data: [1562, 873, 1457] }, { name: 'car', data: [7323, 324, 1233] }, { name: 'SUV', data: [832, 6232, 4432] }] Where each item in the data array in this case is a new day, my problem is that my data is organized a bit differently, and trying to transform my data to match this has been a headache. basically my output is like so: [ {:date=>"Sun, 10 Apr 2011", :object_types=>[ {:count=>4279, :class_name=>"person"}, {:count=>8785, :class_name=>"car"}, {:count=>2153, :class_name=>"SUV"} ]}, {:date=>"Sat, 09 Apr 2011", :object_types=>[ {:count=>12206, :class_name=>"person"}, {:count=>29095, :class_name=>"car"}, {:count=>7565, :class_name=>"SUV"} ]}, {:date=>"Fri, 08 Apr 2011", :object_types=>[ {:count=>4159, :class_name=>"person"}, {:count=>8043, :class_name=>"car"}, {:count=>1982, :class_name=>"SUV"} ]} ] So it seems that I need to primarily have the items first grouped by (in my case) :class_name , then within that the :count by day as each item in data . I'm having trouble find the the "ruby way" to do this elegantly, I'm not super awesome at manipulating arrays and hashes as you can probably see, but any bit of help in guiding me towards accomplishing this the right way is appreciated. Secondly, I tried to accomplish this using group() in my query originally but that doesnt seem to be helping much, thoughts? Another thing I'll have to solve is filling dates with "0" if there are no records for it... but I'll tackle that next I think.
