[site]: stackoverflow
[post_id]: 5264950
[parent_id]: 
[tags]: 
openmp randomly uses only one core

I'm on Ubuntu 10.04 , gcc version 4.4.3 . I'm compiling c++ code with omp.h and a g++ parameter -fopenmp . Most of the time everything works as expected. I have quad-core with hyper-threading, so virtually 8 cores. Randomly, when I run my software (and watch system monitor) all 8 cores woof up to 100%, fans kick in, all that good deal. Within half a second all cores but 1 shut down to inactive, and one remains working. At this time if I cancel my program (just plain Ctrl+C) and restart it - it works as expected, all cores keep working at 100%. Here are snippets of code in case it's useful: 28 #include 29 #include 30 #include ... 713 #ifdef _OPENMP 714 if(omp_get_dynamic()) 715 omp_set_dynamic(1); 716 #endif 717 718 #pragma omp parallel 719 { 720 #pragma omp for schedule(dynamic) private(node) 721 for (int c = 0; c GetCount(); c++) { ... initialize objects pointers etc 724 #pragma omp critical(BUFFER_LOOKUP) 725 { ... perform chunk of code that is a choke 734 }
