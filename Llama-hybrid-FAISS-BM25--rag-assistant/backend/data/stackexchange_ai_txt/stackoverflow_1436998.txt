[site]: stackoverflow
[post_id]: 1436998
[parent_id]: 1435402
[tags]: 
I would take a look at how paperclip stores its files. It seems to create a specific subfolder for each file to avoid name clashes. Not sure how that scales and kind of hope never to find out. If you store all that in the DB (on average they might be small enough to consider it) you don't need to worry about dealing with that. Some reading that might help.
