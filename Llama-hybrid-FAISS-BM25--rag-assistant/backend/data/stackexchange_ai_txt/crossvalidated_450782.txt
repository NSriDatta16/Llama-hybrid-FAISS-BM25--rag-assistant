[site]: crossvalidated
[post_id]: 450782
[parent_id]: 449196
[tags]: 
I believe there is a parameteric solution to estimating the Average Treatment Effect for a difference-in-differences study using the $g$ -computation method: 1) Fit a GLM to the data, including terms for the time period and treatment group plus interactions: $$ \mathbb{E}[Y|P,T,\mathbf{X}]=e^{\beta_0+\beta_P\cdot P+\beta_T\cdot T+\beta_{PT}\cdot P\cdot T+. . .}$$ 2) For each record in the data compute the three counterfactual expected values of $Y$ (in addition to the existing expected value in the original data) by substituting alternative values for the the time period and treatment variables into the regression formula: $$\mathbb{E}[Y_i|P_i=0, T_i=0, \mathbf{X}_i]$$ $$\mathbb{E}[Y_i|P_i=0, T_i=1,\mathbf{X}_i]$$ $$\mathbb{E}[Y_i|P_i=1, T_i=0,\mathbf{X}_i]$$ $$\mathbb{E}[Y_i|P_i=1, T_i=1,\mathbf{X}_i]$$ 3) Compute the Average Treatment Effect by taking the geometric mean of the individual treatment effects: $$ ATE = \biggl[\prod_{i=1}^n\frac{\mathbb{E}(Y_i|P_i=1,A_i=1,\mathbf{X}_i)/\mathbb{E}(Y_i|P_i=0,A_i=1,\mathbf{X}_i)}{\mathbb{E}(Y_i|P_i=1,A_i=0,\mathbf{X}_i)/\mathbb{E}(Y_i|P_i=0,A_i=0,\mathbf{X}_i)}\biggr]^{\frac{1}{n}}$$ The 95% confidence interval for the $ATE$ estimate can be estimated with bootstrapping, computer resources permitting.
