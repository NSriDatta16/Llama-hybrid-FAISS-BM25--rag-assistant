[site]: stackoverflow
[post_id]: 1379597
[parent_id]: 
[tags]: 
Zend_Auth fails to write to storage

I have yet another weird annoying thing going on with Zend. Basically, I have the following code after creating a user domain: $this->auth = Zend_Auth::getInstance(); $this->view->user = $this->user = $this->auth->getIdentity(); $this->user->idSite = $idSite; $this->user->urlSite = $urlSite; $this->auth->getStorage()->write($this->user); What FURIOUSLY annoys me is that the auth->getIdentity() just moments after that: [idSite] => 0 [urlSite] => So from here it gets worse: If I REFRESH or if any of the other parameters of the form fail and send me to the SAME FORM, but WITHOUT TOUCHING THE ABOVE SCRIPT, the auth-getIdentity() correctly returns: [idSite] => 2431 [urlSite] => exampledomain Which means that the code is correct and working, BUT if the form is filled out correctly and everything adds up nicely, I redirect to the next step: $this->_redirect('nextstep'), and neither idSite or urlSite remain empty forever. Why is this? Why?
