[site]: stackoverflow
[post_id]: 2001637
[parent_id]: 
[tags]: 
opaque (abstract) data types in C

File api.h #include #ifndef API #define API struct trytag; typedef struct trytag try; void trial (try *); #endif File core.h #ifndef CORE #define CORE struct trytag { int a; int b; }; #endif File func.c #include "api.h" #include "core.h" void trial (try *tryvar) { tryvar->a = 1; tryvar->b = 2; } File main.c #include "api.h" int main () { try s_tryvar; trial(&s_tryvar); printf("a = %d\nb = %d\n", s_tryvar.a, s_tryvar.b); } When I compile, I get: main.c:5: error: storage size of ‘s_tryvar’ isn’t known If I include core.h in main.c this error doesn't come as try is defined in core.h . But I want the structure try to be hidden to main.c — it should not know the members of try structure. What am I missing?
