[site]: crossvalidated
[post_id]: 522923
[parent_id]: 522848
[tags]: 
The multi-state vignette for the R survival package sets out how to approach this type of problem; your situation with a set of sequential, uni-directional possible transitions is illustrated in the top right panel of Figure 1 of the vignette. So in principle your situation can be handled with a survival model. The main problems here are: (1) formatting the data correctly, (2) formulating the model appropriately and (3) geting a useful result even if you do all that. Item (3) can't really be predicted in advance. Here's what you need to watch out for in Items (1) and (2). The main task for Item (1) is to convert these wide-form data into long-form data, with each row representing a particular defined time period for a single RAUMID . Each row then specifies the RAUMID , a start time, a stop time, any covariate values in place during the period (in particular, was the anti-gentrification policy in place) and whether there was a change of state (event) at the end of the period. That (startTime,stopTime,event) formulation requires two additional steps starting from your data. First, the times you currently show are for the durations within each state. You probably should convert those all to time elapsed since study start (taken to be time = 0 ). Second, you need to specify a categorical variable that represents an event , a change in state in your situation. With the survival package the reference level of that variable needs to represent censoring, or no change in state at stopTime . As there are no transitions into tg0 you don't need to include a level for that, but you would need to specify categories for tg1 , tg2 , tg3 , tg4 , and tg5 . For each (startTime, stopTime, event) , if there is a change of state at stopTime you set the event variable to the corresponding new category. That format also allows for a change in covariate values over time; if the time period in question didn't end with an event change, the event category is listed as the reference level representing censoring. If I'm interpreting your data display correctly, the first row of your data would be changed into multiple rows as follows: RAUMID startTime stopTime event policy 1011101 0 2.001 tg1 p? 1011101 2.001 4.000 tg2 p? 1011101 4.000 6.001 tg3 p? 1011101 6.001 10.001 tg4 p? 1011101 10.001 t? cens p? The t? in the last stopTime should be replaced by the time elapsed between time = 0 and the last follow-up, when the RAUM was still in state tg4 . The policy value, shown as p? above, represents the policy in place during that time interval. You append whatever other covariate values held during each time period within the RAUM as additional columns. If a new policy comes into play at time $T_p$ after time = 0 , set a stopTime equal to $T_p$ and a censoring event for all affected RAUMID (unless there was also an event change at that time) and start a new data row with startTime of $T_p$ . Your sample data indicate a couple of things that you'll need to clarify. First, some RAUMID show values for tg5 , which I interpret to mean time spent in tg5 . If there is no transition possible out of tg5 it's not clear what that's intended to represent. Also, some RAUMID show values of 0 for the time in state tg0 . Presumably those are cases in which the first observed state was tg1 . If that's the case, you would specify the initial state with an istate argument ; see page 8 of the multi-state vignette. The main survival package vignette provides guidance on tools available to help with this type of data formatting, and in particular the survcheck() function that helps identify the errors that are almost inevitable in practice. Once the data are in that format, the multi-state vignette shows how to generate curves showing things like the probability in each state as a function of time For Item (2), you presumably want to see if policy changes affected the rate of transitions. You then need to apply your knowledge of the subject matter, in particular: do you expect the change in policy to affect all transitions similarly, or might it have different effects on different transitions? Section 3.4.2 of the main survival vignette illustrates how you can allow for either common or different effects of covariates on each transition. As the data are only collected annually, you will probably be better off approaching this as a discrete-time survival analysis. That can be done as an appropriately formatted logistic regression. John Willett has a website with several references to publications with his colleagues, in particular Judith Singer, showing how this can be done with logistic regression. Paul Allison wrote a characteristically clear review in 1982 discussing the principles and describing both logistic regression and complementary log-log modeling approaches. Tutz and Schmid have a more recent book-length treatment with R code, including how to use tools provided by the discSurv package. One possibility would be to format your data with one row per RAUMID per year, including (along with other covariates) the starting tg state as a categorical predictor, whether the policy was in effect that year, and a 0/1 outcome variable for no transition versus transition to next tg state that year. Logistic regression then would provide coefficients representing the effects of starting tg state and of policy on the log-odds of transition to the next state. You could include an interaction term between tg and policy in the model to see whether the policy has different associations with transitions depending on the tg state. Finally, from comments it seems that your assignments to tg states is based on a categorization process done every 2 years. That has two potential implications. For one, if you only do the categorization every 2 years, you might need to re-cast your data format into 2-year bins. For another, you might consider whether you would be better off primarily modeling a continuous measure of the gentrification process, then perhaps translating the results with the continuous measure into your categorization.
