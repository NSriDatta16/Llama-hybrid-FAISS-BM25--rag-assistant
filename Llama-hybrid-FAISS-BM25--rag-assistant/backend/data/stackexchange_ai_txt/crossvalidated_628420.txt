[site]: crossvalidated
[post_id]: 628420
[parent_id]: 628303
[tags]: 
For the case of continuous and independent random variables, with distribution functions $F_x, F_y$ marginal densities $f_x, f_y$ and joint density $f_{xy}$ , $$\Pr\left(X $${\rm [independence]}= \int_{-\infty}^{\infty}\int_{-\infty}^{y}f_x(s) f_y(y)ds dy $$ $$=\int_{-\infty}^{\infty}f_y(y)\int_{-\infty}^{y}f_x(s) ds dy=\int_{-\infty}^{\infty}f_y(y) F_x(y)dy = E_y[F_x(Y)].$$ This is the same result as in the discrete case, but here instead of discrete probabilities we use the density as the weighting scheme. To turn this into an empirical estimation formula, to estimate $F_x(Y)$ we use the empirical distribution function of $X$ at every observed value of $Y$ , $\{y_1,...,y_j,...,y_m\}$ , $$\widehat F_x(y_j) = \frac 1n \sum_{i=1}^nI\{x_i \leq y_j\}.$$ As regards the density $f_y(y)$ of $Y$ , we could use kernel density estimation, but I suspect we would lose unbiasedness. But we can also simply take the non-weighted average of the $\widehat F_x(y_j)$ terms: $$\widehat \Pr\left(X \leq Y\right) = \sum_{j =1}^m \frac{1}{m}\left(\frac 1n \sum_{i=1}^nI\{x_i \leq y_j\}\right)$$ Treating the $\{y_j\}$ as fixed (so, "for any realized sample from $Y$ "), this is unbiased, and certainly asymptotically consistent. Note: We generally expect that $m\approx n$ or even $m=n$ if we have a continuous r.v. that indeed behaves as a continuous r.v. in the sample (which doesn't always happen), and in any case we expect that $m$ (the distinct values of realized $Y$ ) will grow with $n$ .
