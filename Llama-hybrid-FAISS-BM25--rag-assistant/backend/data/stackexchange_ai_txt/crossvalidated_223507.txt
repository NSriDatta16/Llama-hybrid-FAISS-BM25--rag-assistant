[site]: crossvalidated
[post_id]: 223507
[parent_id]: 
[tags]: 
In Stata, how to avoid negative values of lower confidence interval of proportion?

I'm trying to get the CI of a proportion in Stata. Starting with some reproducible example: sysuse auto, clear tab foreign // for proportion * some dummy categorical variables gen expen = price > 6165 // strata la de expen 0 "Cheap" 1 "Expensive" la val expen expen tab expen gen mpg_cat = mpg > 21 // categories for proportion la de mpg_cat 0 "Low mpg " 1 "High mpg" la val mpg_cat mpg_cat tab mpg_cat tab foreign mpg_cat if expen == 0, col I was trying to hijack logistic regression & margins to give me CI for proportion, however I get the negative value of LCI: . logit foreign i.mpg_cat if expen == 0 Logistic regression Number of obs = 52 LR chi2(1) = 6.00 Prob > chi2 = 0.0143 Log likelihood = -26.243758 Pseudo R2 = 0.1025 ------------------------------------------------------------------------------ foreign | Coef. Std. Err. z P>|z| [95% Conf. Interval] -------------+---------------------------------------------------------------- mpg_cat | High mpg | 1.673976 .7359801 2.27 0.023 .231482 3.116471 _cons | -2.079442 .6123724 -3.40 0.001 -3.279669 -.8792136 ------------------------------------------------------------------------------ . eststo mpg_cat_0: margins mpg_cat, post Adjusted predictions Number of obs = 52 Model VCE : OIM Expression : Pr(foreign), predict() ------------------------------------------------------------------------------ | Delta-method | Margin Std. Err. z P>|z| [95% Conf. Interval] -------------+---------------------------------------------------------------- mpg_cat | Low mpg | .1111111 .0604812 1.84 0.066 -.0074299 .2296521 High mpg | .4 .0979796 4.08 0.000 .2079635 .5920365 ------------------------------------------------------------------------------ Should I resort to using ci command instead? . eststo mpg_cat_0: bysort mpg_cat: ci proportions foreign if expen == 0, exact ------------------------------------------------------------------------------------- -> mpg_cat = Low mpg -- Binomial Exact -- Variable | Obs Proportion Std. Err. [95% Conf. Interval] -------------+--------------------------------------------------------------- foreign | 27 .1111111 .0604812 .0235275 .2915869 ------------------------------------------------------------------------------------- -> mpg_cat = High mpg -- Binomial Exact -- Variable | Obs Proportion Std. Err. [95% Conf. Interval] -------------+--------------------------------------------------------------- foreign | 25 .4 .0979796 .2112548 .6133465
