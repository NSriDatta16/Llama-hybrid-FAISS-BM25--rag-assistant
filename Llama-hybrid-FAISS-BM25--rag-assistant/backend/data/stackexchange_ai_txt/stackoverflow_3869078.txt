[site]: stackoverflow
[post_id]: 3869078
[parent_id]: 
[tags]: 
Trouble with char* and char** (C --> C++)

Okay, I am trying to integrate some C code into a C++ project, and have run into a few problems. I will detail the first one here. I keep running into this error: error: cannot convert 'char*' to 'char**' in assignment| here is the offending code (with the breakpoint marked): char** space_getFactionPlanet( int *nplanets, int *factions, int nfactions ) { int i,j,k; Planet* planet; char **tmp; int ntmp; int mtmp; ntmp = 0; mtmp = CHUNK_SIZE; tmp = malloc(sizeof(char*) * mtmp); The malloc function is derived from a C header. Here is the declaration: _CRTIMP void* __cdecl __MINGW_NOTHROW malloc (size_t) __MINGW_ATTRIB_MALLOC; I am using codeblocks, which is set to use MinGW. The above syntax is totally foreign to me. I am totally stumped, since this code works fine in the C program I took it from. Any Ideas? EDIT 1: Oops, just realized that the declaration is from stdlib.h. EDIT 2: I tried: tmp = static_cast (malloc(sizeof(char*) * mtmp)); As suggested, but not I get error: invalid static_cast from type 'char*' to type 'char**'. EDIT 3: Okay, reinterpret_cast works, but the solution to replace mallocs seems much more elegantly simple, so I am going with that. However, there is no free(tmp) at the end of the function. Is this a problem if I don't put in a delete tmp[]? EDIT 4: I should add that tmp is returned by the function, so it is neccesary to delete tmp, or is this automatic? Okay I am marking this solved. Thanks for your help.
