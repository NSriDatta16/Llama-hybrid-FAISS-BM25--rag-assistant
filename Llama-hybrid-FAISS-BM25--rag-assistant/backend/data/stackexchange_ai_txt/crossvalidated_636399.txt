[site]: crossvalidated
[post_id]: 636399
[parent_id]: 
[tags]: 
Should the expectation of an variable in shap method being zero?

I don't know if I misunderstand the concept of shap value: so for all sample's target var(y), there is an expectation of them, or E(f(x)), which is set to as the horizontal line of shap, which is set to zero. In the specific var(one of X), for each specific var value(e.g. 5), there should be also an expectation of target value, which is represented in math as E(f(x)|x1 = 5) So for some value of that var, the expectation of f(x) should be over average E(f(x))[has positive mean shap value for that sample's specific var], while some value of that var should be lower than average[has negative mean shap value for that sample's specific var], but the sum up of every sample's var shap value should also be zero(means E(f(x))). Else the total mean value of E(E(f(x)|x1)) can't be E(f(x)) However, when I use a project in github on my classification task, for some var, all shap value is less than 0 and for some var, all shap value is more than 0. The meaning is understandable, that, if that all shap-value negative var presents, for any value it will drag the f(x) down from its horizontal value, while for presents of all shap-value positive it means for any value it will pull up the f(x) up from its average value. But if this is the case, the definition of var's shap could be different from my understanding. I was using a method in a project in github, the link is here: github shap calculation And the explanation of shap I am reference to is here: shap application explanation The var presented here didn't have missing value. I have a plot here: you can see what I mean better in picture. Any help is welcomed.
