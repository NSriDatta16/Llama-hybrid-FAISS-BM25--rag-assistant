[site]: stackoverflow
[post_id]: 4384076
[parent_id]: 4383971
[tags]: 
A user agent is just an http header, so you should be able to use the methods here: http://guides.rubyonrails.org/testing.html#helpers-available-for-integration-tests And pass in the user agent to the headers (I didn't test this): headers = {"User-Agent" => "Googlebot"} request_via_redirect(:get, '/', {}, headers)
