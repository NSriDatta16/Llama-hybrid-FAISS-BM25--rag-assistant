[site]: stackoverflow
[post_id]: 4146096
[parent_id]: 
[tags]: 
Prevent IIS from starting application before previous instance has been shut down during restart

Sometimes when IIS restarts the app pool it will start a new instance of my application before the previous instance is shut down completely. This causes me alot of problem so i wonder what i can do about it. The course of action goes something like this. (spanning about 20 seconds) Application is running, let's call this instance A. Restart initializes A new instance is started, let's call this B (Logged by Application_Start) Incomming request is processed by instance B, this invalidates all data A has cached. Timer on instance A is triggered, assumes its cache is valid and writes something invalid into the persistant storage. Instance A is shut down (logged by Application_End) Preferable i would like to disable the above behavior completely, IIS should only allow one instance. If not possible, can i in my code detect if other instances is alread running and then wait for it to quit inside application_start? If not possible, what is the best way to work around this?
