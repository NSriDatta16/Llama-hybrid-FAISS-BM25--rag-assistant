[site]: stackoverflow
[post_id]: 5610713
[parent_id]: 
[tags]: 
Hebrew as Gibberish on the server side

I have an iPhone simulator app as client and WCF-REST, json encoded service running on IIS 7.0 server. I'm trying to send some hebrew characters to the service as parameter and the server return error code 400 - Bad Request. When I'm sending an English string the server processes the string as it should. The code used for the string encoding looks like this: Note that "parameters" is the parameters that about to be sent to the server, ordered as parameter_name => parameter_value. //RPC JSON NSString* reqString = [parameters JSONRepresentation]; //Request NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url]; NSData* requestData = [NSData dataWithBytes:[reqString UTF8String] length:[reqString length]]; //prepare http body [request setHTTPMethod: @"POST"]; [request setValue:[NSString stringWithFormat:@"%d", [requestData length]] forHTTPHeaderField:@"Content-Length"]; [request setValue:@"application/json" forHTTPHeaderField:@"Accept"]; [request setValue:@"application/json; charset=UTF-8" forHTTPHeaderField:@"Content-Type"]; [request setHTTPBody: requestData]; urlConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES]; The request and response I'm getting in the server side (got this by using ethereal): Request: POST /SmsliMobileService.svc/SetContactGroups HTTP/1.1 Host: 192.168.10.22:8081 User-Agent: Beeper_3/1.0 CFNetwork/485.12.7 Darwin/10.7.0 Content-Length: 89 Accept: application/json Content-Type: application/json; charset=UTF-8 Accept-Language: en-us Accept-Encoding: gzip, deflate Connection: keep-alive Response: {"ApplicationID":"98534bb6-82ef-4937-83e7-10f65780bf36","contact_id":43,"groups":"עבו×HTTP/1.1 400 Bad Request Content-Length: 1647 Content-Type: text/html Server: Microsoft-IIS/7.5 X-Powered-By: ASP.NET Date: Sun, 10 Apr 2011 07:46:09 GMT Request Error BODY { color: #000000; background-color: white; font-family: Verdana; margin- left: 0px; margin-top: 0px; } #content { margin-left: 30px; font-size: .70em; padding- bottom: 2em; } A:link { color: #336699; font-weight: bold; text-decoration: underline; } A:visited { color: #6699cc; font-weight: bold; text-decoration: underline; } A:active { color: #336699; font-weight: bold; text-decoration: underline; } .heading1 { background- color: #003366; border-bottom: #336699 6px solid; color: #ffffff; font-family: Tahoma; font- size: 26px; font-weight: normal;margin: 0em 0em 10px -20px; padding-bottom: 8px; padding- left: 30px;padding-top: 16px;} pre { font-size:small; background-color: #e5e5cc; padding: 5px; font-family: Courier New; margin-top: 0px; border: 1px #f0f0e0 solid; white-space: pre- wrap; white-space: -pre-wrap; word-wrap: break-word; } table { border-collapse: collapse; border-spacing: 0px; font-family: Verdana;} table th { border-right: 2px white solid; border-bottom: 2px white solid; font-weight: bold; background-color: #cecf9c;} table td { border-right: 2px white solid; border-bottom: 2px white solid; background-color: #e5e5cc;} Request Error The server encountered an error processing the request. See server logs for more details. Any help will be appreciated.
