[site]: stackoverflow
[post_id]: 1004335
[parent_id]: 
[tags]: 
iterating over unknown XML structure with PHP (DOM)

I want to write a function that parses a (theoretically) unknown XML data structure into an equivalent PHP array. Here is my sample XML: Sample Text This is some rudimentary text Here is some more text Even MORE text This is a smaller, sub paragraph This is another smaller, sub paragraph I modified this DOM iterating function from devarticles: $data = 'path/to/xmldoc.xml'; $xmlDoc = new DOMDocument(); #create a DOM element $xmlDoc->load( $data ); #load data into the element $xmlRoot = $xmlDoc->firstChild; #establish root function xml2array($node) { if ($node->hasChildNodes()) { $subNodes = $node->childNodes; foreach ($subNodes as $subNode) { #filter node types if (($subNode->nodeType != 3) || (($subNode->nodeType == 3))) { $arraydata[$subNode->nodeName]=$subNode->nodeValue; } xml2array($subNode); } } return $arraydata; } //The getNodesInfo function call $xmlarray = xml2array($xmlRoot); // print the output - with a little bit of formatting for ease of use... foreach($xmlarray as $xkey) { echo"$xkey "; } Now, because of the way I'm passing the elements to the array I'm overwriting any elements that share a node name (since I ideally want to give the keys the same names as their originating nodes). My recursion isn't great... However, even if I empty the brackets - the second tier of nodes are still coming in as values on the first tier (see the text of the description node). Anyone got any ideas how I can better construct this?
