[site]: stackoverflow
[post_id]: 1856869
[parent_id]: 
[tags]: 
Table per hierarchy inheritance with POCO entities in Entity Framework 4

Our organization is looking to standardize on Entity Framework once v4 comes out. As a result, I am looking at what it would take to migrate our application that uses NHibernate for persistence to EF4 using POCO support. In a couple of places we use single table inheritance (also known as Table Per Hierarchy). I have been unable to get it to work using the following. Payment (base class [should be abstract but having trouble there as well]) CreditCardPayment (concrete implementation) ACHPayment (concrete implementation) CheckPayment (concrete implementation) Right now, I am mapping them with only the base class properties. All of these classes are in the same namespace. They have a discrimimator that is called PaymentTypeId in the database, so the Payment mapping has a condition of "When PaymentTypeId = 0". Each of the subclasses have the same condition with different values (i.e. CreditCardPayment = 1, etc.). When I try to load each a list of all payments using DataContext.Payments.ToList() (DataContext inherits from ObjectContext) I am getting the following exception: "Object mapping could not be found for Type with identity 'DataLayer.DataModel.CreditCardPayment'." I can't figure out what this means, as the POCO CreditCardPayment class lives in the same namespace as the POCO Payment class does (in fact in the same file). What am I missing?
