[site]: stackoverflow
[post_id]: 1430085
[parent_id]: 1430051
[tags]: 
SELECT id, EXTRACT(HOUR_MINUTE FROM log_time), ROUND(AVG(log_value)) AS average_value FROM (`logs`) GROUP BY EXTRACT(HOUR_MINUTE FROM log_time), id UNION ALL SELECT null id, EXTRACT(HOUR_MINUTE FROM log_time), ROUND(AVG(log_value)) AS average_value FROM (`logs`) GROUP BY EXTRACT(HOUR_MINUTE FROM log_time) ORDER BY EXTRACT(HOUR_MINUTE FROM log_time) the first query calculate average on distinct Id, HOUR_MINUTE. the second query calculate average on distinct HOUR_MINUTE = sum of each Id average for that HOUR_MINUTE (id = null to do the UNION).
