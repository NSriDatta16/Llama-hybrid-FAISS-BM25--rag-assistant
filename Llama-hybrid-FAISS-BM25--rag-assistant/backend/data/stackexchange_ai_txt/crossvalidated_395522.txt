[site]: crossvalidated
[post_id]: 395522
[parent_id]: 
[tags]: 
predict.bsts does not capture holiday information

EDIT (Tue12Mar): The bug fixes are on their way. See https://github.com/steve-the-bayesian/BOOM/issues/25 I've been working with bsts to model time-series and make forecasts, but have run into some problems with the predict function and holidays. When I train the model with regressor holidays these regressors do not appear to be used in the predict function. For instance in a simple local level model the holiday regressor causes the response variable to go down, but the predictor of the response over the same period does not capture this behaviour. I attach below a close to minimum working example based on the regression.holiday code from the documentation. You will see the green line representing the mean/95%CI failing to capture the Memorial Day holiday EDIT (Mon4Mar18): Here's a .csv with the simulated data. Consists of 3 columns: Date, Value and Train (TRUE/FALSE depending whether in training set) library(bsts) library(tidyverse) set.seed(12345) trend = cut_date] ss $Date %in% time(test_data)[1:my_horizon],]$ predict_mean = pred $mean plot_info[plot_info$ Date %in% time(test_data)[1:my_horizon],] $predict_lower = pred$ interval[1,] plot_info[plot_info $Date %in% time(test_data)[1:my_horizon],]$ predict_upper = pred$interval[2,] ## Let's make a pretty plot to demonstrate the problem filter(plot_info, Date > time(test_data)[1] - 25 & Date % ggplot(aes(x = Date, y = value)) + geom_line() + geom_line(aes(y = predict_mean), col = "Forest Green") + # The prediction geom_line(aes(y = predict_lower), col = "Forest Green", lty = 2) + # lower bound geom_line(aes(y = predict_upper), col = "Forest Green", lty = 2) # upper bound
