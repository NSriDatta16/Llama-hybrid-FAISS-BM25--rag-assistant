[site]: stackoverflow
[post_id]: 2549087
[parent_id]: 2548982
[tags]: 
The only thing I can do is read the author's (Appel) rules of his IR tree language. For a grammar: ::= + ::= IDENTIFIER | LITERAL The AST tree might be: BINOPEXPR(+, EXPR(IDENTIFIER(k)), EXPR(LITERAL(1))) Or might include IdentifierExpression and LiteralExpression, so it might be: BINOPEXPR(+, IDENT_EXPR(k), LITERAL_EXPR(1)) But AST and IR tree are different things. So according to Appel's book, in section 7.1 of the C version: NAME(n) = Sumbolic constant n corresponding to an assembly language label. MEM(e) = Contents of wordSize bytes of memory starting at address e. When MEM() isused as the left child of a MOVE(), it means "store", but anywhere else it means "fetch". LABEL(n) = Define constant value of name n to be the current machine code address. This is like a label definition in assembly language. The value NAME(n) may be the target of jumps, calls, etc. Given his rules, NAME() is not what you want there for a variable k, name is used for code labels. My guess based on reading him is if k is a variable, and in this case it is an r-value, then you use simply MEM(e) but e could be either a local variable (in the local stack frame), or a global variable, or even a temporary. So the translation for "k + 1" will depend on where "k" is allocated. If its in the local stack frame, then k is: MEM(BINOP(+, TEMP fp, CONST (address of k))) So k + 1 would be: BINOP(+, MEM(BINOP(+, TEMP fp, CONST (address of k))), 1) So you need to be clear on how you are allocating storage for your variables. That will be in the symbol table for the identifier. I've got at least 20 compiler books and honestly, I find Appel's book confusing and too brief in areas. He makes conceptual leaps that a student does not follow, and could use a bit more elaboration in places. Since I've never actually implemented IR trees, (I always write to a textual Intermediate Language with assembler support for both declaring variables of different scopes, and symbolic temporaries) I cannot say for sure what he means, so I recommend confirming with your professor as he has probably taught with the book before and may know it better. Hope that helps.
