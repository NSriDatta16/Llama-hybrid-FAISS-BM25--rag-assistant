[site]: stackoverflow
[post_id]: 4705301
[parent_id]: 
[tags]: 
Magento - HTML minify code causing some javascript not working

I have the below code to remove white space in a Magento site. ob_start("htmlcompress"); function htmlcompress($buffer) { $buffer = preg_replace('/\n\r|\r\n|\n|\r|\t| {2}/', '', $buffer); return $buffer; } It works well, however in some areas where inline javascripts are used, the scripts stopped working. Example, in "checkout/onepage/billing.phtml": // getAddress()->getRegionId() ?>"); //]]> and "giftmessage/inline.phtml" where toogle function disabled; also the "payment/form/cc.phtml" where radio button for payment options. Not all inline scripts got disabled though, for instance, anything start with "var" are working. How I can improve the compress script to prevent javascript from stop working? Thanks
