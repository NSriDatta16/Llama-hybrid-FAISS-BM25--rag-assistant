[site]: stackoverflow
[post_id]: 703631
[parent_id]: 703217
[tags]: 
Couldn't you match the string by something like this regex ^([A-Z]\d*)*$ and then work through the generated match list? The divisor would just be the length of this list (perhaps after removing duplicates). For mapping symbols to Agents (why AgentTypes?), you could use a simple associative list, or a hashmap (I don't know what kind of constructs are easiest available in PHP).
