[site]: stackoverflow
[post_id]: 3126994
[parent_id]: 3124697
[tags]: 
This was about ensuring login page is https even when the page requiring authentication is not set as CONFIDENTIAL in web.xml. I've ended up writing a little servlet that allows me to switch to https (or http) rather than rely on web.xml CONFIDENTIAL config settings. The CONFIDENTIAL settings dont seem to work when you arrive at a jsp page through the login or through another servlet. So now the config for the FORM authentication in web.xml points to a servlet (SSLSwitch) which takes a couple of arguments (url + desired protocol http/https) and redirects to the actual login page with https: /SSLSwitch?the_url=/login/form_login.jsp&the_target=https; /login/error.jsp SSLSwitch Servlet active code fragment: String contextPath = request.getContextPath(); String encodedUrl = response.encodeURL(contextPath + url); String fullUrl = target_domain + encodedUrl; response.sendRedirect(fullUrl); The jsp login page itself follows the usual FORM login rules (action="j_security_check") and you end up on the requested page after login ok. I now need to look at what I can do to improve session security after switching from https to http. Maybe a filter to check user's IP doesnt change during a session. Steven.
