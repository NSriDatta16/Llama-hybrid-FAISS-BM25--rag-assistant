[site]: stackoverflow
[post_id]: 2428515
[parent_id]: 2421914
[tags]: 
Here's a variant of Amber Shah's "big hack" suggestion I just made. Without the isShowingPopup flag... It's not bulletproof, but it works quite well until someone comes in with an incredibly slow click to close the popup (or a very fast second click to reopen it...). public class Button extends JButton { // Icon. private static final ImageIcon ARROW_SOUTH = new ImageIcon("ArrowSouth.png"); // Popup menu. private final JPopupMenu menu; // Last time the popup closed. private long timeLastShown = 0; public Button(int height) { super(ARROW_SOUTH); menu = new JPopupMenu(); // Populated somewhere else. // Show and hide popup on left click. menu.addPopupMenuListener(new PopupMenuListener() { @Override public void popupMenuWillBecomeInvisible(PopupMenuEvent arg0) { timeLastShown = System.currentTimeMillis(); } @Override public void popupMenuWillBecomeVisible(PopupMenuEvent arg0) {} @Override public void popupMenuCanceled(PopupMenuEvent arg0) {} }); addActionListener(new ActionListener() { @Override public void actionPerformed(ActionEvent e) { if ((System.currentTimeMillis() - timeLastShown) > 300) { Component c = (Component) e.getSource(); menu.show(c, -1, c.getHeight()); } } }); // Skip when navigating with TAB. setFocusable(false); } } As I said in comments, that's not the most elegant solution, but it's horribly simple and it works in 98% of the cases. Open to suggestions!
