[site]: crossvalidated
[post_id]: 228322
[parent_id]: 
[tags]: 
Principal Component Regression on log returns exactly predicting last value of time series every time

I am trying to run PCR on a list of a few time series, and no matter which dates I run this on, I am getting a difference between my predicted and actual of zero for the last entry in every time series. To explain that in more detail, I'm running the following Python code: import pandas as pd import numpy as np from sklearn.decomposition import PCA from sklearn.linear_model import LinearRegression def rich_cheap_pcr_between_dates(df, dependent_col, n_components=3, start="", end=""): # Preprocess data df = slice_df_between_dates(df, start, end) df.sort_index(ascending=True, inplace=True) y = df[dependent_col] X = df.drop(dependent_col, 1) # Get log returns of X Dataframe x_scaled = X.pct_change(periods=1).dropna() x_scaled = x_scaled + 1 x_scaled = x_scaled.apply(np.log) # Get log returns of y Dataframe y_scaled = y.pct_change(periods=1).dropna() y_scaled = y_scaled + 1 y_scaled = y_scaled.apply(np.log) # PCA pca = PCA(n_components=n_components) X_reduced = pca.fit_transform(x_scaled) # Linear Regression on principal components regr = LinearRegression() regr.fit(X_reduced, y_scaled) # Prediction and richness/cheapness to actual pcr_predicted = regr.predict(X_reduced) rich_cheap = y_scaled - pcr_predicted plt.plot(y_scaled.index, y_scaled.cumsum()) plt.plot(y_scaled.index, pcr_predicted.cumsum()) symbols_list = ['ORCL', 'TSLA', 'IBM','YELP', 'MSFT'] d = {} for ticker in symbols_list: d[ticker] = DataReader(ticker, "yahoo", '2014-12-01') pan = pd.Panel(d) df = pan.minor_xs('Adj Close') rich_cheap_pcr_between_dates(df, "IBM", start="01/01/16", end="07/29/16") Where pcr_predicted is the predicted daily log returns of the data series based on the PCR, and rich_cheap is the difference between that and the actual log returns of the series. The strange part that I can't figure out is, no matter which data series I run this on, I continue to get the same exact final values for pcr_predicted.cumsum() and y_scaled.cumsum() . Or, in other words, when I ran this for the above code, I got a graph that looks like this: Here's the same code run but with IBM replaced by ORCL : Notice that the two values fluctuate around each other, but then converge to the same value at the very end. Now, no matter what I choose as my starting and ending dates or time series, I see the same phenomenon, with the last values converging to the same thing. This isn't what I would expect, unless I am doing something in my code that's forcing that to happen. Can anyone help me figure out what's causing this behavior?
