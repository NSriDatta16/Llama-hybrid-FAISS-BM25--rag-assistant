[site]: crossvalidated
[post_id]: 368527
[parent_id]: 368513
[tags]: 
Welcome to CrossValidated. I don't know what Stata does, but I do know what lsmeans() does: it obtains predictions on a regular grid of factor values, and the marginal lsmeans are obtained by averaging those predictions together with equal weights . So one possibility is that Stata margins does not use equal weights. If so, you can check to see if you get the same results as Stata if you change the weights -- e.g., lsmeans(..., weights = "prop") ; see the documentation for lsmeans() . Another issue, given that this is logistic regression, is what scale those margins are computed on. The lsmeans package, by default, computes the marginal averages on the logit scale (i.e., the linear-predictor scale), and if you specify type = "response" , it will back-transpose the marginal averages to the probability scale. But it is possible that margins back-transforms first and averages later, which would produce different results. By the way, there has been no new development or updates of lsmeans for about a year, because it has been superseded by the emmeans package (which still provides an lsmeans() function as an alias for emmeans() ). I recommend you install emmeans and use that in the future. The emmeans package has quite a few vignettes that you can access via https://cran.r-project.org/package=emmeans . The one on basics explains the rudiments of emmeans (aka lsmeans), and the one on transformations discusses how to change when the back-transforming is done relative to the averaging. I hope this answer helps on the R end. I can't help with getting Stata to do the same thing, though; sorry.
