[site]: stackoverflow
[post_id]: 5528309
[parent_id]: 5528234
[tags]: 
How do I make sure that all my data has been received before I try to construct it and do something with it? You have to implement some protocol so you know. While TCP is reliable, it does not guarantee that the data from single write at one end of the socket will appear as a single read at the other end: retries, packet fragmentation and MTU can all lead to data being received in different sized units by the receiver. You will get the data in the right order. So you need to include some information when sending that allows the receiver to know when it has the complete message. I would also recommend including what kind of message and what version of the data (this will form the basis of being able to support different client and server versions together). So the sender sends: - Message type - Message version - Message size (in bytes) And the receiver will loop, performing a read with a buffer and appending this to a master buffer ( MemoryStream is good for this). Once the complete header is received it knows when the complete data has been received. (Another route is to include some pattern as an "end of message" marker, but then you need to handle the same sequence of bytes occurring in the contentâ€”hard to do if the data is binary rather than text.)
