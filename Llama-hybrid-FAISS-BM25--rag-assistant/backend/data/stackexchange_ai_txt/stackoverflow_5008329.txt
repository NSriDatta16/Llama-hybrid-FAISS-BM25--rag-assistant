[site]: stackoverflow
[post_id]: 5008329
[parent_id]: 5008298
[tags]: 
I think this is beyond unit testing because the whole point of synchronization is to provide a certain type of connection between two distant pieces of code. You can test the way it behaves with messages being null and not null, and that gives you full coverage. It won't say anything about whether your synchronization is semantically correct.
