[site]: stackoverflow
[post_id]: 5674130
[parent_id]: 
[tags]: 
How to get an OAuth Request Token for Google using java

I'm struggling to fetch a request token from google when trying to access the APIs. I'm receiving the standard 400 response. The request i'm sending is almost identical to that generated in the OAuth playground they provide. I'm using the anonymous secret/key and have constructed a base string as follows : GET&https%3A%2F%2Fwww.google.com%2Faccounts%2FOAuthGetRequestToken&oauth_callback%3Dhttp%253A%252F%252Fgooglecodesamples.com%252Foauth_playground%252Findex.php%26oauth_consumer_key%3Danonymous%26oauth_nonce%3D61dddc084c4e8adfa13d1509161939b0%26oauth_signature_method%3DHMAC-SHA1%26oauth_timestamp%3D1302853379%26oauth_version%3D1.0%26scope%3Dhttps%253A%252F%252Fwww.google.com%252Fcalendar%252Ffeeds%252F To debug the request being sent I setup TCP/IP monitoring in eclipse. However this only monitors Http traffic so the follwing is a 99% reflection of what is being requested. GET /accounts/OAuthGetRequestToken?scope=http%3A%2F%2Fwww.google.com%2Fcalendar%2Ffeeds%2F HTTP/1.1 Authorization: OAuth oauth_callback="http%3A%2F%2Fgooglecodesamples.com%2Foauth_playground%2Findex.php", oauth_consumer_key="anonymous", oauth_nonce="8cc04c7633db041dd0fd8e5fd0eb728e", oauth_signature="epRa5IZOA6s%2B3qhZa%2FUxuwYKnJA%3D", oauth_signature_method="HMAC-SHA1", oauth_timestamp="1302790583", oauth_version="1.0" Accept: */* User-Agent: Java/1.6.0_24 Host: localhost Connection: keep-alive Can you tell me what I'm doing wrong? Thanks in advance. Below is the the only code i'm using for this. package com.pdw.gb; import java.io.BufferedReader; import java.io.InputStreamReader; import java.net.URL; import java.net.URLConnection; import java.net.URLEncoder; import java.util.Calendar; import java.util.Date; import java.util.Random; import javax.crypto.Mac; import javax.crypto.spec.SecretKeySpec; import com.google.gdata.util.common.util.Base64; public class OAuthTest3 { public static String read(String url) { StringBuffer buffer = new StringBuffer(); try { String[][] data = { { "oauth_callback", URLEncoder.encode("http://googlecodesamples.com/oauth_playground/index.php","UTF-8") }, { "oauth_consumer_key", "anonymous" }, { "oauth_nonce", a64BitRandomString() }, { "oauth_signature_method", "HMAC-SHA1" }, { "oauth_timestamp", timeSinceEpochInMillis() }, { "oauth_signature", "" }, { "oauth_version", "1.0" }, { "scope", URLEncoder.encode("https://www.google.com/calendar/feeds/","UTF-8") } }; /** * Generation of the signature base string */ String signature_base_string = "GET&" + URLEncoder.encode(url, "UTF-8") + "&"; for (int i = 0; i
