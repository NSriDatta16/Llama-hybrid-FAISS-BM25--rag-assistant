[site]: stackoverflow
[post_id]: 1264930
[parent_id]: 1264262
[tags]: 
My setup for similar situation (working) I have similar setup for repo.or.cz (which is for some reason null-route blocked by ISP I use, Polish ISP Telekomunikacja S.A. (tpnet)), and it works for me: I run the following command run to set up SSH tunel before attempting to connect: $ autossh -M 20000 -f -N -L 2222:repo.or.cz:22 user@gateway.example.com (I use autossh instead of ssh to reconnect if I am disconnected, i.e. to keep connection up). Check that appropriate identities are added to SSH authentication agent: $ ssh-add -l 2048 d7:d3:69:f5:0f:f9:5e:aa:e0:0b:28:c2:03:42:09:66 /home/user/.ssh/id_dsa_gateway.example.com (DSA) 1024 11:a2:29:fe:37:12:a7:33:c4:23:b0:e1:82:92:e0:6a /home/user/.ssh/id_dsa_repo.or.cz (DSA) I use keychain to have to provide passwords for my private SSH keys only once, at login. I have the following set up in my ~/.ssh/config : Host repo.or.cz # NoHostAuthenticationForLocalhost yes HostName localhost Port 2222 This setup works for me without problems. Debugging your situation As for debugging your situation? First, I would check if I can log in to gateway using "ssh user@firewall.domain.com", to check if SSH tunnel can be set up. If you are on Linux you can use for example netstat --tcp to check if there is connection established to gateway; on other operating systems and environments you can find similar utilities. Check if you can connect correctly to gitosis. (If I remember correctly gitorious is using gitosis for managing access via SSH, so I used response from gitorious in example below) $ ssh gitosis@gitosis-server Need SSH_ORIGINAL_COMMAND Connection to closed. If it doesn't do something similar to above (repo.or.cz returns "fatal: What do you think I am? A shell?", GitHub returns "Hi user! You've successfully authenticated, but GitHub does not provide shell access."), check where it fails with "ssh -v gitosis@gitosis-server": $ ssh -v gitosis@gitosis-server [...] debug1: Authentications that can continue: publickey debug1: Next authentication method: publickey debug1: Offering public key: /home/user/.ssh/id_dsa_gitosis-server debug1: Remote: Forced command: gitosis-server user [...] debug1: Authentication succeeded (publickey)
