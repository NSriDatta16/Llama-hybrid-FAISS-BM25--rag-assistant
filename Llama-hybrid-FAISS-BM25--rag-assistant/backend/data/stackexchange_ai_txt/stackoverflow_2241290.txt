[site]: stackoverflow
[post_id]: 2241290
[parent_id]: 
[tags]: 
Stacked Area Histogram in R

I ran a Pig job on a Hadoop cluster that crunched a bunch of data down into something R can handle to do a cohort analysis. I have the following script, and as of the second to last line I have the data in the format: > names(data) [1] "VisitWeek" "ThingAge" "MyMetric" VisitWeek is a Date. ThingAge and MyMetric are integers. The data looks like: 2010-02-07 49 12345 The script I have so far is: # Load ggplot2 for charting library(ggplot2); # Our file has headers - column names data = read.table('weekly_cohorts.tsv',header=TRUE,sep="\t"); # Print the names names(data) # Convert to dates data$VisitWeek = as.Date(data$VisitWeek) data$ThingCreation = as.Date(data$ThingCreation) # Fill in the age column data$ThingAge = as.integer(data$VisitWeek - data$ThingCreation) # Filter data to thing ages lt 10 weeks (70 days) + a sanity check for gt 0, and drop the creation week column data = subset(data, data$ThingAge = 0) print(ggplot(data, aes(x=VisitWeek, y=MyMetric, fill=ThingAge)) + geom_area()) This last line does not work. I've tried lots of variations, bars, histograms, but as usual R docs defeat me. I want it to show a standard Excel style stacked area chart - one time series for each ThingAge stacked across the weeks in the x axis, with the date on the y axis. An example of this kind of chart is here: http://upload.wikimedia.org/wikipedia/commons/a/a1/Mk_Zuwanderer.png I've read the docs here: http://had.co.nz/ggplot2/geom_area.html and http://had.co.nz/ggplot2/geom_histogram.html and this blog http://chartsgraphs.wordpress.com/2008/10/05/r-lattice-plot-beats-excel-stacked-area-trend-chart/ but I can't quite make it work for me. How can I achieve this?
