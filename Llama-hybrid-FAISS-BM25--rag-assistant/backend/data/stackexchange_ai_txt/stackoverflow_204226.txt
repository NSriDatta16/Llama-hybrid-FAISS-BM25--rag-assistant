[site]: stackoverflow
[post_id]: 204226
[parent_id]: 
[tags]: 
Why do I get 401 errors connecting to the Dynamics CRM Metadata service?

I am connecting to CRM with the intention of retrieving a list of picklist values. On my development machine I am working under my own login name and all works fine. On the test server, the code executes under the NETWORK SERVICE account. When it connects to the CRM web service everything is great. When it connects to the metadata service I get 401 Unauthorised messages. This is the first time I have used the metadata service so I am hoping someone can tell me why I get the error. The connection is configured using the code below and the failure happens when you try to retrieve the picklist data. CrmAuthenticationToken token = new CrmAuthenticationToken(); token.OrganizationName = config.AppSettings.Settings["CrmTargetOrganisation"].Value; token.AuthenticationType = 0; MetadataService service = new MetadataService(); service.Credentials = System.Net.CredentialCache.DefaultCredentials; service.Url = config.AppSettings.Settings["CrmMetadataServiceUrl"].Value; service.CrmAuthenticationTokenValue = token; service.UnsafeAuthenticatedConnectionSharing = true;
