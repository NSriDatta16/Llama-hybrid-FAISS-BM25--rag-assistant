[site]: crossvalidated
[post_id]: 453104
[parent_id]: 453082
[tags]: 
In short, you are right, you should renormalise the observations in the new feature space (after PCA) before calculating cosine similarity. I assume based on the link you sent you are using (1) $$cos(\theta)=1−\frac{|x−x′|^2}{2}$$ to calculate cosine similarity instead of (2) $$cos(\theta)=\frac{x \cdot x'}{|x||x'|}$$ . Note that (1) only works when $|x|=|x'|=1$ in the space you are actually calculating it in - i.e. in the PCA transformed space. So you require that $|x|=|x'|=1$ after applying PCA. Otherwise you aren't actually calculating the cosine similarity at all. If you are using (2) then you don't actually need to renormalise at all and your issues go away. If you normalised in the observation space (before PCA) then you would find that after PCA transform and selecting n components, all your transformed observations would have length less than 1. Therefore (1) won't work. Finally as side note, the cosine similarity computed on the raw observations should be approximately equivalent to the cosine similarity computed after PCA transform*. They will be exactly equivalent if you keep all the principal components as this is just rotating your axes in euclidean space. *assuming that the original observations are have zero mean in all dimensions.
