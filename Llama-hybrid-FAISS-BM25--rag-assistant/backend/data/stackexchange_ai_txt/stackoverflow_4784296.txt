[site]: stackoverflow
[post_id]: 4784296
[parent_id]: 
[tags]: 
The document “Untitled” could not be saved as "Untitled"

I am trying to develop a document based mac app using this Apple walkthrough and I am having issues saving the file (the final step). The error that I am getting after I try to save a file is: The document "Untitled" could not be saved as "- the new filename is I'm trying to use -" I've googled around and not found any results for this error. I've rechecked the code and everything seems pretty solid to the tutorial. I wondered if anybody has any intuition as to what might be going wrong here. The code of my main class is: #import "MyDocument.h" @implementation MyDocument - (id)init { self = [super init]; if (self) { if (mString == nil) { mString = [[NSAttributedString alloc] initWithString:@""]; } } return self; } - (NSAttributedString *) string { return [[mString retain] autorelease]; } - (void) setString: (NSAttributedString *) newValue { if (mString != newValue) { if (mString) [mString release]; mString = [newValue copy]; } } - (void) textDidChange: (NSNotification *)notification { [self setString: [textView textStorage]]; } - (NSString *)windowNibName { // Override returning the nib file name of the document // If you need to use a subclass of NSWindowController or if your document supports multiple NSWindowControllers, you should remove this method and override -makeWindowControllers instead. return @"MyDocument"; } - (void)windowControllerDidLoadNib:(NSWindowController *) aController { [super windowControllerDidLoadNib:aController]; if ([self string] != nil) { [[textView textStorage] setAttributedString: [self string]]; } } - (BOOL)readFromData:(NSData *)data ofType:(NSString *)typeName error:(NSError **)outError { BOOL readSuccess = NO; NSAttributedString *fileContents = [[NSAttributedString alloc] initWithData:data options:NULL documentAttributes:NULL error:outError]; if (fileContents) { readSuccess = YES; [self setString:fileContents]; [fileContents release]; } return readSuccess; } - (NSData *)dataOfType:(NSString *)typeName error:(NSError **)outError { NSData *data; [self setString:[textView textStorage]]; NSMutableDictionary *dict = [NSDictionary dictionaryWithObject:NSRTFTextDocumentType forKey:NSDocumentTypeDocumentAttribute]; [textView breakUndoCoalescing]; data = [[self string] dataFromRange:NSMakeRange(0, [[self string] length]) documentAttributes:dict error:outError]; return data; } Header file: #import @interface MyDocument : NSDocument { IBOutlet NSTextView *textView; NSAttributedString *mString; } - (NSAttributedString *)string; - (void) setString: (NSAttributedString *)value; @end
