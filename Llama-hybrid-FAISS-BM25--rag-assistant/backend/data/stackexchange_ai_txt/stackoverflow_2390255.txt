[site]: stackoverflow
[post_id]: 2390255
[parent_id]: 2389756
[tags]: 
If the sender knows the length, then the sender should supply the length up front as fixed size field, followed by the variable size data. The advantage vs. a tail marker is that the receiver can optimize for expected amount of data, e.g. allocate a buffer of the correct size. For example, storage over TCP/IP protocols have the same problem over TCP/IP as you. In those cases, headers provide the length of subsequently expected data. Later down the road, you may find other bits to put in your "header". You'll be glad you have some structure in place to grow your own layer-5 protocol.
