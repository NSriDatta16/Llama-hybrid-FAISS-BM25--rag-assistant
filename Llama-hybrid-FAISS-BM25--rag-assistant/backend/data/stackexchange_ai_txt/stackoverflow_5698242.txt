[site]: stackoverflow
[post_id]: 5698242
[parent_id]: 5698160
[tags]: 
If you know that the message won't exceed 4096 bytes, then you can write something like this: int totalBytesRead = 0; int bytesRead; while ((bytesRead = clientStream.Read(message, totalBytesRead, message.Length - totalBytesRead)) !=0) { totalBytesRead += bytesRead; } totalBytesRead is used to tell clientStream.Read where to put the data that it copies. clientStream.Read returns 0 if there is no data available. Note that with this setup, you can't read more than message.Length bytes. If your packets can be larger, then I suggest making your buffer bigger. I wouldn't recommend continually resizing the array because that will end up fragmenting the large object heap (if messages become larger than 80 KB), and at some point you have to set a maximum on the size a message can be--even if you handle "arbitrarily large" messages.
