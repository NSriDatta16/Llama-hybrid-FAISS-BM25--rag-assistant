[site]: stackoverflow
[post_id]: 4317042
[parent_id]: 3688392
[tags]: 
Sounds like you're building an attendance system :-) In the system I'm building currently this kind of grouping observations is also necessary. In my case there's employees that have a pass that they will put in front off a passreader to register their attendance. First the system will select all attendances from one employee. Then it will put them in boxes of one day, ordered by registration time. Every registration will be assessed on whether it's a start or stop. If the first registration is a start registration, then the system will search for a stop registration up to maximally 12 hours later. If the stop doesn't come a stop is inserted. Additional intelligence can be put into place when the planning is known. Perhapse you could use statistics, but in my case it was a question of algorithms, combined with knowledge of the organisation.
