[site]: stackoverflow
[post_id]: 2089055
[parent_id]: 
[tags]: 
wcf - transfer context into the headers

I am using wcf 4 and trying to transparently transfer context information between client and server. I was looking at behaviors and was able to pass things around. My problem is how to flow the context received in the incoming headers to the other services that might be called by a service. In the service behavior I intercept the the message and read the headers but don't know where to put that data to be accessible to the next service call that the current service might make. What I am looking for is something like: public void DoWork() { var someId = MyContext.SomeId; //do something with it here and call another service using(var proxy = GetProxy ()) proxy.CallSomeOtherMethodThatShouldGetAccessTo_ MyContextualObject(); } If I store the headers in thread local storage I might have problems due to thread agility(not sure this happens outside ASP.NET, aka custom service hosts). How would you implement the MyContext in the code above. I chose the MyContext instead of accessing the headers directly because the initiator of the service call might not be a service in which case the MyContext is backed by HttpContext for example for storage.
