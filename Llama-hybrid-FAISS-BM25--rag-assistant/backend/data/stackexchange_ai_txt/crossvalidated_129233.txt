[site]: crossvalidated
[post_id]: 129233
[parent_id]: 129226
[tags]: 
Construct a Markov random field. Have a node for each region whose potential reflects the prior distribution over class labels for that region, and add edges to reflect regions that are geometrically close to eachother. Then set up the edge potentials to encourage connected nodes to take on the same class label. This is usually called an "associative Markov network", the most common of which is the "generalized Potts model". Anyway having done all that, if you have a reasonably small number of class labels and the clique number of the graph is reasonably small, you can use loopy belief propagation to solve the model. I think there might be more efficient algorithms for the specific case of associative networks, but LBP widely-implemented and should suffice for your needs.
