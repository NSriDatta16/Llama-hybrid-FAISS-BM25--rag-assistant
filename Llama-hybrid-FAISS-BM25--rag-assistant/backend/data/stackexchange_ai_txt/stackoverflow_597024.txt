[site]: stackoverflow
[post_id]: 597024
[parent_id]: 596942
[tags]: 
floor(n/k)^(k - n mod k)*ceil(n/k)^(n mod k) -- MarkusQ P.S. For the example you gave of S = {1,2,3,4}, n = 4, k = 2 this gives: floor(4/2)^(2 - 4 mod 2)*ceil(4/2)^(4 mod 2) floor(2)^(2 - 0)*ceil(2)^(0) 2^2 * 2^0 4 * 1 4 ...as you wanted. To clarify, this formula gives the number of permutations generated by the partitioning with the maximum possible number of permutations. There will of course be other, less optimal partitionings. For a given perimeter the rectangle with the largest area is the one that is closest to a square (and the same is true in higher dimensions) which means you want the sides to be as close to equal in length as possible (e.g. all either the average length rounded up or down). The formula can then be seen to be: (length of short sides)^(number of short sides) times (length of long sides)^(number of long sides) which is just the volume of the hyper-rectangle meeting this constraint. Note that, when viewed this way, it also tells you how to construct a maximal partitioning.
