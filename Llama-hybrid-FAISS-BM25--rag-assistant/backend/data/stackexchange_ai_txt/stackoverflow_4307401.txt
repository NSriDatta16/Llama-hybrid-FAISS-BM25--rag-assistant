[site]: stackoverflow
[post_id]: 4307401
[parent_id]: 
[tags]: 
C File Input/Trapezoid Rule Program

Little bit of a 2 parter. First of all im trying to do this in all c. First of all I'll go ahead and post my program #include #include #include #include #include double f(double x); void Trap(double a, double b, int n, double* integral_p); int main(int argc, char* argv[]) { double integral=0.0; //Integral Result double a=6, b=10; //Left and Right Points int n; //Number of Trapezoids (Higher=more accurate) int degree; if (argc != 3) { printf("Error: Invalid Command Line arguements, format:./trapezoid N filename"); exit(0); } n = atoi(argv[2]); FILE *fp = fopen( argv[1], "r" ); # pragma omp parallel Trap(a, b, n, &integral); printf("With n = %d trapezoids....\n", n); printf("of the integral from %f to %f = %.15e\n",a, b, integral); return 0; } double f(double x) { double return_val; return_val = pow(3.0*x,5)+pow(2.5*x,4)+pow(-1.5*x,3)+pow(0*x,2)+pow(1.7*x,1)+4; return return_val; } void Trap(double a, double b, int n, double* integral_p) { double h, x, my_integral; double local_a, local_b; int i, local_n; int my_rank = omp_get_thread_num(); int thread_count = omp_get_num_threads(); h = (b-a)/n; local_n = n/thread_count; local_a = a + my_rank*local_n*h; local_b = local_a + local_n*h; my_integral = (f(local_a) + f(local_b))/2.0; for (i = 1; i As you can see, it calculates trapezoidal rule given an interval. First of all it DOES work, if you hardcode the values and the function. But I need to read from a file in the format of 5 3.0 2.5 -1.5 0.0 1.7 4.0 6 10 Which means: It is of degree 5 (no more than 50 ever) 3.0x^5 +2.5x^4 âˆ’1.5x^3 +1.7x+4 is the polynomial (we skip ^2 since it's 0) and the Interval is from 6 to 10 My main concern is the f(x) function which I have hardcoded. I have NO IDEA how to make it take up to 50 besides literally typing out 50 POWS and reading in the values to see what they could be.......Anyone else have any ideas perhaps? Also what would be the best way to read in the file? fgetc? Im not really sure when it comes to reading in C input (especially since everything i read in is an INT, is there some way to convert them?)
