[site]: stackoverflow
[post_id]: 4818203
[parent_id]: 4815999
[tags]: 
If you need a robust solution, use a real XML parser rather than naive pattern matching. If you are prepared to use a fragile approach that may not always give the right answers, then see below :-) #!/usr/bin/perl use warnings; use strict; my $xml = stuff paragraph morestuff ENDXML while ($xml =~ m#( \s* )#g) { my $tag = $1; # use substr() as an "lvalue" to find number of lines before my $prev_lines = substr($xml, 0, pos($xml)) =~ tr/\n// + 1; # adjust for newlines contained in the matched element itself my $tag_lines = $tag =~ tr/\n//; my $line = $prev_lines - $tag_lines; print "lines $line-$prev_lines\n$tag\n"; }
