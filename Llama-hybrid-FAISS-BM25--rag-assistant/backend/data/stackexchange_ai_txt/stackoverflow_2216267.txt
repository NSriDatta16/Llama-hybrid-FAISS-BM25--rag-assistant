[site]: stackoverflow
[post_id]: 2216267
[parent_id]: 2216234
[tags]: 
Elegant solution: Maintain a single lock for the queue Use three semaphores (one for each thread) WriteThreadSem OddReadSem EvenReadSem Have the write thread obtain the queue lock, write the entry, release the lock... Meanwhile the even and odd threads acquire their respective semaphores. Once it is done writing the writing thread wakens the thread via its respective semaphore that is next to read. The waking thread acquires the queue lock and reads its data.. Releases the lock, wakes the write thread semaphore.. The write thread determines if it needs to write or what the next read thread needs to be wakened... Done.
