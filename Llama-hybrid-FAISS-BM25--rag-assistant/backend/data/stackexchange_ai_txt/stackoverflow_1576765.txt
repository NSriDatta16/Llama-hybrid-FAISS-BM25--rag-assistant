[site]: stackoverflow
[post_id]: 1576765
[parent_id]: 
[tags]: 
Access a website by a bot but only after setting a variable by a browser/human

We are working on a website of a brewery using Drupal. As minors under 18 are not allowed to view the website, any page accessed is passed through a module (legalage) and if the user clicks "continue" so as to confirm his/her age being more than 18 the site is shown to the user saving the legal age as true. The problem is when search engine bots access the pages, they are also redirected to the legal age verification page. I tried the following script to determine bot or browser in PHP: $agent = $_SERVER['HTTP_USER_AGENT']; if(( eregi("bot", $agent) || eregi("slurp", $agent) )) { $_SESSION['legalage'] = true; drupal_goto($_REQUEST['destination']); } but its does not seem to work. If anyone can suggest me on how to handle this problem so that the browsers/humans have to pass through the age requirement continue thing and bots can directly access the content. Thank you in advance.
