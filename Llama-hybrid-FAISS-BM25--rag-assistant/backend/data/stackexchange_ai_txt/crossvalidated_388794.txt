[site]: crossvalidated
[post_id]: 388794
[parent_id]: 
[tags]: 
Prediction intervals of a log return time series when converting back to levels

I am having a problem when calculating prediction intervals of an ARIMA model of a log return transformed time series. Assume I have the following point estimates for $h \in \{1, 2, 3\}$ where $y_{t+h}$ is my predicted value (in log returns, meaning $y_i = \log(l_i) - \log(l_{i-1})$ , where $l_i$ is my actual observation in levels): $y_{t+1} = 0.01 $ $y_{t+2} = 0.02 $ $y_{t+3} = 0.025 $ Further, my last observed level $l_t$ at time $t$ is $100$ . Hence, my point estimate in levels for $h \in \{1, 2, 3\}$ is: $l_{t+1} = 100 \cdot e^{y_{t+1}} = 100 \cdot e^{0.01} \approx 101 $ $l_{t+2} = 100 \cdot e^{0.01} \cdot e^{0.02} \approx 103 $ $l_{t+3} = 0100 \cdot e^{0.01} \cdot e^{0.02} \cdot e^{0.025} \approx 106$ Additionally, assume the variance of the model to be $\sigma^2 = 0.01$ . The $\alpha = 80\%$ prediction interval for $y_{t+1}$ will then be: $PI_{y_{t+1},0.8} = y_{t+1} \pm \sigma \cdot \Phi(1 - (1-\alpha)/2) = 0.01 \pm 0.1 \cdot \Phi(0.9) \approx 0.01 \pm 0.128$ Which results in a prediction interval for $l_{t+1}$ $PI_{l_{t+1},0.8} = 100 \cdot e^{PI_{y_{t+1},0.8}} \approx 100 \cdot e^{0.01 \pm 0.128} \approx \{89,115\}$ From here on, I am unsure how to continue. Calculating the $PI$ for $h=2$ in logdiffs should still be somewhat easy (even though I am also not 100% sure here): $PI_{y_{t+2},0.8} = y_{t+2} \pm \sigma \cdot \sqrt{h} \cdot \Phi(1 - (1-\alpha)/2)$ Where I took the added part of $\sqrt{h}$ from https://otexts.com/fpp2/prediction-intervals.html When applying this to $PI$ of levels, I came up with a few options: $PI_{1.,l_{t+2},0.8} = l_{t+2} \cdot e^{PI_{y_{t+2},0.8}}$ Likely too narrow, as it is not accounting for the variance in the previously predicted period $PI_{2.,l_{t+2},0.8} = PI_{l_{t+1},0.8} \cdot e^{PI_{y_{t+2},0.8}}$ Likely too wide, as multiplying the previous level $PI_l$ with the exponential of $PI_y$ would give me the corridor in which only $0.2^2 = 0.04$ of predictions fall (wouldn't it?), because $P[y_{t+1} \notin PI_{y_{t+1},0.8}] = 0.2$ , $P[y_{t+2} \notin PI_{y_{t+2},0.8}] = 0.2$ , and thus, $P[y_{t+1} \notin PI_{y_{t+1},0.8} \wedge y_{t+2} \notin PI_{y_{t+2},0.8}] = P[y_{t+1} \notin PI_{y_{t+1},0.8}] \cdot P[y_{t+2} \notin PI_{y_{t+2},0.8}] = 0.2 \cdot 0.2 = 0.04$ (if they are independent events?) Adjusting the corridor for each $h$ , so that they multiply to the desired prediction interval in the end. Option 3 would like look like this: I know that my prediction interval should be $0.8$ , meaning that the combined probability of observations laying outside is $0.2$ . Using the logic from option 2 above, I calculate new prediction intervals $PI_{y_{t+h},\alpha_h}$ for each $h$ , where $1 - \alpha_h = 0.2^{1/h}$ , so that they multiply to $0.2$ for the prediction interval for the level ( $PI_{3.,l_{t+h},0.8}$ ) in the end. The prediction interval is then calculated by: $PI_{3.,l_{t+h},0.8} = l_t \cdot \prod^h_{i=1} e^{PI_{y_{t+i},\alpha_h}} = l_t \cdot \prod^h_{i=1} e^{y_{t+i} \pm \sigma \cdot \sqrt{i} \cdot \Phi(1 - (1-\alpha_h)/2)}$ For $h=2$ and $l_t = 100$ : $PI_{3.,l_{t+2},0.8} = 100 \cdot e^{PI_{y_{t+1},\alpha_2}} \cdot e^{PI_{y_{t+2},\alpha_2}}$ where $1 - \alpha_2 = 0.2^{1/2} \approx 0.45 $ and thus, \begin{align}PI_{y_{t+1},\alpha_2} &= y_{t+1} \pm \sigma \cdot \Phi(1 - (1-\alpha_2)/2) \\ &\approx 0.01 \pm \sigma \cdot \Phi(1 - 0.45/2) \\ &= 0.01 \pm \sigma \cdot \Phi(0.775) \\ &\approx \{-0.0655,0.0855\}\end{align} and \begin{align}PI_{y_{t+2},\alpha_2} &= y_{t+2} \pm \sigma \cdot \Phi(1 - (1-\alpha_2)/2) \\ &\approx 0.02 \pm \sigma \cdot \sqrt{2} \cdot \Phi(1 - 0.45/2) \\ &= 0.02 \pm \sigma \cdot \sqrt{2} \cdot \Phi(0.775) \\ &\approx \{-0.0868,0.1268\}.\end{align} Finally, the upper $PI$ : $PI_{3.,l_{t+2},0.8, upper} \approx 100 \cdot e^{0.0855} \cdot e^{0.1268} \approx 123.65 $ and lower $PI$ : $PI_{3.,l_{t+2},0.8, lower} \approx 100 \cdot e^{-0.0655} \cdot e^{-0.0868} \approx 85.87 $ for $h=3$ these steps will be done equivalently. Now, is this option 3 the correct solution? Or is there anything I missed or did wrong? I hope I was correct in all my notations and made my problem clear. Thanks in advance!
