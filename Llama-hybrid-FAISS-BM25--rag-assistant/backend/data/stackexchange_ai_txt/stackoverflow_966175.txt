[site]: stackoverflow
[post_id]: 966175
[parent_id]: 966108
[tags]: 
For clarity's sake, I would try: pickRandElement(elements, p) OrderedCollection coll = new OrderedCollection foreach element in elements if (p(element)) coll.add(element) if (coll.size == 0) return null else return coll.get(randInt(coll.size)) To me, that makes it MUCH clearer what you're trying to do and is self-documenting. On top of that, it's simpler and more elegant, and it's now obvious that each will be picked with an even distribution.
