[site]: stackoverflow
[post_id]: 1271559
[parent_id]: 1271511
[tags]: 
"generates all paths in a tree as xpath statements" How many paths are you creating? This can be non-trivial. The number of paths should be O ( n log n ), but the algorithm could be much worse depending on what representation they use for children of a parent. You should profile the simple enumeration of paths without worrying about the bag storage.
