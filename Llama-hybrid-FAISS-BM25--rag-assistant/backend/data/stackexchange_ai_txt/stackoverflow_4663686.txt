[site]: stackoverflow
[post_id]: 4663686
[parent_id]: 
[tags]: 
RequireJS Compilation in Maven project with external JS dependencies

I have a web project that's built with Maven and I'm trying to figure out the best way to compile the JavaScript files with the RequireJS compiler (this question could apply to any compiler/minifier as well). I have a setup that works, but it needs improvement: I've packaged the 3rd party JavaScript libraries and they are being downloaded as dependencies and then added with the WAR Overlay plugin. I have an Exec plugin task that runs the RequireJS compiler inside the target directory. I currently manually run exec:exec after the package target runs (and therefore the WAR contents are placed in the target directory). What I would like instead is to make JS compilation part of main (Java) compilation. The JS compiler itself (Require JS) is downloaded as a dependency during the WAR overlay phase which happens after compilation. So, I need the Require JS files to be downloaded and unpacked and I need to run the JS compilation using those files, before/during/after Java compilation. I'm sure there could be several ways to achieve this. I'm looking for the most elegant solution. Update: Existing POM snippets I have JavaScript dependencies which I have zipped and added to our repository manager: org.requirejs requirejs 0.22.0 repackaged zip runtime com.jqueryui jquery-ui 1.8.7 repackaged zip runtime Take note that RequireJS itself (which is required for the compilation of the rest of libraries) is also loaded as an external dependency. So the first thing is, I need this dependency to be downloaded and unzipped before I can commence with RequireJS compilation. These dependencies are being added to the WAR using the WAR Overlay plugin: maven-war-plugin org.requirejs requirejs repackaged zip lib requirejs/require.js requirejs/require/* requirejs/build/** com.jqueryui jquery-ui repackaged zip lib Even though I don't need requirejs/build/** to end up in the WAR, I'm including it as part of the overlay to get the unzipped RequireJS build scripts, simply because I haven't figured out a better way. Then I have a Exec plugin task that performs the compilation. But note that this task hasn't been added to the normal compilation work flow: I have to manually invoke it with mvn exec:exec after the WAR packaging is done: org.codehaus.mojo exec-maven-plugin 1.1 exec lib/requirejs/build/build.bat ${project.build.directory}/${project.artifactId} name=bootstrap out=combined.js baseUrl=scripts optimize=closure excludeShallow=plugins/manifest So, some questions are: How can I extract different portions of a single zipped dependency for the compilation and WAR packaging steps? Or do I have to create two zip files, one with just the runtime stuff and the other for compilations scripts? I would like to trigger exec:exec ideally during compilation, or if not, just prior to WAR packaging. How do I do that? I have actually tried a bunch off stuff without success, so I hope I don't appear as lazily posting a huge chunk of code and waiting for answers :) It's just that I haven't quite wrapped my mind around how Maven targets/phases etc. work yet.
