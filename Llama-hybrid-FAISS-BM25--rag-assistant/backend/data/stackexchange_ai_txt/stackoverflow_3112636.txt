[site]: stackoverflow
[post_id]: 3112636
[parent_id]: 3093266
[tags]: 
Try this one (fair warning - I don't have access to test this out so please correct any syntax errors). function LastThreeWorkdays($start_date) { $startdateseed = strtotime($start_date); $workdays = array(); $holidays = get_holidays('2010'); for ($counter = -1; $counter >= -10; $counter--) if (date('N', $current_date = strtotime($counter.' day', $startdateseed)) Basically create a "chunk" of dates and then use array diff to remove the holidays from it. Return only the top (last) three items. Obviously it takes a miniscule more storage space and time to compute than previous answers but the code is much shorter. The "chunk" size can be tweaked for further optimization. Ideally it would be the maximum number of consecutive holidays plus 2 plus 3 but that assumes realistic holiday scenarios (an entire week of holidays isn't possible, etc). The code can be "unrolled" too to make some of the tricks easier to read. Overall shows off some of the PHP functions a little bit better - could be combined with the other ideas as well though.
