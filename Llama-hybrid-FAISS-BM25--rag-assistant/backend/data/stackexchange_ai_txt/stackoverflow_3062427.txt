[site]: stackoverflow
[post_id]: 3062427
[parent_id]: 
[tags]: 
Magento products by categories

I try to get productsCollection by this code: $collection = Mage::getModel('catalog/category')->getCollection(); /* @var $collection Mage_Catalog_Model_Resource_Eav_Mysql4_Category_Collection */ $collection->addAttributeToSelect('url_key') ->addAttributeToSelect('name') ->addAttributeToSelect('is_anchor') ->addAttributeToFilter('is_active', 1) ->addIdFilter(array(4,5))//$_categories) ->setOrder('position', 'ASC') ->joinUrlRewrite() ->load(); $productCollection = Mage::getResourceModel('catalog/product_collection'); $layer = Mage::getSingleton('catalog/layer'); $layer->prepareProductCollection($productCollection); $productCollection->addCountToCategories($collection); foreach($productCollection as $product){ print_r($product->getCategoryIds()); } But line addIdFilter(array(4,5)) not work, and i see all product, even that no in some categorys. What is wrong?
