[site]: stackoverflow
[post_id]: 2649928
[parent_id]: 2649883
[tags]: 
use awk. Its better than grep at manipulating files. I do not know what you are trying to do, so i am guessing you want to get the block that contains Agent: till the next Agent: . awk 'BEGIN{RS="==*"} /Agent Name: agent10479475/{ print "-->"$0 }' file output $ ./shell.sh --> Agent Name: agent10479475 Bank Balance: $4356 Buy bids placed: 87 Desired assets -- ticket_10960: Quantity(0), Desired Quantity(1) ticket_11162: Quantity(0), Desired Quantity(2) ticket_11213: Quantity(0), Desired Quantity(1) ticket_11334: Quantity(0), Desired Quantity(1) ticket_11425: Quantity(0), Desired Quantity(3) ticket_11510: Quantity(0), Desired Quantity(1) ticket_11732: Quantity(0), Desired Quantity(2) ticket_11843: Quantity(1), Desired Quantity(1) ticket_11904: Quantity(0), Desired Quantity(1) ticket_12035: Quantity(0), Desired Quantity(3) ticket_12120: Quantity(0), Desired Quantity(1) ticket_12332: Quantity(0), Desired Quantity(2) ticket_12433: Quantity(0), Desired Quantity(1) ticket_12564: Quantity(1), Desired Quantity(1) ticket_12645: Quantity(0), Desired Quantity(3) flight to melbourne: Quantity(8), Desired Quantity(8) room: Quantity(32), Desired Quantity(24) Negative quantity assets -- ticket_7401: Quantity(-14) ticket_22013: Quantity(-15) ticket_28401: Quantity(-14) Remaining assets -- ticket_6463: Quantity(1) ticket_9861: Quantity(1) ticket_13441: Quantity(1) ticket_20813: Quantity(1) ticket_26853: Quantity(1) The awk command says set the record separator (RS) to the "====" lines, so each record now contains Agent: till the next Agent: record. You can do whatever you want next using $0 . Just a side note from your home page 's Perl script, you have this line $line = s/^\s+[0-9]+//; while iterating the file bids.txt . Are you sure you want this? This says to remove starting blanks and numbers. If its so, you won't have a number to add already. All your cat + grep + cut and the Perl script averaging function can also be combined using awk awk 'BEGIN{ printf "Enter agent num: " getline num
