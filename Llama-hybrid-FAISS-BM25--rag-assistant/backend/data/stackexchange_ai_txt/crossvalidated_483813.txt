[site]: crossvalidated
[post_id]: 483813
[parent_id]: 
[tags]: 
Modeling with Multiple Values per Variable, per Observation

I'm attempting to develop an autoencoder on top of medical claims data that have mutliple values per category because a claim often has multiple lines associated with it. For example, let's say (but not hope) something really bad happens to me where I have to enter the hospital through the Emergency Room, have surgery, and then end up in the hospital's Intensive Care Unit. Each of these hospital locations has a different "revenue code" associated with it, and the claim would look something like the following: import pandas as pd df = pd.DataFrame({'claim_id': ['A213', 'A213', 'A213'], 'claim_line': [1, 2, 3], 'revenue_code': ['450', '360', '200']}) print(df) # claim_id claim_line revenue_code #0 A213 1 450 #1 A213 2 360 #2 A213 3 200 Revenue code '450' represent Emergency Room, revenue code '360' represents surgery, and revenue code '200' represents intensive care unit. As part of my autoencoding model, I want to perform categorical feature embedding to reduce the amount of sparsity I would otherwise have because of features with high cardinality (like revenue code). But I have multiple revenue_code values for the same observation. My Thought: Concatenate all of the revenue codes together into a single value. This approach would put all of the revenue codes in a single value, and then the new column would be transformed into ordinal values to feed into a Keras Embedding() layer. I don't care about the order of the revenue codes within the same claim, so an example with two claims would look like the following: df2 = pd.DataFrame({'claim_id': ['A213', 'A213', 'A213', 'B545', 'B545'], 'claim_line': [1, 2, 3, 1, 2], 'revenue_code': ['450', '360', '200', '360', '710']}) print(df2) # claim_id claim_line revenue_code #0 A213 1 450 #1 A213 2 360 #2 A213 3 200 #3 B545 1 360 #4 B545 2 710 Would turn into the following: # claim_id revenue_code #0 A213 200-360-450 #1 B545 360-710 My only concern with this approach is that I would lose the ability to associate categorical variables with continuous variables. An example would be an infusion procedure code. The approach I mentioned above would allow me to capture every time an infusion procedure code is present on a claim, but it would not allow me to identify how many infusions took place (a quantity housed in a separate column). I'm looking for advice from anyone who has faced a similar problem (agnostic of industry).
