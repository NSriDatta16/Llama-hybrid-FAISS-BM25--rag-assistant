[site]: stackoverflow
[post_id]: 2947339
[parent_id]: 
[tags]: 
Issue with CGEventTapCreate() call

I'm trying to register for global key events using this code : void function() { CFMachPortRef keyUpEventTap = CGEventTapCreate(kCGHIDEventTap,kCGHeadInsertEventTap,kCGEventTapOptionListenOnly,CGEventMaskBit(kCGEventKeyUp),&keyUpCallback,NULL); CFRunLoopSourceRef keyUpRunLoopSourceRef = CFMachPortCreateRunLoopSource(NULL, keyUpEventTap, 0); CFRelease(keyUpEventTap); CFRunLoopAddSource(CFRunLoopGetCurrent(), keyUpRunLoopSourceRef, kCFRunLoopDefaultMode); CFRelease(keyUpRunLoopSourceRef); } The application crashes while executing CFMachPortCreateRunLoopSource() call. I think the crash is because of CGEventMaskBit( kCGEventKeyUp ) when I create an event tap. But if I create event tap using CGEventTapCreate(kCGHIDEventTap,kCGHeadInsertEventTap,kCGEventTapOptionListenOnly,CGEventMaskBit(kCGEventFlagsChanged),&keyUpCallback,NULL) , the application works fine. It does not crash. I'm getting callbacks when any modifier key is pressed. But I need to get callbacks for delete key pressed. Any ideas? Thanks, Dheeraj.
