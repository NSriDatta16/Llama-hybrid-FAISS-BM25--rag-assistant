[site]: stackoverflow
[post_id]: 2422685
[parent_id]: 2422267
[tags]: 
If all you care about is network latency (not something like server load), why not ping from the server to a set of known good hosts . Then report the average ping time to the user (using a color scale for different response ranges). Then additionally you could ping the user's IP and show that 'status', since the goal is to illustrate where the 'lag' is. This seems better and simpler than doing the latency check from an external server (at least to me). To do the actual ping, you could use a cron job and process the results with a php script, or use a ping library. PEAR's Net_Ping isn't maintained, but does work. For something more complex than ping, you could fetch some pages (or images), then calculate the fetch time/response size. That maybe a better indicator if bandwidth load is a potential issue (this is the essential concept behind 'speed test' sites).
