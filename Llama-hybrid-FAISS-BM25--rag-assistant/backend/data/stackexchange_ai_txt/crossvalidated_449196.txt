[site]: crossvalidated
[post_id]: 449196
[parent_id]: 
[tags]: 
Proper Average Treatment Effect estimators (and standard errors) for Generalized Linear Models with log link?

What is the proper formula for estimating the Average Treatment Effect with a simple main effects generalized linear model? My first pass at defining the Average Treatment Effect for a GLM with a log link: $$ ATE = \biggl[\frac{\mathbb{E}(Y|A=1,\mathbf{X})}{\mathbb{E}(Y|A=0,\mathbf{X})}\biggr]\\ = \biggl[\frac{e^{\beta_0+\beta_A\cdot 1+\mathbf{\beta}\mathbf{X}}}{e^{\beta_0+\beta_A\cdot0+\mathbf{\beta}\mathbf{X}}}\biggr] \\ =e^{\beta_A}$$ where the 95% confidence interval for the ATE estimate would be $e^{\beta_A}\pm e^{1.96 \times SE(\beta_{A})}$ . For a project at work I'm doing a difference-in-differences case-control healthcare analysis to estimate the % change in episode-level medical costs from period=0 to period=1 for treatment=1 relative to treatment=0, using pooled cross-sectional observational data. (i.e., not longitudinal records but independent observations in each period $\times$ treatment group). Expanding the above ATE formula: $$ ATE = \biggl[\frac{\mathbb{E}(Y|P=1,A=1,\mathbf{X})/\mathbb{E}(Y|P=0,A=1,\mathbf{X})}{\mathbb{E}(Y|P=1,A=0,\mathbf{X})/\mathbb{E}(Y|P=0,A=0,\mathbf{X})}\biggr]\\ = \biggl[\frac{e^{\beta_0+\beta_P\cdot1+\beta_A\cdot1+\beta_{PA}\cdot1+\mathbf{\beta}\mathbf{X}}/e^{\beta_0+\beta_P\cdot0+\beta_A\cdot1+\beta_{PA}\cdot0+\mathbf{\beta}\mathbf{X}}}{e^{\beta_0+\beta_P\cdot1+\beta_A\cdot0+\beta_{PA}\cdot0+\mathbf{\beta}\mathbf{X}}/e^{\beta_0+\beta_P\cdot0+\beta_A\cdot0+\beta_{PA}\cdot0+\mathbf{\beta}\mathbf{X}}}\biggr] \\ =(e^{\beta_P +\beta_{PA}}/e^{\beta_P})\\ =e^{\beta_{PA}}$$ where the 95% confidence interval for the ATE estimate would be $e^{\beta_{PA}}\pm e^{1.96 \times SE(\beta_{PA})}$ . If I want to use inverse propensity score weighting, doubly robust methods, etc. for estimating the ATE, observed records would fall in the "treatment" group for the above difference-in-differences study if P=1 and A=1, with the "control" group containing records where P=0 and A=1, P=1 and A=0, or P=0 and A=0. Is my reasoning on-track here?
