[site]: stackoverflow
[post_id]: 244145
[parent_id]: 
[tags]: 
How do you handle escaping invalid attribute characters?

I've got to get a quick and dirty configuration editor up and running. The flow goes something like this: configuration (POCOs on server) -> Xml (serialized, transferred as XElements to website) -> text (edit in place in web page) (make changes) text editor -> XElement (Parse submitted form value) -> Configuration The problem is that serialization doesn't escape any of the strings. But when I try to parse it back into xml, I can't figure out how to get the string into an XElement without it throwing an exception. For example, let's say I have an object that has a regex. This would be the fragment that would be in the editor: But, on the return trip, I can't get this back into XElement form because the attribute has an illegal character. I can't figure out how to instruct the serializer to escape characters, and I can't figure out how to get the parser to ignore them on the way back in. The only way I can see around this is doing some really sketchy regex replacements against the XML, which I'm almost completely guaranteed to screw up in some corner case or another. Is there another way?
