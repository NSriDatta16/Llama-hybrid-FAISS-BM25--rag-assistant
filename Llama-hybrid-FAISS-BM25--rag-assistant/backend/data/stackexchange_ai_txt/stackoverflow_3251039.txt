[site]: stackoverflow
[post_id]: 3251039
[parent_id]: 3251004
[tags]: 
Three things HTML sanitization is an output escaping task, not input filtering . You should not do this task prior to storage, you should only do it prior to display. If you are trying to prevent XSS, you don't need to use htmlentities() - htmlspecialchars() is sufficient. htmlentities() is used only when trying to render a content from a character-encoding that is disparate from native encoding. Both functions accept a character encoding as the third argument. So, finally: echo htmlspecialchars( $content, ENT_QUOTES, 'UTF-8' ); Where if you used ENT_NOQUOTES you could be vulnerable to some types of XSS.
