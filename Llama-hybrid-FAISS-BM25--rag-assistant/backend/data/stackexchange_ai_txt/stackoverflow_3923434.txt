[site]: stackoverflow
[post_id]: 3923434
[parent_id]: 3917745
[tags]: 
As it stands, this query should simplify to: select * from resource resource0_, resourceOrganization resourceor1_ where resource0_.active=1 and resource0_.published=1 and (resource0_.resourcePublic=1 or (resourceor1_.resource_id=resource0_.id and resourceor1_.organization_id=2 and (resourceor1_.forever=1 or current_date between resourceor1_.startDate and resourceor1_.endDate ) ) ) I would expect this to produce a cartesian join to all records on the resourceOrganization table, where the resource table's active, published and resourcePublic values are all 1. Where the resource table's active and published values are both 1, but resourcePublic is not 1, I would expect an inner join to records on the resourceOrganization table where the organization_id is 2, and either forever is 1 or the current date as at midnight is between the start and end datetime values. I note that the end datetime defaults to 0000-00-00 00:00:00. Excluding records where either active or published values are not 1, the obvious reasons for the resource not being reported are therefore that the resourcePublic values are not 1, and either: there is no corresponding resourceOrganization record for organization_id 2, or the corresponding resourceOrganization record has a forever value that is not 1 and the current date as at midnight is not between the start and end datetime values. The date range appears the most likely source of incorrectly excluded records - records entered in the current day will have start datetime values after midnight and will therefore be excluded, while records with no end date specified will default to 0000-00-00 00:00:00 and will therefore also be excluded. Therefore, I recommend rewriting the query to be something like: select * from resource r left join resourceOrganization ro on r.id = ro.resource_id and ro.organization_id = 2 where r.active=1 and r.published=1 and (r.resourcePublic=1 or ro.forever=1 or now() between ro.startDate and (case where ro.endDate = '0000-00-00 00:00:00' then now() else ro.endDate end ) )
