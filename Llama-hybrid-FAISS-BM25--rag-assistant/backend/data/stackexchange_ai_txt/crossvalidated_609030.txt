[site]: crossvalidated
[post_id]: 609030
[parent_id]: 411383
[tags]: 
Under your assumptions, $$ X =\sum_1^{n_1} X_i \sim \mathcal{Binom}(n\cdot n_1, p_1) \\ Y = \sum_1^{n_2} Y_i \sim \mathcal{Binom}(n \cdot n_2, p_2) $$ which reduces this to a test of equality of two binomial proportions. Many questions on this site about that. You say: Letting $_1$ and $_2$ be the averages of all individual proportions feels silly because it ignores the distributions of the proportions. Maybe it feels so, but under your assumptions, this is a sufficient reduction of the data ... so if it feels silly, maybe because you wonder if the individual probabilities of the $X_i$ 's and of the $Y_i$ 's might not be all equal? Your question 2: Again, under the stated assumptions, this would not be better, as the test would be based on variation (in the individual $X_i/n, Y_j/n$ which under the stated model is irrelevant. So how to test? In R you could use the function prop.test , see for instance Why not always use a binomial exact test to compare two proportions instead of chi square? or you could make the 2 x 2 contingency table and use chisq.test .
