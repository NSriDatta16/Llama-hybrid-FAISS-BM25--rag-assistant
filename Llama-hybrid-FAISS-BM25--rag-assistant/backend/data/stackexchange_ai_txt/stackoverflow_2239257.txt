[site]: stackoverflow
[post_id]: 2239257
[parent_id]: 2239222
[tags]: 
That is not possible with mod_rewrite. You would need some program that walks through the agent directories an checks if there is a folder with that name. But besides that your short URLs would not be distinct any more. Because like Max S. said in the comments , how should /000005/ be mapped if more than one agent has an album “000005”? Or is this value unique for all agents? And using a central instance of index.php and main.css is the best choice to avoid redundancy and complexity. In that case you could use mod_rewrite to rewrite requests to your central files like: RewriteRule ^[^/]+/[^/]+/index\.php$ /index.php
