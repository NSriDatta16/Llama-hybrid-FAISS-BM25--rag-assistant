[site]: stackoverflow
[post_id]: 3296040
[parent_id]: 
[tags]: 
Why aren't my sqlite3 foreign keys working?

I run the following code from a python interpreter, and expect the insert statement to fail and throw some kind of exception. But it's not happening: Python 2.6.5 (r265:79096, Mar 19 2010, 21:48:26) [MSC v.1500 32 bit (Intel)] on win32 Type "help", "copyright", "credits" or "license" for more information. >>> import sqlite3 >>> conn = sqlite3.connect("test.db") >>> conn.executescript(""" ... pragma foreign_keys=on; ... begin transaction; ... create table t1 (i integer primary key, a); ... create table t2 (i, a, foreign key (i) references t1(i)); ... commit; ... """) >>> c = conn.cursor() >>> c.execute("insert into t2 values (6, 8)") >>> #??? ... >>> conn.commit() >>> #??????????? ... >>> c.execute("select * from t2") >>> c.fetchall() [(6, 8)] >>> #but why!? ... >>> Does anyone know why this doesn't want to work? My understanding is that the insert should fail since the value I gave for t2(i) isn't a primary key in t1 , but it happily does it anyway...?
