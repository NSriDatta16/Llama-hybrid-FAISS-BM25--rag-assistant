[site]: stackoverflow
[post_id]: 4905978
[parent_id]: 
[tags]: 
function is not defined, but is shown in page source

I've got a function that is called when a user clicks a button. Firebug keeps telling me that the function is not defined, but the code is in the header: The Realms of Wickedry &bull; Wildberry Incense Coconut 100Pcs Shadowbox.init({ handleOversize: "drag", modal: true }); var ajaxRequest; var url = "ajax.php"; try{ // Opera 8.0+, Firefox, Safari ajaxRequest = new XMLHttpRequest(); } catch (e){ // Internet Explorer Browsers try{ ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP"); } catch (e) { try{ ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP"); } catch (e){ // Something went wrong alert("Your browser broke!"); return false; } } } function cartRemove(id) { ajaxRequest.onreadystatechange = function() { if(ajaxRequest.readyState == 4 && ajaxRequest.status == 200){ document.getElementById('cart').innerHTML = ajaxRequest.responseText; } } var params = "mode=cartremove&id=" + id; ajaxRequest.open("POST", url, true); ajaxRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); ajaxRequest.setRequestHeader("Content-length", params.length); ajaxRequest.setRequestHeader("Connection", "close"); ajaxRequest.send(params); } function wishRemove(id) { ajaxRequest.onreadystatechange = function() { if(ajaxRequest.readyState == 4 && ajaxRequest.status == 200){ document.getElementById('wishlist').innerHTML = ajaxRequest.responseText; } } var params = "mode=wishremove&id=" + id; ajaxRequest.open("POST", url, true); ajaxRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); ajaxRequest.setRequestHeader("Content-length", params.length); ajaxRequest.setRequestHeader("Connection", "close"); ajaxRequest.send(params); } function addReview(id) { var u = 2; var review = document.review.reviewContent.value; ajaxRequest.onreadystatechange = function() { if(ajaxRequest.readyState == 4 && ajaxRequest.status == 200) { document.getElementById('reviews_div').innerHTML = ajaxRequest.responseText; } } var params = "mode=reviews&id=" + id + "&u=" + u + "&reviewContent=" + review; ajaxRequest.open("POST", url, true); ajaxRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); ajaxRequest.setRequestHeader("Content-length", params.length); ajaxRequest.setRequestHeader("Connection", "close"); ajaxRequest.send(params); } function wishAdd(id) { ajaxRequest.onreadystatechange = function() { if(ajaxRequest.readyState == 4 && ajaxRequest.status == 200){ document.getElementById('wishlist').innerHTML = ajaxRequest.responseText; } } var params = "mode=wishlist&id=" + id; ajaxRequest.open("POST", url, true); ajaxRequest.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); ajaxRequest.setRequestHeader("Content-length", params.length); ajaxRequest.setRequestHeader("Connection", "close"); ajaxRequest.send(params); } function shareWish() { window.open("./../shop/pages/share_pop.php","Share Wishlist","menubar=0,resizable=0,location=0,width=550,height=300"); } function checkList() { var email_list = document.getElementById['email_list'].innerHTML; if(email_list == '') { return; } else { var urlStr = ''; var emails = email_list.replace(/^\s+|\s+$/g,""); emails = emails.split(","); var count = emails.length; var i = 0; while(i Home Logout [Chaos Creator] View Cart View Wishlist Health & Beauty &#62;&#62; Candles Wildberry Incense Coconut 100Pcs A true coconut fragrance.It's part of our 'Fruits' Fragrance Family. Manufactured by: Wild Berry Model: GL5325 $9.75 Add to Wish List Add a Review: There are no reviews for this item. Be the first to add one! Search Advanced Search Categories Welcome back, Chaos Creator! [phpBB Debug] PHP Notice : in file /shop/pages/blocks/login_box.php on line 27 : Undefined variable: u_profile ">My Account View Cart View Wishlist My Shopping Cart You have no items in your cart! My Wishlist You have no items in your wishlist! &copy; 2010-2011 by xxxxxxxxxxxxxx Search Powered by Any idea what might be causing this? UPDATED CODE using Caio's method: xxxxxxxxxxxxx &bull; xxxxxxxxxxxxxx Shadowbox.init({ handleOversize: "drag", modal: true }); Element.prototype.postAjax = function (params, url) { var ajaxRequest; try { // Opera 8.0+, Firefox, Safari ajaxRequest = new XMLHttpRequest(); } catch (e) { // Internet Explorer Browsers try { ajaxRequest = new ActiveXObject ("Msxml2.XMLHTTP"); } catch (e) { try { ajaxRequest = new ActiveXObject ("Microsoft.XMLHTTP"); } catch (e) { // Something went wrong alert("Your browser broke!"); return false; } } } ajaxRequest.open ("POST", url, true); ajaxRequest.setRequestHeader ("Content-type", "application/x-www-form-urlencoded"); ajaxRequest.setRequestHeader ("Content-length", params.length); ajaxRequest.setRequestHeader ("Connection", "close"); ajaxRequest.send (params); var _this = this; ajaxRequest.onreadystatechange = function () { if (ajaxRequest.readyState === 4) { if (ajaxRequest.status === 200) { _this.innerHTML = ajaxRequest.responseText; } else { alert ("Error, please try again."); } } } } window.addEventListener ("load", function () { var wishRemove = document.getElementById('wishRemove'); var wishId = document.getElementById('wishId'); var cartRemove = document.getElementById('cartRemove'); var wishAdd = document.getElementById('wishAdd'); var wishShare = document.getElementById('wishShare'); var reviewAdd = document.getElementById('reviewAdd'); var id = 1341; var wishList = document.getElementById("wishlist"); var cartList = document.getElementById("cart"); var reviewContent = document.getElementById("review_content"); var reviewList = document.getElementById("reviews_div"); if(cartRemove != undefined) { cartRemove.addEventListener("click", function () { cartList.postAjax("mode=cartRemove&id=" + id, "ajax.php"); }, false); } if(wishRemove != undefined) { wishRemove.addEventListener("click", function () { wishList.postAjax("mode=wishRemove&id=" + wishId, "ajax.php"); }, false); } if(reviewAdd != undefined) { reviewAdd.addEventListener("click", function () { reviewList.postAjax("mode=reviewAdd&id=" + id + "&reviewContent=" + review, "ajax.php"); }, false); } if(wishAdd != undefined) { wishAdd.addEventListener("click", function () { wishList.postAjax ("mode=wishAdd&id=" + id, "ajax.php"); }, false); } if(wishShare != undefined) { wishShare.addEventListener("click", function () { var email_list = document.getElementById['email_list'].innerHTML; if(email_list == '') { return; } else { var urlStr = ''; var emails = email_list.replace(/^\s+|\s+$/g,""); emails = emails.split(","); var count = emails.length; var i = 0; while(i Home Logout [Chaos Creator] View Cart View Wishlist xxxxxxxxxxx &#62;&#62; xxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxx xxxxxxxxxxxxxxxxxxxxxxxxxxx Manufactured by: Model: DJ0279-02 $8.18 Add a Review: There are no reviews for this item. Be the first to add one! Search Advanced Search Categories .... Welcome back, Chaos Creator! My Account View Cart View Wishlist My Shopping Cart X Wildberry Incense Coconut 100Pcs $9.75 My Wishlist xxxxxx $8.18 Information Shipping &amp; Returns Conditions Privacy Notice Contact Us &copy; 2010-2011 by xxxxxxx.com
