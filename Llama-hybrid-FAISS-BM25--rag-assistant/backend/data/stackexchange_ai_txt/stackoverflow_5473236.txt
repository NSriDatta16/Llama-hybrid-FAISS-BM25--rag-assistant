[site]: stackoverflow
[post_id]: 5473236
[parent_id]: 5470792
[tags]: 
I found a hacktacular solution (thanks to the HTML::Tag class in scrapi post on the QuarkRuby blog), using the undocumented HTML::Tag class that is yielded by assert_select in block form: # Count the tags and accumulate their text content h2_texts = nil assert_select('body > h2', :count => languages.size) do |elements| h2_texts = elements.map {|element| element.children.first.content } end languages.each do |language| assert h2_texts.include?(language.upcase), " tag for #{language} exists" end I guess assert_select just can't do this, or it can and it is not documented. I guess I'll have to UTSL ...
