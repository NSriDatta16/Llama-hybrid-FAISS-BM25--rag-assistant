[site]: stackoverflow
[post_id]: 5068379
[parent_id]: 
[tags]: 
android: nullpointer when saving images

I'm trying to take an image, optimize it as a 65% jpeg and save it to the phones storage. The code below is working fine for me on my nexus one, but is returning a null pointer exception on the last line. Any idea what I'm doing wrong? Thanks // image passed in from camera Bitmap bm = BitmapFactory.decodeFile(selectedImagePath, opts); // create output FileOutputStream fileOutputStream = null; // create filename & directory String nameFile = "ms" + String.valueOf(System.currentTimeMillis())+ ".jpg"; String directory = "/DCIM/MySeats/"; // try creating the directories if they don't already exist File file = new File(Environment.getExternalStorageDirectory(),directory); file.mkdirs(); // prep output fileOutputStream = new FileOutputStream(Environment.getExternalStorageDirectory().toString()+ directory + nameFile); optimizedImagePath = Environment.getExternalStorageDirectory().toString()+ directory + nameFile; // write file through a buffered stream BufferedOutputStream bos = new BufferedOutputStream(fileOutputStream); // This line causes a null pointer exception on some phones? // What am I missing? bm.compress(CompressFormat.JPEG, 65, bos);
