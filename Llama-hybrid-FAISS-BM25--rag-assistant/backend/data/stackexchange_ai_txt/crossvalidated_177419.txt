[site]: crossvalidated
[post_id]: 177419
[parent_id]: 175996
[tags]: 
In the context of multivariate time series, there is a mean vector and a variance-covariance matrix. The conditional mean vector and/or the conditional variance-covariance matrix vary over time. Then it is natural to be interested in the conditional correlation rather than unconditional one. Given a model for the conditional mean vector and the conditional variance-covariance matrix, a particular conditional correlation between variables $x_i$ (in your case X ) and $x_j$ (in your case Y ) at time $t$ can be immediately retrieved as the ratio of the conditional covariance over the product of the conditional standard deviations: $\rho_{i,j,t}=\frac{ \text{Cov}(x_{i,t},x_{j,t}) }{ \text{sd}(x_{i,t}) \cdot \text{sd}(x_{j,t}) }$. While the models for the conditional mean of a multivariate time series (e.g. VAR, VARMA, VECM, but also other model classes) might not need an introduction, the models for the conditional variance are perhaps less broadly used and less well known. Therefore you may benefit from a couple of reviews of multivariate GARCH models here and here . For a particular example, you could check out Engle's dynamic conditional correlation (DCC) model . Your correlation looks weird when plotted because it actually does not match the definition of Pearson correlation that you refer to above. In correlation , the part Xm * Ym should be replaced by (X-Xm) * (Y-Ym) . Also, you ignore the presence of the linear trends in X and Y when fitting the ARIMA models; that clearly yields a poor fit.
