[site]: stackoverflow
[post_id]: 3539469
[parent_id]: 3539332
[tags]: 
Well, you've now discovered one reason why people do not always bother to format generated output neatly; it is relatively hard to do so. Indeed, one way to deal with the problem is to provide an official formatter for the language. Google's Go programming language comes with the ' gofmt ' program to encourage the official format. C does not have such a standard, hence the religious wars over the placement of braces, but it does have programs such as indent which can in fact format the code neatly for you. The trick is not to output anything on a line until you know how many tabs to output. So, on a line with a close brace, you decrement the indent counter (making sure it never goes negative) and only then do you output the leading tabs and the following brace. Note that some parts of C require a semi-colon (or comma) after the close brace (think initializers and structure definitions); others do not (think statement blocks).
