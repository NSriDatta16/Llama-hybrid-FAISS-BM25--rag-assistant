[site]: stackoverflow
[post_id]: 1759929
[parent_id]: 1757618
[tags]: 
Filter as soon as possible. You should ensure that all text input is proper UTF-8, to make your text manipulation functions work predictably. But don't try to filter out "dangerous" characters or fragments! That doesn't work. Only fix or reject incorrect data on input. There's nothing incorrect in or ' characters. Escape as late as possible. Add SQL escaping in your SQL query function (or better â€“ use prepared statements). HTML-escape in your HTML templates. Quoted-Printable-escape in your e-mail generation functions, shell-escape when running CLI commands, etc. Don't let escaped data spread all over your application, because the longer escaped data lives, the bigger chance you'll mix it up with unescaped data or break escaping during processing.
