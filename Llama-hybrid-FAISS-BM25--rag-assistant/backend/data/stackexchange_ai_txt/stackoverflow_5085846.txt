[site]: stackoverflow
[post_id]: 5085846
[parent_id]: 
[tags]: 
PHPUnit - Problem generating Code Coverage report with Zend Framework application

I have been searching for an answer to this problem for hours in Google and various other sites with no luck. I have created some unit tests for my Zend Framework project using PHPUnit. All goes well with the tests up until the point of the the PHPUnit Code Coverage report. At this point I get the following error: Generating code coverage report, this may take a moment. Fatal error: Call to a member function pushStack() on a non-object in C:\htdocs\ZendFWTutorials\ZendStorefront\library\SF\Plugin\Action.php on line 32 This error references the following block of code: public function dispatchLoopStartup(Zend_Controller_Request_Abstract $request) { $stack = $this->getStack(); // category menu $categoryRequest = new Zend_Controller_Request_Simple(); $categoryRequest->setControllerName('category') ->setActionName('index') ->setParam('responseSegment', 'categoryMain'); // push requests into the stack $stack->pushStack($categoryRequest); } public function getStack() { if (null === $this->_stack) { $front = Zend_Controller_Front::getInstance(); if (!$front->hasPlugin('Zend_Controller_Plugin_ActionStack')) { $stack = new Zend_Controller_Plugin_ActionStack(); $front->registerPlugin($stack); } else { $stack = $front->getPlugin('ActionStack'); } $this->_stack = $stack; } return $this->_stack; } This code is from a library that I did not write so that probably adds complexity to my problem because I'm less likely to understand what is going on. I also don't know what the PHPUnit logic is doing when it creates the code coverage report so I don't know how to remedy the problem. This problem only occurs when I run PHPUnit and I have run xdebug to trace the code in this function under normal operational conditions. I have a feeling that PHPUnit enters a condition where the variable is null but in normal operation $stack and $categoryRequest are not null. My directory structure is as follows: application ----->bootstrap ----->config ----->layouts ----->modules -------->storefront -------------->controllers -------------->forms -------------->models -------------->services -------------->views build data library ----->SF ----->Zend Public ----->css ----->images tests ----->application ------------->modules ------------->controllers ------------->models ----TestHelper.php ----phpunit.xml phpunit.xml is as follows: ./application/ ../application/ ../application/ ../library/ highLowerBound="80"/> TestHelper.php: bootstrap();
