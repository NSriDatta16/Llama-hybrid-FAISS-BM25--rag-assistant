[site]: stackoverflow
[post_id]: 5438600
[parent_id]: 
[tags]: 
using .each() to iterate over selections for HTML5 and

Greetings all, I've written a script to create HTML5 image captions from regular image tags using and . My CMS uses FCKEditor, which always places embedded images inside of paragraphs. So my script builds a around the image and then moves it outside of the paragraph (see html5, figure/figcaption inside a paragraph gives unpredictable output )). The script I wrote works, but it traverses the DOM twice 'cause I couldn't figure out a way to traverse the DOM only once. I'd appreciate if someone better versed at JQuery could offer some suggestions on how to simplify/improve the script. Thanks, -NorthK // use like this: // // $(document).ready(function() { // iterate over each element with img.caption $('img.caption').each(function() { var classList = $(this).attr('class'); // grab the image's list of classes, if any $(this).wrap(' '); // wrap the with and add the saved classes $(this).after(' ' + $(this).attr('alt') + ' '); // add the caption $(this).removeAttr('class'); // remove the classes from the original element }); // now iterate over each figure.caption we built, and relocate it to before its closest preceding paragraph $('figure.caption').each(function() { $(this).parent('p').before($(this)); }); })
