[site]: stackoverflow
[post_id]: 1035878
[parent_id]: 1035799
[tags]: 
I'm guessing that the flags field is actually set to 2 = b010 instead of 4 - flags equal to 4 is an invalid IP packet. Remember that flags is a 3 bit value in the IP Header . I would expect to see UDP datagrams with a flags value of 2 which means "Don't fragment". As for your question, I don't believe there is a way to set the IP flags directly without going all of the way to using raw sockets . I wouldn't worry about it since most applications don't really have a good reason to muck with IP or even UDP/TCP headers directly.
