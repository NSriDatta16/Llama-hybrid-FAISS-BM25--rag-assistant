[site]: stackoverflow
[post_id]: 2483371
[parent_id]: 2477308
[tags]: 
Sounds like you figured out your agc problem. One further suggestion: I'm not sure the FFT is the right tool for the job. You might have better detection and lower CPU use with a sliding power estimator. e.g. signal => square => moving average => peak detection All of the above can be implemented very efficiently using fixed point math, which fits well with mobile android platforms. You can find more info by searching for "Parseval's Theorem" and "CIC filter" (cascaded integrator comb)
