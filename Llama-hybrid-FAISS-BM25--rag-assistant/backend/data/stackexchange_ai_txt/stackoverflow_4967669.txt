[site]: stackoverflow
[post_id]: 4967669
[parent_id]: 
[tags]: 
Android: install .apk programmatically

I made this with help from Android download binary file problems and Install Application programmatically on Android . I want to make auto-update and auto-install at once. It is local so it's non-market application. Here is my code for it: public void Update(String apkurl){ try { URL url = new URL(apkurl); HttpURLConnection c = (HttpURLConnection) url.openConnection(); c.setRequestMethod("GET"); c.setDoOutput(true); c.connect(); String PATH = Environment.getExternalStorageDirectory() + "/download/"; File file = new File(PATH); file.mkdirs(); File outputFile = new File(file, "app.apk"); FileOutputStream fos = new FileOutputStream(outputFile); InputStream is = c.getInputStream(); byte[] buffer = new byte[1024]; int len1 = 0; while ((len1 = is.read(buffer)) != -1) { fos.write(buffer, 0, len1); } fos.close(); is.close();//till here, it works fine - .apk is download to my sdcard in download file Intent promptInstall = new Intent(Intent.ACTION_VIEW) .setData(Uri.parse(PATH+"app.apk")) .setType("application/android.com.app"); startActivity(promptInstall);//installation is not working } catch (IOException e) { Toast.makeText(getApplicationContext(), "Update error!", Toast.LENGTH_LONG).show(); } } My permissions are INTERNET , WRITE_EXTERNAL_STORAGE , INSTALL_PACKAGES , and DELETE_PACKAGES . When Intent promptInstall is loaded, the app crashes =/ So, am I missing permissions or is my code incorrect, or is there a better way to do this?
