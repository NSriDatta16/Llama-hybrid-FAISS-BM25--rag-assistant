[site]: stackoverflow
[post_id]: 2975047
[parent_id]: 2974930
[tags]: 
I think it's a design smell to pass an interface to your repository for this kind of a process. Perhaps I'm misunderstanding, but it sounds like the processing on the XML is going to be handled inside the repository. Is that for storage means? Even so, this should be handled by a separate class that is only concerned with processing the XML that would accept an interface to your repository. The repository should only be concerned with the handling the access to the data stores. It's not unusual for a process like this to require several calls to the repository. To ensure that you can property test the XML processing logic, the XML processor should accept an interface to the repository so that you can mock that away and unit test the XML processing by itself
