[site]: stackoverflow
[post_id]: 5488429
[parent_id]: 
[tags]: 
Tk - segfaults when I use widget (button, text)

I have compiled Tcl/Tk into my application. When I open my application, I get a window (due to Tk_init) which I can manipulate: > wm title . "mysh" > wm geometry . 300x300 But when I try button or any of the other widgets it segfaults > button .b Segmentation fault I loaded this in gdb and ran a back trace Program received signal SIGSEGV, Segmentation fault. [Switching to Thread 182897358752 (LWP 14112)] 0x0000000100000000 in ?? () (gdb) bt #0 0x0000000100000000 in ?? () #1 0x0000000000fe3004 in XML_ParseBuffer () at /software/gcc_64/include/c++/3.3.6/bits/stl_pair.h:83 #2 0x0000000000fa4955 in FcConfigParseAndLoad () at /software/gcc_64/include/c++/3.3.6/bits/stl_pair.h:83 #3 0x0000000000f9d3cc in FcInitLoadConfig () at /software/gcc_64/include/c++/3.3.6/bits/stl_pair.h:83 #4 0x0000000000f9d416 in FcInitLoadConfigAndFonts () at /software/gcc_64/include/c++/3.3.6/bits/stl_pair.h:83 #5 0x0000000000f9d5bd in FcInit () at /software/gcc_64/include/c++/3.3.6/bits/stl_pair.h:83 #6 0x0000000000f97015 in FcConfigGetCurrent () at /software/gcc_64/include/c++/3.3.6/bits/stl_pair.h:83 #7 0x0000000000f98906 in FcConfigSubstituteWithPat () at /software/gcc_64/include/c++/3.3.6/bits/stl_pair.h:83 #8 0x0000000000edf28c in InitFont () at /software/gcc_64/include/c++/3.3.6/bits/stl_pair.h:83 #9 0x0000000000edf52f in TkpGetFontFromAttributes () at /software/gcc_64/include/c++/3.3.6/bits/stl_pair.h:83 #10 0x0000000000f00c4c in Tk_AllocFontFromObj () at /software/gcc_64/include/c++/3.3.6/bits/stl_pair.h:83 #11 0x0000000000efa4d2 in DoObjConfig () at /software/gcc_64/include/c++/3.3.6/bits/stl_pair.h:83 #12 0x0000000000efaa3a in Tk_InitOptions () at /software/gcc_64/include/c++/3.3.6/bits/stl_pair.h:83 #13 0x0000000000e70db2 in ButtonCreate () at /software/gcc_64/include/c++/3.3.6/bits/stl_pair.h:83 #14 0x0000000001588581 in TclEvalObjvInternal () I think there is some problem with Fonts. Any idea to fix this? EDIT 1 (Apr 01 2011): % uname -a Linux scdbuild04 2.6.9-67.ELsmp #1 SMP Fri Nov 16 12:49:06 EST 2007 x86_64 x86_64 x86_64 GNU/Linux % ldd libtk8.5.so libX11.so.6 => /usr/X11R6/lib64/libX11.so.6 (0x0000002a957b7000) libXss.so.1 => /usr/X11R6/lib64/libXss.so.1 (0x0000002a959b0000) libXext.so.6 => /usr/X11R6/lib64/libXext.so.6 (0x0000002a95ab3000) libdl.so.2 => /lib64/libdl.so.2 (0x0000002a95bc5000) libm.so.6 => /lib64/tls/libm.so.6 (0x0000002a95cc8000) libc.so.6 => /lib64/tls/libc.so.6 (0x0000002a95e4e000) /lib64/ld-linux-x86-64.so.2 (0x000000552aaaa000) EDIT 2 (04 Apr 2011) % cat /etc/*-release CentOS release 4.6 (Final) % cat /proc/version Linux version 2.6.9-67.ELsmp (mockbuild@builder10.centos.org) (gcc version 3.4.6 20060404 (Red Hat 3.4.6-9)) #1 SMP Fri Nov 16 12:49:06 EST 2007
