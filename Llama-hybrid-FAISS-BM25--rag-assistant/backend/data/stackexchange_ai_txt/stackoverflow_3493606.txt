[site]: stackoverflow
[post_id]: 3493606
[parent_id]: 3493562
[tags]: 
The first one works because MovedAUM is in scope within the nested SELECT . It is actually returning MovedAUM.AgentId for each row in NewAccounts . In other words the WHERE clause is doing nothing - it's equivalent to WHERE 1 = 1 . This slightly modified version will fail: WITH NewAccounts AS ( SELECT 3 as Newaccountid ), MovedAUM AS ( SELECT 1 AS Agentid, 2 as Col2 ) SELECT * FROM MovedAUM WHERE agentid IN (SELECT NewAccounts.Agentid FROM NewAccounts)
