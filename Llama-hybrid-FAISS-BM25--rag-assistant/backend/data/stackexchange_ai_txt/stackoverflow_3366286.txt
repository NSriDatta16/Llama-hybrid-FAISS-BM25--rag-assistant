[site]: stackoverflow
[post_id]: 3366286
[parent_id]: 
[tags]: 
What steps should you take to speed up SimpleTest?

I'm writing some testing code on a Drupal 6 project, and I can't believe how slow these tests seem to be running, after working with other languages and frameworks like Ruby on Rails or Django. Drupal.org thinks this question is spam, and won't give me a way to prove I'm human, so I figured SO is the next base place to ask a question like this, and get a sanity check on my approach to testing. The following test code in this gist is relatively trivial. http://gist.github.com/498656 In short I am: creating a couple of content types, create some roles, creating users, creating content as the users, checking if the content can be edited by them checking if it's visible to anonymous users And here's the output when I run these tests from the command line: Drupal test run --------------- Tests to be run: - (ClientProjectTestCase) Test run started: Thu, 29/07/2010 - 19:29 Test summary: ------------- ClientProject feature 52 passes, 0 fails, and 0 exceptions Test run duration: 2 min 9 sec I'm trying to run tests like this before I push code to a central repo everytime, but if it's taking this long this early on the project, I dread to think about it further down the line when we have ever more test cases. What can I do to speed this up? I'm using a MacbookPro with: 4gb of ram, 2.2ghz Core 2 Duo processor, PHP 5.2, Apache 2.2.14, without any opcode caching, Mysql 5.1.42 (Innodb tables are my default) A 5400 RPM laptop hard drive I understand that in the examples above I'm bootstrapping Drupal each time, and this is a very expensive operation, but this isn't unheard with other frameworks, like Ruby on Rails, or Django, and I don't understand why it's averaging out at a little over a minute per testcase on this project. There's a decent list of tricks here for speeding up Drupal 7 , many of which look like they'd apply to Drupal 6 as well, but I haven't yet had a chance to try them yet, and it would be great to hear how these have worked out for others by I blunder down further blind alleys, What has worked for you when you've been working with Drupal 6 in this situation, and where are the quick wins for this ? One minute per test case when I'm expecting to easily more than a hundred test cases feels insane.
