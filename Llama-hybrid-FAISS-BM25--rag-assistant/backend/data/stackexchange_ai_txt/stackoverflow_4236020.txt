[site]: stackoverflow
[post_id]: 4236020
[parent_id]: 
[tags]: 
How to extract file data from an HTTP MIME-encoded message in Linux?

I have a program that accepts HTTP post of files and write all the POST result into a file, I want to write a script to delete the HTTP headers, only leave the binary file data, how to do it? The file content is below (the data between Content-Type: application/octet-stream and ------------KM7cH2GI3cH2Ef1Ij5gL6GI3Ij5GI3 is what I want: POST /?user_name=vvvvvvvv&size=837&file_name=logo.gif& HTTP/1.1^M Accept: text/*^M Content-Type: multipart/form-data; boundary=----------KM7cH2GI3cH2Ef1Ij5gL6GI3Ij5GI3^M User-Agent: Shockwave Flash^M Host: 192.168.0.198:9998^M Content-Length: 1251^M Connection: Keep-Alive^M Cache-Control: no-cache^M Cookie: cb_fullname=ddddddd; cb_user_name=cdc^M ^M ------------KM7cH2GI3cH2Ef1Ij5gL6GI3Ij5GI3^M Content-Disposition: form-data; name="Filename"^M ^M logo.gif^M ------------KM7cH2GI3cH2Ef1Ij5gL6GI3Ij5GI3^M Content-Disposition: form-data; name="Filedata"; filename="logo.gif"^M Content-Type: application/octet-stream^M ^M GIF89an^@I^^M ------------KM7cH2GI3cH2Ef1Ij5gL6GI3Ij5GI3^M Content-Disposition: form-data; name="Upload"^M ^M Submit Query^M ------------KM7cH2GI3cH2Ef1Ij5gL6GI3Ij5GI3-
