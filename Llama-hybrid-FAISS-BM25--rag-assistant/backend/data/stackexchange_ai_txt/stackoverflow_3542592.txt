[site]: stackoverflow
[post_id]: 3542592
[parent_id]: 3540700
[tags]: 
Compile with debugging symbols. If you're using gcc then use the -g3 flag for the most symbols. You should also be using the -Wall flag and pay attention to the warnings it gives you. Try stepping trough the program that fails first with a debugger and see where it fails. My bet is that the problem is in your q_remove and q_add code because that's the code you left out, and because it probably uses arrays.
