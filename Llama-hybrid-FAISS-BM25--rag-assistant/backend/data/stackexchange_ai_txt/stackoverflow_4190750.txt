[site]: stackoverflow
[post_id]: 4190750
[parent_id]: 
[tags]: 
Changes to NSTextView not reaching screen

I have an NSTextView backed by a text system I put together myself, along the lines of the "Assembling the Text System by Hand" section in the Text System Overview in the Cocoa documentation. It successfully displays the contents of the NSTextStorage on the screen. But when I type into it, nothing seems to happenâ€”the text on screen doesn't change. If I select the text, the shape of the selection suggests that the text has changed. If I copy and paste the text into TextEdit, I can even see my edits. And if I type enough, I can get it to throw an exception: NSRunStorage, _NSBlockNumberForIndex(): index (5897) beyond array bounds (5881) Golly, this looks like the kind of thing I could spend the better part of a day debugging. What's going on here?
