[site]: stackoverflow
[post_id]: 5243964
[parent_id]: 
[tags]: 
Destroying session to logout, but user still logged in until page refreshes

I'm using the following code to log users of an application out: session_start(); setcookie (session_id(), "", time() - 3600); session_destroy(); session_write_close(); header("Location: index.php"); Afterwards they are sent back to the main page (index.php) of the application. To test they've been successfully logged out I return to another page on the menu which has code to check it the session is active or not. If the session is active, it gets the username and gives them a little hello with the choice to logout. After logging out initially the main page (index.php) doesn't show the welcome message above, but clicking on a page I had visited logged in before does, but the user isn't really logged in. If I hit F5, the logged in message is cleared and the content they see as a logged in user isn't available. So there appears to be some caching. I've added the following headers to each page to try force the browser to not cache content: header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past header('Cache-Control: no-store, no-cache, must-revalidate'); header('Cache-Control: post-check=0, pre-check=0', false); header('Pragma: no-cache'); session_start(); But no luck :( Any ideas? Thanks!
