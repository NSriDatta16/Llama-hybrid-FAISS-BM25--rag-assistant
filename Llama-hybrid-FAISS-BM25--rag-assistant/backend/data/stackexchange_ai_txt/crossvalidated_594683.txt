[site]: crossvalidated
[post_id]: 594683
[parent_id]: 
[tags]: 
Why does my logistic regression model over predict for certain groups and under predicts for others?

I am running a logistic regression model to predict whether a particular business location would purchase from a company X. I have a few predictor variables related to the business location, characteristics and nature of their business and a few variables related to the nature of the company in question and its relation with the business. My training data is a survey data where I ask businesses if they purchased from company X in the last 12 months. I have used sample weights to make my training set as representative of the true prediction set which is the whole population of businesses the company is exposed to. However, the training set is wayyyy smaller sample than my prediction set. Training set is around 26,000 samples of business locations (survey data) and prediction set is 30 million. In general, ones I make the training set representative of the prediction population using sample weights, it looks like the company has higher penetration among X-Large businesses and lower for Small businesses in the weighted survey data.For ex. 34% of X-Large customers are likely to be the company's customer while 16% of Small customers are likely to be the company's customers. However, when I use the results of the Logistic reg model to predict on the larger prediction set which represents the whole population of businesses, the company is predicted to have a way higher penetration for X-Large customers/ businesses and way lower penetration among Small businesses. My prediction shows for X-Large customers the penetration is 88% while for Small customers it is just 1% or so. My training data is severely class imbalanced and I used class_weights="balanced" parameter to represent both my classes equally in the model. What might be causing this over and under prediction within specific groups? Edit: I also used it with class_weight = None (no class weights), and it seems like the problem persists. One observation is that in my logistic regression, the expected predicted probabilities for certain groups in my train set do not match the actual training proportions. What can that mean?
