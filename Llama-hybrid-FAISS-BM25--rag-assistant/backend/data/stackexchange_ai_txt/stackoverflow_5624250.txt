[site]: stackoverflow
[post_id]: 5624250
[parent_id]: 5622652
[tags]: 
Here is simple and slightly heretic suggestion for a shopping cart. table cart( customer_id not null ,create_date not null ,primary key(customer_id) ,foreign key references customers(customer_id) on delete cascade ); table cart_item( customer_id not null ,product_id not null ,quantity not null ,modified_date not null ,primary key(customer_id, product_id) ,foreign key(customer_id) references cart(customer_id) on delete cascade ,foreign key(product_id) references products(product_id) on delete cascade ); Here is the rationale behind the design: If what you are building looks anything like most shopping sites, there will only be 0-1 active carts at a time per customer. Therefore, the cart can inherit the customer key. Usually, one does not buy a product 2 times. Instead one buys 2 pieces of the same product, so I made the product key part of the primary key in the Cart Item table. Either the customer decides NOT to proceed with the stuff in his cart. In this case, the cart and the items will just stay in the table until he either comes back and decides to go ahead and pay up, or until you decide (for example based on cart.create_date) that it is time to remove the data. When the customer proceeds to checkout and finalizes his order, you can create the real order and orderlines (products), including the order date which is not necessarily the same as the date when the customer began to stick items in the cart. (My book purchases on amazon typically takes a week to finalize because I keep finding interesting books and I have to read some reviews first :) As for what keys your order/orderline table should have, it actually depends on lots of things such as: Is it possible to delete products that have orders? Do you need to accurately represent the product information (price, name) as of the time of purchase? Do I use the orderline table to represent other stuff such as discounts/campaign codes etc Do I need to accurately report the Customer shipping address as of time of purchase? (customer moved to another country, but you sent the items to his old place) The above design is using natural keys, which happens to provide excellent performance in this case.
