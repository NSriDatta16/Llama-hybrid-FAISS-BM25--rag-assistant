[site]: stackoverflow
[post_id]: 1580725
[parent_id]: 1580700
[tags]: 
You can only have one query at a time in PHP. $query1 = "SELECT count(*) FROM agents INTO @AgentCount" $query2=" SELECT user_agent_parsed, user_agent_original, COUNT( user_agent_parsed ) AS thecount, COUNT( * ) / ( @AgentCount) AS percentage FROM agents GROUP BY user_agent_parsed ORDER BY thecount DESC LIMIT 50"; UPDATE I have a DAL that contains all my queries. A typical function in my DAL looks like this: // These functions are reusable public function getAllRows($table) { $sql =" SELECT * FROM $table"; $this->query($sql); return $this->query_result; } Then in my BLL (Business Layer) I have the following: public function getUserAgents() { $result = parent::getAllRows(); $row = mysql_fetch_array($result); return $row[0]; // Retrieves the first row // Then you take this value and to a second request. Then return the answer / rows. }
