[site]: stackoverflow
[post_id]: 5493219
[parent_id]: 5490939
[tags]: 
Maybe too late to help you, and you've accepted a correct answer, but there's another big potential problem. I tried this with Firefox 3.6.11 on Linux and 3.6.12 on Windows and they both behaved the same -- I did not see the this is some code in the Result pane on your fiddle, instead I saw simply this is some code with no markup at all. Throwing firebug at it by adding a debugger; statement as the first line in the JavaScript pane and tracing through it, I found that str was getting a value of '\n' , that is, just a newline was being returned from innerHTML and nothing else. Thinking about this, but with no way to confirm it, I suspect it's because Firefox is building the DOM tree differently than you expect, because the HTML you're using is invalid . Inline elements are not allowed to contain block elements; specifically, the tag is not allowed to contain a tag, and is likewise not allowed to contain a tag -- again, only limited inline elements can be used inside a tag). I think FF is implicitly closing the code block before opening the paragraph so the innerHTML of id="cleanme" is nothing but the newline. It renders with the "pre" font as you expect because you've thrown the browser into Quirks Mode.
