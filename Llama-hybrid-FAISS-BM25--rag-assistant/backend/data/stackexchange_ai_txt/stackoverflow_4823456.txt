[site]: stackoverflow
[post_id]: 4823456
[parent_id]: 
[tags]: 
Clojure Style Agents in F#

I'm trying to code some Clojure style Agents in F# using MailboxProcessors. Here's what I have so far: namespace GameEngine type Agent (inital:'T) = let mutable state:'T = inital let queue = new MailboxProcessor 'T>( fun inbox -> let rec loop count = async { let! msg = inbox.Receive() state 'T) = queue.Post(action) member self.Deref() = state So the basic idea is that we have a mutable state that can be updated by calling .Send(). My question is, will my messages ever be out of order? If msg A is sent before B will the async function above always process A before B? Seems like there should be a class like this already in F#? Am I reinventing the wheel?
