[site]: stackoverflow
[post_id]: 3731511
[parent_id]: 3731481
[tags]: 
Your second code doesn't do the same thing as your first. In addition to the changes you already made, you need to turn all your ORs into ANDs. (See De Morgan's Laws .) I'll bet that after you make the fix, your two versions will run at the same speed.
