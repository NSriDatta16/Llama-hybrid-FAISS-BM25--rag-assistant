[site]: crossvalidated
[post_id]: 478016
[parent_id]: 477217
[tags]: 
Use the entire chain, with all duplicates. If you skip the duplicates, the chain you generated would not even have correct distribution anymore. But you can (and maybe should) do a "thinning out" of the markov chain. That means only keeping every second element of the chain (or every 10'th or even every 1000th. really depends on your problem), throwing away the rest. But in that procedure, duplicate elements (due to non-accepted updates) count as multiple elements. In practice this usually means that in the thinned out chain, no duplicates are actually left. Don't use the the formula explicitly as written, but instead with a cutoff like $$ \hat\tau_\mathcal{O} \approx 1 + 2\sum_{i=0}^{t_\mathrm{max}} \rho_{\mathcal{O}_i}$$ with $t_\mathrm{max}=5\cdot \hat\tau_\mathcal{O}$ or similar. Reason is that the estimated $\rho_{\mathcal{O}_i}$ becomes very noisy for large $i$ .
