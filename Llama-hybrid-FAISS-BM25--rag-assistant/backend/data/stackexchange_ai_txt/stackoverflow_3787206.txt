[site]: stackoverflow
[post_id]: 3787206
[parent_id]: 
[tags]: 
problem while writing data into xml, when event occured

I'm trying to write a little software for logging data, if any type of file created in directory A . I use FileSystemWatcher class to get information about file creation in folder A . There are many subfolder in folder A . And many users can create file in this directory in one time. I use XML data to save log data. XmlTextReader reader = new XmlTextReader(FILE_NAME); XmlDocument doc = new XmlDocument(); doc.Load(reader); reader.Close(); XmlNode currNode; XmlDocumentFragment docFrag = doc.CreateDocumentFragment(); docFrag.InnerXml = " " + " " + fileName + " " + " 0 " + " " + DateTime.ParseExact(DateTime.Now.ToString("dd.MM.yyyy HH:mm:ss"), "dd.MM.yyyy HH:mm:ss", System.Globalization.CultureInfo.CurrentCulture, System.Globalization.DateTimeStyles.None).ToString() + " " + " "; // insert the availability node into the document currNode = doc.DocumentElement; currNode.InsertAfter(docFrag, currNode.LastChild); //save the output to a file doc.Save(FILE_NAME); But sometimes while occurs watcher.Created += new FileSystemEventHandler(OnChanged); , data about file creation is not inserted to XML file. So, is it possible if file opened for data writing, and it's locked for new dataWrite file document not saved? and how to fix this.
