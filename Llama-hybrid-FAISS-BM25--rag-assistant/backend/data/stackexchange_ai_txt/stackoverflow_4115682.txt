[site]: stackoverflow
[post_id]: 4115682
[parent_id]: 1558177
[tags]: 
The storage method makes this a very difficult problem to solve. Programmatically merging contiguous polygons is going to be slow and complicated. Rather than storing XML fragments, push them into a GIS enabled database like PostgreSQL with PostGIS . This allows you to store the shape information as well known binary (WKB) objects rather than XML fragments, and gives you a full suite of GIS processing and formatting tools. Once you have it that format this problem becomes very easy to solve. E.g. assuming the geometry column is called "the_geom", then you could use a query like the following: SELECT ST_ASKML(ST_Union(the_geom)) AS area_union_askml FROM areas WHERE (some_filter_expression) GROUP BY (optional_group_by_expression) This simply uses the aggregate function ST_UNION to combine the matched geometries in a single object and outputs the result column as a KML fragment. If you need to simplify the shapes because the KML is too complicated for Google Maps, you can add a ST_Simplify or ST_SimplifyPreserveTopology. You could also use ST_NPoints to count the number of points in the resulting geometry so you can detect when you need to simplify the result.
