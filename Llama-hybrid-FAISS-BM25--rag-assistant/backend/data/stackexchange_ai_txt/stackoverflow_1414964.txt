[site]: stackoverflow
[post_id]: 1414964
[parent_id]: 1367464
[tags]: 
Clearly the user is not getting logged in. Seems like Bragi Ragnarson might be on to something. Here are some other things to isolate the problem: Understand if the test is incomplete or relying on some side-effect of autotest. Run the test by itself: ruby test/functionals/users_controllers_test.rb Presumably that won't work. If it doesn't, there's some global code that is getting invoked for non functional tests by autotest. It's probably code setting in the test/integration or test/units directories, or one of their requires there.
