[site]: stackoverflow
[post_id]: 1467472
[parent_id]: 1467070
[tags]: 
I think that the query needs to be phrased in two parts. One to get the count per State+City plus another to get the count per State+City+Q1. You then join these two queries together and do the calculation on the combined results. There might be a more elegant solution than this, but something along these lines perhaps might work. Apologies for any typos! select t1.q1, t1.state, t1.city, ResponseCount, 100.0 * ResponseCount/CityCount as "%" from (select q1, state, city, count(q1) as ResponseCount from master group by state, city, q1) t1 join (select state, city, count(*) as CityCount from master group by state, city) t2 on t2.State = t1.State and t2.City = t1.City Hope this helps.
