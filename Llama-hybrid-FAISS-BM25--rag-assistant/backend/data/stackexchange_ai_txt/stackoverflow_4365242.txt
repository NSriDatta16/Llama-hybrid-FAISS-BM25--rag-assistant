[site]: stackoverflow
[post_id]: 4365242
[parent_id]: 4365099
[tags]: 
(void)launchInAppMail { MFMailComposeViewController *controller = [[MFMailComposeViewController alloc] init]; controller.mailComposeDelegate = self; [controller setSubject:@"In app email..."]; NSMutableString *messageString = [[NSMutableString alloc] init]; if (!(mNameField.text == nil || [mNameField.text isEqualToString:@""])) { [messageString appendFormat:@"Name: %@ \n",mNameField.text]; } if (!(mPhoneNumberField.text == nil || [mPhoneNumberField.text isEqualToString:@""])) { [messageString appendFormat:@"Phone Number: %@ \n",mPhoneNumberField.text]; } if (!(mEmailField.text == nil || [mEmailField.text isEqualToString:@""])) { [messageString appendFormat:@"Email ID: %@ \n",mEmailField.text]; } if (!(mTextView.text == nil || [mTextView.text isEqualToString:@""])) { [messageString appendFormat:@"Desription: %@ \n",mTextView.text]; } if (!(mProblemNameButton.titleLabel.text == nil || [mProblemNameButton.titleLabel.text isEqualToString:@""])) { [messageString appendFormat:@"Problem Name: %@ \n",mProblemNameButton.titleLabel.text]; } [messageString appendFormat:@"Address: %@ \n", self.mAddress]; if (self.coordinateLoc) [messageString appendFormat:@"Longitude: %f, Latitude: %f \n", self.coordinateLoc.coordinate.longitude, self.coordinateLoc.coordinate.latitude]; [controller setToRecipients:[NSArray arrayWithObject:@"service@emergencylocksmithleads.com"]]; [controller setMessageBody:messageString isHTML:NO]; [messageString release]; if (mImageView.image != nil) { NSData *imageData = UIImageJPEGRepresentation(mImageView.image, 1); [controller addAttachmentData:imageData mimeType:@"image/jpg" fileName:@"example.jpg"]; } [self presentModalViewController:controller animated:YES]; [controller release]; } pragma mark -------------------------------------------- pragma mark MFMailComposeViewController delegate Methods (void)mailComposeController:(MFMailComposeViewController *)controller didFinishWithResult:(MFMailComposeResult)result error:(NSError )error { switch (result) { case MFMailComposeResultCancelled: NSLog(@"Mail send canceled."); / Execute your code for canceled event here ... / break; case MFMailComposeResultSaved: NSLog(@"Mail saved."); / Execute your code for email saved event here ... */ break; case MFMailComposeResultSent: { UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Mail Sent" message:nil delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil]; alert.tag = 1; alert.delegate = self; [alert show]; [alert release]; break; } case MFMailComposeResultFailed: { UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Mail Sending Failed" message:nil delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil]; alert.tag = 2; alert.delegate = self; [alert show]; [alert release]; break; } default: break; } [controller dismissModalViewControllerAnimated:YES]; }
