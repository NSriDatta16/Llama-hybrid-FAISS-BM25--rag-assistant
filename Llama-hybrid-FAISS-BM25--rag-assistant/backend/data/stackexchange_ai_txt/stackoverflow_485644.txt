[site]: stackoverflow
[post_id]: 485644
[parent_id]: 485358
[tags]: 
Remember that if you are looping through the map, finding stuff to delete, save off the key for later deletion. If you delete while iterating, you run the risk of invalidating the iteration loop. std::map >::iterator iter = my_map.begin(); while (iter != my_map.end()) { if (somethingBadAboutItem(iter)) { my_map.erase(iter); // this can mess up my_map iteration above // and cause bad data access later } ++iter; } instead, try std::map >::iterator iter = my_map.begin(); std::vector keys_to_delete; while (iter != my_map.end()) { if (somethingBadAboutItem(iter)) { keys_to_delete.push_back(iter->first); } ++iter; } for (std::size_t i = 0; i I am interested if other people have found something more elegant than this, but this is my preferred technique.
