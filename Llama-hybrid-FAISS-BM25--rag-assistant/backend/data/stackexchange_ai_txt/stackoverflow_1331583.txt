[site]: stackoverflow
[post_id]: 1331583
[parent_id]: 1331500
[tags]: 
You could add two operations per item. The first would store the item to local storage, and the second would depend on the first and would remove the item from local storage on success. Then, when you want to restore any items from local storage, you create only the store-to-the-cloud operations, not the store-locally operations. As before, they remove the items from local storage only if they succeed, and if they don't succeed, they leave the items in local storage for the next attempt.
