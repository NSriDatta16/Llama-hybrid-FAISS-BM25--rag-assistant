[site]: stackoverflow
[post_id]: 5091549
[parent_id]: 
[tags]: 
Google Analytics & Adwords delayed javascript link to App Store ignored?

I'm trying to measure conversion for both my Google Adwords campaign and normal traffic going to the App Store. Previously I had a link "/app_store/" on my page that would load, wait 1 second and then continue to the app store. I found a more elegant solution somewhere using Javascript. For adwords it loads a pixel image and for analytics it calls a Google Javascript function, pauses for a fraction of a second and then follows the link. Unfortunately it's not working for me. Google Analytics and Google Adsense don't see anyone going to the App Store (not even myself). var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-18180332-1']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); function recordOutboundLink(link, category, action) { try{ // Google Analytics var pageTracker = _gat._getTracker("UA-18180332-1"); pageTracker._trackEvent(category, action); // Google Adwords var image = new Image(1, 1); image.src = "http://www.googleadservices.com/pagead/conversion/1046551421/?value=$8&amp;label=zqrfCMWh0QEQ_baE8wM&amp;guid=ON&amp;script=0" setTimeout('document.location = "' + link.href + '"', 100) } catch(err) {} } And for the link: What am I doing wrong here? Update 23:13 I noticed that if the delay is 100ms, the following error flashes by (it took me a while to time the screenshot). I only tested this with Erwan's suggestion; not sure if it also happened in the old version. The error seems to go away for longer delays; I set it to 300ms to be on the safe side.
