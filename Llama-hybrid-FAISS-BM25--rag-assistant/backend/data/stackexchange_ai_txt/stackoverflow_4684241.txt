[site]: stackoverflow
[post_id]: 4684241
[parent_id]: 
[tags]: 
Help with XmlDiffPatch, Navigating XML doc by number of nodes?

I'm trying for the first time to use XmlDiffPatch and not getting anywhere fast! What I want to do is "just" compare the infoset of two XML files and list the differences and the XPath to the changes in a file that's it! After much googling I found the code below which works well as far as it goes, it does the compare and find the changes and creates the file below but how do i get the xpaths from this? I have just found this: "The xd:node element contains the match attribute with a path descriptor identifying the referenced node. Here is an example of what this element may look like: Here is an example of xd:node element that is used to identify the fourth node of the current source element. The changes on the child nodes of the fourth node are described in the child nodes of the xd:node element. Changed text So how do you move around an XML doc by counting the number of nodes!?? Output file vxd.out: TESTING A1 Code thus far: public void DoCompare(string file1, string file2) { Random r = new Random(); string startupPath = Application.StartupPath; //output diff file. diffFile = startupPath + Path.DirectorySeparatorChar + "vxd.out"; XmlTextWriter tw = new XmlTextWriter(new StreamWriter(diffFile)); tw.Formatting = Formatting.Indented; bool isEqual = false; //Now compare the two files. try { isEqual = diff.Compare(file1, file2, compareFragments, tw); } catch (XmlException xe) { MessageBox.Show("An exception occured while comparing\n" + xe.StackTrace); } finally { tw.Close(); } if (isEqual) { //This means the files were identical for given options. MessageBox.Show("Files Identical for the given options"); return; //dont need to show the differences. } //Files were not equal, so construct XmlDiffView. XmlDiffView dv = new XmlDiffView(); //Load the original file again and the diff file. XmlTextReader orig = new XmlTextReader(file1); XmlTextReader diffGram = new XmlTextReader(diffFile); dv.Load(orig, diffGram); }
