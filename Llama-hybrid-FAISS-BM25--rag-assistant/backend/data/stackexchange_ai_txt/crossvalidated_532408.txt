[site]: crossvalidated
[post_id]: 532408
[parent_id]: 532400
[tags]: 
Usually you calculate the average effect on the treated (ATT) in DiD, see this great resource , when treatment assignment is non-random and endogenous to some unobserved charateristics. (But DiD requires some strong assumptions to be able idenify ATT) When you run an RCT, you can estimate ITT easily by a simple group comparison, because assignment is random. If you are interested in the local ATE and compliance/uptake is not 100% (this refers to 100% among those randomized, not 100% among those invited to participate in the first place), then you can use randomization as an instrumental variable, as mentioned in this thread . Consequently, I don't see how you would possibly like to combine these methods, as they apply to different study designs. Rather, if many people decline the invitation to be randomized/included in the study, you might want to think about what the population finally included in your RCT actually represents. If that population is different from the target population you want to study regarding some observables, you can use poststratification after effect estimation, as is well explained in this paper by Stuart et al. (2015).
