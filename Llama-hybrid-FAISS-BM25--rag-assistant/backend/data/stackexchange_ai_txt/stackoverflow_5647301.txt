[site]: stackoverflow
[post_id]: 5647301
[parent_id]: 5646006
[tags]: 
There are actually two ways of doing this - one is to perform two-phase transformation and another one is to use evaluate extension function. Two-phase transformation First you need to generate correct XSL based on your Locations list. It could look like this: I assume you don't have much troubles with creating transformation that will produce this output based on your XPath definition file as pattern is pretty simple. The next step is to apply generated transformation to your source file. You could combine these two steps into small pipe and get results you want. Using extension function Library EXSLT contains extension function called evaluate which helps in cases like yours. It's supported by Xalan transformer out of the box but not by Saxon as far as I know. There is however major issue with this function - starting with version 2.7 of Xalan there is a bug which prevents execution of multiple evaluations. Unfortunately stylesheet below is affected when I tried to run it. Suggestion would be to change version of Xalan to 2.6 if possible. Nevertheless, here's the stylesheet that will do what you want without additional generation phase. Assumption is that the document with Locations definitions is on a same directory and is called xpath.xml . Update document() function usage if it's not the case.
