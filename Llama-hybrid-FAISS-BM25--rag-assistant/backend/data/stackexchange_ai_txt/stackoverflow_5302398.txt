[site]: stackoverflow
[post_id]: 5302398
[parent_id]: 
[tags]: 
compilation error on Executing embedded lua in C file

I am using Cygwin environment with Lua Interpreter package included while cygwin installation. So I am able to compile and run sample lua progs. But when i try to execute a sample c file which has lua calls , i am always getting this following error. $ cc -o ../samples/ctest -Wall ../samples/ctest.c /tmp/ccOYgLj4.o:ctest.c:(.text+0x2b): undefined reference to `_luaL_newstate' /tmp/ccOYgLj4.o:ctest.c:(.text+0x3d): undefined reference to `_luaL_openlibs' /tmp/ccOYgLj4.o:ctest.c:(.text+0x59): undefined reference to `_luaL_loadfile' /tmp/ccOYgLj4.o:ctest.c:(.text+0x82): undefined reference to `_lua_pcall' /tmp/ccOYgLj4.o:ctest.c:(.text+0xb8): undefined reference to `_lua_getfield' /tmp/ccOYgLj4.o:ctest.c:(.text+0xd5): undefined reference to `_lua_call' /tmp/ccOYgLj4.o:ctest.c:(.text+0xf0): undefined reference to `_lua_close' collect2: ld returned 1 exit status My sample ctest.c file contents: #include #include "lua.h" #include "lualib.h" #include "lauxlib.h" /* lua interpreter */ lua_State* l; int main () { int dofile; /* initialize lua */ l = lua_open(); /* load lua libraries */ luaL_openlibs(l); /* run the hello.lua script */ dofile = luaL_dofile(l, "hello.lua"); if (dofile == 0) { /* call foo */ lua_getglobal(l,"foo"); lua_call(l,0,0); } else { printf("Error, unable to run hello.lua\n"); } /* cleanup Lua */ lua_close(l); return 0; } hello.lua file contents: print("from c hurray") on searching the net everywhere they say some linker error and have to include -llua51. So i tried the following . $ cc -o ../samples/ctest -Wall -llua5.1 ../samples/ctest.c /tmp/cc3v5Nim.o:ctest.c:(.text+0x2b): undefined reference to `_luaL_newstate' /tmp/cc3v5Nim.o:ctest.c:(.text+0x3d): undefined reference to `_luaL_openlibs' /tmp/cc3v5Nim.o:ctest.c:(.text+0x59): undefined reference to `_luaL_loadfile' /tmp/cc3v5Nim.o:ctest.c:(.text+0x82): undefined reference to `_lua_pcall' /tmp/cc3v5Nim.o:ctest.c:(.text+0xb8): undefined reference to `_lua_getfield' /tmp/cc3v5Nim.o:ctest.c:(.text+0xd5): undefined reference to `_lua_call' /tmp/cc3v5Nim.o:ctest.c:(.text+0xf0): undefined reference to `_lua_close' collect2: ld returned 1 exit status Vedhashree@Vedhashree-PC /cygdrive/c/cygwin/bin $ ls /usr/lib/liblua*.a /usr/lib/liblua.a /usr/lib/liblua5.1.a /usr/lib/liblua.dll.a /usr/lib/liblua5.1.dll.a Can you help me fix this issue and make my first embedded lua c program work? Update: $ cc -o ctesing -Wall ctesting.c -llua5.1 /usr/lib/gcc/i686-pc-cygwin/4.3.4/../../../../i686-pc-cygwin/bin/ld: cannot find -llua5.1 collect2: ld returned 1 exit status ----------------------------------------------------------------- cc -o ../samples/ctest -Wall ../samples/ctest.c -llua /usr/lib/gcc/i686-pc-cygwin/4.3.4/../../../../i686-pc-cygwin/bin/ld: cannot find -llua51 collect2: ld returned 1 exit status ----------------------------------------------------------------- cc -o ../samples/ctest -Wall ../samples/ctest.c -llua51 /usr/lib/gcc/i686-pc-cygwin/4.3.4/../../../../i686-pc-cygwin/bin/ld: cannot find -llua collect2: ld returned 1 exit status ----------------------------------------------------------------- Still I get only these errors :(
