[site]: stackoverflow
[post_id]: 4781618
[parent_id]: 
[tags]: 
Java EE 6 embedded glassfish embedded derby EJB unit test

questing is about javaee6 with embedded glassfish and embedded derby jndi lookup for data source at the time of deployment before unit test is executed.... Please find the persistence.xml here... org.eclipse.persistence.jpa.PersistenceProvider jdbc/__default Please find the server console log here when the unit test is executed.... Jan 24, 2011 5:12:44 PM com.sun.enterprise.resource.allocator.LocalTxConnectorAllocator createResource WARNING: poolmgr.create_resource_error Jan 24, 2011 5:12:44 PM com.sun.enterprise.connectors.ConnectionManagerImpl internalGetConnection WARNING: poolmgr.get_connection_failure Jan 24, 2011 5:12:44 PM com.sun.gjc.spi.base.DataSource getConnection WARNING: jdbc.exc_get_conn Jan 24, 2011 5:12:44 PM org.eclipse.persistence.session.file:/C:/DD/WORKSPACES/lean-soa-arch/entities/target/classes/_mymodulePU.ejb SEVERE: Local Exception Stack: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.0.0.v20091127-r5931): org.eclipse.persistence.exceptions.DatabaseException Internal Exception: java.sql.SQLException: Error in allocating a connection. Cause: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect. Error Code: 0 at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:309) ...... ....... ...... Caused by: java.sql.SQLException: Error in allocating a connection. Cause: Connection could not be allocated because: java.net.ConnectException : Error connecting to server localhost on port 1527 with message Connection refused: connect. at com.sun.gjc.spi.base.DataSource.getConnection(DataSource.java:112) at org.eclipse.persistence.sessions.JNDIConnector.connect(JNDIConnector.java:126) ... 44 more Jan 24, 2011 5:12:44 PM org.eclipse.persistence.session.file:/C:/DD/WORKSPACES/lean-soa-arch/entities/target/classes/_mymodulePU.properties FINEST: End deploying Persistence Unit mymodulePU; session file:/C:/DD/WORKSPACES/lean-soa-arch/entities/target/classes/_mymodulePU; state Deployed; factoryCount 1
