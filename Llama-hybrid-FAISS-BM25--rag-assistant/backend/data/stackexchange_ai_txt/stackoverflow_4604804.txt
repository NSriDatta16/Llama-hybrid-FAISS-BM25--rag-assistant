[site]: stackoverflow
[post_id]: 4604804
[parent_id]: 
[tags]: 
Chrome browser does not show images generated by HTTP handler

Basically I have a web site that renders HTML preview of some documents (mainly office). The resulting HTML fragment is included in the page returned by the same web site, however images are returned by HTTP handler from another site with the following links: For some reason all browsers except Chrome (e.g. IE6/7/8, Firefox, Opera, Safari) show everything just fine, however for these images Chrome shows "broken image" icon. If I choose "Open image in new tab" then the image is shown just fine. Edit I thought I have solved this issue, but apparently with Fiddler turned on it works fine. I had context.Response="utf-8" left in code, but removing it had no difference. Headers: HTTP/1.1 200 OK Date: Wed, 05 Jan 2011 14:26:57 GMT Server: Microsoft-IIS/6.0 MicrosoftOfficeWebServer: 5.0_Pub X-Powered-By: ASP.NET X-AspNet-Version: 4.0.30319 Transfer-Encoding: chunked Cache-Control: no-cache Pragma: no-cache Expires: -1 Content-Type: image/jpeg Code: context.Response.ContentType = file.ContentType; context.Response.Cache.SetCacheability(HttpCacheability.NoCache); byte[] buff = new byte[BuffSize]; using (var stream = repository.GetFileContentsAsStream(file.ContentId)) { int bytesRead; do { bytesRead = stream.Read(buff, 0, BuffSize); if (bytesRead > 0) { context.Response.OutputStream.Write(buff, 0, bytesRead); } } while (bytesRead > 0); } context.Response.Flush(); context.Response.Close();
