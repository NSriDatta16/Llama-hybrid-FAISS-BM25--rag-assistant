[site]: stackoverflow
[post_id]: 2526599
[parent_id]: 2526566
[tags]: 
make_text returns txt , which is allocated in local storage in the make_text function. When make_text returns, things in local storage in that function are cleared. To do this, you need to use dynamic storage with malloc() : char *make_text(void) { char *txt = malloc(MAXLEN); // do stuff return txt; } Memory allocated with malloc() doesn't disappear when a function returns. This means that C doesn't know when exactly it's safe to deallocate, so when you're done with it you must call free() on txt to manually release the memory. Otherwise, you'll have a memory leak.
