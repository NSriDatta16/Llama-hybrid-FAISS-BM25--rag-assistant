[site]: crossvalidated
[post_id]: 593369
[parent_id]: 
[tags]: 
Variance of average of correlated random variable where is random variable also

I have a sum of n correlated variables $\sum_{i=1}^n X_i$ and would like to estimate the variance of the sum. I do it with two different methods. Firstly , I can decompose sum as multiplication of the average of $\bar{X} = \frac{1}{n} \sum_{i=1}^n X_i$ and n . Next, I use a formula for variance of product of variables: $Var(Z \centerdot Y) = Var(Z) \centerdot Var(Y) + E^2[Y] \centerdot Var(Z) + E^2[Z] \centerdot Var(Y)$ , call it formula #1 . So I get: $$ Var(\sum_{i=1}^n X_i) = E^2[n] \centerdot Var(\bar{X}) + E^2[\bar{X}] \centerdot Var(n) + Var(\bar{X}) \centerdot Var(n) = Var(\bar{X}) \centerdot (E^2[n] + Var(n)) + E^2[\bar{X}] \centerdot Var(n) = Var(\bar{X}) \centerdot E[n^2] + E^2[\bar{X}] \centerdot Var(n) $$ Secondly , I use a formula from wikipedia , which is said to be working for sum of correlated variables with random sample size: $Var(\sum_{i=1}^n X_i) = E[n] \centerdot Var(X) + E^2[X] \centerdot Var(n)$ , call it formula #2 . Because formula #1 and formula #2 for the same thing: $$ Var(\bar{X}) \centerdot E[n^2] + E^2[\bar{X}] \centerdot Var(n) = E[n] \centerdot Var(X) + Var(n) \centerdot E^2[X] $$ Next , because $E[X] = E[\bar{X}]$ , I do a simple calculation steps: $$ Var(\bar{X}) \centerdot E[n^2] + E^2[X] \centerdot Var(n) = E[n] \centerdot Var(X) + Var(n) \centerdot E^2[X] $$ $$ Var(\bar{X}) \centerdot E[n^2] = E[n] \centerdot Var(X) $$ And the last equation confused me. In case of constant n it gives a result from CLT, $Var(\bar{X}) \centerdot n = Var(X)$ , but why it doesn't contain a correlation part, as in question Variance of average of correlated random variables . Am I wrong? Does formula 2 work in case of correlated variables?
