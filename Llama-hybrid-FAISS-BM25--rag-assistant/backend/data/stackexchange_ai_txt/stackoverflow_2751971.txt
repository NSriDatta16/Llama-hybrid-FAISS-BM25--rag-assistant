[site]: stackoverflow
[post_id]: 2751971
[parent_id]: 2751949
[tags]: 
As you mention, servlet filters can provide the basis of solution. Use a filter to store the current session details (e.g. the session context Map) in a threadLocal storage. This is implemented as your application class, so is transport agnostic. Your service simply uses a static method to fetch the current context, unaware of where it came from. E.g. class ServiceSessionContext { static ThreadLocal local = new ThreadLocal (); // context set by the transport layer, e.g. servlet filter static public void setContext(Map map) { local.put(map); } // called when request is complete static public void clearContext() { local.put(null); } // context fetched by the service static public Map getContext() { return local.get(); } }
