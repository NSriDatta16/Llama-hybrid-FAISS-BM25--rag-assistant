[site]: stackoverflow
[post_id]: 3550149
[parent_id]: 
[tags]: 
Directory creation failing... Java, Android

I'm trying to save photos that I taken with my app to a specific directory. It was working but I'm getting close to being finished with the app and wanted to try a fresh install. I deleted the folder where the photos were being saved and now it won't remake them. Here's my code. PictureCallback jpegCallback = new PictureCallback() { // public void onPictureTaken(byte[] data, Camera camera) { FileOutputStream outStream = null; try { android.os.Environment.getExternalStorageState(); // create a File object for the parent directory File PhotoDirectory = new File( android.os.Environment.getExternalStorageDirectory()+ "/GrowJournalPhotos/"+journ_id+"/"+plant_id+"/"); // have the object build the directory structure, if needed. PhotoDirectory.mkdirs(); // create a File object for the output file File outputFile = new File(PhotoDirectory, "photo.jpg"); // now attach the OutputStream to the file object, instead of a String representation outStream = new FileOutputStream(outputFile); //----LINE 82----// // Write to SD Card outStream.write(data); outStream.close(); Log.d(TAG, "onPictureTaken - wrote bytes: " + data.length); setResult(RESULT_OK); finish(); } catch (FileNotFoundException e) { // e.printStackTrace(); } catch (IOException e) { e.printStackTrace(); } finally { } Log.d(TAG, "onPictureTaken - jpeg"); } }; And the IO error: 08-23 13:26:18.263: WARN/System.err(9515): java.io.FileNotFoundException: /sdcard/GrowJournalPhotos/geo a/1/photo.jpg 08-23 13:26:18.263: WARN/System.err(9515): at org.apache.harmony.luni.platform.OSFileSystem.open(OSFileSystem.java:244) 08-23 13:26:18.263: WARN/System.err(9515): at java.io.FileOutputStream.(FileOutputStream.java:97) 08-23 13:26:18.263: WARN/System.err(9515): at java.io.FileOutputStream.(FileOutputStream.java:69) 08-23 13:26:18.263: WARN/System.err(9515): at com.grower.beta.takephoto$3.onPictureTaken(takephoto.java:82) 08-23 13:26:18.263: WARN/System.err(9515): at android.hardware.Camera$EventHandler.handleMessage(Camera.java:323) 08-23 13:26:18.263: WARN/System.err(9515): at android.os.Handler.dispatchMessage(Handler.java:99) 08-23 13:26:18.263: WARN/System.err(9515): at android.os.Looper.loop(Looper.java:123) 08-23 13:26:18.263: WARN/System.err(9515): at android.app.ActivityThread.main(ActivityThread.java:4595) 08-23 13:26:18.263: WARN/System.err(9515): at java.lang.reflect.Method.invokeNative(Native Method) 08-23 13:26:18.263: WARN/System.err(9515): at java.lang.reflect.Method.invoke(Method.java:521) 08-23 13:26:18.263: WARN/System.err(9515): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860) 08-23 13:26:18.263: WARN/System.err(9515): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618) 08-23 13:26:18.263: WARN/System.err(9515): at dalvik.system.NativeStart.main(Native Method) 08-23 13:26:18.263: DEBUG/CameraDemo(9515): onPictureTaken - jpeg I do have permissions set to write to external storage. If I create the directory manually, mounting as drive on computer and creating the first folder "/sdcard/GrowJournalPhotos/" everything else will work. Defiantly need to make sure the app will create the entire directory, when necessary.
