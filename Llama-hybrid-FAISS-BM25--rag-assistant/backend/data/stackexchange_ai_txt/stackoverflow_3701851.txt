[site]: stackoverflow
[post_id]: 3701851
[parent_id]: 3701521
[tags]: 
Rather than storing all of the variables in thread-local storage, I would think it better to put them into a class; if the original code was mostly C, one may be able to wrap the C code in a class which can then have the "global" variables as fields. Different instances of the class running in different threads would naturally see different versions of those variables.
