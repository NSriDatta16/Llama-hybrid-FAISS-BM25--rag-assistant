[site]: stackoverflow
[post_id]: 2010537
[parent_id]: 1949771
[tags]: 
Finding unsed images should be easier than CSS. Just find *.jpg *.png *gif with glob, put those filenames to dictionary or array and find those filenames againt html, css, js files, remove filename if found and you will get unused list, and move those images to another folder with same directory structure (It will be good for restoring for just in case) Basically like this, and of course for the file names that encrypted/encoded/obcuscated will not work. require "fileutils" img=Dir.glob("**/*.jpg")+Dir.glob("**/*.png")+Dir.glob("**/*.gif") data=Dir.glob("**/*.htm*")+Dir.glob("**/*.css")+Dir.glob("**/*.js") puts img.length.to_s+" images found & "+data.length.to_s+" files found to search against" content="" data.each do |f| content+=File.open(f, 'r').read end img.each do |m| if not content=~ Regexp.new("\\b"+File.basename(m)+"\\b") FileUtils.mkdir_p "../unused/"+File.dirname(m) FileUtils.mv m,"../unused/"+m puts "Image "+m+" moved to ../unused/"+File.dirname(m)+" folder" end end PS: I used fileutils , because normal makedirs and mv are not works in my windows version of ruby And I am not good at ruby, so please double check it before you use it. Here is the sample results I ran in root folder of sample rails folder in my windows ---\ruby>ruby img_coverage.rb 5 images found & 12 files found to search against Image depot/public/images/test.jpg moved to ../unused/depot/public/images folder
