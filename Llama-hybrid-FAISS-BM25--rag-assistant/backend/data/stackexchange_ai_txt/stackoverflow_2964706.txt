[site]: stackoverflow
[post_id]: 2964706
[parent_id]: 2962330
[tags]: 
Referencing not yet inserted rows is not supported by SQL expression layer in SQLAlchemy because it's meaningless: all queries are executed explicitly. ORM layer does support references to new objects, it even uses unit of work pattern to organize insertion order properly. To solve this problem fixture uses ref() method. But note, that in SQL expression layer you (fixture) execute statements, so SQLAlchemy has no chance to reorder them. So the author_id is not available if you try to store book before the author it refers to. Are you sure your fixtures are organised (passed to data() method) in proper order?
