[site]: stackoverflow
[post_id]: 419031
[parent_id]: 418983
[tags]: 
I can think of two ideas Pass in a context object and return (string + context) from your enumerators - the purely functional solution use thread local storage for you statistics ( CallContext ), you can be fancy and support a stack of contexts. so you would have code like this. using (var stats = DirStats.Create()) { IEnumerable allFiles = GetAllFiles(); IEnumerable matchingFiles = GetMatches( "*.txt", allFiles ); IEnumerable contents = GetFileContents( matchingFiles ); stats.Print() IEnumerable matchingLines = GetMatchingLines( contents ); stats.Print(); }
