[site]: stackoverflow
[post_id]: 5050873
[parent_id]: 
[tags]: 
Nokogiri XML import feed organisation?

I have built a site that relies on an XML feed that I currently parse with Nokogiri. Everything works fine and dandy although I have all the code currently within my Admin controller so I can actually invoke the import via a URL i.e. /admin/import/ . I can't help but think that this doesn't belong in the controller. Is there a better way to do this, i.e. move the code into a stand alone import.rb file so it is only accessible from the console? If so where would I need to put this file, in the /lib/ directory? Here is a code snippet: class AdminController clean_field(node.xpath("./name").inner_text).downcase, :description => clean_field(node.xpath("./description").inner_text), :brand => Brand.find_or_create_by_name(clean_field_key(node.xpath("./brand").inner_text).downcase), :merchant => Merchant.find_or_create_by_name(clean_field_key(node.xpath("./programName").inner_text).downcase), :image => node.xpath("./imageUrl").inner_text.strip, :link => node.xpath("./productUrl").inner_text.strip, :category => Category.find_or_create_by_name(clean_field_key(node.xpath("./CategoryName").inner_text).downcase), :price => "Â£" + node.xpath("./price").inner_text.strip) print clean_field(node.xpath("./name").inner_text).downcase + "\n" end end end end
