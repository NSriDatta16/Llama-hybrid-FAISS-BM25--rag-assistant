[site]: stackoverflow
[post_id]: 4847483
[parent_id]: 4847372
[tags]: 
function getNotebook($user_id) { $data = array(); // not applicable $sql = "SELECT tab_id, tab_name, tab_color FROM tab WHERE user_id = ?"; $query = $this->db->query($sql, $user_id); foreach ($query->result() as $row) { $temp1 = array( 'id' => $row->tab_id, 'name' => $row->tab_name, 'color' => $row->tab_color, 'groups' => array() ); // create temporary array for storage after loop $sql = "SELECT group_id, group_name, group_size, group_position FROM group WHERE tab_id = ?"; $query2 = $this->db->query($sql, $row->tab_id); foreach ($query2->result() as $row2) { $temp2 = array( 'id' => $row2->group_id, 'name' => $row2->group_name, 'size' => $row2->group_size, 'position' => $row2->group_position, 'people' => array() ); // create another temporary array for storage after loop for second dimension $sql = "SELECT person_id, person_name, person_gender, person_eye_color FROM person WHERE group_id = ?"; $query3 = $this->db->query($sql, $row2->group_id); foreach ($query3->result() as $row3) { $temp2['people'][] = array( 'name' => $row3->person_name, 'gender' => $row3->person_gender, 'eye_color' => $row3->person_eye_color ); // store data } $temp1['groups'][] = $temp2; // store temp array } $data[] = $temp1; // store temp array } return $data; } Is that what you're looking for?
