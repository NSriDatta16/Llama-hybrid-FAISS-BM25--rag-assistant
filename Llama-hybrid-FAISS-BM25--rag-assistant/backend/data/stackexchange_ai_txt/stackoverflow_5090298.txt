[site]: stackoverflow
[post_id]: 5090298
[parent_id]: 
[tags]: 
How to sync schema continuously in two databases in Sql Server (for unit testing)

We have a database against which we run unit tests for components that require a database (for several reasons we are not mocking the DAL everywhere). We are using Sql Server 2008 R2 and in the development db server we have our development database (ApplicationName_Dev) and our testing db (ApplicationName_UT). The unit tests create the test data they need and delete it afterwards so the tables could/should be empty when no tests are running. The problem is keeping the schema of the unit test database up to date. The best solution for me (to my limited knowledge) would be to have a Sql Server Agent Job that would run once a night (or when manually started) that would drops all the tables in the UT database, generate a create script for all tables, indexes and relationships in the Dev-database, and run the create scripts on the UT-database. Note that we don't need to insert any data. Is there any way of programmatically (T-Sql, SMO etc) generating Create scripts for all tables including indexes and relationships ? In Management Studio I can right click the database->Tasks->Generate scripts...->Choose Objects->Tables and I get just the scripts that I want (except for the "Use [ApplicationName_Dev]" on the first line. Please help. Regards, Mathias
