[site]: stackoverflow
[post_id]: 824848
[parent_id]: 824742
[tags]: 
Here's a stupid hack that solves the problem. Prepend a non-empty string tag (node.nodeType === 3) to the htmlStr and everything will work: var insertHtml = function(parentElem, htmlStr){ var frag = document.createDocumentFragment(); var temp = document.createElement('div'); temp.innerHTML = "hack" + htmlStr; while (temp.firstChild) { if (temp.firstChild.nodeType === 1) { // add only element nodes frag.appendChild(temp.firstChild); } else { // remove the hack string temp.removeChild(temp.firstChild); } } parentElem.insertBefore(frag, parentElem.childNodes[0]); }
