[site]: crossvalidated
[post_id]: 574989
[parent_id]: 
[tags]: 
Should I apply PCA on every sample of a multivariate time series dataset and calculate mean values or should I reshape the 3D array into 2D?

I am relatively new to PCA and can't find a sufficient answer to my question. I have got a multivariate timeseries dataset of the shape [1200 (Samples), 100 (Timesteps), 18 (Variables)]. I want to apply PCA to find the most important variables of this dataset. As PCA works only on 2D Arrays, I reshaped the dataset to the shape [120000, 18]. So what I did was to concetenate all samples vertically. When I apply the PCA, all works fine, but I was wondering, if this reshaping is the right way to get information of the importance of the variables. I tried to calculate the PCA for every Sample and take the mean value of the calculated principle components of each sample, the mean value of the explaianed variance and the mean value of the loadings. Obviously the loadings constraint that the squared sum equals 1 is not fullfilled anymore. I calculated the variables contribution to each principle component by multiplying the variables loading with the explained variance by each component. Is it allowed to calculate each variables contribution to the principle components of each sample and just take the average contribution to have an idea of what variable is most important? How do I have to apply the PCA such that it gives me a sense of the importance of the different variables for the whole dataset?
