[site]: stackoverflow
[post_id]: 457097
[parent_id]: 456874
[tags]: 
Delphi does support unicode in the compiler by using WideString. But you'll face the following problems: Delphi A lot of API mapping is done on the ANSI (OpenFileA for instance) variants of the API. The delphi compiler will convert the WideStrings to a string a lot, so be very explicit about them. It will work if you use the raw unicode windows api's. So FindFirst uses the api FindFirstFile which delphi maps to the FindFirstFileA variant, and you'll need to directly call FindFirstW. So you'll have 2 options. Upgrade to Delphi 2009 and have a lot of unicode mapping done for you Write your own unicode mapping functions For the text file writing you might be able to use the GpTextFile or GpTextSteam by Primoz Gabrijelcic (aka gabr), they have unicode support. Her is an example of opening a file with a unicode filename: function OpenLongFileName(const ALongFileName: WideString; SharingMode: DWORD): THandle; overload; begin if CompareMem(@(WideCharToString(PWideChar(ALongFileName))[1]), @('\\'[1]), 2) then { Allready an UNC path } Result := CreateFileW(PWideChar(ALongFileName), GENERIC_READ, SharingMode, nil, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, 0) else Result := CreateFileW(PWideChar('\\?\' + ALongFileName), GENERIC_READ, SharingMode, nil, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, 0); end; function CreateLongFileName(const ALongFileName: WideString; SharingMode: DWORD): THandle; overload; begin if CompareMem(@(WideCharToString(PWideChar(ALongFileName))[1]), @('\\'[1]), 2) then { Allready an UNC path } Result := CreateFileW(PWideChar(ALongFileName), GENERIC_WRITE, SharingMode, nil, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, 0) else Result := CreateFileW(PWideChar('\\?\' + ALongFileName), GENERIC_WRITE, SharingMode, nil, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, 0); end; I've used these functions because the ANSI api's have a path limit of 254 chars, the unicode have a limit of 2^16 chars if I'm not mistaken. After you've got the handle to the file you can just call the regular ReadFile delphi api mapping, to read data from your file.
