[site]: stackoverflow
[post_id]: 1442143
[parent_id]: 
[tags]: 
Ruby linkify for urls in strings

There have been a few posts about linkifying text using a regex. The most popular is this post . However my spec is a little more tricky: describe TextFormatter do def l(input) TextFormatter.gsub_links!(input){|link| "!!#{link}!!"} end it "should detect simple links" do l("http://www.cnn.com").should == "!!http://www.cnn.com!!" end it "should detect multi links" do l("http://www.cnn.com http://boats.com?help.asp").should == "!!http://www.cnn.com!! !!http://boats.com?help.asp!!" end it "should compensate for parans properly" do l("(http://this.is?hello_world)").should == "(!!http://this.is?hello_world!!)" end it "should ignore existing links" do s = " http://sam.com " l(s.dup).should == s end it "should allow parans" do l("http://sam.com.au?(red)").should == "!!http://sam.com.au?(red)!!" end end Any ideas how to implement the hairy Regex: This is where I am so far (it fails 2 tests): def gsub_links!(input) regex = /https?\:\/\/[\-\w+&@#\/%?=~\(\)\|!:,.;]*[\-\w+&@#\/%=~_\(\)|]/ input.gsub!(regex) { |link| yield link } end
