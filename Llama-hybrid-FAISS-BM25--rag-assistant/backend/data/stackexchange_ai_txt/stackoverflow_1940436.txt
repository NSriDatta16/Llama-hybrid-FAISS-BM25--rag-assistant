[site]: stackoverflow
[post_id]: 1940436
[parent_id]: 
[tags]: 
How to distinguish MethodBase in generics

I have a cache based on Dictionary The key is rendered from MethodBase.GetCurrentMethod. Everything worked fine until methods were explicitly declared. But one day it is appeared that: Method1 (string value) Makes same entry in Dictionary when T gets absolutely different types. So my question is about better way to cache value for generic methods. (Of course I can provide wrapper that provides GetCache and equality encountered generic types, but this way doesn't look elegant). Update Here what I exactly want: static Dictionary cache = new Dictionary (); static void Method1 (T g) { MethodBase m1 = MethodBase.GetCurrentMethod(); cache[m1] = "m1:" + typeof(T); } public static void Main(string[] args) { Method1("qwe"); Method1 (null); Console.WriteLine("===Here MUST be exactly 2 entry, but only 1 appears=="); foreach(KeyValuePair kv in cache) Console.WriteLine("{0}--{1}", kv.Key, kv.Value); }
