[site]: stackoverflow
[post_id]: 3177308
[parent_id]: 3169051
[tags]: 
Ruby, 205 This Ruby version handles "superlongstringstring". (The first two lines are almost identical to the previous Ruby programs.) It must be run this way: ruby -n0777 golf.rb Alice.txt W=($_.upcase.scan(/\w+/)-%w(THE AND OF TO A I IT IN OR IS)).group_by{|x|x}.map{|k,v|[-v.size,k]}.sort[0,22] u=proc{|m|"_"*(W.map{|n,s|(76.0-s.size)/n}.max*m)} puts" "+u[W[0][0]],W.map{|n,s|"|%s| "%u[n]+s} The third line creates a closure or lambda that yields a correctly scaled string of underscores: u = proc{|m| "_" * (W.map{|n,s| (76.0 - s.size)/n}.max * m) } .max is used instead of .min because the numbers are negative.
