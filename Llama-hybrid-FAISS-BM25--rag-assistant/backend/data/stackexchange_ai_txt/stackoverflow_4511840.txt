[site]: stackoverflow
[post_id]: 4511840
[parent_id]: 
[tags]: 
Using javaagent with Junit is causing ClassNotFoundException in Class.forName

java -classpath requiredclasspath org.junit.runner.JUnitCore some.package.HelloWorldTest results in: JUnit version 4.8.1 . Time: 0.005 OK (1 test) But: java -javaagent:agent.jar -classpath requiredclasspath org.junit.runner.JUnitCore some.package.HelloWorldTest results in: JUnit version 4.8.1 Could not find class: some.package.HelloWorldTest Time: 0.001 OK (0 tests) The core issue seems to be that: Class.forName("some.package.HelloWorldTest") (runMain method, line 89, JunitCore) throws a ClassNotFoundException as follows: java.lang.ClassNotFoundException: some/package/HelloWorldTest at java.lang.Class.forName0(Native Method) at java.lang.Class.forName(Class.java:169) at org.junit.runner.JUnitCore.runMain(JUnitCore.java:89) at org.junit.runner.JUnitCore.runMainAndExit(JUnitCore.java:53) at org.junit.runner.JUnitCore.main(JUnitCore.java:45) I dont know why it cannot find the class. Note that the instrumentation agent is loaded successfully and does not throw any exceptions.
