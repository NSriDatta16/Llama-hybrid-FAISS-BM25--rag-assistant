[site]: stackoverflow
[post_id]: 4718554
[parent_id]: 
[tags]: 
MySQL unique index by multiple fields

We have a special kind of table in our DB that stores the history of its changes in itself. So called "self-archived" table: CREAT TABLE coverages ( id INT, # primary key, auto-increment subscriber_id INT, current CHAR, # - could be "C" or "H". record_version INT, # etc. ); It stores "coverages" of our subscribers. Field "current" indicates if this is a current/original record ("C") or history record ("H"). We could only have one current "C" coverage for the given subscriber, but we can't create a unique index with 2 fields (*subscriber_id and current*) because for any given "C" record there could be any number of "H" records - history of changes. So the index should only be unique for current == 'C' and any subscriber_id. That could be done in Oracle DB using something like "materialized views": where we could create a materialized view that would only include records with current = 'C' and create a unique index with these 2 fields: *subscriber_id, current*. The question is: how can this be done in MySQL?
