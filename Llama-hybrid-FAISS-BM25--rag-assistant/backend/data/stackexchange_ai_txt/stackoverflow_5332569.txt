[site]: stackoverflow
[post_id]: 5332569
[parent_id]: 
[tags]: 
Counting the number of games played in 1 second using Java Threads

I want to know how many games my computer can play in 1000 ms. I did the tests before without using Threads (it plays 13k). Now that I think I'm using threads, I still get the same. Since I don't have much experience with Java threads, I assume I'm doing something wrong but I just can't get it. Thanks in advance public class SpeedTest implements Runnable { public static int gamesPlayed = 0; private ElapsedTimer timer; private double maxTime; private BoardAgent agent; private BoardGame game; public SpeedTest(BoardGame game, ElapsedTimer timer, double maxTime, Random rng) { this.game = game; this.timer = timer; this.maxTime = maxTime; this.agent = new RandomAgent (rng); } @Override public void run() { while (true) { BoardGame newBoard = game.copy(); while (!newBoard.isGameOver()) newBoard.makeMove(agent.move(newBoard)); gamesPlayed++; if (timer.elapsedMilliseconds() > maxTime) { break; } } } public static void main(String[] args) { Random rng = new Random(); BoardGame game = new Connect4(6, 7); double maxTime = 1000; ElapsedTimer timer = new ElapsedTimer(); SpeedTest speedTest1 = new SpeedTest (game, timer, maxTime, rng); SpeedTest speedTest2 = new SpeedTest (game, timer, maxTime, rng); Thread t1 = new Thread(speedTest1); Thread t2 = new Thread(speedTest2); t1.start(); t2.start(); try { Thread.sleep((long) maxTime); } catch (InterruptedException e) { e.printStackTrace(); } System.out.println("Games: " + SpeedTest.gamesPlayed); } }
