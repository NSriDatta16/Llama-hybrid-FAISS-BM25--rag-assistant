[site]: stackoverflow
[post_id]: 2353512
[parent_id]: 
[tags]: 
Zend_Db_Profiler not logging db connection time?

Following the sample code on http://framework.zend.com/manual/en/zend.db.profiler.html I have set up db profiling of my Zend Framework app. application.ini: db.profiler.enabled = true View Helper: $totalTime = $profiler->getTotalElapsedSecs(); $queryCount = $profiler->getTotalNumQueries(); $longestTime = 0; $longestQuery = null; foreach ($profiler->getQueryProfiles() as $query) { if ($query->getElapsedSecs() > $longestTime) { $longestTime = $query->getElapsedSecs(); $longestQuery = $query->getQuery(); } } echo 'Executed ' . $queryCount . ' queries in ' . $totalTime . ' seconds' . "\n"; echo 'Average query length: ' . $totalTime / $queryCount . ' seconds' . "\n"; echo 'Queries per second: ' . $queryCount / $totalTime . "\n"; echo 'Longest query length: ' . $longestTime . "\n"; echo "Longest query: \n" . $longestQuery . "\n"; It works fine for select/insert/update/delete queries. But I cannot find anyway to get the profiler to show the time taken to initiate the actual db connection, despite the documenation implying that it does log this. I suspect that Zend_Db simply does not log the connection to the db with the profiler. Does anyone know what is going on here? I am using the Oracle database adapter, and ZF 1.10.1 UPDATE: I understand it is possible to filter the profiler output, such that it will only show certain query types, e.g. select/insert/update. There also appears to be an option to filter just the connection records: $profiler->setFilterQueryType(Zend_Db_Profiler::CONNECT); However, my problem is that the profiler is not logging the connections to begin with , so this filter does nothing. I know this for a fact, because if I print the profiler object, it contains data for many different queries - but no data for the connection queries: print_r($profiler); //output Zend_Db_Profiler Object ( [_queryProfiles:protected] => Array ( [0] => Zend_Db_Profiler_Query Object ( [_query:protected] => select * from table1 [_queryType:protected] => 32 [_startedMicrotime:protected] => 1268104035.3465 [_endedMicrotime:protected] => 1268104035.3855 [_boundParams:protected] => Array ( ) ) [1] => Zend_Db_Profiler_Query Object ( [_query:protected] => select * from table2 [_queryType:protected] => 32 [_startedMicrotime:protected] => 1268104035.3882 [_endedMicrotime:protected] => 1268104035.419 [_boundParams:protected] => Array ( ) ) ) [_enabled:protected] => 1 [_filterElapsedSecs:protected] => [_filterTypes:protected] => ) Am I doing something wrong - or has logging of connections just not been added to Zend Framework yet?
