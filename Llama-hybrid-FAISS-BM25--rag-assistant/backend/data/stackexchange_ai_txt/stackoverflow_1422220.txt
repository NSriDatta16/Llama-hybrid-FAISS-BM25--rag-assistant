[site]: stackoverflow
[post_id]: 1422220
[parent_id]: 1404067
[tags]: 
What separates the environments? If it is the execution context (objects in a context only call ones in the same context), then you might use one thread per environment and store the "local-globals" in a thread-local storage (or just a global map with keys being thread IDs). This has some disadvantages. For one, it doesn't work if there are cross-context calls. And of course it forces you into a threaded model.
