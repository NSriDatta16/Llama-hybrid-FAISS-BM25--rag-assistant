[site]: datascience
[post_id]: 25184
[parent_id]: 
[tags]: 
How would you optimize this python/pandas code?

In [1]: df.head() Out[1]: uf city 0 mg araguari 1 mg uberlandia 2 sp sao-paulo 3 go goiania 4 mg belo-horizonte In [2]: len(df) Out[2]: 982 In [3]: indicators.head() Out[3]: city uf population 0 abadia-goias go 6876 1 abadia-dourados mg 6704 2 araguari mg 19000 3 abaete mg 22690 4 uberlandia mg 700000 In [4]: len(indicators) Out[4]: 5554 Now here I'm trying to include 'population' in df, using the corresponding uf and city. But this next code is too slow. df['population'] = np.nan for city, uf, index in zip(df.city.values, \ df.uf.values, df.index): df['population'].iloc[index] = \ indicators.population[indicators.uf == uf] \ [indicators.city == city].values[0]
