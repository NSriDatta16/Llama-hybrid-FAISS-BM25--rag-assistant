[site]: stackoverflow
[post_id]: 4319458
[parent_id]: 4318680
[tags]: 
Barriers are going away . If you require ordering among overlapping writes, you're supposed to wait for completion of the first before issuing the second. (Barriers are going away.) In the general case I believe there is no guarantee. The final result is non-deterministic from the application perspective, depending on timing, state of the host and storage device, etc. The request queue will merge requests in a predictable fashion, but hardware is not required to provide consistent results for writes that are in the drive's queue at the same time. Depending on how fast the storage device is and how slow the host CPU is, you can't necessarily guarantee that merging will take place in the request queue before commands are sent to the storage device. Unfortunately, how applications using O_DIRECT (as opposed to filesystems that directly construct bios) are supposed to wait for completion is not clear to me.
