[site]: stackoverflow
[post_id]: 2321196
[parent_id]: 2263417
[tags]: 
Put the transaction logic on the remote side. setGroupCapacity() should be encapsulated in addItemToGroup(). This is internal state, something the caller should not bother about. With this you can add item by item and easily unwind that with deleteItemFromGroup(). If you must live with a low level API then the rollback relies on you tracking your flow of actions.
