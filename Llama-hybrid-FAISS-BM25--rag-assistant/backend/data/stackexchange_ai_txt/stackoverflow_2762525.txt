[site]: stackoverflow
[post_id]: 2762525
[parent_id]: 
[tags]: 
Hiding s in IE

I wrote this nifty function to filter select boxes when their value is changed... $.fn.cascade = function() { var opts = this.children('option'); var rel = this.attr('rel'); $('[name='+rel+']').change(function() { var val = $(this).val(); var disp = opts.filter('[rel='+val+']'); opts.filter(':visible').hide(); disp.show(); if(!disp.filter(':selected').length) { disp.filter(':first').attr('selected','selected'); } }).trigger('change'); return this; } It looks at the rel property, and if the element indicated by rel changes, then it filters the list to only show the options that have that value... for example, it works on HTML that looks like this: Canada United States Alberta British Columbia Manitoba ... However, I just discovered it doesn't work properly in IE (of course!) which doesn't seem to allow you to hide options . How can I work around this? Here's what I've got now: (function($) { $.fn.cascade = function() { var filteredSelect = $(this); var filteredOpts = this.children('option'); var triggerSelect = $('[name='+this.attr('rel')+']'); triggerSelect.change(function() { var triggerValue = $(this).val(); filteredOpts.detach() .filter('[rel='+triggerValue+']').appendTo(filteredSelect) .filter(':first').attr('selected','selected'); }).trigger('change'); return this; } })(jQuery); Which does work in IE, but still has two problems. The .filter(':first').attr('selected','selected'); bit doesn't seem to do anything in IE (it should select the first visible element). Since I've been using appendTo it currently defaults to the last. And the other problem is that since I detach all the elements immediately, you can't have default values in your HTML.
