[site]: stackoverflow
[post_id]: 2682356
[parent_id]: 2681983
[tags]: 
If the symbol kVariableLengthArray is a compile-time constant, this means that you can allocate a single buffer on the stack ("automatic" storage type, in C). AudioBufferList single; single.mNumberBuffers = 1; Since the struct includes a count, it also means that you can create an instance with any number of buffers, like so: AudioBufferList * get_n_buffers(size_t num) { AudioBufferList *list; if(num mBuffers[0]); list->mNumberBuffers = num; return list; } The latter code dynamically allocates an AudioBufferList , and relies on the fact that the array is last. So in memory, it will lookas if the AudioBuffer ends with the proper number of AudioBuffer instances, as the proper amount of space will be allocated.
