[site]: crossvalidated
[post_id]: 371172
[parent_id]: 
[tags]: 
Understanding the perfect randomization assumption in treatment models

I have a basic question on the relation between counterfactual outcomes and treatment. Notation: Let $D$ denote the treatment, taking value in $\{0,1\}$ where $D=0$ means untreated and $D=1$ means treated. Let $Y_0, Y_1$ denote the counterfactual outcomes. Perfect randomisation assumption : $(Y_0, Y_1) \perp D$ Scenario: The treatment is offered to everyone; agents who are offered the treatment can decide whether to receive it. Question: I understand that under the scenario above $(Y_0, Y_1) \not\perp D$ . I would like to know whether under the scenario above we still have $Y_0 \perp D$ and/or $Y_1\perp D$ and why. My thoughts: An agent is totally described by some random features $(X,U)$ (not necessarily entirely observed by the researcher). Hence, $Y_0=g(\underbrace{0}_{\text{untreated}},X,U)$ , $Y_1=g(\underbrace{1}_{\text{treated}},X,U)$ , for some unknown function $g$ . The perfect randomization assumption can be rewritten as $D\perp (X,U)$ . This, combined with $Y_0=g(0,X,U)$ $Y_1=g(1,X,U)$ , implies $D\perp (Y_0, Y_1)$ . If an agent can choose whether of not to received the treatment, then $D=h(X,U)$ for some function $h$ capturing the choice-behavior of the agent. This, combined with $Y_0=g(0,X,U)$ $Y_1=g(1,X,U)$ , implies $D\not \perp (Y_0, Y_1)$ . It remains unclear to me if with self-selection we still have $Y_0 \perp D$ and/or $Y_1\perp D$ .
