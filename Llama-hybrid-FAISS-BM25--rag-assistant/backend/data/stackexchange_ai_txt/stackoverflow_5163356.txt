[site]: stackoverflow
[post_id]: 5163356
[parent_id]: 5162929
[tags]: 
I don't think you can ask an RMagick image for its average color directly but computing such a thing isn't that difficult. I think the easiest way would be to extract the color histogram and then use that to compute your average. You'd probably want to quantize the image first though, computing the histogram for an image with a lot of colors is not cheap and probably pointless busy work if you're just interested in an average: total = 0 avg = { :r => 0.0, :g => 0.0, :b => 0.0 } img.quantize.color_histogram.each { |c, n| avg[:r] += n * c.red avg[:g] += n * c.green avg[:b] += n * c.blue total += n } [:r, :g, :b].each { |comp| avg[comp] /= total } That'll give you the average color in avg . But, the color will be in ImageMagick's internal format (i.e. the components will range from zero to Magick::QuantumRange ) so you'll have to scale them down to 0-255: [:r, :g, :b].each { |comp| avg[comp] = (avg[comp] / Magick::QuantumRange * 255).to_i } And finally you have the RGB components in avg as integers between zero and 255 and getting the average color in hex format should be trivial. You could easily merge this into the averaging step if desired. I could probably be cleverer with the iterators but .each is nice and clear and clarity is more important than cleverness. You can also try with and without the quantization step and use whichever one works best for the images that you're working with.
