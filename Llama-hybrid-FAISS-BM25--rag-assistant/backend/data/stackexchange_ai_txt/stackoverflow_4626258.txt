[site]: stackoverflow
[post_id]: 4626258
[parent_id]: 4579885
[tags]: 
That method does not work on the Samsung Galaxy S, which says Stagefright is enabled but does not use it, at least not for streaming. A more secure check is to open a local socket and connect the MediaPlayer to it and see what it reports as User-Agent. For instance, this is what I see on my Samsung Galaxy S and the 2.2 Emulator; Galaxy S: User-Agent: CORE/6.506.4.1 OpenCORE/2.02 (Linux;Android 2.2) Emulator: User-Agent: stagefright/1.0 (Linux;Android 2.2) In one thread, do something like this; volatile int socketPort; ServerSocket serverSocket = new ServerSocket(0); socketPort = serverSocket.getLocalPort(); Socket socket = serverSocket.accept(); InputStream is = socket.getInputStream(); byte [] temp = new byte [2048]; int bsize = -1; while(bsize = 0) { // Found stagefright } socket.close(); serverSocket.close(); And like this in another thread (makes the blocking accept() call above return); MediaPlayer mp = new MediaPlayer(); mp.setDataSource(String.format("http://127.0.0.1:%d/", socketPort)); mp.prepare(); mp.start();
