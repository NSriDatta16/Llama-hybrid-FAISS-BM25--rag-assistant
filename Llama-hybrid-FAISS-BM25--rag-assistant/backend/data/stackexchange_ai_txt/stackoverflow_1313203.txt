[site]: stackoverflow
[post_id]: 1313203
[parent_id]: 1312975
[tags]: 
#pragma mark Keyboard Handling - (void) viewDidAppear:(BOOL) ani { onscreen = YES; NSNotificationCenter* center = [NSNotificationCenter defaultCenter]; [center addObserver:self selector:@selector(keyboardWillAppear:) name:UIKeyboardWillShowNotification object:nil]; [center addObserver:self selector:@selector(keyboardDidAppear:) name:UIKeyboardDidShowNotification object:nil]; [center addObserver:self selector:@selector(keyboardWillDisappear:) name:UIKeyboardWillHideNotification object:nil]; } - (void) viewDidDisappear:(BOOL) ani { onscreen = NO; NSNotificationCenter* center = [NSNotificationCenter defaultCenter]; [center removeObserver:self name:UIKeyboardWillShowNotification object:nil]; [center removeObserver:self name:UIKeyboardDidShowNotification object:nil]; [center removeObserver:self name:UIKeyboardWillHideNotification object:nil]; } - (void) keyboardWillAppear:(NSNotification*) n { NSLog(@"Keyboard is about to appear"); } - (void) keyboardDidAppear:(NSNotification*) n { CGRect bounds = [[[n userInfo] objectForKey:UIKeyboardBoundsUserInfoKey] CGRectValue]; bounds = [self.view convertRect:bounds fromView:nil]; CGRect tableFrame = searchResultsTable.frame; tableFrame.size.height -= bounds.size.height; // subtract the keyboard height if (self.tabBarController != nil) { tableFrame.size.height += 48; // add the tab bar height } [UIView beginAnimations:nil context:NULL]; [UIView setAnimationDelegate:self]; [UIView setAnimationDidStopSelector:@selector(shrinkDidEnd:finished:contextInfo:)]; searchResultsTable.frame = tableFrame; [UIView commitAnimations]; //[self hideEditorView:currentEditorView]; //[currentEditorView removeFromSuperview]; } - (void) shrinkDidEnd:(NSString*) ident finished:(BOOL) finished contextInfo:(void*) nothing { NSIndexPath* sel = [searchResultsTable indexPathForSelectedRow]; if (![[searchResultsTable indexPathsForVisibleRows] containsObject:sel]) { [searchResultsTable scrollToNearestSelectedRowAtScrollPosition:UITableViewScrollPositionMiddle animated:YES]; } } - (void) keyboardWillDisappear:(NSNotification*) n { CGRect bounds = [[[n userInfo] objectForKey:UIKeyboardBoundsUserInfoKey] CGRectValue]; bounds = [self.view convertRect:bounds fromView:nil]; CGRect tableFrame = searchResultsTable.frame; tableFrame.size.height += bounds.size.height; // add the keyboard height if (self.tabBarController != nil) { tableFrame.size.height -= 48; // subtract the tab bar height } [UIView beginAnimations:nil context:NULL]; [UIView setAnimationDelegate:self]; [UIView setAnimationDidStopSelector:@selector(shrinkDidEnd:finished:contextInfo:)]; searchResultsTable.frame = tableFrame; [UIView commitAnimations]; [searchResultsTable scrollToNearestSelectedRowAtScrollPosition:UITableViewScrollPositionMiddle animated:YES]; }
