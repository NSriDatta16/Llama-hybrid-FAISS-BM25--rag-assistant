[site]: stackoverflow
[post_id]: 1197916
[parent_id]: 1197890
[tags]: 
Update: Answer completely re-organized. Image::Seek is not checking if scaleX returned error. In your case, for some images, scaleX is failing. You seem to know for which images scaleX is failing. So, leave your current code aside, and put together a short test script: #!/usr/bin/perl use strict; use warnings; use Imager; die "Specify image file name\n" unless @ARGV; my ($imgfile) = @ARGV; my $img = Imager->new; $img->read( file => $imgfile ) or die "Cannot read '$imgfile': ", $img->errstr; my $x_scaled = $img->scaleX( pixels => 128 ) or die 'scaleX failed: ', $img->errstr; my $thumb = $x_scaled->scaleY( pixels => 128 ) or die 'scaleY failed: ', $x_scaled->errstr; __END__ Running this test script, you got the error message: Cannot read 'photo-1.jpg': format 'jpeg' not supported - formats bmp, ico, pnm, raw, sgi, tga available for reading indicating the underlying problem: When you installed Imager via Strawberry Perl's cpan , the libraries for png , jpg etc were not installed. One solution is to build those libraries with the gcc compiler provided with Strawberry Perl. First, you will need zlib . C:\Temp\zlib-1.2.3> copy win32\Makefile.gcc Makefile Set prefix = /strawberry/c/local in the Makefile . Compile. You may have to manually copy the files zlib.h and zconf.h to C:\strawberry\c\local\include and zlib1.dll , libz.a and libzdll.a to C:\strawberry\c\local\lib (I don't know because I do not use Strawberry Perl very often and my Strawberry environment is very neglected.) Then, get libpng . I used the source archive without config script. C:\Temp\libpng-1.2.38> copy scripts\makefile.mingw Makefile C:\Temp\libpng-1.2.38> make prefix=/strawberry/c/local ZLIBLIB=/strawberry/c/local/lib ZLIBINC=/strawberry/c/local/include This built the PNG library. Again, you may have to manually copy the .dll , .a and .h files to the appropriate directories. I did because of my less than perfect Strawberry environment. Finally, get the JPEG library . C:\Temp\jpeg-7> copy Makefile.ansi Makefile Make sure to edit this file and set CC=gcc . Customize jconfig.h according to the instructions in jconfig.txt . I used jconfig.dj as a basis. You might also want to set CFLAGS= -O2 SYSDEPMEM= jmemansi.o in Makefile , and #define DEFAULT_MAX_MEM 4*1024*1024 in jconfig.h . After running make , again copy the files as needed (and as explained by install.txt ). Once the libraries are installed, you can C:\Temp> SET IM_INCPATH=C:\strawberry\c\local\include C:\Temp> SET IM_LIBPATH=C:\strawberry\c\local\lib C:\Temp> cpan cpan> force install Imager which yields: gif: includes not found - libraries not found ungif: includes not found - libraries not found jpeg: includes found - libraries found png: includes found - libraries found tiff: includes not found - libraries not found freetype2: includes not found - libraries not found freetype2: not available T1-fonts: includes not found - libraries not found TT-fonts: includes not found - libraries not found w32: includes found - libraries found If all of this is too much work, it is ... sigh I just realized the binaries are available at GnuWin32 .
