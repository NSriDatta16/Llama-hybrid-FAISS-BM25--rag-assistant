[site]: stackoverflow
[post_id]: 2072892
[parent_id]: 2072838
[tags]: 
You are describing a classic application of the Visitor pattern. You need for two purposes to traverse your object model, one time outputting XML, the other time binary data. It's well explained in the gang of four's book . Each element of your model has to accept a visitor of a recognised type (typically IVisitor ), and it then calls a method called, typically, AcceptVisitor on this visitor. This is the method that translates the object into XML, binary data, printable format or whatever. It may also then direct the visitor to child objects and so on. Then you write an XmlVisitor that implements IVisitor , and "visit" your structure with it - the result is XML. Similary, you can "visit" with a BinaryVisitor and get your binary output.
