[site]: stackoverflow
[post_id]: 3739660
[parent_id]: 3739458
[tags]: 
This should work #include float calcWeightedAverage(v1,v2,w1,w2) { v1=fabs(v1); v2=fabs(v2); return (v1/(v1+v2+FLT_EPSILON))*w1 + (v2/(v1+v2+FLT_EPSILON)*w2); } edit: I saw there may be problems with some precision so instead of using FLT_EPSILON use DBL_EPSILON for accurate results (I guess you will return a float value).
