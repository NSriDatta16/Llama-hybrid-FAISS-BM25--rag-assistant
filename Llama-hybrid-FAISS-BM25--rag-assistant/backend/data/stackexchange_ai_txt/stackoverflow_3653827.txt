[site]: stackoverflow
[post_id]: 3653827
[parent_id]: 
[tags]: 
Shell Script Variable Bug?

Hello generous computerists! So I have a launchd plist item that is calling the below shell script every thirty seconds. It checks to see if a program is running and if it isn't, it restarts it. Or at least that is what it's supposed to do. The problem is, even when the process has been killed, the shell script is stating that the process is still running. I think this is because somehow the boolean is not being reset (Or something along those lines). Any help? n=`ps -ef | grep Intel | grep -v grep | wc -l` if [ $n -gt 0 ] then echo `date` CURRENTLY RUNNING. >> /Library/A_Intel_WATCHDOG/A_Intel_WatchLog.txt else echo `date` not running. ATTEMPTING RESTART... >> /Library/A_Intel_WATCHDOG/A_Intel_WatchLog.txt cd /Library/LaunchAgents/ launchctl load com.Intel.plist fi EDIT 1 It has been suggested that adding a 'Keep Alive' argument may be a good solution to my general problem. Any comments? Here would be my updated plist file which should guarantee that my app keeps running perpetually: Label com.Intel OnDemand ProgramArguments /Library/LaunchAgents/Contents/Intel RunAtLoad KeepAlive I would love to hear if people think this is correct or not. Thanks so much!
