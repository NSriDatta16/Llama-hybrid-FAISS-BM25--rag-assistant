[site]: stackoverflow
[post_id]: 4427520
[parent_id]: 4427460
[tags]: 
Make only one DB query (better performance) but process the results before looping over them: $result = mysql_query("SELECT * FROM orders WHERE misc='new' ORDER BY customer ASC "); $ordersByCustomer = array(); // nested array. 1. level: customers, 2. level: orders while(($row = mysql_fetch_assoc($result))) { if(!array_key_exists($row['customer'], $ordersByCustomer)) { $ordersByCustomer[$row['customer']] = array(); } $ordersByCustomer[$row['customer']][] = $row; } foreach($ordersByCustomer as $customer=>$orders) { echo ' '. $customer . ' '; foreach($orders as $order) { // rest of HTML code } } I also encourage you to use a better separation of HTML and PHP, like so, using the alternative syntax for control structures : $orders): ?> "> Btw, you are not generating valid HTML. li element must be contained in ul or ol elements.
