[site]: stackoverflow
[post_id]: 3822385
[parent_id]: 
[tags]: 
google storage api put file problem in python

I'm trying to upload a file to Google storage, but my code freezes and does not respond. Please help me. Mycode : def PutFile(self,filename): conn = httplib.HTTPConnection("%s.commondatastorage.googleapis.com" % self.bucket) conn.set_debuglevel(2) dd = "%s" % datetime.datetime.utcnow().strftime("%a, %d %b %Y %H:%M:%S GMT") strToSign = "PUT\n"+"\nimage/jpeg\n"+dd+"\nx-goog-acl:public-read\n/%s/x.jpg" % self.bucket f = open(filename,"r") m = hashlib.md5() m.update(f.read()) h = m.hexdigest() sig = base64.b64encode(hmac.new(self.secret, strToSign, hashlib.sha1).digest()) total = os.path.getsize(filename) header = {"Date":dd,"x-goog-acl":"public-read","Content-MD5":h,'Content-Length':total,'Content-Type':'image/jpeg','Authorization':"GOOG1 %s:%s" % (self.key,sig)} r1 = conn.getresponse() print r1.status, r1.reason print r1.read() conn.close()
