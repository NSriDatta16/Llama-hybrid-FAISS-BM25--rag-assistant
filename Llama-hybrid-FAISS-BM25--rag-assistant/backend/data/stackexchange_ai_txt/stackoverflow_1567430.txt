[site]: stackoverflow
[post_id]: 1567430
[parent_id]: 
[tags]: 
unique_array not working

I have the following that adds the current URL to a session then displays the last 10 products associated with that URL. The problem is that the unique_array function appears to be allowing the duplicate URLs to be added to the session: Recently viewed products "; $_SESSION['pages'][] = $CurrentPage; $_SESSION['pages'] = array_unique($_SESSION['pages']); if ( Count ( $_SESSION['pages'] ) > 10 ) Array_Shift ( $_SESSION['pages'] ); //remove 1st part of address from array foreach ($_SESSION['pages'] as &$value) { if(strpos($value, '/products/')) { echo " "; echo " "; $url = $value; $id = explode('/', $url); $ppname = $id[5]; $sql = "SELECT * FROM products WHERE product_id='$ppname'"; $result = mysql_query($sql); $myrow = mysql_fetch_array($result); $sqlpid = $myrow['product_id']; $sqlpname = $myrow['product_name']; $sqlpnameurl = str_replace(" ","_",$value); $sqlpcatname = $myrow['category_id']; $sqlpimage = $myrow['product_thumb_image']; echo " " .$sqlpname. " "; echo " "; $sql1 = "SELECT * FROM product_xref_options WHERE product_id='$sqlpid'"; $result1 = mysql_query($sql1); $myrow1 = mysql_fetch_array($result1); echo "RRP: &pound; " .$myrow1['wasprice']. " "; echo " OUR PRICE: &pound;" .$myrow1['price']. " "; echo " "; } } echo " "; } else { echo ""; } ?>
