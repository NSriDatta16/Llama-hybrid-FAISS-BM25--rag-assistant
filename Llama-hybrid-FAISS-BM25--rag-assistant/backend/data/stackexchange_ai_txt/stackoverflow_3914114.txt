[site]: stackoverflow
[post_id]: 3914114
[parent_id]: 
[tags]: 
Exception when using httparty for itunes verification

Here is a piece of code I wrote to implement itunes_verification. http://gist.github.com/raw/622038/b32accd30e86f7c714f2cffefd19857f558c8d97/gistfile1.rb ItunesVerification.verify_apple_receipt("wefwfrw") But, its always throwing {"exception"=>"java.lang.NullPointerException", "status"=>21002} from the itunes server. # "java.lang.NullPointerException", "status"=>21002}, @response=# , @headers={"x-webobjects-loadaverage"=>["0"], "x-apple-application-site"=>["SB"], "expires"=>["Thu, 14 Oct 2010 04:24:12 GMT"], "connection"=>["keep-alive"], "edge-control"=>["no-store", "max-age=0"], "pod"=>["100"], "date"=>["Thu, 14 Oct 2010 04:24:12 GMT"], "x-apple-max-age"=>["0"], "x-apple-application-instance"=>["1000407"], "x-apple-woa-inbound-url"=>["/WebObjects/MZFinance.woa/wa/verifyReceipt?output=json&receipt-data=d2Vmd2U%3D%0A"], "content-length"=>["62"], "set-cookie"=>["Pod=100; version=\"1\"; expires=Sun, 14-Nov-2010 05:24:12 GMT; path=/; domain=.apple.com", "mzf_in=1000407; version=\"1\"; path=/WebObjects; domain=.apple.com"], "x-apple-lokamai-no-cache"=>["true"], "cache-control"=>["no-transform", "private", "no-cache", "no-store", "must-revalidate", "max-age=0"], "pragma"=>["no-cache"]}> Also, the string I pass is encoded to Base64. I have tried other options like changing the key from "body" to "query". This is very urgent and any help will be greatly appreciated. Thanks
