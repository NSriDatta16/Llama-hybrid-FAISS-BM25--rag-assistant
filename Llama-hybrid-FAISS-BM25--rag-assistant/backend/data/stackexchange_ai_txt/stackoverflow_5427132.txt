[site]: stackoverflow
[post_id]: 5427132
[parent_id]: 
[tags]: 
Invalid session cookie is not invalidated or replaced?

In ASP.NET i was having a strange situation where Session_Start was being triggered every time the user-agent refreshed the page. Since a session should have already been started, i couldn't understand why (this one machine) was triggering a Session_Start every page hit. The browser was sending a cookie as part of the HTTP request: GET http://example.com/ HTTP/1.1 Accept: text/html, application/xhtml+xml, */* Accept-Language: en-US Accept-Encoding: gzip, deflate ... Cookie: ASP.NET_SessionId=zsdntozy30cwvirc3lpnxh55 The cookie was present in the http request header, yet it was causing a new session to be created. Maddeningly though, the new Cookie was not being sent to the client (through the Set-Cookie response header). i assume that if the session cookie ASP.NET_SessionId=zsdntozy30cwvirc3lpnxh55 is not valid (e.g. due to an application pool recycle, or web-server restart) then the server should set a new cookie. To test this i crafted a special http request, with an obviously invalid cookie: GET http://example.com/ HTTP/1.1 Accept: text/html, application/xhtml+xml, */* Accept-Language: en-US Accept-Encoding: gzip, deflate ... Cookie: ASP.NET_SessionId=aaaaaaaaaaaaaaaaaaaaaaaa Sure enough, the Session_Start event happens, and the http response contains no Set-Cookie header: HTTP/1.1 200 OK Server: ASP.NET Development Server/10.0.0.0 Date: Thu, 24 Mar 2011 23:45:50 GMT X-AspNet-Version: 2.0.50727 Cache-Control: private Content-Type: text/html; charset=utf-8 Content-Length: 3710 Connection: Close Is this intended behavior? If the client's session cookie is no longer valid, they'll be stuck in some no-mans land until the client browser is convinced to destroy the cookie? Is there an option for ASP.NET to sent the new session cookie to the client? It is, after all, creating a new session - why not tell the client about it? Is this some bizarre security feature, where a user must delete all cookies if a server gets the hiccups?
