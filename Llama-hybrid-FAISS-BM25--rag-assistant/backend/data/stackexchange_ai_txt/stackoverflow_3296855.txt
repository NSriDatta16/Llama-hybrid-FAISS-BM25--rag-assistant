[site]: stackoverflow
[post_id]: 3296855
[parent_id]: 
[tags]: 
"average length of the sequences in a fasta file": Can you improve this Erlang code?

I'm trying to get the mean length of fasta sequences using Erlang . A fasta file looks like this >title1 ATGACTAGCTAGCAGCGATCGACCGTCGTACGC ATCGATCGCATCGATGCTACGATCGATCATATA ATGACTAGCTAGCAGCGATCGACCGTCGTACGC ATCGATCGCATCGATGCTACGATCTCGTACGC >title2 ATCGATCGCATCGATGCTACGATCTCGTACGC ATGACTAGCTAGCAGCGATCGACCGTCGTACGC ATCGATCGCATCGATGCTACGATCGATCATATA ATGACTAGCTAGCAGCGATCGACCGTCGTACGC >title3 ATCGATCGCATCGAT(...) I tried to answser this question using the following Erlang code: -module(golf). -export([test/0]). line([],{Sequences,Total}) -> {Sequences,Total}; line(">" ++ Rest,{Sequences,Total}) -> {Sequences+1,Total}; line(L,{Sequences,Total}) -> {Sequences,Total+string:len(string:strip(L))}. scanLines(S,Sequences,Total)-> case io:get_line(S,'') of eof -> {Sequences,Total}; {error,_} ->{Sequences,Total}; Line -> {S2,T2}=line(Line,{Sequences,Total}), scanLines(S,S2,T2) end . test()-> {Sequences,Total}=scanLines(standard_io,0,0), io:format("~p\n",[Total/(1.0*Sequences)]), halt(). Compilation/Execution : erlc golf.erl erl -noshell -s golf test this code seems to work fine for a small fasta file but it takes hours to parse a larger one (>100Mo). Why ? I'm an Erlang newbie, can you please improve this code ?
