[site]: stackoverflow
[post_id]: 5614391
[parent_id]: 5614298
[tags]: 
ruby-1.9.2-p136 :066 > str.gsub(/%%([^%]+)%%/) {|m| $1.upcase} => "hello ONE_BOY's something FOUR_GIRL's something more" The [^%]+ says it will match 1 or more characters except %, and the $1 is a global variable that stores the back reference to what was matched.
