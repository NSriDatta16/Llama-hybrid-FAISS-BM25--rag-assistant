[site]: crossvalidated
[post_id]: 595174
[parent_id]: 
[tags]: 
How to deal with the intercept when doing PCR manually in R

I am trying to compute PCR manually in R where I try to compute the principal components for the train data then compute the coefficients from these data and use it to predict the test data. The problem I'm facing is that the size of the intercept will have the same size as the training data so I am confused as to how I could perform a prediction on test data that has a different size. To compute the PCR manually I used the following formula $$ y=Z\theta+\epsilon $$ and $ Z= XV $ , where $X$ is our data matrix and $V$ are the loadings from the PCA (principal component analysis), $\epsilon$ is our intercept and $\theta$ contains the regreession coefficients and can be computed like this $$ \theta =(Z^TZ)^{-1}Z^Ty $$ I used this knowledge to perform the computations in R train.pca $scores V loadings[, -15] # using 14 components Z $y Y_hat y #Compute test data predictions test.pca $scores V.test loadings[, -15] Z.test The multiplication of Z.test %*% theta computes a matrix of size test whereas epsilon is of size train . How can I overcome this
