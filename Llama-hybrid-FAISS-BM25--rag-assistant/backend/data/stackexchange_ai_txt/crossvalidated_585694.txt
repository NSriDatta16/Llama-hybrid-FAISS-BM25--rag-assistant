[site]: crossvalidated
[post_id]: 585694
[parent_id]: 
[tags]: 
Percentage change and then Rolling average V.S. rolling average and then percentage change

For a timeseries data $\{D_t\}$ with some seasonality $s$ and high volatility $\sigma$ , we often want to perform a rolling average $\frac{1}{n}\sum_i D_{t-i}$ to denoise the data and take some differencing $D_t - D_{t-s}$ to deseasonalize the data. For certain financial assests that follows exponenial brownian motion, we may want to take the percentage change $\frac{D_t - D_{t-s}}{D_{t-s}}$ instead of differencing. Now differencing and rolling average commute, so it doesn't matter of the order to do the action. However, the rolling average and percentage change do not commute. So for feature transformation, which is the best order to do? Is it $\frac{1}{n}\sum\frac{D_{t-i} - D_{t-i-s}}{D_{t-s-i}}$ the better one or $\frac{\sum_i D_{t-i}- D_{t-s-i} }{\sum_i D_{t-s-i}}$ the better one?
