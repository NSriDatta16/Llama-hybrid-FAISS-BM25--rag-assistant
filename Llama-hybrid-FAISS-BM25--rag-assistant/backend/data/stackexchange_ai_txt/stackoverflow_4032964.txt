[site]: stackoverflow
[post_id]: 4032964
[parent_id]: 4031982
[tags]: 
url.path only returns "/w/api.php" so you are losing the query string from your URL in the GET request. You can use url.request_uri instead e.g. req = Net::HTTP::Get.new(url.request_uri, "User-Agent" => "ourbandiscalled") The query string on its own is available as url.query . In summary: irb(main):045:0> url.path => "/w/api.php" irb(main):046:0> url.query => "action=query&list=random&rnlimit=1&rnnamespace=0&format=json" irb(main):047:0> url.request_uri => "/w/api.php?action=query&list=random&rnlimit=1&rnnamespace=0&format=json"
