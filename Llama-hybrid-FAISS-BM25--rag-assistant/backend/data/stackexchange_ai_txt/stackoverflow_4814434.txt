[site]: stackoverflow
[post_id]: 4814434
[parent_id]: 
[tags]: 
How to provide animation in an owner-drawn menu item?

My application is in C# 3.5, Winforms, but this will most likely require P/Invoke anyway, so it's not that strictly tied to .NET. I have created owner-drawn menu items via ContextMenu and MenuItem classes. All works well, but for some items I'd like to create a little animation (showing that there is a process running, associated with the item). Unfortunately the above mentioned two classes do not provide an Invalidate() method or anything similar. My best idea so far is to P/Invoke WindowFromDC() on the first OnDraw, save the resulting handle, and then periodically call InvalidateRect() on the handle, until the menu is closed. This seems kinda hackish though, I haven't tried it yet, and wonder if there is a more elegant way.
