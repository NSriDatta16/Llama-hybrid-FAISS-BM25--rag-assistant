[site]: stackoverflow
[post_id]: 4116571
[parent_id]: 1934861
[tags]: 
// // TabBarSingleton.m // Created by ArunDhwaj on 9/7/10. // Copyright 2010 __MyCompanyName__. All rights reserved. // #import "TabBarSingleton.h" @implementation TabBarSingleton @synthesize Button, favoriteButton; - (id) init { if (self = [super initWithNibName: nil bundle: nil]) { barLock = [[NSRecursiveLock alloc] init]; } self.delegate = self; return self; } + (TabBarSingleton *) defaultBar { } - (void)viewDidLoad { NSLog(@"TabBarSingleton: viewDidLoad"); //Hiding TabBar self.tabBar.hidden = YES; //Creating a UIView, its frame is same as tabBar frme CGRect tabbarFrame = self.tabBar.frame; UIView* customTabbarView = [[UIView alloc] initWithFrame:tabbarFrame]; UIImageView *newsFeedImg = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"newsfeeds_normal.png"]]; newsFeedImg.frame = CGRectOffset(newsFeedImg.frame, 0, 1); Button = [UIButton buttonWithType:UIButtonTypeCustom]; [Button setFrame:newsFeedImg.frame]; [Button setBackgroundImage:newsFeedImg.image forState:UIControlStateNormal]; [Button setBackgroundImage:[UIImage imageNamed:@"newsfeeds_active.png"] forState:UIControlStateHighlighted]; [Button addTarget:self action:@selector(newsFeedsButtonPressed) forControlEvents:UIControlEventTouchUpInside]; [customTabbarView addSubview:Button]; //[newsFeedImg release]; CGRect newsFeedFrame = newsFeedImg.frame; UIImageView *favoriteImg = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"favorites_normal.png"]]; favoriteImg.frame = CGRectMake(newsFeedFrame.size.width, newsFeedFrame.origin.y, newsFeedFrame.size.width, newsFeedFrame.size.height); favoriteButton = [UIButton buttonWithType:UIButtonTypeCustom]; [favoriteButton setFrame:favoriteImg.frame]; [favoriteButton setBackgroundImage:favoriteImg.image forState:UIControlStateNormal]; [favoriteButton setBackgroundImage:[UIImage imageNamed:@"favorites_active.png"] forState:UIControlStateHighlighted]; [favoriteButton addTarget:self action:@selector(favoriteButtonPressed) forControlEvents:UIControlEventTouchUpInside]; [customTabbarView addSubview: favoriteButton]; //[favoriteImg release]; [self.view addSubview:customTabbarView ]; [self newsFeedsButtonPressed]; } - (void) newsFeedsButtonPressed { NSLog(@"TabBarSingleton: newsFeedsButtonPressed"); self.selectedIndex = 0; //Keeping Highlighted newsFeed tab UIImageView *newsFeedImg = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"newsfeeds_active.png"]]; [Button setImage: newsFeedImg.image forState:UIControlStateNormal]; //Keeping normal others tab icons UIImageView *favoriteImg = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"favorites_normal.png"]]; [favoriteButton setImage: favoriteImg.image forState:UIControlStateNormal]; } - (void) favoriteButtonPressed { NSLog(@"TabBarSingleton: favoriteButtonPressed"); self.selectedIndex = 1; //Keeping Highlighted newsFeed tab UIImageView *newsFeedImg = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"newsfeeds_normal.png"]]; [Button setImage: newsFeedImg.image forState:UIControlStateNormal]; //Keeping normal others tab icons UIImageView *favoriteImg = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"favorites_active.png"]]; [favoriteButton setImage: favoriteImg.image forState:UIControlStateNormal]; #pragma mark UITabBarControllerDelegate - (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController { NSLog(@"TabBarSingleton: shouldSelectViewController"); return YES; } - (void)tabBarController:(UITabBarController *)tabBarController didSelectViewController:(UIViewController *)viewController { NSLog(@"TabBarSingleton: didSelectViewController"); } - (void) dealloc { //[barLock release]; [super dealloc]; } @end
