[site]: stackoverflow
[post_id]: 2282801
[parent_id]: 2281723
[tags]: 
This is not exactly difficult , but is mind-boggling due to extensive (yet necessary) nested use of substring-before() and substring-after() . nodes by their @id + "uid value" --> nodes by their @id + "uid value" --> nodes by their @id + "uid value" + "tag name" --> tags --> tags --> generates: Note that this does not pay attention to duplicate attribute definitions. If you happen to have uid1|tag1|attr1|somevalue1 and later uid1|tag1|attr1|othervalue1 , then you will end up with one attribute: attr1="othervalue1" because in the both get their turn, and the latter one wins (i.e. ends up in the output). It is possible to cater for that as well, it would require one more key and one more Muenchian grouping, I'm going to leave that as an exercise for the reader. Heh. ;)
