[site]: stackoverflow
[post_id]: 1045573
[parent_id]: 
[tags]: 
How to manage a multiple-level class hierarchy in nhibernate with table per class hierarchy strategy?

I am trying to implement my object hierarchy in one table with the "table per class hierarchy" strategy in NHibernate. I'm getting an error with my NHibernate mapping that can be easily reproduced with a simple example. The error is: System.NotSupportedException: Attempting to parse a null value into an sql string (column:activity0_.Type). at NHibernate.SqlCommand.InFragment.ToFragmentString() in InFragment.cs: line 109 at NHibernate.Persister.Entity.SingleTableEntityPersister.DiscriminatorFilterFragment(String alias) in SingleTableEntityPersister.cs: line 551 I can reproduce this with the following domain classes: public interface IActivity { Guid Id { get; set; } } public abstract class Activity : IActivity { public DateTime StartTime { get; set; } public Guid Id { get; set; } } public class Running : Activity { public string Where { get; set; } } public class Talking : Activity { public string ToWhom { get; set; } } And the following XML mapping: Does anyone have an idea of what I am doing wrong?
