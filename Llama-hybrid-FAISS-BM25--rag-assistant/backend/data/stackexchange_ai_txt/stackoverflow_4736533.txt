[site]: stackoverflow
[post_id]: 4736533
[parent_id]: 3677166
[tags]: 
I didn't study Ben's code much but it didn't worked for me. So I tried Brian's and it works great. Thanks a lot! I've been trying to solve annotation's animation during drag'n'drop for a long time. But I have one suggestion to Brian's solution. I think that it would be better to support MKMapKit's delegate and notify it about changing dragState and save new position within standard delegate's method: - (void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)annotationView didChangeDragState:(MKAnnotationViewDragState)newState fromOldState:(MKAnnotationViewDragState)oldState . Here's my code: DraggableAnnotationView.h: #import #import @interface DraggableAnnotationView : MKAnnotationView { id delegate; MKAnnotationViewDragState dragState; } @property (nonatomic, assign) id delegate; @property (nonatomic, assign) MKAnnotationViewDragState dragState; @property (nonatomic, assign) MKMapView *mapView; @end DraggableAnnotationView.m: #import "DraggableAnnotationView.h" #import "MapAnnotation.h" @implementation DraggableAnnotationView @synthesize delegate, dragState, mapView; - (void)setDragState:(MKAnnotationViewDragState)newDragState animated:(BOOL)animated { [delegate mapView:mapView annotationView:self didChangeDragState:newDragState fromOldState:dragState]; if (newDragState == MKAnnotationViewDragStateStarting) { // lift the pin and set the state to dragging CGPoint endPoint = CGPointMake(self.center.x,self.center.y-20); [UIView animateWithDuration:0.2 animations:^{ self.center = endPoint; } completion:^(BOOL finished) { dragState = MKAnnotationViewDragStateDragging; }]; } else if (newDragState == MKAnnotationViewDragStateEnding) { // drop the pin, and set state to none CGPoint endPoint = CGPointMake(self.center.x,self.center.y+20); [UIView animateWithDuration:0.2 animations:^{ self.center = endPoint; } completion:^(BOOL finished) { dragState = MKAnnotationViewDragStateNone; }]; } else if (newDragState == MKAnnotationViewDragStateCanceling) { // drop the pin and set the state to none CGPoint endPoint = CGPointMake(self.center.x,self.center.y+20); [UIView animateWithDuration:0.2 animations:^{ self.center = endPoint; } completion:^(BOOL finished) { dragState = MKAnnotationViewDragStateNone; }]; } } - (void)dealloc { [super dealloc]; } @end
