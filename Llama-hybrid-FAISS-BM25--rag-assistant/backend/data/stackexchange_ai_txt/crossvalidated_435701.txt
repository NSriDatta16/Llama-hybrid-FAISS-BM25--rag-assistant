[site]: crossvalidated
[post_id]: 435701
[parent_id]: 318184
[tags]: 
I believe the answer is simpler. In VAE, people usually use a multivariate normal distribution, which has covariance matrix $\Sigma$ instead of variance $\sigma^2$ . That looks confusing in a piece of code but has the desired form. Here you can find the derivation of a KL divergence for multivariate normal distributions: Deriving the KL divergence loss for VAEs
