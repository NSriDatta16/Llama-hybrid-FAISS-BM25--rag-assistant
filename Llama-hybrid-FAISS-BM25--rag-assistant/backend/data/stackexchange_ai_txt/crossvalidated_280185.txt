[site]: crossvalidated
[post_id]: 280185
[parent_id]: 
[tags]: 
What are the Implications of using a function of the response variable as a predictor?

Suppose we have a regression scenario with a function: $g: X\rightarrow Y$, where $X$ is the covariate space and $Y$ is the response (output) space. For instance, $g$ can be a conditional probability model,${g(Y|\boldsymbol{x})}$, describing a stochastic process generating $Y$ as function of covariate vector, $\boldsymbol{x}$. Let $x_y=f(y)$ be some function of Y. Then what are the implications of using $x_y$ as predictor within (i) a parametric regression model, and (ii) a non-parametric (e.g. random forests) model? Note that the fitted parametric/nonparametric model is not necessarily the same model that generated the response $Y$ (e.g., $g$ is an unknown function in a certain function space). It is straightforward that such a fitted model cannot be used for predictions when $x_y$ is one of the predictors. However, here is a scenario when we should be able to circumvent this limitation. Suppose our response and covariates are measured over uniform space-time voxels $(a,a+da]×(b,b+db]×(t,t+dt]$, where $(a,b)$ are location points and $t$ denotes time. So, for each location $(a,b)$, we have a time series of observations $(y_{(a,b,t)},x_{(a,b,t)})$ (say we have hundreds of locations and thousands of time points). Also, assume that $y_{(a,b,t)}$ is a binary variable, taking values of either 0 or 1 in a given voxel $(a, b, t)$. Let us define the $x_y$ covariate as the empirical proportion at a given location: $$x_y(a,b)=\frac{\sum_{t=1}^{T_{(a,b)}} y_{(a,b,t)}}{T_{(a,b)}}$$ where $T_{(a,b)}$ is the length of time series at $(a,b)$. Thus, the value of the response related covariate $x_y$ remains constant over all voxels involving location $(a,b)$. Also, $x_y(a,b)$ is in fact the long term marginal expectation of $Y$ at that location. This covariate can be useful to build a predictive model when (i) there is strong spatial pattern in the long term expectations $x_y(a,b)$, and (ii) these expected values are stable over time $t$. We can now predict under our fitted model in this scenario because the $x_y$ predictor no longer has a one-to-one correspondence with $Y$ as it takes the same value for a given $(a,b)$ for both our training and validation (future) data sets. So, say we are fitting an ordinary logistic regression model in this scenario (it assumes that $Y$ is independently distributed over the space-time voxels), are there any statistical/theoretical issues with this approach? On the other hand, do you see any issues if the fitted model is fully non-parametric? Any examples from literature would be much appreciated.
