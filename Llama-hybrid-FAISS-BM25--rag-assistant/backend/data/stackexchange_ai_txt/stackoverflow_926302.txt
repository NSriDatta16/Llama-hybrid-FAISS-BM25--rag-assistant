[site]: stackoverflow
[post_id]: 926302
[parent_id]: 684696
[tags]: 
var query = from q in session.Linq () where q.FirstName.StartsWith(firstName) && q.LastName.StartsWith(lastName) && q.Phones.Any(p => p.Number.Contains(phone)) select q; // This block of code was found in the NHibernate.Linq source // using NHibernate.Linq.Visitors; // using NHibernate.Engine; System.Linq.Expressions.Expression expression = query.Expression; expression = Evaluator.PartialEval(expression); expression = new BinaryBooleanReducer().Visit(expression); expression = new AssociationVisitor((ISessionFactoryImplementor)session.SessionFactory).Visit(expression); expression = new InheritanceVisitor().Visit(expression); expression = CollectionAliasVisitor.AssignCollectionAccessAliases(expression); expression = new PropertyToMethodVisitor().Visit(expression); expression = new BinaryExpressionOrderer().Visit(expression); NHibernateQueryTranslator translator = new NHibernateQueryTranslator(session); object results = translator.Translate(expression, ((INHibernateQueryable)query).QueryOptions); // My LINQ query converted to ICriteria ICriteria resultsCriteria = results as ICriteria; // Convert to criteria that returns the row count ICriteria rowCountCriteria = CriteriaTransformer.TransformToRowCount(resultsCriteria); IList multiResults = session.CreateMultiCriteria() .Add(resultsCriteria.SetMaxResults(20)) .Add(rowCountCriteria) .List(); IList people = (IList)multiResults[0]; int resultsCount = (int)((IList)multiResults[1])[0]; from http://rndnext.blogspot.com/2009/05/using-nhibernate-multicriteria-and-linq.html
