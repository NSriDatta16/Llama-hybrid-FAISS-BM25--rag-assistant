[site]: stackoverflow
[post_id]: 1485031
[parent_id]: 
[tags]: 
Looping and file_get_contents in PHP

I have written a page that will scan a site and then extract certain code from the source. That part is working successfully, however I want to run this over multiple pages and dump the details into a database. I am stuggling to get the loop working, this is what I currently have: date_default_timezone_set("australia/sydney"); $host = 'http://www.tabonline.com.au/'; $day = date(d); $month = date(m); $year = date(Y); $slash = '/'; $mtgraces = '/mtgraces.html'; //Gallops Meetings on Todays racing page $content = file_get_contents($host . $year . "/". $month . "/" . $day . $mtgraces); preg_match_all('# ]+href\s*=\s*[\'"](.R[0-9]+.html*)[\'"]#i', $content, $matches); foreach ($matches[1] as $url) $links[] = "$host$year$slash$month$slash$day$slash$url"; //get the runners from each page for($c=0; $c [0-9]{1,2} #', $racepage, $number); preg_match_all('# [0-9]{1,3} #', $racepage, $rating); preg_match_all('# [\w]+([\s][A-Z]+)? #', $racepage, $location); preg_match_all('# [\w]+\s[0-9]+ #', $racepage, $locationcode); //strip tags for storage in DB $number_data = implode(",", $number[0]); $dbnumber = strip_tags($number_data); $final_number = explode(",", $dbnumber); $rating_data = implode(",", $rating[0]); $dbrating = strip_tags($rating_data); $final_rating = explode(",", $dbrating); $location_data = implode(",", $location[0]); $dblocation = strip_tags($location_data); $final_location = explode(",", $dblocation); $locationcode_data = implode(",", $locationcode[0]); $dblocationcode = strip_tags($locationcode_data); $final_locationcode = explode(",", $dblocationcode); //Insert into database $data = array(); for($i=0; $i At the moment the output for this is giving me the correct contents of the last page in the list of sites (the $links variable). Ultimately I want it to loop through the whole $links variable and then import that data, using the $query variable, into a database so I can do further analysis on it. I hope this makes sense and you can see the error in my ways.
