[site]: stackoverflow
[post_id]: 956196
[parent_id]: 956065
[tags]: 
GROUP BY WITH ROLLUP (you're not really grouping - so you would actaully GROUP BY every column) http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html http://chiragrdarji.wordpress.com/2008/09/09/group-by-cube-rollup-and-sql-server-2005/ http://databases.about.com/od/sql/l/aacuberollup.htm http://www.adp-gmbh.ch/ora/sql/group_by/group_by_rollup.html http://msdn.microsoft.com/en-us/library/bb522495.aspx Based on Lieven's code: DECLARE @Table TABLE ( name varchar(32) ,Size integer ,Date datetime ) INSERT INTO @Table VALUES ('data1', 123, GETDATE()) INSERT INTO @Table VALUES ('data1', 124, GETDATE()) INSERT INTO @Table VALUES ('data2', 333, GETDATE()) INSERT INTO @Table VALUES ('data2', 323, GETDATE()) INSERT INTO @Table VALUES ('data2', 673, GETDATE()) INSERT INTO @Table VALUES ('data2', 444, GETDATE()) SELECT * FROM ( SELECT * FROM @Table GROUP BY NAME ,size ,date WITH ROLLUP ) AS X WHERE NAME IS NOT NULL AND ( ( Size IS NOT NULL AND Date IS NOT NULL ) OR ( Size IS NULL AND date IS NULL ) ) ORDER BY NAME ,size ,date
