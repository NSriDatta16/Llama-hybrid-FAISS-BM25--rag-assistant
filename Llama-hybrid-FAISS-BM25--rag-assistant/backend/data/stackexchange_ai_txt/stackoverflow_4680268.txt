[site]: stackoverflow
[post_id]: 4680268
[parent_id]: 
[tags]: 
Match links to video-sharing sites

I'm trying to scan text for links to some video-sharing sites so I can create an embedded player when videos are linked to. This is what I've got so far: function extract(&$text) { // Scans text for links to YouTube, Vimeo, DailyMotion. // *keep ~discard // youtube.com/watch?v=[*alphanumeric]&[~whatever] // youtube-nocookie.com/watch?v=[*alphanumeric]&[~whatever] // vimeo.com/[*numeric] // dailymotion.com/video/[*alphanumeric]_[~whatever] $sites = 'youtube\.com|youtube-nocookie\.com|vimeo\.com|dailymotion\.com'; $regex = '/^(http|https):\/\/(www\.|)(' . $sites . ')\/.*/'; preg_match_all($regex, $text, $videos); return $videos; } This is working oddly. It found no results on the following text: And what about YouTube videos? http://www.youtube.com/timminchin#p/a/u/2/zkGEbRrNNtE http://www.youtube.com/timminchin#p/a/f/1/zU4iyjoVWQ http://www.youtube.com/watch?v=XzU4iyjoVWQ http://www.youtube-nocookie.com It found one result on this text: http://youtube.com/watch?v=XzU4iyjoVWQ https://www.youtube.com/watch?v=XzU4iyjoVWQ And works fine on texts which contain just a single link and nothing else. I'm not nearly as au fait with regular expressions as I should be, and used http://www.strfriend.com to help me to construct this one. All I want is an array of URLs.
