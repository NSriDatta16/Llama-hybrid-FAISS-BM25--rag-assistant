[site]: stackoverflow
[post_id]: 5528699
[parent_id]: 
[tags]: 
Java Servlet Download

I have wrote a servlet which is used to check http header but I don't know why when the page is loaded, it starts downloading automatically. /* * To change this template, choose Tools | Templates * and open the template in the editor. */ // =================================================== package HttpHeader; import java.io.IOException; import java.io.PrintWriter; import java.util.Enumeration; import java.util.zip.GZIPOutputStream; import javax.servlet.ServletException; import javax.servlet.http.HttpServlet; import javax.servlet.ServletConfig; import javax.servlet.ServletContext; import javax.servlet.http.HttpSession; import javax.servlet.http.Cookie; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; // =================================================== public class HeaderServlet extends HttpServlet { private static final long serialVersionUID = 1234L; private ServletConfig m_ServletConfig; private ServletContext m_ServletContext; private boolean m_HasCompress; private int m_ContentLength; private Cookie[] m_Cookies; private String m_AuthenticationType; private String m_RemoteUser; private String m_ContentType; private String m_Method; private String m_RequestURI; private String m_Date; private String m_QueryStr; private String m_Protocol; private Enumeration m_HeaderNames; private HttpSession m_Session; //====================================================== protected void processRequest(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { response.setContentType("text/html;charset=UTF-8"); PrintWriter out = response.getWriter(); try { /* TODO output your page here out.println(" "); out.println(" "); out.println(" Servlet HeaderServlet "); out.println(" "); out.println(" "); out.println(" Servlet HeaderServlet at " + request.getContextPath () + " "); out.println(" "); out.println(" "); */ } finally { out.close(); } } @Override protected void doHead(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { String encoding = request.getHeader("Accept-Header"); if(encoding != null && encoding.indexOf("gzip") != -1) { m_HasCompress = true; } else { m_HasCompress = false; } m_ContentLength = request.getContentLength(); m_Cookies = request.getCookies(); // Basic, Form, Client certification authentication, // digest authentication // Same with CGI AUTH_TYPE m_AuthenticationType = request.getAuthType(); m_RemoteUser = request.getRemoteUser(); m_ContentType = request.getContentType(); // Return get, post, delete, put // Same with CGI REQUEST_METHOD m_Method = request.getMethod(); m_RequestURI = request.getRequestURI(); // Same with CGI QUERY_STRING m_QueryStr = request.getQueryString(); // Same with CGI SERVER_PROTOCOL m_Protocol = request.getProtocol(); m_HeaderNames = request.getHeaderNames(); m_Session = request.getSession(true); /* Accept * = MIME type * * Accept-Charset * = UTF-8 * * Accpet-Encoding * = Compression - gzip * * Accept-Language * = us * * Authorization * = Login * * Content-Length * = Post request * * Cookie * Host * * If-Modified-since * = Implements getLastModified * = Get request * * If-Unmodified-since * = Post request * * Referer * = Request origin * * User Agent * = Mozilla */ } @Override protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { PrintWriter out = null; try { doHead(request, response); response.setContentType("/text/html;charset=UTF-8"); response.setBufferSize(8192); if(m_HasCompress) { out = new PrintWriter(new GZIPOutputStream(response.getOutputStream())); response.setHeader("Content-Encoding", "gzip"); } else { out = response.getWriter(); } if (out != null) { String docType = " \n\n"; out.println(docType + " " + " Http Request Header " + "Requst Method : " + m_Method + " " + "Request URI : " + m_RequestURI + " " + "Request Protocol : " + m_Protocol + " " + " " + " Header Name Header Value"); String headerName = new String(); String headerValue = new String(); while(m_HeaderNames.hasMoreElements()) { headerName = m_HeaderNames.nextElement(); if(headerName != null) { headerValue = request.getHeader(headerName); out.println(" " + headerName); out.println(" " + headerValue); } } out.println(" " + " " + " "); out.close(); } } finally { out.close(); } /* * HTTP 1.1 request headers * Request Header set by browser * Get Reqeust - Query Data same line * POst Request - Query Data next line * */ //processRequest(request, response); } @Override protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException { // processRequest(request, response); } @Override public String getServletInfo() { return "Short description"; }// } // =================================================== JSP Page javax.faces.PROJECT_STAGE Development Faces Servlet javax.faces.webapp.FacesServlet 1 HeaderServlet HttpHeader.HeaderServlet Faces Servlet /faces/* HeaderServlet /HeaderServlet 30 faces/welcomeJSF.jsp The URL loaded is http://localhost:8080/HttpHeader/ . I try to debug but never found anything weird. Please help me. Thanks.
