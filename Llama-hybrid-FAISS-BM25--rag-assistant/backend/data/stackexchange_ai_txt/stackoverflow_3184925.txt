[site]: stackoverflow
[post_id]: 3184925
[parent_id]: 3180419
[tags]: 
So, I guess your question is more about getting the result you want than the reason for the code not compiling :) Now you've got it working, the DeviceIoControl() call will be filling in the STORAGE_DEVICE_NUMBER structure you're passing to it with the results you want. So, you should find that info.DeviceType now holds the device type, info.DeviceNumber holds the device number, and info.PartitionNumber the partition number. Test for success before using the returned values. I'd maybe try it on the C: drive rather than the D: drive, as you're doing at the moment, until I was sure it was working; at least you know you've pretty much always got a C: drive in Windows :) So, use \\\\.\\c: rather than \\\\.\\d: . Anyway, untested, but: if (::DeviceIoControl(h, IOCTL_STORAGE_GET_DEVICE_NUMBER, NULL, 0, &info, sizeof(info), &bytesReturned, NULL)) { std::cout ...obviously, you'd need a #include for this to work, as I'm dumping the values using iostream, but you can print these out however you want, or message box them, bearing in mind you're already bringing in windows.h. Bear in mind it's been a decade or so since I did any Windows C++ work, but maybe this'll get you going...
