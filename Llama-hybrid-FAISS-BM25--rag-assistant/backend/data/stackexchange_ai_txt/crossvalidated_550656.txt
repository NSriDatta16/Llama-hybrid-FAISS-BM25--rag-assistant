[site]: crossvalidated
[post_id]: 550656
[parent_id]: 
[tags]: 
How to deal with treatment variable when using inverse probability weighting (IPW)?

I have a dataset which contains around 10,000 observations. I want to estimate the treatment effect (suppose the treatment variable is T , which is a dummy and outcome variable is Y , and X represents the covariates) using this sample. However, due to the lack of some crucial information, I can only use around 1000 observations out of these 10,000 to estimate the treatment effect. To make sure the treatment effect estimated from the 1000 observations can be generalized to the full 10,000 observations sample, I decide to use IPW to solve this issue. Suppose I use a dummy variable Z to denote whether this observation is selected. In the first step, I want to run a logistic regression on whether an observation is selected for estimating the treatment effect. I run the following logistic regression ( Z~X ). My question is when calculating the IPW, should I also consider the treatment variable T ? If so, the logistic regression would be Z~X+T , is that correct? Or should I calculate the IPW for the control and treatment groups separately?
