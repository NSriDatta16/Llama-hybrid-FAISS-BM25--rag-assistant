[site]: stackoverflow
[post_id]: 1079681
[parent_id]: 1079548
[tags]: 
If the depth can be arbitrary then you cannot solve the problem in the data structure. One thing to consider is if it is a problem if the self-reference is in fact stored in the database. Perhaps it should be up to the retrieving code to ensure it doesn't read the data infinitely. I had a similar problem with food recipes. It takes yogurt to make yogurt (to pick a common example), so we had to support storing that, and put logic on the retrieval to ensure that a given ingredient is only exploded once.
