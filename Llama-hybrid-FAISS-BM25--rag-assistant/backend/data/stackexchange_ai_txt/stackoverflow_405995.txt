[site]: stackoverflow
[post_id]: 405995
[parent_id]: 
[tags]: 
Embedding Lua in OCaml

Could you, please, give a code snippet showing how to use Lua embedded in OCaml? A simple example could be a "Hello, World" variant. Have OCaml prompt the user for a name. Then pass that name to a Lua function. Have Lua print a greeting and return the length of the name. Then have OCaml print a message about the length of the name. Example: user@desktop:~$ ./hello.opt Name? User Hello, User. Your name is 4 letters long. user@desktop:~$ [Edit] As a non-C programmer, could I implement this without having to write an intermediary C program to pass the data between Lua and OCaml? Following is a theoretical idea of what I would like to try. Unfortunately, line 3 of ocaml_hello.ml would need to know how to call the function defined in lua_hello.lua in order for the code to be valid. lua_hello.lua Defines lua_hello, which prints an argument and returns its length. 1 function lua_hello (name) 2 print ("Hello, "..name..".") 3 return (string.len (name)) 4 end ocaml_hello.ml OCaml prompts for a name, calls the Lua function, and prints the return value. 1 let () = print_string "Name? "; flush stdout in 2 let name = input_line stdin in 3 let len = Lua_hello.lua_hello name in 4 Printf.printf "Your name is %d letters long." len; flush stdout;;
