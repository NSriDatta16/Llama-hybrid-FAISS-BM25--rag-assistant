[site]: crossvalidated
[post_id]: 155639
[parent_id]: 154621
[tags]: 
From the R package documentation and from the original MARS paper , it looks like rsq and grsq are used for model selection within the package and it looks like your code is removing outliers until the fit of the model is maximized. This is usually not recommended . There are statistical tools to help identify potential outliers and outliers are removed only after careful consideration . Points that are mistakes (value of -1 for count data) or do not represent the population (a population of adults containing a child's data point) can be removed. As for other points, they may be an unlucky outlier. They may also be unlucky to be only one point and not more. So these are removed only after careful inspection. In the earth package, residuals and leverage are easily available. As you say, not all points with high leverage are necessarily a problem. Cook's Distance tries to solve that issue by actually removing the point from the data and checking how any predicted values change. Unfortunately, it may be difficult to find a library to compute this and other outlier metrics that support the earth package. However, this package does support the plot(model) command which will also give some potential outliers. For the log-log form , I believe you can skip the categorical variables if, for a variable with $n$ categories, they are being represented as $n-1$ binary/dummy variables. For example in a simple linear regression, transforming the categorical dummy variables [0, 1] into [0, 0.5] will only cause its coefficient to a double. Here is an example using MARS regression. a is the dependent variable. b, d, e are the independent variables where d and e are categorical variables. In the second example, d and e are changed from (0 and 1) to (0 and 0.5) and (-1, 1) respectively. a You can see from the output, the coefficients for d, e and the intercept have changed, but none of the other coefficients changed. In addition, the predictions are the same between models. For reference: $$ rsq = R^2\\ grsq = 1 - \frac{gcv}{gcv.null}\\ gcv = \frac{1}{N}\sum_{i=1}^{N}\frac{\big[y_i-\hat{f}_M(x_i)\big]^2}{\bigg[1 - \frac{C(M)}{N}\bigg]^2}\\ C(M) = trace(B(B^TB)^{-1}B^T) + 1 $$ $B$ is the "data" matrix. $gcv.null$ is the Generalized Cross Validation of the intercept only model.
