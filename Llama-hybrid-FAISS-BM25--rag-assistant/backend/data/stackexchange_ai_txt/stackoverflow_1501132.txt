[site]: stackoverflow
[post_id]: 1501132
[parent_id]: 
[tags]: 
Approach to a Bin Packing sql problem

I have a problem in sql where I need to generate a packing list from a list of transactions. Data Model The transactions are stored in a table that contains: transaction id item id item quantity Each transaction can have multiple items (and coincidentally multiple rows with the same transaction id). Each item then has a quantity from 1 to N. Business Problem The business requires that we create a packing list, where each line item in the packing list contains the count of each item in the box. Each box can only contain 160 items (they all happen to be the same size/weight). Based on the total count of the order we need to split items into different boxes (sometimes splitting even the individual item's collection into two boxes) So the challenge is to take that data schema and come up with the result set that includes how many of each item belong in each box. I am currently brute forcing this in some not so pretty ways and wondering if anyone has an elegant/simple solution that I've overlooked. Example In/Out We really need to isolate how many of each item end up in each box...for example: Order 1: 100 of item A 100 of item B 140 of item C This should result in three rows in the result set: Box 1: A (100), B (60) Box 2: B(40), C (120) Box 3: C(20) Ideally the query would be smart enough to put all of C together, but at this point - we're not too concerned with that.
