[site]: stackoverflow
[post_id]: 3368857
[parent_id]: 
[tags]: 
INVALID_STATE_ERR: DOM Exception 11 when I execute the req.open("Get",url,true);

Thanks, resolved one issue, this is the next. As a novice at this, I am still getting an error and the simple application is not working. I get INVALID_STATE_ERR: DOM Exception 11 when I execute the req.open("Get",url,true); command in the javascript in located in the following index.html file. The simple appl is not working. I get this in chrome in debug mode but the app also does not work on IE8 or FF3. Any ideas? using Eclipse for J2EE with Java6, Ajax, on WindowsVista. index.html var req; function focusIn() { //This is how you comment in javascript portion of code //I will now demonstrate an alert function that calls a messagebox to the field, very useful for debugging //this displays in yoru browser alert('Hey dad this is an alert, this function was called by the onload message of the Body'); //There is even a cooler way, for instance say you wanted to display values var two = 2; var one = 1; var result = two + one; //Display your variable result alert(result); document.getElementById("key").focus(); } function convertToDecimal(){ var key = document.getElementById("key"); var keypressed = document.getElementById("keypressed"); keypressed.value = key.value; // onClick="alert('You clicked the button')" var url = "/AjaxResponseServlet?key=" + escape(key.value); if (window.XMLHttpRequest){ req = new XMLHttpRequest(); } else if (window.ActivateXObject){ req = new ActiveXObject("Microsoft.XMLHTTP") } req.open("Get",url,true); req.onreadystatechange = callback; req.send(null); } function callback() { if (req.readyState==4) { if (req.status == 200){ var decimal = document.getElementById("decimal"); decimal.value = req.responseText; } } clear(); } function clear() { var key = document.getElementById("key"); key.value=""; } Ajax on Java Chapter 2 AJAX CHARACTER DECODER Press a key to find its value. Enter Key Here -- Key Pressed: Decimal AJAX CHARACTER DECODER Press a key to find its value. Enter Key Here -- Key Pressed: Decimal My current web.xml is: http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5"> Ajax2 index.html index.htm index.jsp default.html default.htm default.jsp AjaxResponseServlet AjaxResponseServlet com.example.servlets.AjaxResponseServlet AjaxResponseServlet /AjaxResponseServlet JAMES JAMES com.example.servlets.JAMES JAMES /JAMES enter code here My servlet code is: package com.example.servlets; /* * Takes a character and converts it to decimal and sends back the * value in the response. */ // package com.oreilly.ajax.servlet; // causes error, so commented out import java.io.IOException; import javax.servlet.ServletException; import javax.servlet.http.HttpServlet; import javax.servlet.http.HttpServletRequest; import javax.servlet.http.HttpServletResponse; public class AjaxResponseServlet extends HttpServlet { private static final long serialVersionUID = 1L; public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException { String key = req.getParameter("key"); if (key != null) { // extract the first character from key int keyInt = key.charAt(0); String decimalString = Integer.toString(keyInt); // setup the response res.setContentType("text/xml"); res.setHeader("Cache-Control", "no-cache"); // write out the response string res.getWriter().write(decimalString); } else { // If key comes back as a null, return a question mark. res.setContentType("text/xml"); res.setHeader("Cache-Control", "no-cache"); res.getWriter().write("?"); } } }
