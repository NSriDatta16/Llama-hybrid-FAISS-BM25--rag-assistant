[site]: stackoverflow
[post_id]: 1535869
[parent_id]: 
[tags]: 
Sanitizing KML Stream to change xml namespace

There is some strange behaviour in parsing KML produced by Google Earth using a compliant parser, JAK . The expected namespace by the parser is not written as the correct one by the GE Kml production system and when reading this KML back into another Java application validation fails. We are fiddling the stream as it is read and replacing occurences of any other namespace with the proper namespace. This only needs to be done once near the beginning of the file. The attempted approach was to parse in the first few lines to a string, perform a search-and-replace, create stringstream and concatenate the "rest" of the FileInputStream to the StringStream using a SequenceInputStream. This however does not work. Any ideas will be appreciated. Here is what the KML xmlns fragment starts with: and here is what we want to replace with: The sequence stream returns a faulty available value (only for the 1st stream in the sequence) causing the parser to fail.
