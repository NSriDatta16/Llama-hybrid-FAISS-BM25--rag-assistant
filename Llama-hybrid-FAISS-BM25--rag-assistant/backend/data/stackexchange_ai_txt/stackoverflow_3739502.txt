[site]: stackoverflow
[post_id]: 3739502
[parent_id]: 3739458
[tags]: 
If the denominator is zero, how do you want it to default? You can do something like this: static inline float divide_default(float numerator, float denominator, float default) { return (denominator == 0) ? default : (numerator / denominator); } float calcWeightedAverage(v1, v2, w1, w2) { v1 = fabs(v1); v2 = fabs(v2); return w1 * divide_default(v1, v1 + v2, 0.0) + w2 * divide_default(v2, v1 + v2, 0.0); } Note that the function definition and use of static inline should really let the compiler know that it can inline.
