[site]: stackoverflow
[post_id]: 5483133
[parent_id]: 
[tags]: 
While iterating with $.each

While iterating through an object containing data I'm checking if the url of image is valid with a function. Problem is that function checking image is run only for the last object, 8 times. Anyone can see why ? function checking image : function checkImage(url, succ, err){ var checkImg = new Image(); checkImg.src = url; checkImg.onerror = function() { err(); }; } and the .each part: var obj = {}, searchResults = []; $.each(data, function(i, m){ obj = {'image': m.park_photo1_290x220, 'name': m.park_name, 'developer': m.park_developer_name, 'location': m.park_location_name, 'exact_location': m.park_location_parent_name, 'total_area': m.area, 'free_area': m.free_area, 'id': m.id, 'lat': m.park_lat, 'lon': m.park_lon}; var uri = obj.image; console.log('object'); checkImage(uri, function(){ obj.image = uri; }, function() { console.log(x++); console.log(obj.name+','+obj.image); obj.image = 'images/no_foto_ssmall.png'; console.log(obj.image); }); searchObjects.push(obj); $('#search-results').append(''+ ' '+ ' '+ ' '+ searchObjects[i].name +' '+ ' '+ searchObjects[i].developer +' '+ ' '+ searchObjects[i].location +' '+ ' ' ); }); firebug traceback : object object object object object object object object object object object object object object object object object object object object error1 1 Panattoni Park 1,/static/realestate/wp/wpp-88645820868768.jpg.290x220_q85.jpg images/no_foto_ssmall.png error1 2 Panattoni Park 1,images/no_foto_ssmall.png images/no_foto_ssmall.png error1 3 Panattoni Park 1,images/no_foto_ssmall.png images/no_foto_ssmall.png error1 4 Panattoni Park 1,images/no_foto_ssmall.png images/no_foto_ssmall.png error1 5 Panattoni Park 1,images/no_foto_ssmall.png images/no_foto_ssmall.png error1 6 Panattoni Park 1,images/no_foto_ssmall.png images/no_foto_ssmall.png error1 7 Panattoni Park 1,images/no_foto_ssmall.png images/no_foto_ssmall.png error1 8 Panattoni Park 1,images/n o_foto_ssmall.png images/no_foto_ssmall.png EDIT as requested, my object : var data = [{"total_area": 10800.0, "developer_id": 1511, "photo1_290x220": "/static/realestate/wp/wpp176885389187907.jpg.290x220_q85.jpg", "location_parent_name": "BZZ", "agent_phone_fax": "", "location_id": 147, "id": 760, "developer_fax": "", "location_name": "ABC", "lon": 10.870075199999999, "object_id": 201, "developer_name": "Orpo", "agent_id": 8,"lat": 52.2079223, "warehouses_counter": 1, "name": "Park 1","agent_phone_mobile": "+48 668 124 152", "featured": false, "location_parent_id": 106}, {"total_area": 30780.0, "developer_id": 193, "photo1_290x220": "/static/realestate/wp/wpp195908774409312.JPG.290x220_q85.jpg", "location_parent_name": "CDE", "agent_phone_fax": "", "location_id": 138, "id": 761, "developer_fax": "", "location_name": "XYZ", "lon": 20.9232473, "object_id": 187, "developer_name": "Orco","lat": 32.171918300000002, "warehouses_counter": 5, "name": "Park 2","featured": false, "location_parent_id": 106}]
