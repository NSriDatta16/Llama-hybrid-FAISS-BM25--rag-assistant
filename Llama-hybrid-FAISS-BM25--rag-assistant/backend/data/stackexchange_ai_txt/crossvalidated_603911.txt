[site]: crossvalidated
[post_id]: 603911
[parent_id]: 
[tags]: 
Gambler's ruin with partial gains

Consider a gambler going into a casino with K dollars to play games with the standard conditions (independent trials, Bernoulli process with success probability p). In case of a loss they lose 1 dollar. In case of a win, they win a token. After having R tokens, they earn an extra dollar. What is the probability that they have become bankrupt after playing X games? We should consider that a player that has 0 dollars is effectively bankrupt, no matter how many tokens they still have. So far, I have managed to model it using a Markov Chain and Monte Carlo simulations, but I'm interested in figuring out if there is a closed form solution. For the case R=0 it becomes a classical problem (losing 1 dollar after a lost game, keeping their money in case of a win, no token accumulation) and the probability can be modelled as a truncated binomial distribution as \begin{equation} Pr(x) = \left\{ \begin{array}{ll} 0 & \text{if $x However, when adding the R tokens needed to earn a full dollar, multiple truncated binomials start to appear at periodic intervals with period R+1 (see image for K=5, R=3), and becoming bankrupt at certain intervals becomes impossible. Is there a way to model this in a compact way as the simple case with R = 0?
