[site]: stackoverflow
[post_id]: 3251190
[parent_id]: 
[tags]: 
How do I generate the source code to create an object I'm debugging?

Typical scenario for me: The legacy code I work on has a bug that only a client in production is having I attach a debugger and figure out how to reproduce the issue on their system given their input. But, I don't know why the error is happening yet. Now I want to write an automated test on my local system to try and reproduce then fix the bug That last step is really hard. The input can be very complex and have a lot of data to it. Creating the input by hand (eg: P p = new P(); p.setX("x"); p.setY("x"); imagine doing this 1000 times to create the object) is very tedious and error prone. In fact you may notice there's a typo in the example I just gave. Is there an automated way to take a field from a break point in my debugger and generate source code that would create that object, populated the same way? The only thing I've come up with is to serialize this input (using Xstream, for example). I can save that to a file and read it back in in an automated test. This has a major problem: If the class changes in certain ways (eg: a field/getter/setter name is renamed), I won't be able to deserialize the object anymore. In other words, the tests are extremely fragile.
