[site]: stackoverflow
[post_id]: 3402081
[parent_id]: 
[tags]: 
Test the surrounding non-zeros elements

This is the following part of the below: 2) Additional question: After getting the average of the non-zero neighbors, I also want to test if the neighbor elements are equal, lesser, or greater than the average of the nonzeros. If it is greater or equal then '1' or else '0'. Note: if the neighbors are with in the radius of the two or more centres, take the smallest centre average to test. 0 12 9 4 **9** 15 11 19 0 The '9' in the middle is within the radius of 12, 15, and 19 centres, so take the minimum average of those min[9.000, 9.000, 8.000]=8.000 For example, when radius = 1 m or 1 element away. new_x = 0 0 0 0 0 0 0 **9.0000** 9.0000 0 0 4.0000 9.0000 **9.0000** 0 0 **8.3333** **8.0000** 0 0 0 2.0000 4.0000 8.0000 0 0 4.0000 5.0000 8.0000 0 0 0 0 0 0 Test_x = 0 0 0 0 0 0 0 **9.0000** 1 0 0 0 1 **9.0000** 0 0 **8.3333** **8.0000** 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 ================================================================================= 1) Say if I have a matrix, shown as below, X = 0 0 0 0 0 0 0 12 9 0 0 4 9 15 0 0 11 19 0 0 0 2 4 8 0 0 4 5 8 0 0 0 0 0 0 and I want to find the average of the surrounding non-zero elements that is greater than 10. The rest of the elements still remain the same i.e. elements So I want my solution to look something like, new_x = 0 0 0 0 0 0 0 9.0000 9.0000 0 0 4.0000 9.0000 9.0000 0 0 8.3333 8.0000 0 0 0 2.0000 4.0000 8.0000 0 0 4.0000 5.0000 8.0000 0 0 0 0 0 0 Not: that I am NOT only looking at the neighbors of the element thats greather than some value (i.e. 10 in this case). Lets say any elements thats are greater than 10 are the 'centre' and we want to find the avearge of the non-zeros with the radius of say 1 m. where 1 metre = 1 element away from the centre. Note: It might not always be 1 meter away in radius i.e. can be 2 or more. In this case it wont be just top, bottom, left and right of the centre. ****Also Be aware of the matrix boundary. For example, when radius = 2 or more, some of the average of nonzero neighbors are out side the boundary.** For example, For radius =1 m = 1 element away, new_x = average of [(i+1,j) , (i-1,j) , (i,j+1) and (i,j-1)] - top, bottom, right, and left of the centre. For radius =2 m = 2 elements away, new_x = average of [(i+1,j), (i+2,j) , (i-1,j) , (i-2,j), (i,j+1), (i,j+2), (i,j-1), (i,j-2), (i+1,j+1), (i+1,j-1), (i-1,j-1), and (i-1,j+1)]. ================================================================== I have tried a few things before, however I am not familiar with the functions. So please help me to solve the problem. Thank you in advance.
