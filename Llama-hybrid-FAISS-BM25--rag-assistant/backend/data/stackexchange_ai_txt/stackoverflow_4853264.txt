[site]: stackoverflow
[post_id]: 4853264
[parent_id]: 
[tags]: 
wp7 - TextBlock with a lot of text - huge memory usage - how to avoid it?

I have a problem in my app and I don't know if it is normal or not. I have a textblock in my application that needs to display a large amount of text (2000-4000 chars). Anyway there is a limit of 2048 pixels I think so my text is cropped, this is no problem, I use this : http://blogs.msdn.com/b/priozersk/archive/2010/09/08/creating-scrollable-textblock-for-wp7.aspx . The problem is that the longer the text the more memory it consumes. Without the very long text hack from the link above, the textblock consumes around 10mb of memory! If I use the ScrollableTextBlock from the link above, the amount of memory is going even further and can reach up to 30-40 mb.. There is no limit. So it seems that the memory usage is related with the area that is drawn... Is there a way to reduce memory usage for long texts? Has BitmapCach anything to do with this problem and can I disable it? You can easily reproduce this problem by just adding a textblock with a very long text and you can check memory usage with this code, you will see that with just 1 textblock with long text, the peak memory goes up by 10mb or more: long deviceTotalMemory = (long)DeviceExtendedProperties.GetValue("DeviceTotalMemory"); long applicationCurrentMemoryUsage = (long)DeviceExtendedProperties.GetValue("ApplicationCurrentMemoryUsage"); long applicationPeakMemoryUsage = (long)DeviceExtendedProperties.GetValue("ApplicationPeakMemoryUsage"); Debug.WriteLine("### deviceTotalMemory : " + deviceTotalMemory); Debug.WriteLine("### applicationCurrentMemoryUsage : " + applicationCurrentMemoryUsage); Debug.WriteLine("### applicationPeakMemoryUsage : " + applicationPeakMemoryUsage);
