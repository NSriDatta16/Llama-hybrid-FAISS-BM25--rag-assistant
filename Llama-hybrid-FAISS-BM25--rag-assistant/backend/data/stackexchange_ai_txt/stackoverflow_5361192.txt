[site]: stackoverflow
[post_id]: 5361192
[parent_id]: 4805392
[tags]: 
The obvious explanation is that $form->isValid returns FALSE . The coverage report shows that the if block for a valid form never got executed. Instead, the else block was executed. The thing you need to find out is why and eliminate the cause. Use a Debugger and step through the execution flow to see what happens at runtime. As an alternative, you can stub the contact form to return TRUE . Because the form is hardcoded into the controller action, have a look at http://sebastian-bergmann.de/archives/885-Stubbing-Hard-Coded-Dependencies.html on how to do that. Yet another alternative: make the code to send the contact form into a Service Layer to allow testing this without having to make an actual request.
