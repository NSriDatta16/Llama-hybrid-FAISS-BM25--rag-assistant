[site]: stackoverflow
[post_id]: 1110345
[parent_id]: 
[tags]: 
Unexpected duplication in mysqli/php

I'm using MySQLi with PHP(5.2.4) MySQL(5.0.51a) on Ubuntu 8.04 LAMP. The relevant Db tables are below: Questions +----+------------------------------------------------------------------------------------------------------------+ | id | question | +----+------------------------------------------------------------------------------------------------------------+ | 1 | What is the correct rate of flow (in millilitres per minute) for a 14 G cannula? | | 2 | Which of the following drugs is not an anaesthetic induction agent? | +----+------------------------------------------------------------------------------------------------------------+ answers +----+--------------------------------------------------------+ | id | answer | +----+--------------------------------------------------------+ | 1 | 344 ml/min . | | 2 | 205 ml/min . | | 3 | 98 ml/min . | | 4 | 60 ml/min . | | 5 | Thiopental sodium | | 6 | Propofol | | 7 | Etomidate | | 8 | Domperidone | +----+--------------------------------------------------------+ a_lookup (to associate questions with answers) +------+------+ | q_id | a_id | +------+------+ | 1 | 1 | | 1 | 2 | | 1 | 3 | | 1 | 4 | | 2 | 5 | | 2 | 6 | | 2 | 7 | | 2 | 8 | +------+------+ I'm connecting to the Db with MySQLi, using the following (bearing in mind that I just edited out the real username, password and database name in favour of place-holder generics): query( "SELECT questions.id as qid, questions.question as question FROM questions;")) { while ($row = $result->fetch_object()) { $i = $row->qid; $q[$i][question] = $row->question; if ($answers = $mysqli->query( "SELECT answers.id, answers.answer FROM answers, a_lookup, questions WHERE answers.id=a_lookup.a_id AND '$i'=a_lookup.q_id;")) { while ($row = $answers->fetch_object()) { if (!isset($c)) { $c = 1; } else { $c = $c; } $q[$i][answers][$c] = $row->answer; $c++; } } } } $mysqli->close(); } elseif (isset($qtype)) { // this part should hopefully be invoked when tags 'question-types' are supported } ?> This returns the questions as expected, the print_r is below: Array ( [1] => Array ( [question] => What is the correct rate of flow (in millilitres per minute) for a 14G cannula? [answers] => Array ( [1] => 344ml/min. [2] => 205ml/min. [3] => 98ml/min. [4] => 60ml/min. [5] => 344ml/min. [6] => 205ml/min. [7] => 98ml/min. [8] => 60ml/min. ) ) [2] => Array ( [question] => Which of the following drugs is not an anaesthetic induction agent? [answers] => Array ( [9] => Thiopental sodium [10] => Propofol [11] => Etomidate [12] => Domperidone [13] => Thiopental sodium [14] => Propofol [15] => Etomidate [16] => Domperidone ) ) I'm just confused by my ending up with eight results, rather than the four I was expecting. I get the eight -as anyone that knows anything about databases would expect whether I use the mysql terminal client, or php's mysql-api. What am I doing wrong to create the duplicates?
