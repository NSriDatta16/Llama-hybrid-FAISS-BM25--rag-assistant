[site]: stackoverflow
[post_id]: 3739578
[parent_id]: 
[tags]: 
Validating a PDF before sending as e-mail attachment

I'm using FDPF to generate invoices for customers, which are then attached to an e-mail and sent along to the customer. The invoices / emails are generated in a batch (several hundred at a time). In the first real world run of the batch, a handful (about 5 out of 200) of customers received corrupt PDFs. The common link between them was that they had larger invoices than average, which leads me to believe that the time it takes to generate the invoice is causing a race condition and perhaps the e-mail is being sent before the PDF has time to finish generating completely. Is there a way to validate that the PDF is not corrupt before sending the e-mail? Or is there another way to approach the problem that I'm overlooking?
