[site]: stackoverflow
[post_id]: 4890820
[parent_id]: 
[tags]: 
How to use Python/CGI for file uploading

I'm trying to make a file uploader page that will prompt the user for a file and will upload while displaying progress. At the moment I've managed to make a simple HTML page that can calls my python script. The python script will then get the file and upload in 1000 byte chunks. I have two main problem (mainly due to be completely new to this): 1) I can't get the file size to calculate percentage 2) I don't know how to communicate between the server side python and whatever is in the page to update the progress status;presumably javascript. Am I going about everything the wrong way? Or is there a solution to my woes? Here is my python code: #!/usr/local/bin/python2.5 import cgi, os import cgitb; cgitb.enable() try: import msvcrt msvcrt.setmode (0, os.O_BINARY) msvcrt.setmode (1, os.O_BINARY) except ImportError: pass form = cgi.FieldStorage() upload = form['file'] if upload.filename: name = os.path.basename(upload.filename) out = open('/home/oetzi/webapps/py/' + name, 'wb', 1000) message = "The file '" + name + "' was uploaded successfully" while True: packet = upload.file.read(1000) if not packet: break out.write(packet) out.close() else: message = "Derp... could you try that again please?" print """\ Content-Type: text/html\n %s """ % (message,)
