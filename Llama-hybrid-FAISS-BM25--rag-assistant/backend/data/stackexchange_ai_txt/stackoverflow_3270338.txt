[site]: stackoverflow
[post_id]: 3270338
[parent_id]: 
[tags]: 
Confused about Itzik Ben-Gan's Logical Query Processing order in his SQL Server 2005 book and SQL Server 2008 book

In the book Inside Microsoft SQL Serverâ„¢ 2005 T-SQL Querying , the author Itzik Ben-Gan tell us the order or SQL Server 2005's logical query processing is: (8) SELECT (9) DISTINCT (11) (1) FROM (3) JOIN (2) ON (4) WHERE (5) GROUP BY (6) WITH {CUBE | ROLLUP} (7) HAVING (10) ORDER BY 1. FROM 2. ON 3. OUTER (join) 4. WHERE 5. GROUP BY 6. CUBE | ROLLUP 7. HAVING 8. SELECT 9. DISTINCT 10. ORDER BY In his book Inside Microsoft SQL Server 2008 : T-SQL Querying , he tell us the following logical query processing order: (1) FROM (1-J1) Cartesian Product (1-J2) ON Filter (1-J3) Add Outer Rows (2) WHERE (3) GROUP BY (4) HAVING (5) SELECT (5-1) Evaluate Expressions (5-2) DISTINCT (5-3) TOP Note the order of TOP and ORDER BY in the upper excerpts from these books. They are just opposite. I think these two step is very important, and will give a totally different result with different order. I want to know whether SQL Server 2008 changed something in it's storage engine from SQL Server 2005 or something else reason cause this? Thanks.
