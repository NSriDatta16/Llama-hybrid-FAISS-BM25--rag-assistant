[site]: crossvalidated
[post_id]: 186236
[parent_id]: 
[tags]: 
2sls IV with different unit of observation - Stata

I am doing some data analysis on Stata on a big sample and it turned out it might be useful to use an IV approach. My data are on two levels : individuals and groups . The group level is obtained collapsing individual data on their averages by group. The instrumental variable I want to use is at the individual level and it is not possible to be shifted at the group level. Furthermore it is a categorical variable (later trasformed in a set of dummies variables). What I did is: to estimate the first step at the individual level (N=130,000) to store the fitted values of the variable I am interested in, to collapse this variable at the group level (N=3000) to estimate the second stage at the group level (the main relation I am interested in) Reading some econometrics papers I guess what I obtained in the second stage is correct in term of parameters but not in terms of standard error/ t-statistics . Unfortunately I cannot use built-in Stata function as it does not allow to use different sample in the two stages. My questions are (1) if the procedure above described might be correct and (2) how I may compute correctly the t-statistics in the second stage.
