[site]: stackoverflow
[post_id]: 2934421
[parent_id]: 2934372
[tags]: 
Postgresql can also calculate the standard deviation. You could take only the data points which are in the average() +/- 2*stddev() which would roughly correspond to the 90% datapoints closest to the average. Of course 2 can also be 3 (95%) or 6 (99.995%) but do not get hung up on the numbers because in the presence of a collection outliers you are no longer dealing with a normal distribution. Be very careful and validate that it works as expected.
