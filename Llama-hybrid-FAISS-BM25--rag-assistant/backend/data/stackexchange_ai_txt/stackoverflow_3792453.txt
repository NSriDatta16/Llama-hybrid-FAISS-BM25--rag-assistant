[site]: stackoverflow
[post_id]: 3792453
[parent_id]: 
[tags]: 
Boosting performance of a PHP image upload/resize script

So I was on this mission to create a moderately flexible, but most importantly, re-usable handler PHP script for image uploading projects. As I cruised along I ran into a PHP memory limit question that I posted on stackoverflow (can be found here: PHP Memory Limit ) and the awesome and helpful answers I got made me realize that I basically suck at optimizing my PHP scripts. I thought that I'd post what I currently have as my 're-usable' PHP form handler for upload scripts and welcome any feedback the smart devs out there might have to boost performance or all around improve it. To sum what this handler should do: 1) Allow images to be uploaded 2) Save a full size version of the image that is resized to a desired width 3) Save a thumbnail sized version of the image that is resized to a desired width 4) Place a watermark on both images. I'm using two open source scripts to help with the resizing and watermarking. How efficiently I'm using them I'm not positive about, but they work and are pretty user friendly. Simple Image PHP Script: http://www.white-hat-web-design.co.uk/articles/php-image-resizing.php Zubrak's Thumbnail Script: http://www.zubrag.com/scripts/watermark-image.php Here's my handler: load($imageDestination); // Resize the image to desired full size width $image->resizeToWidth($fullSizeWidth); // Save the image's full sized version $image->save($imageDestination); // Resize the image to the desired thumbnail width $image->resizeToWidth($thumbnailWidth); // Save the image's thumbnail sized version $image->save($thumbnailDestination); // Free the image from memory (note: I added this function to the simpleImage class -- it's simply: imagedestroy($this->image);) $image->Free(); // WATERMARK THE IMAGES // Load the full size image into memory $watermark = new Zubrag_watermark($imageDestination); // Apply the watermark $watermark->ApplyWatermark($pathToWatermark); // Save the watermarked full-sized file $watermark->SaveAsFile($imageDestination); // Free the full sized image from memory $watermark->Free(); // Load the thumbnail sized image into memory $watermark = new Zubrag_watermark($thumbnailDestination); // Apply the watermark $watermark->ApplyWatermark($pathToWatermark); // Save the thumbnail-sized File $watermark->SaveAsFile($thumbnailDestination); // Free the image from memory $watermark->Free(); } } else { // Error handling for an image that did not pass validation echo "So we're basically thinking you tried to upload something that wasn't an image."; } } else { // Error handling for running this script without a file being uploaded echo "You should probably upload a file next time."; } Thanks all... Any help/thoughts/debate/feedback would be really appreciated.
