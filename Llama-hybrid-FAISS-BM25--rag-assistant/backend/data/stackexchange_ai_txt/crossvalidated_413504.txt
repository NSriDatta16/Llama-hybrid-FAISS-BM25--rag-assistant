[site]: crossvalidated
[post_id]: 413504
[parent_id]: 413418
[tags]: 
It's important to pay close attention to what your attained significance levels are for a given rejection rule. For example, at $n=10$ , $p_0=0.05$ , the reasonable rejection rules are "reject if $X\geq 6$ ", "reject if $X\geq 7$ ", "reject if $X\geq 8$ ", "reject if $X\geq 9$ ", "reject if $X\geq 10$ ". The attained significance levels if you do that are: 6 37.7% 7 17.2% 8 5.47% 9 1.07% 10 0.0977% These pertain whether you're doing the binomial test or you're using the normal approximation . If you do it correctly, you must attain one of these rejection rates under $H_0$ . There's no other possibility with a fixed rejection rule (you can attain levels in between if you use a randomized test but this doesn't pertain to your simulation). So under the binomial situation, you appear to have selected the rejection rule "reject if $X\geq 9$ ". In the simulation, this gives very close to the above rate of about 1%. Now the next higher attainable significance level occurs when the cutoff is 8 (note that the cutoff is in the rejection region). This gives a significance level of about 5.5%. What are the attainable Z-scores in this $n=10,p_0=0.5$ situation? X Z 6 0.645 7 1.380 8 2.372 9 4.216 10 Inf (Your formula didn't include a continuity correction, so I haven't either) You can't get any Z-values in between these! The distribution of your Z-statistic is discrete because the binomials you're generating can only have 0,1,2,...,10 successes. There are only 11 possible Z's of which we're looking at the five that are above 0. The upper tail area of those z-values suggests you would have chosen the rejection rule "reject if $X\geq 8$ ", i.e. an actual 5.5% significance level. Your simulated rejection rate at the null seems a little lower than that but is reasonably consistent with it. (If it was anything but 5.47%, you didn't do what you said you did.) There's no actual difference in these two tests other than the significance level you're conducting them at! They both end up applying what corresponds to a discrete rejection rule to a discrete test statistic. If you're going to allow the Z approximation to choose a 5.5% significance level when you set $\alpha=0.05$ you should allow the binomial test that same degree of liberty or you're not comparing like with like. You're forcing the binomial to use a lower $\alpha$ (keeping $\alpha ) while allowing the Z-test to go higher than 5% and then holding it up as having better performance. (If you do regard 5.5% significance level as "controlling type I error pretty nicely" why doesn't the binomial get to use it?) A suitable comparison of power would choose the same significance level. This difference in significance level is what's driving the difference in power that you see in your results.
