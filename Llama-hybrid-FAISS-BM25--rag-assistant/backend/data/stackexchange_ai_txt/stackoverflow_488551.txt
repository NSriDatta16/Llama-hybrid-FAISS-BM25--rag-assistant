[site]: stackoverflow
[post_id]: 488551
[parent_id]: 36475
[tags]: 
I have to second Carl Meyer's suggestions to use the link text technique. I'm working on a system like this right now but with some further optimizations for a forums. In forum systems that support replies you will frequently be doing inserts into the middle of the tree which yields poor performance. To reduce the pain I'm working on allowing gaps in the number line. This works like pre-allocating memory in an array list. The cost for shifting the tree to the right is the same for 1 and for 100. So on successive replies (which are more likely) I can update fewer tree nodes and they will be much faster. The downsize is the counting of descendant nodes (number of replies below this post) by comparing the current nodes left and right values will break. This information can be cached in the data structure to make that fast. So on insert I will have to update all ancestor nodes with new counts. Still far fewer nodes will be updated and the result will be much faster average case insert times. Multiple trees are being stored in the same table. Each tree has a unique tree id, one per topic. Smaller trees update much faster. Hope That Helps
