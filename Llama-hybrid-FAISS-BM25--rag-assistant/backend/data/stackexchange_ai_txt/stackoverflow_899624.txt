[site]: stackoverflow
[post_id]: 899624
[parent_id]: 768844
[tags]: 
the problem was in the message retrieval process. I used GetMessage() with the handle of my window instead of just 0, GetMessageW(&msg, wnd_handle, 0, 0) instead of GetMessageW(&msg, 0, 0, 0) . In this way, the WM_INPUTLANGCHANGEREQUEST messages were swallowed and the locale remained English.
