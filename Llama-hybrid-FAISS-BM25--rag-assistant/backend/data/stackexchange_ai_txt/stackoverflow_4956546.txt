[site]: stackoverflow
[post_id]: 4956546
[parent_id]: 4956302
[tags]: 
I assume that you can have 1 sell entry and 1 buy entry and always both. If you can have only one of them, you need to use a left or right join depending which one is always present. The Id can't be returned as you have more than one and you don't have any criteria to select one of them. EDITED: We obtain for each symbol: For boughts: total quantity, average price and the left quantity For sells: total quantity, average price and the left quantity The remains quantity (boughts total left quantity - sells total left quantity) If you want an entry for each different pair buy-sell, you would need something to join the pair of entries (some common field). As you haven't got any field to join them, I think it is no possible to do on this way. You can obtain all the info for each symbol on a single row, as the query does. SELECT s.Symbol as Symbol, b.SQty as EntQty, b.APrice as EntPrice, b.SLeft as EntLeft, s.SQty as ExtQty, s.APrice as ExtPrice, s.SLeft as ExtLeft, b.Qty - s.Qty as Remain FROM (SELECT Symbol, sum(Qty) as SQty, avg(Price) as APrice, sum(LeftQty) as SLeft FROM Trades WHERE Side = 'Sell' GROUP BY Symbol) s INNER JOIN (SELECT Symbol, sum(Qty) as SQty, avg(Price) as APrice, sum(LeftQty) as SLeft FROM Trades WHERE Side = 'Buy' GROUP BY Symbol) b ON s.Symbol = b.Symbol
