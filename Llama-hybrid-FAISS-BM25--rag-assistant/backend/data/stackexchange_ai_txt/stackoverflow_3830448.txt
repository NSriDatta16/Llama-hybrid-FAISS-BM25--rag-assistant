[site]: stackoverflow
[post_id]: 3830448
[parent_id]: 3400271
[tags]: 
What I ended up doing was returning both the fragment and the unaltered field from which the fragment was created. I then wrote some logic that compared the two in order to determine whether ellipsis should be added to the fragment and if so, whether to add it before, after or both before and after the fragment.
