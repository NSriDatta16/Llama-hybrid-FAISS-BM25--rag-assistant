[site]: stackoverflow
[post_id]: 1682984
[parent_id]: 
[tags]: 
Windows SharePoint Services Search won't stop

Background : I had been asked to create a second Sharepoint application server to reprovision the one that is currently in the SharePoint Farm. I installed the os, SharePoint, and SP1. I then began the process of moving all the services on to the new server. (The central farm consists of 2 WFE and 1 App server, each on W2K8 ). Problem : I had trouble with the SharePoint Configuration Wizard completing the upgrade. Believing that it was due to a problem with search I stopped both Search Services ( goodbye indexes). Afterward, I still had trouble moving them. I then decided to create a new SSP since my hours of web crawling provided evidence that this would help fix my problems. It nearly did. I got the Office SharePoint Server Search started. However Windows SharePoint Services Search is stuck in the " Stopping " status. So now what? the farm mostly works, has an indexer, but no WSS search even with a new Shared Service Provider. Is there a way to force it stopped? I've tried psconfig, but maybe I don't have the right voodoo to kill the service completely. I've included a stack trace from the logs that I beleive is part of the problem... The error log stack trace : 11/05/2009 10:28:58.89 OWSTIMER.EXE (0x08FC) 0x0A64 Windows SharePoint Services Database 880i High System.Data.SqlClient.SqlException: Login failed for user 'NT AUTHORITY\ANONYMOUS LOGON'. at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) at System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK) at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnection owningObject) at System.Data.SqlClient.SqlInternalCo... 11/05/2009 10:28:58.89 OWSTIMER.EXE (0x08FC) 0x0A64 Windows SharePoint Services Database 880k High at Microsoft.SharePoint.Utilities.SqlSession.ExecuteReader(SqlCommand command, CommandBehavior behavior) at Microsoft.SharePoint.Administration.SPConfigurationDatabase.FetchId(QualifiedObjectName qName) at Microsoft.SharePoint.Administration.SPConfigurationDatabase.GetObject(String name, Guid parentId, Type type) at Microsoft.SharePoint.Administration.SPConfigurationDatabase.get_Farm() at Microsoft.SharePoint.Administration.SPFarm.FindLocal(SPFarm& farm, Boolean& isJoined) at Microsoft.SharePoint.Administration.SPFarm.get_Local() at Microsoft.SharePoint.Administration.SPServer.get_Local() at Microsoft.SharePoint.Administration.SPTimerStore.InitializeTimer(Int64& cacheVersion, Object& jobDefinitions, Int32& timerMode, String& serverName) at Microsoft.Share... 11/05/2009 10:28:58.89* OWSTIMER.EXE (0x08FC) 0x0A64 Windows SharePoint Services Database 880i High ...nnectionTds.LoginNoFailover(String host, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, Int64 timerStart) at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection) at System.Data... 11/05/2009 10:28:58.89* OWSTIMER.EXE (0x08FC) 0x0A64 Windows SharePoint Services Database 880k High ...Point.Administration.SPNativeConfigurationProvider.InitializeTimer(Int64& cacheVersion, Object& jobDefinitions, Int32& timerMode, String& serverName) 11/05/2009 10:28:58.89* OWSTIMER.EXE (0x08FC) 0x0A64 Windows SharePoint Services Database 880i High ....ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) at System.Data.SqlClient.SqlConnection.Open() at Microsoft.SharePoint.Utilities.SqlSession.OpenConnection() 11/05/2009 10:28:58.89 OWSTIMER.EXE (0x08FC) 0x0A64 Windows SharePoint Services Database 880l High ConnectionString: 'Data Source=servernamedb;Initial Catalog=config_database;Integrated Security=True;Enlist=False' ConnectionState: Closed ConnectionTimeout: 15 11/05/2009 10:28:58.89 OWSTIMER.EXE (0x08FC) 0x0A64 Windows SharePoint Services Database 880j High SqlError: 'Login failed for user 'NT AUTHORITY\ANONYMOUS LOGON'.' Source: '.Net SqlClient Data Provider' Number: 18456 State: 1 Class: 14 Procedure: '' LineNumber: 65536 Server: 'servernamedb' 11/05/2009 10:28:58.89 OWSTIMER.EXE (0x08FC) 0x0A64 Windows SharePoint Services Database 6y64 Critical SQL database login failed. Additional error information from SQL Server is included below. Login failed for user 'NT AUTHORITY\ANONYMOUS LOGON'. 11/05/2009 10:28:58.89 OWSTIMER.EXE (0x08FC) 0x0A64 Windows SharePoint Services Topology 88bl Monitorable An exception occured while trying to acquire the local farm: System.Data.SqlClient.SqlException: Login failed for user 'NT AUTHORITY\ANONYMOUS LOGON'. at System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) at System.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK) at System.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, Boolean ignoreSniOpenTimeout, Int64 timerExpire, SqlConnec... 11/05/2009 10:28:58.91* OWSTIMER.EXE (0x08FC) 0x0A64 Windows SharePoint Services Topology 88bl Monitorable ...tion owningObject) at System.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(String host, String newPassword, Boolean redirectedUserInstance, SqlConnection owningObject, SqlConnectionString connectionOptions, Int64 timerStart) at System.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(SqlConnection owningObject, SqlConnectionString connectionOptions, String newPassword, Boolean redirectedUserInstance) at System.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, Object providerInfo, String newPassword, SqlConnection owningObject, Boolean redirectedUserInstance) at System.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectio... 11/05/2009 10:28:58.91* OWSTIMER.EXE (0x08FC) 0x0A64 Windows SharePoint Services Topology 88bl Monitorable ...nPool pool, DbConnection owningConnection) at System.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnection owningConnection, DbConnectionPool pool, DbConnectionOptions options) at System.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject) at System.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject) at System.Data.ProviderBase.DbConnectionPool.GetConnection(DbConnection owningObject) at System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) at System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) at System.Data.SqlClient.SqlConnection.Open() at Microsoft.SharePoint.Utilities.SqlSes... 11/05/2009 10:28:58.91* OWSTIMER.EXE (0x08FC) 0x0A64 Windows SharePoint Services Topology 88bl Monitorable ...sion.OpenConnection() at Microsoft.SharePoint.Utilities.SqlSession.ExecuteReader(SqlCommand command, CommandBehavior behavior) at Microsoft.SharePoint.Administration.SPConfigurationDatabase.FetchId(QualifiedObjectName qName) at Microsoft.SharePoint.Administration.SPConfigurationDatabase.GetObject(String name, Guid parentId, Type type) at Microsoft.SharePoint.Administration.SPConfigurationDatabase.get_Farm() at Microsoft.SharePoint.Administration.SPFarm.FindLocal(SPFarm& farm, Boolean& isJoined) 11/05/2009 10:28:58.91 OWSTIMER.EXE (0x08FC) 0x0A64 Windows SharePoint Services Timer 5utx Unexpected The timer service could not initialize its configuration, please check the configuration database. Will retry later.
