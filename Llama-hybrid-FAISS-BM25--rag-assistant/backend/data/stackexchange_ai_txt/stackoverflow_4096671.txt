[site]: stackoverflow
[post_id]: 4096671
[parent_id]: 
[tags]: 
most *efficient* way to populate select with Jquery ajax

I have several selects that I populate using JQuery Ajax. Most load fine. There are one or two of these queries however, that in a few rare cases return a LOT of records to the select. I was wondering if the way that I am populating the selects is the most efficient way to do so from client side code. I omitted some stuff to make the code a litle shorter. $(function () { FillAwcDll() }); function FillAwcDll() { FillSelect('poleDdl', 'WebService.asmx/Pole', params, false, null, false); } function ServiceCall(method, parameters, onSucess, onFailure) { var parms = "{" + (($.isArray(parameters)) ? parameters.join(',') : parameters) + "}"; // to json var timer = setTimeout(tooLong, 100000); $.ajax({ type: "POST", url: appRoot + "/services/" + method, data: parms, contentType: "application/json; charset=utf-8", dataType: "json", success: function (msg) { clearTimeout(timer); alert("success"); if (typeof onSucess == 'function' || typeof onSucess == 'object') onSucess(msg.d); }, error: function (msg, err) { } } }); function FillSelect(sel, service, param, hasValue, prompt, propCase) { var selectId = 'select#{0}'.format(sel); if ($(selectId) == null) { alert('Invalid FillSelect ID'); return; } $(selectId + ' option').remove(); $(' loading... ').appendTo(selectId); ServiceCall(service, param, function (data, args) { $(selectId + ' option').remove(); if (prompt != null && prompt.length > 0) { $(' {0} '.format(prompt)).appendTo(selectId); } $.each(data, (hasValue) ? function (i, v) { $(' {1} '.format(v.Key, (propCase) ? v.Value.toProperCase() : v.Value)).appendTo(selectId); } : function (i, v) { $(' {1} '.format(v, (propCase) ? v.toProperCase() : v)).appendTo(selectId); }) }, FailedServiceCall); } String.prototype.format = function () { var pattern = /\{\d+\}/g; var args = arguments; return this.replace(pattern, function (capture) { return args[capture.match(/\d+/)]; }); } So this just loops around and fills the selects. Is there a better way to do this? Note the alert("success") line fire almost immediately, so the data is coming back fast, but then after that it hangs trying to fill the select. UPDATE: (3) this is working really well. Although there is some issue. I have onBlur(call function to reload selects) and when the onBlur is activated and the selects re-load, the page just takes FOREVER to load, so long I has to stop it... not sure why? ServiceCall(service, param, function (data, args) { var $select = $(selectId); var vSelect = ''; if (prompt != null && prompt.length > 0) { vSelect += ' {0} '.format(prompt); } if (hasValue) { $.each(data, function (i, v) { vSelect += ' {1} '.format(v.Key, (propCase) ? v.Value.toProperCase() : v.Value); }); } else { $.each(data, function (i, v) { vSelect += ' {1} '.format(v, (propCase) ? v.toProperCase() : v); }); } $select.html(vSelect); delete vSelect; delete data; }, FailedServiceCall); }
