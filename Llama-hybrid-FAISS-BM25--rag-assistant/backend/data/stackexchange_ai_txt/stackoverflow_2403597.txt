[site]: stackoverflow
[post_id]: 2403597
[parent_id]: 2399772
[tags]: 
Firstly I don't think you should be storing files in a database. A better place would be in the file system, or alternatively in cloud storage like S3. If you were to use an attachment plugin like paperclip this is a very easy to setup. However, lets assume you want to store your files in your database. The problem with your current set up is that when you're sending your file your thin instance is blocking while your client downloads the data. This means if you have 3 thin instances and 3 people downloading pdfs then you're site will not respond to any requests. Thankfully there is a solution to this problem which involves the x-sendfile header. The way this works is your thin instance sends the file to your webserver, for example nginx, which then serves the file directly. Here's a great post on stackoverflow on how to set this up with nginx. Which web server are you using?
