[site]: datascience
[post_id]: 47633
[parent_id]: 47619
[tags]: 
You can create features based on output values, but you should be careful in doing this. When you use the value of class_city (based on percentage of signed for that city) for a given data point, note that this calculation cannot include the current data point, since you will not have the value of ‘signed’ during prediction. One way to handle this is to split the total data you have into three parts - estimation, train, test. The estimation set is used only to estimate the class_city values for each city. These values can then be used in the train and test data. This way, you have the label values without your model doing anything ‘unfair’. For testing, you can infact use the data from estimation+train sets to estimate the class_city values for use in the test set. The same holds true for any unseen data. You can use the class_city values estimated from all the previous data points. In the context of time series data, for example, the class_city value for any data point can potentially use information from all previous data points, and should not use any information from future data points!
