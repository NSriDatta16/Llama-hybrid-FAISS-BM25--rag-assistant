[site]: stackoverflow
[post_id]: 1148535
[parent_id]: 1148500
[tags]: 
Yes - just write a single query that will retrieve all that information in one shot. I'm a little rusty on this, but you can lookup the queries in mysql reference. create a query that joins these tables on the appropriate keys you need to select the first item from a subquery that retrieves the images for a specific query, and then order by rand() and select the first. This can definitely be done in a single query. Even if it can't you can always create views which is sometimes a better way to organize your queries so that they are more readable. In other words, instead of returning the result of your query, just create a view corresponding to your first query. Then create a view that corresponds to running your second query on the result of the first query, that operates off the view. And so on. Then, your actually query can be done in one shot by retrieving from the final view.
