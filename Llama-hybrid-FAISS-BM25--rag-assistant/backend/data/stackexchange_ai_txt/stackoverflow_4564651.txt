[site]: stackoverflow
[post_id]: 4564651
[parent_id]: 
[tags]: 
Lag when drawing something to move with mouse

I am having some trouble with drawing rectangles at the mouse position. The painted rectangle lags behind the mouse cursor when the mouse is moved. Is there a way to ensure the rectangle moves exactly on the mouse and does not lag behind? Here is a little example, although because this is just a single rectangle the lag is very slight, but it is there. In the larger program I am painting a ton of them at a time though only moving the one. import java.awt.Color; import java.awt.Dimension; import java.awt.Graphics; import java.awt.event.MouseEvent; import java.awt.event.MouseMotionListener; import javax.swing.*; public class MouseTest { JFrame window; DrawPanel content; public MouseTest(){ window = new JFrame("Test"); content = new DrawPanel(); window.setContentPane(content); window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); window.setVisible(true); window.pack(); } public static void main (String[] args){ MouseTest test = new MouseTest(); } private class DrawPanel extends JPanel implements MouseMotionListener { int mouseX; int mouseY; private DrawPanel(){ setBackground(Color.BLUE); setPreferredSize(new Dimension(400,400)); addMouseMotionListener(this); } public void paintComponent(Graphics g){ super.paintComponent(g); g.setColor(Color.RED); g.fillRect(mouseX, mouseY, 20, 20); } @Override public void mouseDragged(MouseEvent e) { // TODO Auto-generated method stub } @Override public void mouseMoved(MouseEvent e) { mouseX = e.getX(); mouseY = e.getY(); repaint(); } } }
