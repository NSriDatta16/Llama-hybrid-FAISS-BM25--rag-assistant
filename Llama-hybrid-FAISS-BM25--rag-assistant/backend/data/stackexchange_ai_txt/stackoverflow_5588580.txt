[site]: stackoverflow
[post_id]: 5588580
[parent_id]: 
[tags]: 
In Azure how can a Startup Task communicate with the Role that contains it?

I have a startup task in a Windows Azure Working Role. This startup task makes changes to the registry that require a reboot in the VM. So I need a way to signal the Role that it needs to reboot. So far my solution is for the Startup Task to create a dummy file if it finds that the registry has already been modified (which means that the Role already rebooted). So the first time the role runs it doesn't find the dummy file so it throws an unhandled exception which causes the role to be rebooted. Next time the startup task kicks off again and it creates the dummy file so that we don't end up in an endless loop. This sounds like a very hacky solution. Is there a more elegant way of doing this? I thought an easy way would be to force a reboot from the Startup task but couldn't find how to do that either.
