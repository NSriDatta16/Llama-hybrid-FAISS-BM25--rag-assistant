[site]: crossvalidated
[post_id]: 535696
[parent_id]: 535672
[tags]: 
First, it is correct that, in the (parametric) empirical Bayes approach , the hyperparameter is estimated from the data $y$ , by $\hat\eta(y)$ , replacing the prior $p(\theta \mid \eta ,y)$ with the empirical "prior" $p(\theta \mid \hat\eta(y) ,y)$ and failing to account for the plugged-in $\hat\eta(y)$ . There is therefore no prior distribution on $\eta$ involved in this setting. The following paragraph in the Wikipedia article is thus puzzling to me as well, as it assumes the existence of an hyperprior $p(\eta)$ . It would be more appropriate for the hierarchical Bayes article. In this setting, since $$p(\theta \mid y)=\int p(\theta \mid \eta ,y)p(\eta \mid y)\;d\eta =\int {\frac {p(y\mid \theta )p(\theta \mid \eta )}{p(y\mid \eta )}}p(\eta \mid y)\;d\eta$$ one can rewrite $$p(\theta \mid y)=\mathbb E_{\eta|y}\left[\frac {p(y\mid \theta )p(\theta \mid \eta )}{p(y\mid \eta )}\right]$$ and, similarly, $$p(\eta \mid y)=\mathbb E_{\theta|y}\left[p(\eta|\theta)\right]$$ The numerical approximation would then start from a sample $$\theta_1,\ldots,\theta_T\sim \pi(\theta|\hat\eta(y),y)$$ then generate $$\eta_1,\ldots,\eta_T\sim \hat\pi(\eta|y)\propto\sum_{t=1}^T p(\eta|\theta_t)$$ then redraw a new sample $$\theta_1,\ldots,\theta_T\sim \hat\pi(\theta|y) \propto\sum_{t=1}^T p(y\mid \theta )p(\theta \mid \eta^t )$$ until some stability is achieved in the samples. This is however a rewording of the Gibbs sampler (which is the special case when $T=1$ ). The method is thus exact sampling from the hierarchical posterior and unrelated with empirical Bayes, as far as I understand. Using the alternative representation $$p(\theta \mid y)={\frac {p(y\mid \theta )p(\theta )}{p(y)}}={\frac {p(y\mid \theta )}{p(y)}}\int p(\theta \mid \eta )p(\eta )\,d\eta$$ makes little sense as well if using the implementation: generate $$\eta_1,\ldots,\eta_T\sim p(\eta)$$ generate $$\theta_1,\ldots,\theta_T\sim \hat\pi(\theta|y) \propto p(y|\theta) \sum_{t=1}^T p(\theta|\eta_t)$$ which is not a particularly recommended approximation (as the $\eta_t$ 's are simulated from the prior).
