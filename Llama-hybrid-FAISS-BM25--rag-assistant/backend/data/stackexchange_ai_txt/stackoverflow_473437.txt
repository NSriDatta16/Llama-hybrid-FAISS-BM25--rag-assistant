[site]: stackoverflow
[post_id]: 473437
[parent_id]: 473420
[tags]: 
To get the concatenated values, you need to do it in the with. To sort, you need to add an order by in the last select. WITH tree (id, parentid, code, name) AS ( SELECT id, ofs.ParentID, ofs.code, ofs.name FROM OrganizationFeatures ofs WHERE ofs.ParentID IS NULL UNION ALL SELECT ofs.id, ofs.ParentID, tree.code+'/'+ofs.code, ofs.name FROM OrganizationFeatures ofs JOIN tree ON tree.ID = ofs.ParentID ) select * from tree order by code Also, if code is not a varchar, you will have to convert the code columns in this bit of code ( tree.code+'/'+ofs.code ) for it to work.
