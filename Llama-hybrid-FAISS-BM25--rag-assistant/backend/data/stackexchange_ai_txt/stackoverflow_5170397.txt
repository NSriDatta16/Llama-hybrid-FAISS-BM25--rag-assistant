[site]: stackoverflow
[post_id]: 5170397
[parent_id]: 
[tags]: 
Show jQuery modal Dialog from serverside

this is the first time i'm using jQuery dialogs so this question might be somewhat simple but i haven't found answers on this yet. I'm using ASP.Net Ajax to perform an asynchronous postback when user enters something into a Textbox(actually scanning a barcode). This is working like a charm. Now i need to let the user decide between two options under certain conditions. Therefore i need the postback to decide if this dialog must be shown and what content it has. Q: How to open a jQuery UI (modal) dialog from serverside, let the user choose an option, postback again to server and handle this decision. I think i need AjaxControlToolkit.ToolkitScriptManager.RegisterClientScriptBlock to register the script that opens the dialog, am i right? If yes, what script opens the dialog onload? Can i then postback to server by setting AutoPostback=true on the control(f.e. RadioButtons or a DropDownList)inside the dialog and handling the appropriate events? What is the best/easiest way to accomplish what i'm trying? Edit : I considered to encapsulate the dialog into an ASP.Net UserControl and show/hide it. Is this approach recommendable or will it conflict with jQuery in any way? Your help is greatly appreciated on any of these questions. My Solution (thanks Kappa): Also helpful was this link: Using JQuery UI Dialog with ASP.Net and AJAX Update Panel and the comment there from Richard. I have created a UserControl as Container for the jQuery-Dialog: Dialog-ASCX: function createDialog() { //setup dialog var source = $('#Dialog_RecurringRMA').parent(); $('#Dialog_RecurringRMA').dialog({ modal: true, resizable: false, autoOpen: true, draggable: true, width: 420, height: 200, title: ' ', open: function (type, data) { $(this).parent().appendTo(source); } }); } function showDialog() { $('#Dialog_RecurringRMA').dialog("open"); } function closeDialog() { $('#Dialog_RecurringRMA').dialog("close"); } Create new RMA and add it to current Charge Do not create new RMA * Dialog-Codebind: Public Class DialogRecurringRMA Inherits System.Web.UI.UserControl Public Enum DialogResult As Int32 NoResult = 0 CreateRma = 1 DoNotCreateRma = 2 End Enum Public Event DialogClosed(ByVal dialog As DialogRecurringRMA) Public Property Title As String Get If ViewState("Title") Is Nothing Then ViewState("Title") = "RMA with this IMEI found, create anyway?" End If Return DirectCast(ViewState("Title"), String) End Get Set(ByVal value As String) ViewState("Title") = value End Set End Property Public Property CreateRmaText As String Get Return Me.RblApplyRmaToCharge.Items(0).Text End Get Set(ByVal value As String) Me.RblApplyRmaToCharge.Items(0).Text = value End Set End Property Public Property DoNotCreateRmaText As String Get Return Me.RblApplyRmaToCharge.Items(1).Text End Get Set(ByVal value As String) Me.RblApplyRmaToCharge.Items(1).Text = value End Set End Property Public ReadOnly Property Result() As DialogResult Get If Me.RblApplyRmaToCharge.SelectedIndex <> -1 Then Return If(Me.RblApplyRmaToCharge.SelectedIndex = 0, DialogResult.CreateRma, DialogResult.DoNotCreateRma) Else Return DialogResult.NoResult End If End Get End Property Public Sub Reset() Me.RblApplyRmaToCharge.SelectedIndex = -1 End Sub Private Sub CloseDialog() ScriptManager.RegisterClientScriptBlock(Me, GetType(Page), UniqueID, "closeDialog()", True) End Sub Private Sub ShowDialog() ScriptManager.RegisterStartupScript(Me, GetType(Page), UniqueID, "createDialog();showDialog()", True) End Sub Public Sub OpenDialog() Reset() ShowDialog() Me.UpdDialog.Update() End Sub Protected Sub BtnApply_Click(ByVal sender As Object, ByVal e As EventArgs) Handles BtnApply.Click Page.Validate() If Me.Page.IsValid Then CloseDialog() RaiseEvent DialogClosed(Me) End If End Sub End Class Its as simple as possible to show the dialog now from where it is used: Me.DialogRecurringRMA1.OpenDialog() In my case it was a little complicated, because the Dialog-ascx was used here: MasterPage -> Page -> TabContainer-Panel -> UserControl -> UserControl -> Dialog But that worked like a charm :)
