[site]: stackoverflow
[post_id]: 5265543
[parent_id]: 
[tags]: 
Django admin upload and image to s3 and then resize the image and save a thumb problem

I am having error after error trying to upload and resize images to s3 with pil and botos3 and the django default_storage. I am trying to do this on save in the admin. here is the code: from django.db import models from django.forms import CheckboxSelectMultiple import tempfile from django.conf import settings from django.core.files.base import ContentFile from django.core.files.storage import default_storage as s3_storage from django.core.cache import cache from datetime import datetime import Image, os import PIL.Image as PIL import re, os, sys, urlparse class screenshot(models.Model): title = models.CharField(max_length=200) slug = models.SlugField(max_length=200) image = models.ImageField(upload_to='screenshots') thumbnail = models.ImageField(upload_to='screenshots-thumbs', blank=True, null=True, editable=False) def save(self): super(screenshot, self).save() # Call the "real" save() method if self.image: thumb = Image.open(self.image.path) thumb.thumbnail(100, 100) filename = str(self.slug) temp_image = open(os.path.join('tmp',filename), 'w') thumb.save(temp_image, 'JPEG') from django.core.files import File thumb_data = open(os.path.join('/tmp',filename), 'r') thumb_file = File(thumb_data) new_file.thumb.save(str(self.slug) + '.jpg', thumb_file) def __str__(self): return self.title This is just one of the many ways I have tried to get it working, and I either get (2, 'No such file or directory') or some other error. Please can someone help me to get it working. I want it to use the django backend to get the image uploaded to be resized and saved as the thumbnail and then saved. Let me know if you need to know any information. I would be happy to use the django snippet - http://djangosnippets.org/snippets/224/ but I don't know what data to feed it. I get the same IOErrors and 'no such path/filename' even though the main image is uploading to s3 fine. I have also tried things like: myimage = open(settings.MEDIA_URL + str(self.image)) myimage_io = StringIO.StringIO() imageresize = myimage.resize((100,100), Image.ANTIALIAS) imageresize.save('resize_100_100_aa.jpg', 'JPEG', quality=75) It's been 3 days of looking now so I am starting to go spare! Thanks
