[site]: stackoverflow
[post_id]: 1886358
[parent_id]: 
[tags]: 
malloc pointer function passing fread

Can't figure out what's wrong, I don't seem to be getting anything from fread. port.h #pragma once #ifndef _PORT_ #define _PORT_ #include #ifndef UNICODE typedef char chr; typedef string str; #else typedef wchar_t chr; typedef std::wstring str; inline void fopen(FILE ** ptrFile, const wchar_t * _Filename,const wchar_t * _Mode) { _wfopen_s(ptrFile,_Filename,_Mode); } #endif #endif inside main() File * f = new File(fname,FileOpenMode::Read); chr *buffer; buffer = (wchar_t*)malloc(f->_length*2); for(int i=0;i _length;i++) { buffer[i] = 0; } f->Read_Whole_File(buffer); f->Close(); for(int i=0;i _length;i++) { printf("%S",buffer[i]); } free(buffer); inside file class void Read_Whole_File(chr *&buffer) { //buffer = (char*)malloc(_length); if(buffer == NULL) { _IsError = true; return; } fseek(_file_pointer, 0, SEEK_SET); int a = sizeof(chr); fread(&buffer,_length ,sizeof(chr) , _file_pointer); }
