[site]: stackoverflow
[post_id]: 4925911
[parent_id]: 4925824
[tags]: 
The one thing that stands out is the following line of code: $cookie = tempnam("/tmp", "curlcookie"); Now if this fails to create the file then tempnam would return false, meaning that the following lines of code: curl_setopt($ch, CURLOPT_COOKIEJAR, $cookie); curl_setopt($ch, CURLOPT_COOKIEFILE, $cookie); are as good as not being set at all, you should keep the cookie file within the same directory as the executing script. the next thing is: $fields = $_POST; foreach($fields as $key=>$value) { $fields_string .= "$key=$value&"; } $fields_string = substr($fields_string, 0, strlen($fields_string) - 1); You do not need to do this as CURLOPT_POSTFIELDS accepts an array so you should be able to do: curl_setopt($ch, CURLOPT_POSTFIELDS, $_POST); This will make sure that the entities are correctly parsed. I also think you can remove the ini_set as that's for native functions such as file_get_contents and fopen streams etc, so double check the line: ini_set("user_agent", $agent); Also I would check to see if there is a cookie already set from the main page, such as index.php as the site may block requests from sources that have come directly to the login page with data.
