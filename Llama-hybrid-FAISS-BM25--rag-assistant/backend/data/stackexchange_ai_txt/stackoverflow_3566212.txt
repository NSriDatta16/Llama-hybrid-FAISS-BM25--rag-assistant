[site]: stackoverflow
[post_id]: 3566212
[parent_id]: 
[tags]: 
Draw part of CGImage

I have an application that draws images from a CGImage. The CImage itself is loaded using a CGImageSourceCreateImageAtIndex to create an image from a PNG file. This forms part of a sprite engine - there are multiple sprite images on a single PNG file, so each sprite has a CGRect defining where it is found on the CGImage. The problem is, CGContextDraw only takes a destination rect - and stretches the source CGImage to fill it. So, to draw each sprite image we need to create multiple CGImages from the original source, using CGImageCreateWithImageInRect(). I thought at first that this would be a 'cheap' operation - it doesn't seem necessary for each CGImage to contain its own copy of the images bits - however, profiling has revealed that using CGImageCreateWithImageInRect() is a rather expensive operation. Is there a more optimal method to draw a sub-section of a CGImage onto a CGContext so I dont need to CGImageCreateWithImageInRect() so often? Given the lack of a source rectangle, and the ease of making a CGImage from a rect on a CGImage I began to suspect that perhaps CGImage implemented a copy-on-write semantic where a CGImage made from a CGImage would refer to a sub-rect of the same physical bits as the parent. Profiling seems to prove this wrong :/
