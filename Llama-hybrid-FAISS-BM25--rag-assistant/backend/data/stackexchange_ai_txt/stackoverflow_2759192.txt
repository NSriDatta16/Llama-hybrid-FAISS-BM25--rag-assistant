[site]: stackoverflow
[post_id]: 2759192
[parent_id]: 2758112
[tags]: 
While this basically is the knapsack problem, you may be able to do some simple analysis to filter out poor decisions (in your example, the 3- and 4-day reservation packages). First of all, I would sort the list by the number of days and the average per day price. In your example, this would yield... Days Average ---- ------- 1 1000 2 600 3 833 4 775 7 571 Then I would filter out all the values that increase as you traverse this list. A simple hypothesis could be that a day with increased average from a shorter stay can have a better rate by using the sum of X shorter stays (obviously not true all of the time -- set the 1-day rate 1301 and the 3-day rate becomes better but the 4-day rate is still bad -- though it does work in your example). More detailed analysis turns this into the knapsack problem. Days Average ---- ------- 1 1000 2 600 3 833 removed 4 775 removed 7 571 Now when building up reservation, sort by the number of days descending an build up the total reservation by subtracting the largest possible reservation from the desired day count until you've filled it. So an 11-day reservation would be a 7-day and two 2-days; a 10-day would be a 7-day, a 2-day, and a 1-day.
