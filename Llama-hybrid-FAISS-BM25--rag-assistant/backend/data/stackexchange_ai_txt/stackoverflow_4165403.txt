[site]: stackoverflow
[post_id]: 4165403
[parent_id]: 
[tags]: 
Tune MTU on a per-socket basis?

I was wondering if there is any way to tune (on a linux system), the MTU for a given socket. (To make IP layer fragmenting into chunks smaller that the actual device MTU). When I say for a given socket, I don't mean programatically in the code of the application owning the socket but rather externally, for example via a sysfs entry. If there is currently no way do that, do you have any ideas about where to hook/patch in linux kernel to implement such a possibility ? Thanks. EDIT: why the hell do I want to do that ? I'm doing some Layer3-in-Layer4 (eg: tunneling IP and above through TCP tunnel) tunneling. Unlike VPN-like solutions, I'm not using a virtual interface to achieve that. I'm capturing packets using iptables, dropping them for their normal way and writing them to the tunnel socket. Think about the case of a big file transfer, all packets are filled up to MTU size. When I tunnel them, I add some overhead, leading in every original packet to produce two tunneled packets, it's under-optimal.
