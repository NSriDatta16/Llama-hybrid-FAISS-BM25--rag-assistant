[site]: stackoverflow
[post_id]: 2800812
[parent_id]: 
[tags]: 
How to save an image in its original format?

How can I save an Image with its original encoding? It seems that the only way to save an Image is by using a BitmapEncoder but I don't know how I can get the correct format from the image. Example: Clipboard.GetImage() returns a InteropBitmap which doesn't seem to contain any information about the original format. I also tried using an Extension method: public static void Save(this BitmapImage image, System.IO.Stream stream) { var decoder = BitmapDecoder.Create(image.StreamSource, BitmapCreateOptions.PreservePixelFormat, BitmapCacheOption.Default); var encoder = BitmapEncoder.Create(decoder.CodecInfo.ContainerFormat); foreach (var frame in decoder.Frames) { encoder.Frames.Add(BitmapFrame.Create(frame)); } encoder.Save(stream); } but the problem is that the ImageSource is not always a BitmapImage (Clipboard.GetImage()) for example and the image.StreamSource can be null in some cases (seems to be when the image is loaded via a relative Uri) Any suggestions?
