[site]: stackoverflow
[post_id]: 1452168
[parent_id]: 1210806
[tags]: 
There is a subtle bug in your first example. There may not be enough free space to add your new storage, triggering the request - but the amount you're asking for may be less than the existing quota. This throws the exception and doesn't show the dialog. The correct line would be file.IncreaseQuotaTo(file.Quota + NEEDED);
