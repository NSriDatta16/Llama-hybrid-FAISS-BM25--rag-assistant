[site]: stackoverflow
[post_id]: 2773141
[parent_id]: 
[tags]: 
Inserting Custom Tags on User Selection

I want to insert my own custom tags and scripts around the selected text. Something like this var range = window.getSelection().getRangeAt(0); var sel = window.getSelection(); range.setStart( sel.anchorNode, sel.anchorOffset ); range.setEnd(sel.focusNode,sel.focusOffset); highlightSpan = document.createElement("abbr"); highlightSpan.setAttribute("style","background-color: yellow;"); highlightSpan.setAttribute("onmouseout","javascript:HideContentFade(\"deleteHighlight\");"); highlightSpan.setAttribute("onmouseover","javascript:ShowHighlighter(\"deleteHighlight\",\""+id_val+"\");"); highlightSpan.appendChild(range.extractContents()); range.insertNode(highlightSpan); This works in normal scenarios but if I select some text in different paragraphs the extractContents API will validate the HTML returned and put additional tags to make it valid HTML. I want the exact HTML that was selected without the additional validating that javascript did. Is there any way this can be done? I have tried it the way mentioned in How can I highlight the text of the DOM Range object? but the thing is I want user specific highlights so if A has added some highlight B should not be able to see it. For this I have my backend code ready.
