[site]: stackoverflow
[post_id]: 1082535
[parent_id]: 1082408
[tags]: 
this is the code you want: function StatusCheck($url) { $urlparts=parse_url($url); $curl=new CCurl($url); $headers=$curl->execute(); $headers=$curl->close(); $headers=$curl->getHeader(); $headers=split("\r\n",$headers); $status=$headers[0]; print_r($headers); if (strpos($status,"HTTP/1.1 200 OK")===FALSE) { echo date("d.m.Y H:i:s").$url,': bad'."\n"; return 0; } else { echo date("d.m.Y H:i:s").$url,': good'."\n"; return 1; } } it checks the URL (link) provided and prints out the headers + info if the URL is bad (not working) or good (status 200 OK) PS: set curl options to follow redirection EDIT: this is the CCurl class, sorry forgot about it: class CCurl { var $m_handle; var $m_header; var $m_body; function CCurl($sUrl) { $this->m_handle = curl_init(); curl_setopt($this->m_handle, CURLOPT_URL, $sUrl); curl_setopt($this->m_handle, CURLOPT_HEADER, 1); curl_setopt($this->m_handle, CURLOPT_RETURNTRANSFER, 1); curl_setopt($this->m_handle, CURLOPT_FOLLOWLOCATION, 1); curl_setopt($this->m_handle, CURLOPT_USERAGENT, "StatusCheckBot 0.1"); return; } function getHeader() { return $this->m_header; } function execute() { $sResponse = curl_exec($this->m_handle); $this->m_body = substr($sResponse, strpos($sResponse, "\r\n\r\n") + 4); $this->m_header = substr($sResponse, 0, -strlen($this->m_body)); return $this->m_body; } function close() { curl_close($this->m_handle); return; } }
