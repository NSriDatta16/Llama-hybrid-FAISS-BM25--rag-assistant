[site]: stackoverflow
[post_id]: 5399490
[parent_id]: 
[tags]: 
401 on MS Web Deploy

First thing you should know is that this worked on Wednesday of last week and the VM has been has been rolled back to the Monday of last week. I have the latest version of MS Web deploy setup on two machines. One is inside of our network and one is in the DMZ (external network). The internal one still works great but the server in the DMZ is not letting me deploy. The normal procedure is to deploy from VS 2010 using web publish to http://SITENAME/MsDeployAgentService with a username and password of a local administrator of the target server. Now when I try that it just hangs for 2 minutes and says it could not connect to http://SITENAME/MsDeployAgentService . A packet sniffer (wireshark) tells me that they are talking but after authenticating all they say is HTTP/1.1 200 OK Transfer-Encoding: chunked Server: Microsoft-HTTPAPI/2.0 MSDeploy.Response: v1 Date: Tue, 22 Mar 2011 22:46:33 GMT B ... B4 A 0 So I decided to package up the project (I've tried multiple projects on the server, none work) and copy it to the c: of the server. PROJECTNAME.deploy.cmd /T or PROJECTNAME.deploy.cmd /T /m:http://localhost/MsDeployAgentService /u:USERNAME /p:Password Work but PROJECTNAME.deploy.cmd /T /m:http://devel.sitename.com/MsDeployAgentService /u:USERNAME /p:Password and PROJECTNAME.deploy.cmd /T /m:http://localhost/MsDeployAgentService /u:USERNAME /p:Password /a:basic Do not. The error I get is Error: Remote agent (URL http://localhost/MsDeployAgentService) could not be contacted. Make sure the remote agent service is installed and started on the target computer. Error: An unsupported response was received. The response header 'MSDeploy.Response' was '' but 'v1' was expected. Error: The remote server returned an error: (401) Unauthorized. Error count: 1. Any ideas on troubleshooting steps? The only thing that changed over the past week is that our network got a virus that shut down the corporation but it didn't infect the DMZ and I'm told that no rules where changed on our firewall. Fear that a setting got changed is why the VM was rolled back to Monday (8 days), a few days before the last time I know this worked.
