[site]: stackoverflow
[post_id]: 4286209
[parent_id]: 
[tags]: 
How to increase performance of this js script (function calls exponentially increasing)?

Any general tips how to increase a longish js code like this? It works great but sometimes it gets a little sluggish and all the drag/drop and ajax features slow down. I know this code is a little longer so I am not looking for specific suggestions. Just your first thoughts after taking a quick glance at this code. EDIT: I have found a pretty scary thing. The calls to dragDrop() are exponentially increasing in the $('.folderListOnclick').click event. After each click dragDrop() is called 1 time, 2 times, 4 times, 8 times. That's what's slowing it down. But I don't understand why it is happening. // width /*&& 30 == parseInt(width)*/) { $(this).removeClass('ordinaryFolderClosed'); $(this).removeClass('ordinaryFolderOpened'); if (in_array($(this).attr('rel'), openedFolders)) { $(this).addClass('ordinaryFolderOpened'); } else { $(this).addClass('ordinaryFolderClosed'); } } if (in_array($(this).attr('rel'), openedFolders)) { start = 1; } if (1 == start && stop 30) { $(this).parent().parent().hide(); } } }); function dragDrop() { $('.folders .trow1').hover( function () { if ($(this).css('backgroundColor') != 'rgb(52, 108, 182)' && $(this).css('backgroundColor') != '#346cb6') { $(this).css('background', "#C2E3EF"); } }, function () { if ($(this).css('backgroundColor') != 'rgb(52, 108, 182)' && $(this).css('backgroundColor') != '#346cb6') { $(this).css('background', 'transparent'); } } ); $('.drag').click(function() { if ($(this).hasClass('noclick')) { $(this).removeClass('noclick'); } else { var draggables = $(this).parents('table').find('.drag'); var $next = draggables.filter(':gt(' + draggables.index(this) + ')').first(); var width = $(this).css('width'); var nextWidth = $next.css('width'); if (nextWidth > width /*&& 30 == parseInt(width)*/) { var isVisible = $next.is(':visible'); if (isVisible) { $(this).removeClass('ordinaryFolderClosed'); $(this).removeClass('ordinaryFolderOpened'); $(this).addClass('ordinaryFolderClosed'); } else { $(this).removeClass('ordinaryFolderClosed'); $(this).removeClass('ordinaryFolderOpened'); $(this).addClass('ordinaryFolderOpened'); } clickedId = $(this).attr('rel'); clickedId = clickedId.split(','); clickedType = clickedId[1]; clickedId = clickedId[0]; // $.ajax({ // type: 'POST', // url: 'body/obsah/mediaManager/setOpenedFolder.php', // data: 'id='+clickedId+'&type='+clickedType, // success: function(msg){ // //alert(msg); // } // }); var start = 0; var stop = 0; var i = 0; // close folder if (isVisible) { $('.drag').each(function() { if (0 == start) { iteratedId = $(this).attr('rel'); iteratedId = iteratedId.split(','); iteratedId = iteratedId[0]; if (iteratedId == clickedId) { start = 1; } } if (1 == start && stop width) { $(this).parent().parent().hide(); if ($(this).hasClass('ordinaryFolderClosed') || $(this).hasClass('ordinaryFolderOpened')) { $(this).removeClass('ordinaryFolderClosed'); $(this).removeClass('ordinaryFolderOpened'); $(this).addClass('ordinaryFolderClosed'); } } else { stop++; } } i++; }); } // open folder else { $('.drag').each(function() { if (0 == start) { iteratedId = $(this).attr('rel'); iteratedId = iteratedId.split(','); iteratedId = iteratedId[0]; if (iteratedId == clickedId) { start = 1; } } if (1 == start && stop
