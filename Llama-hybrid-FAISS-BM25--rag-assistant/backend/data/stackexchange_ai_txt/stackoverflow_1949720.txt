[site]: stackoverflow
[post_id]: 1949720
[parent_id]: 1949642
[tags]: 
What you are trying to implement here looks so much like reference counting (remember COM?). You probably can do this with increments / decrements - just keep a reference counter right next to your reference. The only problem with this technique is that it relies on the object consumers to be decent with object usage. This makes the code very fragile. Another question is that AFAIK the main performance problem with locks is not the lock iteself but rather the memory barrier it implies. The point is that every acces to a volatile variable does the same. In other words I do not thnk you gained anything replacing locks with volatile variables
