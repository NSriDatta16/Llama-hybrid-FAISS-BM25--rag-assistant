[site]: stackoverflow
[post_id]: 788448
[parent_id]: 788408
[tags]: 
Those companies pay for the data. There are many ways to get this data (not all illegal), one simple one is, for example, providing free services that encourage you to provide some information about your actual location like for example DslReports . Once they know one IP and the ISP is easy to correlate other IPs from the same area. As you can see here one company recommends the other so you can see the connection.
