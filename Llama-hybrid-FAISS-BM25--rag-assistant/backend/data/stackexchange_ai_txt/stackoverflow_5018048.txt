[site]: stackoverflow
[post_id]: 5018048
[parent_id]: 
[tags]: 
Magento - problem sending email through an action

I have a basic module that accepts form data on the frontend and saves to a database. What I'm also looking to do is to send an email if the data has been saved successfully. I'd like the email to be sent to the store owner: I have done the following to try and get this to work: app/code/local/Aero/Catalogrequest/etc/config.xml Request a brochure request_brochure.html html and request_brochure_email I have created a template file in: app/locale/en_US/template/email/request_brochure.html {{var data.fname}} And this is my postAction in my IndexController.php public function postAction() { $post = $this->getRequest()->getPost(); if ( $post ) { $request = Mage::getModel('catalogrequest/catalogrequest'); $data = $this->getRequest()->getPost(); $data['time_added'] = now(); $data['country'] = $data['country_id']; $data['ip'] = $_SERVER['REMOTE_ADDR']; $data['fname'] = ucwords($data['fname']); $data['lname'] = ucwords($data['lname']); $data['address1'] = ucwords(str_replace(",", " ",$data['address1'])); $data['address2'] = ucwords(str_replace(",", " ",$data['address2'])); $data['city'] = ucwords($data['city']); if(empty($data['region'])){ $data['state'] = Mage::getModel('directory/region')->load($data['state'])->getCode(); } else { $data['state'] = $data['region']; } $postObject = new Varien_Object(); $postObject->setData($post); // Validate if(!$errors = $request->validate($data)){ MAGE::getSingleton('core/session')->addError($errors); } // Add to database try { $mailTemplate = Mage::getModel('core/email_template'); /* @var $mailTemplate Mage_Core_Model_Email_Template */ $mailTemplate->setDesignConfig(array('area' => 'frontend')) ->sendTransactional( Mage::getStoreConfig(self::XML_PATH_SAMPLE_EMAIL_TEMPLATE), Mage::getStoreConfig(self::XML_PATH_EMAIL_SENDER), Mage::getStoreConfig(self::XML_PATH_EMAIL_RECIPIENT), null, array('data' => $data) ); if (!$mailTemplate->getSentSuccess()) { throw new Exception(); } $request->setData($data)->save(); MAGE::getSingleton('core/session')->addSuccess($this->__(' Thank you You can expect to receive your catalogue in 10-14 days.o. ')); $translate->setTranslateInline(true); $this->_redirect('*/*/thanks'); } catch(Exception $e){ MAGE::getSingleton('core/session')->addError('Sorry, we\'ve had some trouble saving your request'); $this->_redirect('*/*/'); return; } } return; } When submitting my form, data isn't sent to the email address that I have configured in the admin Does anyone have any idea what I'm doing wrong? Thanks
