[site]: stackoverflow
[post_id]: 2724416
[parent_id]: 2724325
[tags]: 
The horrible answer you didn't want to hear is that XML is more than just a string. For encoding and other reasons, you can't reliably substitute string fragments into other fragments and expect well-formed documents. If you're not using a proper XML library (which you should, by the way, they're in all the major frameworks) you can still hack XML fragment strings together by making sure their encodings are actually the same, and by removing the from the start of any of the fragments.
