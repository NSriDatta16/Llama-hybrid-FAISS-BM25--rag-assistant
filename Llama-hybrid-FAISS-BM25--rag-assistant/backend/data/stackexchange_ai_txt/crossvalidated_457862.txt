[site]: crossvalidated
[post_id]: 457862
[parent_id]: 
[tags]: 
oddstream error for get_pc_space()

I am trying out the 'oddstream' package for anomaly detection in a collection of time series data streams, following the example here - https://github.com/pridiltal/oddstream I am now trying the same process in the example, but using my own generated data, which consists of 4 data streams, each with a numeric double value per minute. Following the example I have pivoted the data per time series, removed the timestamp and now my data is in an object called 'data_values' in this format; "thanos","ironman","captain_america","hulk" 3.7933707,10.164239,12.514751,9.689982 4.5170693,15.88197,10.431008,8.345579 4.258799,15.741869,12.244887,11.037741 4.0412955,11.823674,9.517862,11.15495 4.2847366,13.72516,11.089338,13.155646 4.076619,10.513271,17.092613,12.405578 3.6052873,14.222145,11.051033,9.765422 3.9812086,17.19401,13.004522,13.648401 3.72212,11.095416,11.487545,14.012459 4.5084734,12.152,14.038413,12.560803 3.8176696,11.412605,10.385266,12.806011 4.3973894,13.509395,13.644381,10.491239 4.058119,14.249434,11.672884,11.187779 4.161111,14.844873,15.815558,14.559033 3.8905697,11.550871,15.815259,12.187394 6.5188656,6.389417,15.472974,12.524681 5.4459763,13.383606,16.610128,13.659021 6.722979,12.058713,12.0502825,16.697142 5.9772997,16.411823,12.592097,14.264039 6.3547525,13.261564,12.283675,11.7058735 There are 10057 rows however I get the error I am struggling with using only this subset too. So using this subset above, I can extract the time series features; features which brings back the 14 column matrix; "mean","variance","lumpiness","lshift","vchange","linearity","curvature","spikiness","BurstinessFF","minimum","maximum","rmeaniqmean","moment3","highlowmu" 4.60668556,1.00702326532496,0.855366442741394,1.05557524,1.30794987881141,3.04846236351802,1.8476299661999,0.000554329483171873,0.218600391150848,3.6052873,6.722979,0.913879392280466,111.639461480883,3 12.97930275,6.4034605328223,0.703054250578798,0.544145299999998,1.18579445991183,-0.820696245222748,1.50118483843438e-11,0.279156869117938,0.49335936268397,6.389417,17.19401,1.02644843537531,954.355024327516,0.818181818181817 12.940723825,4.87480320180651,0.000131101403724768,1.38705325,0.0161926775874006,3.64250957492454,-6.02729157599105e-11,0.0775880978567155,0.376702514305185,9.517862,17.092613,0.958154518068467,1065.07723774107,1.5 12.292938675,3.82434122626332,0.020330298422021,1.43056515,0.201644729274142,5.00995054716844,-1.50214890817974e-10,0.0183924722110376,0.311100651143802,8.345579,16.697142,1.01400729553383,1018.68114519884,0.818181818181818 However when I run the next step using the features matrix; pc I get the following error; Error in pcaPP::PCAproj(features, k = ncol(features), scale = sd, center = mean) : k too large It gets stuck on this method - https://www.rdocumentation.org/packages/pcaPP/versions/1.9-73/topics/PCAproj where k is the number of components to produce. I understand that 'k' is set in this example to the number of columns in features, which as far as I can tell is 14, and my features object matches the structure I get when I run the github 'anomalous_stream' example. The difference is that the github example does not throw an error here despite 'k' presumably being exactly the same. I am a bit stuck on what the issue is, if anyone would be able to help - many thanks! UPDATE 1: Looking at the source code for the PCAproj() method here ; n = nrow (x) p = ncol (x) if( k > min(n,p)) stop ('k too large') As I only have 4 time series, that means my features object which is the 'x' input into the method, only has 4 rows. As the error shows that k is set to k = ncol(features), which is 14, does this mean that I need at least 14 rows and therefore 14 time series in order for k to not be too large? UPDATE 2 - Resolved: I have created another 12 time series to take my total up to 16, and this is now working. If anyone else comes across this issue, the features matrix will produce 14 columns, and you need at least this number of time series in order to be able to apply the get_pc_space() method to the features matrix.
