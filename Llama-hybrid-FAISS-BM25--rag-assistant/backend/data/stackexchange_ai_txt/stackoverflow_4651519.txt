[site]: stackoverflow
[post_id]: 4651519
[parent_id]: 
[tags]: 
Cannot connect to Cassandra on a cloud server using phpcassa

I have setup a test cloud server (Ubuntu 10.10 on Rackspace) to play with Cassandra database (0.6.8). I can connect no problem both from within the server and from a computer external to the cloud using the cassandra-cli basic client: I have created and retrieved sample data. I have then installed phpcassa on the cloud server and on an external computer. I have created a very simple php program to test the connection: '; CassandraConn::add_node('184.106.97.245', 9160); $users = new CassandraCF('Keyspace1', 'Standard2'); try { $res = $users->get('jsmith'); print_r($res); } catch (Exception $e) { print CassandraConn::$last_error; } echo 'End.' ?> I am using buffered transport. I can happily connect and read data from within the server (I have also installed LAMP on it): phpcassa test01 Array ( [age] => 42 [first] => John [last] => Smith ) End. but not from outside because I am always getting the exception: phpcassa test01 TException: TSocket: Could not connect to 184.106.97.245:9160 (Operation timed out [60]) End. This is my storage-conf.xml file: Test Cluster false true 128 org.apache.cassandra.locator.RackUnawareStrategy 1 org.apache.cassandra.locator.EndPointSnitch org.apache.cassandra.auth.AllowAllAuthenticator org.apache.cassandra.dht.RandomPartitioner /var/lib/cassandra/saved_caches /var/lib/cassandra/commitlog /var/lib/cassandra/data 184.106.97.245 10000 128 184.106.97.245 7000 184.106.97.245 9160 false auto 64 64 32 8 64 64 256 0.3 60 8 32 periodic 10000 864000 true Rackspace support suggested changing the firewall settings but I have no firewall: root@Oahu:~# iptables --list Chain INPUT (policy ACCEPT) target prot opt source destination Chain FORWARD (policy ACCEPT) target prot opt source destination Chain OUTPUT (policy ACCEPT) target prot opt source destination Any help very much appreciated!!! Cheers, Rujero
