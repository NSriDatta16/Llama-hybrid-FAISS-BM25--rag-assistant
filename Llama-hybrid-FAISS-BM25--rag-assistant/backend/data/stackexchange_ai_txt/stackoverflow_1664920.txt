[site]: stackoverflow
[post_id]: 1664920
[parent_id]: 
[tags]: 
Distinguishing a single click from a double click in Cocoa on the Mac

I have a custom NSView (it's one of many and they all live inside an NSCollectionView â€” I don't think that's relevant, but who knows). When I click the view, I want it to change its selection state (and redraw itself accordingly); when I double-click the view, I want it to pop up a larger preview window for the object that was just double-clicked. My first looked like this: - (void)mouseUp: (NSEvent *)theEvent { if ([theEvent clickCount] == 1) [model setIsSelected: ![model isSelected]]; else if ([theEvent clickCount] == 2) if ([model hasBeenDownloaded]) [mainWindowController showPreviewWindowForPicture:model]; } which mostly worked fine. Except, when I double-click the view, the selection state changes and the window pops up. This is not exactly what I want. It seems like I have two options. I can either revert the selection state when responding to a double-click (undoing the errant single-click) or I can finagle some sort of NSTimer solution to build in a delay before responding to the single click. In other words, I can make sure that a second click is not forthcoming before changing the selection state. This seemed more elegant, so it was the approach I took at first. The only real guidance I found from Google was on an unnamed site with a hyphen in its name. This approach mostly works with one big caveat. The outstanding question is "How long should my NSTimer wait?". The unnamed site suggests using the Carbon function GetDblTime() . Aside from being unusable in 64-bit apps, the only documentation I can find for it says that it's returning clock-ticks. And I don't know how to convert those into seconds for NSTimer . So what's the "correct" answer here? Fumble around with GetDblTime() ? "Undo" the selection on a double-click? I can't figure out the Cocoa-idiomatic approach.
