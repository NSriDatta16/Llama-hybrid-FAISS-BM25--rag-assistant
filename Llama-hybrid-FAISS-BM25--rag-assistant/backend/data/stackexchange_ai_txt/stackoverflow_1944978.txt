[site]: stackoverflow
[post_id]: 1944978
[parent_id]: 
[tags]: 
mouse up event not working properly

can anyone please help me on this. attached is the fla which has a part of code i am working on for a project. with help of mouse you can draw a circle on the image, but for some reasons the mouse up event does not work. it works fine when the eventlisteners is attached to the stage, but does not work when its attached to the movieclip. also how can i restrict the circle to be drawn only inside the movieclip which is a rectangle. here is the code const CANVAS:Sprite = new Sprite(); var _dragging:Boolean = false; var _corner:Point; var _corner2:Point; menFront.addEventListener(MouseEvent.MOUSE_DOWN, setAnchor); menFront.addEventListener(MouseEvent.MOUSE_UP, completeRect); function setAnchor(e:MouseEvent):void{ trace("mouse down"); if(!_dragging){ CANVAS.graphics.clear(); _corner = new Point(e.stageX, e.stageY); _dragging = true; menFront.addEventListener(MouseEvent.MOUSE_MOVE, liveDrag); } } function completeRect(e:MouseEvent):void{ trace("mouse up"); if(_dragging){ _dragging = false; menFront.removeEventListener(MouseEvent.MOUSE_MOVE, liveDrag); CANVAS.graphics.lineStyle(0, 0, 0); CANVAS.graphics.beginFill(0x222222,.5) _corner2 = new Point(e.stageX, e.stageY); trace(Point.distance(_corner,_corner2).toFixed(2)); CANVAS.graphics.drawCircle(_corner.x, _corner.y, Point.distance(_corner,_corner2)); addChild(CANVAS); } } function liveDrag(e:MouseEvent):void{ CANVAS.graphics.clear(); CANVAS.graphics.lineStyle(0, 0x999999); _corner2 = new Point(e.stageX, e.stageY); //trace(Point.distance(_corner,_corner2).toFixed(2)); CANVAS.graphics.drawCircle(_corner.x, _corner.y, Point.distance(_corner,_corner2)); addChild(CANVAS); }
