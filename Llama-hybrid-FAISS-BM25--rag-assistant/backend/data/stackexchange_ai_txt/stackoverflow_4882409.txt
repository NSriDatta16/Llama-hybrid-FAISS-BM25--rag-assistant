[site]: stackoverflow
[post_id]: 4882409
[parent_id]: 4882249
[tags]: 
You need to read the input, extract the tokens, recognize them, and give a meaning to them. This is how I would do it: # -*- coding: utf-8 -*- import re upper_value = { 1: '!', 2:'"', } tokenizer = re.compile(r'(\[.*?\]|.)') origin = "[SHIFT]this isrd[BACKSPACE][BACKSPACE] an example file[SHIFT]1" result = "" shift = False for token in tokenizer.findall(origin): if not token.startswith("["): if(shift): shift = False try: token = upper_value[int(token)] except ValueError: token = token.upper() result = result + token else: if(token == "[SHIFT]"): shift = True elif(token == "[BACKSPACE]"): result = result[0:-1] It's not the fastest, neither the elegant solution, but I think it's a good start. Hope it helps :-)
