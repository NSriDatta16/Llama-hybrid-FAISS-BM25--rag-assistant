[site]: stackoverflow
[post_id]: 3400205
[parent_id]: 
[tags]: 
XDocument to dataSet, my nested nodes are getting treated as new tables?

When looping through elements it thinks the child node is a table, when it should just be a column. I have most of the code working well, until I the code gets to this part: (all of my code is at the bottom) new XElement("TBL_Magic_TripCountries", lstCountry.Items .Cast () .Where(i=> i.Selected) .Select(x => new XElement("CountryCode", x.Value)) ), I am receiving a Cannot access destination table 'CountryCode'. I have no idea why this thinks this is a table if its nested within another node. I am trying to set CountryCode from TBL_Magic_TripCountries, but its not working as I thought. Any help? XDocument xmlDoc = new XDocument( new XDeclaration("1.0", "utf-8", "yes"), new XComment("Created: " + DateTime.Now.ToString()), new XElement("Trips", new XElement("TBL_TripDetails", new XElement("DepartureDate", txtDepartureDate.Text), new XElement("ReturnDate", txtReturnDate.Text), new XElement("TripRecommendation", tripRecommend), new XElement("TripRecommendationComment", txtTripRecommendComment.Text), new XElement("TripFavouriteThing", txtLikeMostComment.Text) ), new XElement("TBL_Magic_TripCountries", lstCountry.Items .Cast () .Where(i=> i.Selected) .Select(x => new XElement("CountryCode", x.Value)) ), new XElement("TBL_Cities", lstCities.Items .Cast () .Select(x => new XElement("City", x.Text))),) )); ... DataSet ds = new DataSet(); ds.ReadXml(xDoc.CreateReader()); string StrConn = ConfigurationManager.ConnectionStrings["myConn"].ConnectionString; SqlConnection cnn = new SqlConnection(StrConn); SqlBulkCopy blkcopy = new SqlBulkCopy(cnn); cnn.Open(); foreach (DataTable dt in ds.Tables) { BulkCopyTable(dt, blkcopy); } EDIT my XML looks like this before I start putting it in the dataset 2/2/2010 2/2/2010 1 2 vacation 2 0 3 great supplier 0 false false false USA CND New York Ottawa Las Vegas 3 4
