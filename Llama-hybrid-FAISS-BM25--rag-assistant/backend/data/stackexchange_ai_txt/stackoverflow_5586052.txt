[site]: stackoverflow
[post_id]: 5586052
[parent_id]: 
[tags]: 
Why can I login through this form with a browser, but not LWP?

I was trying to login into a website which uses this form with three inputs to authenticate. ID / Email: Password: If I login through browser, a successful login redirects me to http://www.example.com/myhome.html . But the following script is not logging me in and returns the same login.html page. Did I miss something? I am not getting any error message. Did I post successfully? #!/usr/bin/perl -w use LWP 5.64; my $browser = LWP::UserAgent->new || die " Failed LWP USER AGENT : $!"; $ENV{HTTP_proxy} = "http://proxy:port"; $browser->env_proxy; $browser->cookie_jar({}); my @Header = ( 'User-Agent' => 'Mozilla/4.76 [en] (Win98; U)', 'Accept' => 'image/gif, image/x-xbitmap, image/jpeg,image/pjpeg, image/png, */*', 'Accept-Charset' => 'iso-8859-1,*,utf-8', 'Accept-Language' => 'en-US', ); push @{$browser->requests_redirectable}, 'POST'; $response = $browser->post( "http://www.example.com/login.html", [ 'profid' => 'username', 'password' => 'password' ],@Header ); $response->is_success or die "Failed to post: ", $response->status_line; print "Successfully posted username and password.\n" if $response->is_fresh; #printf("%s",$response->content); printf("%s\n", $response->status_line); printf("%s", $response->header("Accept-Ranges")); printf("%s", $response->header("Age")); printf("%s", $response->header("ETag")); printf("%s", $response->header("Location")); printf("%s", $response->header("Proxy-Authenticate")); printf("%s", $response->header("Retry-After")); printf("%s", $response->header("Server")); printf("%s", $response->header("Vary")); printf("%s", $response->header("WWW-Authenticate")); delete $ENV{HTTP_PROXY};
