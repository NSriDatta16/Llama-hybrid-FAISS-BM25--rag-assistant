[site]: stackoverflow
[post_id]: 748928
[parent_id]: 724096
[tags]: 
I would definitely use mmap for the I/O. This would make it easy to directly access the data and flush to disk when needed. The only thing you would have to control is where the file is mapped in the address space, so you can move it around. One possibility for memory management is to create a different file for each object, and use file-system level defragmentation rather than implementing it yourself. You never mentioned what OS/file-system you are using, but if it already has online defragmentation I would use that. If you are using Linux and can use XFS, you can use xfs_fsr . I would expect file-system defragmentation to be highly optimized and it would take a lot less effort than to implement on your own in one big file.
