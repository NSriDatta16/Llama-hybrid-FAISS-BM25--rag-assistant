[site]: stackoverflow
[post_id]: 5628747
[parent_id]: 
[tags]: 
FileNotFoundException in android sdcard

I'm exporting a file in the sdcard, however, I'm facing a FileNotFound Exception ( 04-12 01:26:18.494: DEBUG/Carburant(4568): /mnt/sdcard/Carburant/alaa.peugeot.settings.dat/alaa.peugeot.settings.dat (Is a directory) )here is the code: try { File sdCard = Environment.getExternalStorageDirectory(); boolean mExternalStorageAvailable = false; boolean mExternalStorageWriteable = false; String state = Environment.getExternalStorageState(); if (Environment.MEDIA_MOUNTED.equals(state)) { // We can read and write the media Log.d("Carburant", "Sdcard can read/write !!"); mExternalStorageAvailable = mExternalStorageWriteable = true; try { final SharedPreferences preferences = PreferenceManager .getDefaultSharedPreferences(context); String fileName = context.getResources().getString( R.string.fileName); String fileDir = "" + preferences.getString("login", "") + "." + preferences.getString("marque", "") + "."; File f2 = new File(context.getFilesDir(), fileDir + fileName); String y = f2.getAbsolutePath(); Log.d("HI Export", y); InputStream in = new FileInputStream(f2); File dir = new File(sdCard.getAbsolutePath() + "/Carburant/"); String x = dir.getAbsolutePath(); Log.d("HI", x); File file = new File(dir, fileDir + fileName); file.mkdirs(); OutputStream out = new FileOutputStream(file); byte[] buf = new byte[1024]; int len; while ((len = in.read(buf)) != -1) { out.write(buf, 0, len); } // out.flush(); in.close(); out.close(); Toast.makeText(context, "Export effectu√©", Toast.LENGTH_SHORT).show(); } catch (FileNotFoundException ex) { Toast.makeText(context, "File Not found", Toast.LENGTH_SHORT).show(); String x = ex.getMessage(); Log.d("Carburant", x); } catch (IOException e) { Toast.makeText(context, "Echec", Toast.LENGTH_SHORT).show(); } } // copyfile(nom,file.getAbsolutePath()); else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) { // We can only read the media Log.d("Carburant", "Sdcard only read !!"); mExternalStorageAvailable = true; mExternalStorageWriteable = false; } else { // Something else is wrong. It may be one of many other states, // but all we need // to know is we can neither read nor write mExternalStorageAvailable = mExternalStorageWriteable = false; } } catch (Exception e) { Log.d("CARBURANT", e.getMessage()); } Want to export a file from /data/data/ /fileDir+fileName to a directory Carburant in the sdcard.
