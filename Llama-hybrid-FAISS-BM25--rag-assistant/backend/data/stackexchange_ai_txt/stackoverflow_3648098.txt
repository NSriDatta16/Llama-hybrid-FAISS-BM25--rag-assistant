[site]: stackoverflow
[post_id]: 3648098
[parent_id]: 
[tags]: 
Is there a better way to write this named_scope? [Rails]

I am using this named_scope to search for products that have a description matching any word the user inputs. E.g., Product.description_like_any("choc pret") Will return products with names like "Chocolate Bar" "Chocolate Covered Pretzels" "Miniature Chocolate Ponies" Here's the named_scope I've written (which works) named_scope :description_like_any, (lambda do |query| return {} unless query conditions = [] values = [] for q in query.split(/\s+/) conditions [conditions.join(' AND '), *values] } end) Is there a better way to write this? Perhaps I'm missing a Rubyism/Railism or two? Solution Using scope_procedure in conjunction with Searchlogic, this can be done in an even easier way. Note, the solution before even leverages Searchlogic's _or_ syntax for connecting two scopes together. The :keywords scope_procedure finds products matching product.description , or product.vendor.name ; All with one text field! Model # app/models/product.rb class Product Controller # app/controllers/products_controller.rb class ProductsController Views # app/views/products/index.html.erb
