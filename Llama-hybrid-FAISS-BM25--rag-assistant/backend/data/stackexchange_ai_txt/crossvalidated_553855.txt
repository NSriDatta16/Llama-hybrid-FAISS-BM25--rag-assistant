[site]: crossvalidated
[post_id]: 553855
[parent_id]: 553853
[tags]: 
What you described in the text before the images is just "matching". Propensity score matching is one type of matching that uses the difference between two units' propensity scores as the distance between them. There are several other popular ways of computing the distance between them, some of which do not involve the propensity score at all (e.g., Mahalanobis distance matching). The reason the propensity score difference is popular as a distance measure is that there is some theoretical support for its use (described in the original Rosenbaum and Rubin (1983) paper introducing the method) and it tends to work well in practice at creating balanced groups. Propensity scores can be estimated using any method that produces predicted probabilities, including logistic regression and machine learning methods such as random forests. Other popular methods include gradient boosted trees, lasso logistic regression, and Bayesian additive regression trees. The way to choose which method to use is to see which one produces the best balance (measured broadly) in the matched dataset. See my answer here . I highly encourage you to read some introductory papers on propensity score methods. I think Austin (2011) is an excellent start. If you're interested specifically in matching (as there are other ways to use the propensity score), Stuart (2010) is another excellent introduction. I also encourage you to read the MatchIt vignettes to see how matching can be done in practice. I've also written extensively about propensity scores and matching so you are welcome to peruse my contributions to the tag.
