[site]: stackoverflow
[post_id]: 4577370
[parent_id]: 4577204
[tags]: 
Separate queues for each domain and a queue of domains. Each processor should: Pick a domain from queue of domains. If domain was not recently updated, pick the top task from the domain queue. Put domain back to the end of domain queue. If we have a task to execute, do it. Sleep until it is the time to check the head of domain queue or the domain queue is updated. It may help if you organize the queue of domains as a time-priority queue â€” store the domains in the order of the next update time.
