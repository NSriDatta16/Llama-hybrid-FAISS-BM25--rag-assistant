[site]: stackoverflow
[post_id]: 1939934
[parent_id]: 
[tags]: 
calling win32 dll api from C# application

I have created a win32 dll which sends and recieves ssl data packets from our server, I am calling a dll function using P/Invoke mechanism from my C# app which does all necessary tasks. When I call Connect(char* lpPostData) function and I use static char postData [] array as a posting request it works fine , if I use char* lpPostData as sent parameter from my C# app for posting request it doesn't works. Is it something with conversion of C# string to char * ?? if that is the case how do i do it ?? How to debug the in Win32 dll ??? Calling the exported function from C# app: [DllImport("testdllwm6.dll", EntryPoint = "Connect")] public static extern int pConnect(string postdata); string postdata=" 1.2 SyncML/1.2 33622878 1 http://sync.com IMEI::358997011403172 syncfdg 10000 1 201 contacts ./contacts 000000T000000Z 20091125T122400Z "; int j = pConnect(postdata); Declaration is: __declspec(dllexport) int Connect(char* lpPostData); The function is defined as: __declspec(dllexport) int Connect(char* lpPostData) { LPCTSTR lpszAgent = _T("CeHttp"); DWORD dwError; DWORD sizeInResult, sizeOutResult, sizeToWrite, sizeWritten,dwRead; HINTERNET hInternet=NULL; HINTERNET hConnect=NULL; HINTERNET hRequest=NULL; LPDWORD pSizeInResult = &sizeInResult; LPDWORD pSizeOutResult = &sizeOutResult; LPDWORD pSizeToWrite = &sizeToWrite; LPDWORD pSizeWritten = &sizeWritten; int read = 0; char postData[637] =" 1.2 SyncML/1.2 66622878 1 http://sync.com IMEI::358997011403172 new123 10000 1 201 contacts ./contacts 000000T000000Z 20091125T122400Z "; LPCWSTR lpszHeaders =_T("Content-Type: application/vnd.sync+xml"); BOOL bResult; if(!HttpSendRequest(hRequest,lpszHeaders,wcslen(lpszHeaders), lpPostData,strlen(lpPostData))) { dwError = GetLastError(); printf(" not HttpSendRequest"); return read; } return read;
