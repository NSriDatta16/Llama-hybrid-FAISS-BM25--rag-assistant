[site]: stackoverflow
[post_id]: 4718289
[parent_id]: 
[tags]: 
Rails 3 HABTM Strange Association: Project and Employee in a tree

Hi guys I have to adapt an existing model to a new relation. I have this: A Project has many Employees. the Employees of a Project are organized in some kind of hierarchy (nothing fancy, I resolved this adding a parent_id for each employee to build the 'tree') class Employee 'Employee' has_many :children, :class_name => 'Employee', :foreign_column => 'parent_id' end class Project That worked like a charm, now the new requirement is: The Employees can belong to many Projects at the same time, and the hierarchy will be different according to the project. So I though I will need a new table to build the HABTM, and a new class to access the parent_id to build the tree. Something like class ProjectEmployee 'Employee' # :project_employee end class Employee :project_employee end How can I access the parent and the children of an employee for a given project? I need to add and remove children as wish from the employees of a project. Thank you!
