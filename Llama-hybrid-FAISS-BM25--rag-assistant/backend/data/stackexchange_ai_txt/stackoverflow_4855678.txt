[site]: stackoverflow
[post_id]: 4855678
[parent_id]: 
[tags]: 
How to Preserve the Input's Declared Encoding in the Output of javax.xml.transform.Transformer.transform? (e.g. avoid UTF-16 changing to UTF-8)

Assuming this input XML Writing these lines of code : StreamSource source = new StreamSource(new StringReader(/* the above XML*/)); StringWriter stringWriter = new StringWriter(); StreamResult streamResult = new StreamResult(stringWriter); TransformerFactory.newInstance().newTransformer().transform(source, streamResult); return stringWriter.getBuffer().toString(); Outputs for me this XML: (the declared encoding of UTF- 16 is converted to the default UTF- 8 ) I know I can explicitly ask for UTF-16 output transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-16"); But the question is, how to make the output encoding automatically be the same as the input?
