[site]: stackoverflow
[post_id]: 1604104
[parent_id]: 1604074
[tags]: 
Rather than going directly from the text file you describe to an XHTML file, I would transform it into an intermediate in-memory representation first. So I would build classes to represent the p and h1 tags, and then go through the text file and build those objects and put them into a list (or even a more complex object, but from the looks of your file a list should be sufficient). Then I would pass the list to another function that would loop through the p and h1 objects and output them as XHTML. As an added bonus, I would make each tag object (say, Paragraph and Heading1 classes) implement an as_xhtml() method, and delegate the actual formatting to that method. Then the XHTML output loop could be something like: for tag in input_tags: xhtml_file.write(tag.as_xhtml())
