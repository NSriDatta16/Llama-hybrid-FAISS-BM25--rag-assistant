[site]: stackoverflow
[post_id]: 5532932
[parent_id]: 5532839
[tags]: 
What's happening is that you're matching any file element, then applying templates to its parent dir , which is matched by the default template for elements, which applies templates to all of its children, resulting in another match of the same file and starting an infinite recursion. (Note that your template for dir elements never matches anything, because it's looking only for dir elements that are a child of the root node, of which you have none.) The following stylesheet: / Produces the following output: a.txt aaa/b.txt aaa/c.txt bbb/ccc/d.txt Edit: I think it's generally better to push forward through the document when backtracking can be avoided. The following stylesheet produces the same output as above, but is more efficient and elegant:
