[site]: stackoverflow
[post_id]: 4812397
[parent_id]: 4812251
[tags]: 
The substringWithRange: method will (as the docs say) raise an NSRangeException "if any part of aRange lies beyond the end of the receiver". By asking for thisfilelength characters starting from the 6th position in thisfile, you go past the end of the string resulting in an exception. You need to reduce the length requested by 6 like this: NSString *savedAgentName = [NSString stringWithFormat:@"%@", [thisfile substringWithRange:NSMakeRange(6,thisfilelength-6)]]; By the way, this code could be simplified to: NSString *savedAgentName = [thisfile substringWithRange:NSMakeRange(6,thisfilelength-6)]; However, since you want the whole rest of the string from a certain index, this could be simplified even further by using substringFromIndex: : NSString *savedAgentName = [thisfile substringFromIndex:6]; Note also that all the code above assumes the string has at least 6 characters. To be safe, check that the length of thisfile is 6 or greater before getting the substring. If it is less than 6 characters long, you can set savedAgentName to blank.
