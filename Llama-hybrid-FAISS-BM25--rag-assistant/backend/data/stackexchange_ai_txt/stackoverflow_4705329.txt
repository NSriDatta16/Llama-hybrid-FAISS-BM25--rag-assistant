[site]: stackoverflow
[post_id]: 4705329
[parent_id]: 4703269
[tags]: 
Thanks to Derek Clarkson, I successfully mocked the FlexContext, making the login testable. Unfortunately, it's only possible with JUnit, as far as i see (tested all versions of TestNG with no success - the JMockit javaagent does not like TestNG, See this and this issues). So this is how i'm doing it now: public class MockTests { @MockClass(realClass = FlexContext.class) public static class MockFlexContext { @Mock public FlexSession getFlexSession() { System.out.println("I'm a Mock FlexContext."); return new FlexSession() { @Override public boolean isPushSupported() { return false; } @Override public String getId() { return null; } }; } } @BeforeClass public static void setUpBeforeClass() throws Exception { Mockit.setUpMocks(MockFlexContext.class); // Test user is registered here (...) } @Test public void testLoginUser() { UserDAO userDAO = new UserDAO(); assertEquals(userDAO.getUserList().size(), 1); // no NPE here userDAO.login("asdf@asdf.de", "asdfasdf"); } } For further testing i now have to implement things like the session map myself. But thats okay as my app and my test cases are pretty simple.
