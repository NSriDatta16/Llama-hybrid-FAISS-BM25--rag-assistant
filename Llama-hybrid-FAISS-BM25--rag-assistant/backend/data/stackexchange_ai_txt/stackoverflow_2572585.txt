[site]: stackoverflow
[post_id]: 2572585
[parent_id]: 2572010
[tags]: 
I woould think about packets, packet types, packets identifiers and storages of packet types handlers. An idea is to only send a data in form of packets. Each packet holds its identifier(optional) and type at the beginning (length would be useful too) you have a bunch of packet handlers on each side of connection each handlers manages packets of corresponding type (reads and interprets). If you send a packet length you can even skip usupported types of packets allowing differrent client and server versions.
