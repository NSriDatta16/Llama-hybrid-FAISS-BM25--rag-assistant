[site]: crossvalidated
[post_id]: 279538
[parent_id]: 
[tags]: 
Logistic regression - the hat matrix

In logistic regression with binary outcomes $y_{i},...y_{n}$, the hat matrix is $$H = \hat{V}^{1/2}X(X^{T}\hat{V}X)^{-1}X^{T}\hat{V}^{1/2}$$ where $\hat{V}$ is diagonal matrix with $n_{n}\hat{\pi}_{n}(1-\hat{\pi}_{n})$ and the diagonal elements of the hat matrix are $h_{ii} = n_{i}\hat{\pi}_{i}(1-\hat{\pi}_{n})x^{T}_{n}(X^{T}\hat{V}X)^{-1}x_{n}$ Now when I compare this hat matrix with the one in linear regression, there is not the $\hat{V}$ matrix. I know that the diagonal elements on $\hat{V}$ are actually variance of Binomial distribution. So my question is, what is the purpose of the $\hat{V}$ matrix? Why the variance of Binomial distribution is used in order to estimate the parameters?
