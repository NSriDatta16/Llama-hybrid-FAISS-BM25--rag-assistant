[site]: stackoverflow
[post_id]: 5387760
[parent_id]: 
[tags]: 
404 Error but correct Response from JQuery Ajax in Codeigniter Framework

This is similar to another issue on SO: jQuery Ajax returning 404 Error, but correct Response but the above is very wordpress-specific. Also, my gut feeling is that my problem has more to do with my Apacher server setup, but I'm somewhat of a newbie at that. Here's the deal...I have this Jquery AJAX code: events: function(start, end, callback) { $.ajax({ type: "POST", // This Works --> url: 'http://calendar.localhost/index.php/myfeed/', // This Fails --> //url: 'http://calendar.localhost/myfeed/', dataType: 'json', cache: false, data: { appointment_id: _appointmentId }, success: function(d) {.... }, error: function(x,s,e) {... } }); When I use the url with index.php, everything works fine. However when I use the one without index.php, I get a 404 error, even though the (json) data seeems to be coming back ok (see below). Also, this is happening on a new system I recently upgraded to : Debian 2.6.32 (amd64) PHP 5.3.3 Apache 2.2.16 The same code (ie /myfeed or without index.php) works on my old system: Fedora 8 (yes, 8 lol) PHP 5.2.x Apache 2.2.6 (Note, initially I was using '/myfeed' for the url param which worked find on my "old" system. Any solution where I don't have to hardcode the domains would be acceptable to me.) So either I'm hitting some difference in one of these 3 (ie, the change in php, apache, or linux versions), or there's something I need to modify in my new Apache setup (my guess is something with the root dir '/' for virtual hosts, which I'm using for this site on my localhost...perhaps it's thinking the response is from a different domain, but I don't see how that could be if it works with index.php but fails without it???). If anyone has a solution or ideas for me to try that would be greatly appreciated!!!! Here are details from Firebug for the non-working case: POST http://calendar.localhost/myfeed 404 Not Found Headers tab: Response Headersview source Date Tue, 22 Mar 2011 06:22:37 GMT Server Apache/2.2.16 (Debian) X-Powered-By PHP/5.3.3-7+squeeze1 Vary Accept-Encoding Content-Encoding gzip Content-Length 220 Keep-Alive timeout=15, max=90 Connection Keep-Alive Content-Type text/html Request Headersview source Host calendar.localhost User-Agent Mozilla/5.0 (X11; U; Linux x86_64; en-US; rv:1.9.1.16) Gecko/20110302 Iceweasel/3.5.16 (like Firefox/3.5.16) Accept application/json, text/javascript, */*; q=0.01 Accept-Language en-us,en;q=0.5 Accept-Encoding gzip,deflate Accept-Charset ISO-8859-1,utf-8;q=0.7,*;q=0.7 Keep-Alive 300 Connection keep-alive Content-Type application/x-www-form-urlencoded; charset=UTF-8 X-Requested-With XMLHttpRequest Referer http://calendar.localhost/index.php/client Content-Length 36 Response tab: {"eventArray":[{"id":"2","notes":"test client Thurs","start":1299951000000,"end":1299960900000},{"id":"3","notes":"test bb334343","start":1300064400000,"end":1300068000000},{"id":"5","notes":"New appt dafdaf","start":1300462200000,"end":1300465800000}, {"id":"35","notes":"japan2","start":1300539600000,"end":1300545000000},{"id":"47","notes":"helo customer test","start":1300471200000,"end":1300475700000},{"id":"50","notes":"test 2 x email","start":1300455000000,"end":1300455900000}]} Also : ~ mod_rewrite enabled? Yes, I belive so (my CI pages redirect as they should). ~ .htaccess in CI www directory? Yes: RewriteEngine On RewriteBase / #Checks to see if the user is attempting to access a valid file, #such as an image or css document, if this isn't true it sends the #request to index.php RewriteCond %{REQUEST_FILENAME} !-f RewriteCond %{REQUEST_FILENAME} !-d RewriteRule ^(.*)$ index.php?/$1 [L] # If we don't have mod_rewrite installed, all 404's # can be sent to index.php, and everything works as normal. # Submitted by: ElliotHaughin ErrorDocument 404 /index.php Thanks, Peter PHP-side code (by request): public function viewEvent() { ... $appointmentData['startDate'] = $startDate; $appointmentData['startTime'] = $startTime; $data = array( 'eventData'=>$appointmentData ); echo json_encode($data); } Also, Apache log is giving: [Tue Mar 22 10:45:03 2011] [error] [client 127.0.0.1] File does not exist: /var/www/calendar/myfeed, referer: http://calendar.localhost/
