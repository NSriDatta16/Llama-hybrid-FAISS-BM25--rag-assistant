[site]: stackoverflow
[post_id]: 3432324
[parent_id]: 
[tags]: 
mod_rewrite prefix problem

I'm having some difficulties with mod_rewrite. My directory structure (part of it) is: index.php .htaccess app controllers models views ... public javascripts stylesheets foo bar So, as you can see, all static files are in app/public. That's the reason I would like to route requests like: http://www.example.com/images/logo.png => app/public/images/logo.png http://www.example.com/javascripts/app.js => app/public/javascripts/app.js http://www.example.com/uploads/blog/something => app/public/uploads/blog/something If that file doesn't exist, then it should route to index.php, like: http://www.example.com/news/show/42 => index.php (Because file app/public/news doens't exist) So, this is my current .htaccess, but I think it can be done in more elegant way. RewriteEngine on RewriteRule (png|jpg|gif|bmp|ico)$ app/public/images/$1/$2.$3 [L] RewriteRule ([^/.]+).js$ app/public/javascripts/$1.js [L] RewriteRule ([^/.]+).css$ app/public/stylesheets/$1.css [L] RewriteRule ^(.*)$ index.php [NC,L,QSA] Also, problem with this one is, it only handles images, javascripts and stylesheets, but not all other files. I know there is: RewriteCond %{SCRIPT_FILENAME} !-f RewriteCond %{SCRIPT_FILENAME} !-d But, I don't know how to route them with prefix "app/public/"? I tried: RewriteCond app/public/%{SCRIPT_FILENAME} !-f RewriteCond app/public/%{SCRIPT_FILENAME} !-d But it doesn't work! I also tried using RewriteBase, but it didn't work out. EDIT: I'm using mod_expires, and I'd really like to automate requests like: http://www.example.com/images/logo.42.png => app/public/images/logo.png http://www.example.com/javascripts/app.42.js => app/public/javascripts/app.js So, as you can see, I would like to have optional number between filename and extension, and that number should be ignored (it is only used for future expires). Previously, I found: RewriteRule ^(.*)\.(\d+)(_m_\d+)?\.([^\.]+)$ $1.$4 [QSA] But I don't really understand how it works and does it always work in my example (multiple extensions maybe)? Thanks!
