[site]: crossvalidated
[post_id]: 226391
[parent_id]: 
[tags]: 
Can I smooth the dependent variable with a moving average in an OLS (or feasible GLS) regression?

I have a monthly unbalanced data panel of balance sheet data of 70 banks (on average 170 observations per bank) over 20 years. I have autocorrelation and heteroskedasticity within panels. I am trying to test the hyphotesis that there is a relation between transactional deposits and credit commitment (limit of line of credit). I would like to say "all being equal, on average a bank with more transactional deposits would offer more credit commitments to their clients". Namely, the argument is that in order to "produce" credit commitments a bank needs transactional depostis. In another step of the research the final goal is to build some kind of "production function" for credit commitments. My dependent variable is the ratio of credit commitments to total loans ( comitRatio ). My independent variable (regressor) is the ratio of transactional deposits to total deposits ( depRatio ). I am using natural logarithms of these variable because I would like to interpret estimated coefficients as elasticities. So I have ln(comitRatio) and ln(depRatio) . $\ln(comitRatio_{it} ) = b_0 + b_1 \ln(depRatio_{it}) + b_2 X_{it} + e_{it}$ where $X_{it}$ are control variables, most of them time-invariant. I chose to use moving average of 3, 6 and 12 months for independent variable ln(depRatio) . This is because the hypothesis states that, at point $t$ in time, commitments offer ( comitRatio ) is decided base on depRatio from previous periods. Also, since the regressor depRatio for some banks (particulary the smaller ones) varies too much from one month to the other I suppose a moving average would show me a better picture. My main concern is the ceteris paribus effect of the independent variable over the dependent. I am working with a fixed effect model with autocorrelation (AR(1) model) and robust standard error ( xtpcse command in Stata). The model works better (higher $R^2$, higher coefficient estimates, higher $z$-statistics) when I use moving average than when I use the original values (even when I use lagged values such us L.depRatio ). My question is, given this setup, can I use moving average only on independent variable? Shall I smooth independent as well as dependent variable, or would it not be advisable to smooth the dependent variable?
