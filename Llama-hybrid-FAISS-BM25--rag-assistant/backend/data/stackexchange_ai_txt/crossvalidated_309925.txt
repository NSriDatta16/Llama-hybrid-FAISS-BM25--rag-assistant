[site]: crossvalidated
[post_id]: 309925
[parent_id]: 309913
[tags]: 
If state space is discrete (as your notation implies) the $\max$ exists (e.g. because the state space is finite) then the expression holds almost trivially- your argument says the RHS attains the LHS. Moreover, it cannot exceed the left because it is less than $$ \max_{x\in\mathcal{S}} \mathbb{E}[Y | X = x] \max_{p \in \mathcal{P}(\mathcal{S}) }\sum_{x\in\mathcal{S}} p(x), $$ which is the LHS. (As @Alex R. said your original notation is bizarre and I took the liberty of denoting by $\mathcal{P}(\mathcal{S})$ a suitable space of probability measures on the state space $\mathcal{S}$. If you are actually talking about $\sup$ (still assuming the space is discrete) then you can take a sequence of $x^\star_n$ such that $$ \mathbb{E}[Y | X = x^\star_n] \to \sup_{x\in\mathcal{S}} \mathbb{E}[Y | X = x] $$ and the argument still works. Moreover, if your space is continuous and your space $\mathcal{P}{(\mathcal{S})}$ includes discrete measures, again the same argument works but you need integrals instead of the sums etc. If you only want continuous distributions then you need to work a little harder to approximate $\delta$-measures. So basically, your inequality works with $\max$ replaced by $\sup$.
