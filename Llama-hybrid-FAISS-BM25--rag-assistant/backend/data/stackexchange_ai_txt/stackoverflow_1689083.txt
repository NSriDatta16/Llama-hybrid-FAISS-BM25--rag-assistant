[site]: stackoverflow
[post_id]: 1689083
[parent_id]: 1688115
[tags]: 
I think your problem lies in that you iterate through your data for the first time while you're already printing your output. This makes for pretty inflexible code. Resource efficient, but not flexible. Here's what you might do instead: after you've finished querying your sections and articles, make an array that will hold your sections. put an article array in each of those sections with related articles loop though the section array with a foreach , and then through the articles in those with a foreach To accomplish the first and second item, do the following: $sections = array(); $result = $handle->query($query); if($result) while ($storie = $result->fetch_assoc()) { $article = array(); $article["stuff"] = $storie["stuff"]; /* replace "stuff" with things you need from your query */ $sections[$stories['section']][$stories['articleName'] = array('stuff'=>'some value'); } foreach($sections as $sectionName=>$articles) foreach($articles as $articleName=>$article) // print your stuff here // at this point you have all your data organised and you // could've gone though it easily before the 2 foreaches // to search for other stuff you needed.
