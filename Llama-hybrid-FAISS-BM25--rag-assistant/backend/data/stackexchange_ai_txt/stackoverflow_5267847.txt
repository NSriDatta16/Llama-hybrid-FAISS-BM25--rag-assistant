[site]: stackoverflow
[post_id]: 5267847
[parent_id]: 
[tags]: 
When doing Acceptance Testing and following BDD, do you assert database changes or just what the user sees?

I am doing acceptance testing with Steak on a Ruby on Rails application. Imagine I want to test the functionality of a form. It should create an user if all the fields are correct. It should not create a user if any of the fields are incorrect. In the first case, a message will inform that the user has been created: 'The user has been created' In the second case error messages will indicate the errors. I can base my tests on the information displayed. That is, the first test pass if the correct message is displayed. Or I can base my tests on the changes on the database. That is, the first test pass if the database has a new user which contains the data entered. Or I can assert for both conditions, database should change and the appropriate message should be displayed. What is the conceptually adequate way of testing this kind of behaviour, according to Behaviour Driven Development? What is the practical way of testing this kind of behaviour, according to being a Pragmatic Programmer?
