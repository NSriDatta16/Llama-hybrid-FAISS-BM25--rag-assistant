[site]: stackoverflow
[post_id]: 4590408
[parent_id]: 4590248
[tags]: 
use strict; use warnings; use 5.010; use autodie; my $file = '/path/to/file/electricity.txt'; open my $fh, ' ) { chomp; if (/(\w)\1/) { $counter++; s/ (? (? \p{L}) \g{letter} ) /($+{full})/xg; $_ = $counter . ' ' . $_; } say; } You are overlooking a few things. strict and warnings ; 5.010 (or higher!) for say ; autodie so you don't have to keep typing those 'or die'; Lexical filehandles and the three-argument form of open ; A bit nitpicky, but knowing when (not) to use parens for function calls ; Understanding why you shouldn't use $& ; The autoincrement operator .. But on the regex part specifically, $& is only set on matches (m//), not substitution Actually no, ysth is right as usual. Sorry! (I took the liberty of modifying your regex a bit; it makes use of named captures - (?) instead of bare parens, accessed through \g{} notation inside the regex, and the %+ hash outside of it - and Unicode-style properties - \p{Etc}). A lot more about those in perlre and perluniprops , respectively.
