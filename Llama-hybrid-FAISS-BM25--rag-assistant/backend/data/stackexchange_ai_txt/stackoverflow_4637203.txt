[site]: stackoverflow
[post_id]: 4637203
[parent_id]: 4636815
[tags]: 
You say you use C++ in your tags, but use the C interface of opencv. Why? The C++ interface is far friendlier. There are opencv functions for what your functions are doing. http://opencv.willowgarage.com/documentation/cpp/core_operations_on_arrays.html#cv-minmaxloc for min and max and http://opencv.willowgarage.com/documentation/cpp/core_operations_on_arrays.html?highlight=scaleabs#convertScaleAbs to scale the image values. Your access violation is probably because you free your image twice. Your eclaircir returns the input image, so img and img2 point to the same IplImage. One more reason to use the c++ interface.
