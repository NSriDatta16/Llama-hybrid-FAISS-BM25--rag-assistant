[site]: stackoverflow
[post_id]: 5159906
[parent_id]: 
[tags]: 
Python post to soap service undefined behaviour

I have the following in Python 2.6, which works perfectly. webservice = httplib.HTTP("www.racai.ro:80") webservice.putrequest("POST", "/webservices/TextProcessing.asmx?WSDL") webservice.putheader("Host", "www.racai.ro") webservice.putheader("User-Agent", "Python") webservice.putheader("Content-type", "text/xml; charset=\"UTF-8\"") webservice.putheader("Content-length", "%d" % len(f)) webservice.endheaders() webservice.send(f) Now, I have the following in Python 3.1 on which I get Bad Request(Invalid Header name). tstring = template.format(text) webservice = http.client.HTTPConnection("www.racai.ro:80") webservice.putrequest("POST", "/webservices/TextProcessing.asmx?WSDL") webservice.putheader("Host", "www.racai.ro") webservice.putheader("User-Agent", "Python") webservice.putheader("Content-type", "text/xml; charset=\"UTF-8\"") webservice.putheader("Content-length", "%d" % len(tstring)) webservice.endheaders() tstring = tstring.encode() webservice.send(tstring) What am I doing wrong?
