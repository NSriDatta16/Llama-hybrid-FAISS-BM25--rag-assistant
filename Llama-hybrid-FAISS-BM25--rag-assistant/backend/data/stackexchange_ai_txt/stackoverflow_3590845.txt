[site]: stackoverflow
[post_id]: 3590845
[parent_id]: 3590693
[tags]: 
Personally I would not put this in the request-response path. I would log the the raw data in a table (or push it on a queue) and let a background task/thread/cron job deal with that. The queue (or the message passing table) should then just contain pageid, userip, sessionid, useragen,ip. Absolute timings are less important now as long as the background task can keep up. since a single thread will now do the heavy lifting it will not create conflicting locks when updating the unique pageviews tables.
