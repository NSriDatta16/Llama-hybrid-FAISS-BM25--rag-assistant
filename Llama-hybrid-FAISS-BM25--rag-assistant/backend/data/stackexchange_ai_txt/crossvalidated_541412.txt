[site]: crossvalidated
[post_id]: 541412
[parent_id]: 
[tags]: 
How does the option"ties" work in psmatch2 in Stata?

It says in the user's manual : ties not only match nearest neighbor but also other controls with identical (tied) pscores. With neighbor(1) , variables psmatch2 created in our original dataset show that each _id corresponds to a unique _n1 . So, what's the calculation process when there are several identical pscores to match and how it matches with all ties? Whether or not it takes the average of all tied observations, and whether or not "ties" just affects the ATE or ATT or AUE ？ As far as I know, there is not a command like "ties" in R package when doing PSM in R (maybe I am wrong) , so is the "tie" function specific to Stata? Hello @Noah: I draw an example to suppose an output STATA dataset. In the image,we can see the "_weight" of observation "b" is zero, because the frequency of "b" in the "_n1" column is zero. However, "a" and "b" were equally distant from "A" （generate a tie）； "a" and "b" were also equally distant from "B" (generate a tie again). That meant, "b" could actually be matched twice, but both were in a tie, and "b" was not chosen to be a "_n1" twice. The same thing happened in the "_weight" of "A" .( "A" was matched three times but was only chosen and output in "_n1" once). So, maybe the weight during calculation in ties is not showed in the output dataset?
