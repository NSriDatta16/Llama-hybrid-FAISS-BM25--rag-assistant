[site]: stackoverflow
[post_id]: 4073410
[parent_id]: 
[tags]: 
Ruby gem mechanize throwing an error : undefined method ` '

I am using the Ruby gem mechanize to scrape some html... When I load my page and display the necessary results, the page laods fine. After a reload, I get this error when doing "search_results = @agent.submit(search_form)": undefined method ` ' for {emptyelem }:Hpricot::Elem Before I post any code, just does this ring any bells? Thanks. Code: start = Time.now # initial set up @agent = Mechanize.new Mechanize.html_parser = Hpricot page = @agent.get("http://www.google.com/") search_form = page.forms.first # conduct initial search @search_term = search_form.q = params[:search].to_s search_results = @agent.submit(search_form) # helper variables search_qs = ""; @page_number = 1; i = 0; @flag = false; # get the query string structure search_results.links.each { |li| search_qs = li.href if li.href.match(/.*search\?q=.*start=.*/) } # search through all paginated pages while (i false VIEW: Query results for " " on Google What page is this keyword found: "_blank"} %> How long did this query take to run?: seconds Keyword not found in Google search reults STACK TRACE: NoMethodError (undefined method ` ' for {emptyelem }:Hpricot::Elem): mechanize (1.0.0) lib/mechanize/form/field.rb:30:in ` ' mechanize (1.0.0) lib/mechanize/form.rb:171:in `sort' mechanize (1.0.0) lib/mechanize/form.rb:171:in `build_query' mechanize (1.0.0) lib/mechanize.rb:373:in `submit' app/controllers/admin/importer_controller.rb:24:in `check_page_rank' /opt/local/lib/ruby/1.8/webrick/httpserver.rb:104:in `service' /opt/local/lib/ruby/1.8/webrick/httpserver.rb:65:in `run' /opt/local/lib/ruby/1.8/webrick/server.rb:173:in `start_thread' /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start' /opt/local/lib/ruby/1.8/webrick/server.rb:162:in `start_thread' /opt/local/lib/ruby/1.8/webrick/server.rb:95:in `start' /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `each' /opt/local/lib/ruby/1.8/webrick/server.rb:92:in `start' /opt/local/lib/ruby/1.8/webrick/server.rb:23:in `start' /opt/local/lib/ruby/1.8/webrick/server.rb:82:in `start' Rendered rescues/_trace (98.4ms) Rendered rescues/_request_and_response (1.2ms) Rendering rescues/layout (internal_server_error)
