[site]: stackoverflow
[post_id]: 4836392
[parent_id]: 
[tags]: 
Image save on button click throws unhandled Exception error in WP7 and also saves duplicate image

I want to save image in WP7 phone on a button click Following is the code private void wallpaper_Click(object sender, RoutedEventArgs e) { String imageName ="temjpeg"; I // Create virtual store and file stream. Check for duplicate tempJPEG files. var myStore = IsolatedStorageFile.GetUserStoreForApplication(); if (myStore.FileExists(temjpeg)) { myStore.DeleteFile(temjpeg); } IsolatedStorageFileStream myFileStream = myStore.CreateFile(imageName); // Create a stream out of the sample JPEG file. // For [Application Name] in the URI, use the project name that you entered in the previous steps. Also TestImage.jpg is an example, //you must enter your JPEG filename if it is different. StreamResourceInfo sri = null; Uri uri = new Uri("some String",UriKind.Relative); sri = Application.GetResourceStream(uri); // Create a new WriteableBitmap object and set it to the JPEG stream. BitmapImage bitmap = new BitmapImage(); bitmap.SetSource(sri.Stream); WriteableBitmap wb = new WriteableBitmap(bitmap); // Encode WriteableBitmap object to a JPEG stream. // SaveJpeg(WriteableBitmap bitmap, Stream targetStream, int targetWidth, int targetHeight, int orientation, int quality) Extensions.SaveJpeg(wb, myFileStream, wb.PixelWidth, wb.PixelHeight, 0, 85); myFileStream.Close(); // Create a new stream from isolated storage, and save the JPEG file to the media library on Windows Phone. myFileStream = myStore.OpenFile(temjpeg, FileMode.Open, FileAccess.Read); MediaLibrary library = new MediaLibrary(); Picture pic = library.SavePicture(imageName, myFileStream); myFileStream.Close(); } But this code throws InvalidOperationException on line : Picture pic = library.SavePicture(imageName, myFileStream); What could be the problem?.. after the exception problem was solved,now the image is saving multiple times if save button is clicked multiple times.Can someone help ?
