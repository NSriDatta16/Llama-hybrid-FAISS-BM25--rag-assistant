[site]: stackoverflow
[post_id]: 4149232
[parent_id]: 4142271
[tags]: 
Find the background color ($cBack) from a corner pixel (say, top-left) From the top left, move loop foreach (range(1, imagesx($img_rsrc)), setting $cCur.color = imagecolorat($img_asset, $x, $y); $iMarkWidth += 1; $iMarkPosStart = $cCur.x; until you hit a pixel of a different color ($cCur.color != $cBack.color), then $bMarkFound - true : else $bMarkFound = false; If $cCur.color == $cBack.color, $horizMarkArray[] = array( $iMarkPosStart, $iMarkPosStart + $iMarkWidth, $iMarkWidth); continue until end of width If is_empty($horizMarkArray) repeat with the next horizontal row .. and through 11. Repeat for height/verticals, with $vertMarkArray[] At step 4 & 8 you can do any averaging, noise detection, etc. At steps 7 & 11 you can repeat the previous steps and average the $iMarkWidth in order to avoid aliasing errors at the top of the line. In that case you stop either: after N lines, or after $iMarkWidth > {something that obviously wider than any line}
