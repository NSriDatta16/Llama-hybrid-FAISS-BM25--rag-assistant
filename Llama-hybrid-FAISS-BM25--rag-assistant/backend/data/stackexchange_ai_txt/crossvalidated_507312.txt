[site]: crossvalidated
[post_id]: 507312
[parent_id]: 
[tags]: 
Two-stage residual inclusion or two-stage predictor substitution

I am a beginner on this site, so my apologies if I ask something incorrectly here. I have a panel dataset that looks like this: Ultimately, I need to estimate the predictors of patient quality of life (continuous variable bound between 0 and 1) using hospital record data. There are a set of confounding variables like age, sex, education that feed into the likelihood of being on treatment. The same set also feed into a patient's quality of life. So treatment variable (yes - 1 or no 0) becomes an endogenous variable that I need to find an instrument for. The flow diagram looks something like this: Estimating treatment which is a function of a set of disease-related covariates: Treatment (0 or 1) ~ a + b age + c sex etc Estimating patient quality of life which is influenced by treatment and the same set of disease-related covariates: Patient quality of life (continuous, bound between 0 and 1) ~ a + d Treatment + f age + g sex etc My issue is that identifying a proper instrumental variable (IV) for treatment variable is difficult (due to the limitations in the variables collected in hospital record data) that meets the assumptions that confounders have no influence on it and that the IV itself has no direct relationship to patient quality of life. I was asked to do a 2SLS type of simultaneous system of equations modelling for this analysis. I have read that in the first stage one can simply predict the endogenous variable (treatment - yes or no) using a set of covariates. Then, in the second stage, a patient's quality of life is predicted, but the endogenous variable (treatment) is just replaced by its prediction from the first stage. This method being two-stage residual inclusion/two-stage predictor substitution. My questions are: Is this style of two-stage residual inclusion/two-stage predictor substitution a reasonable method to do when it is difficult to find a reliable instrument? If so, could the first stage be a logistic regression model and the second stage be OLS or random effects model or random intercept mixed-effects model? I am not sure if I am allowed to ask for specific library packages in R, but I am a beginner in R and in regression type analysis, but would the "systemfit" package be most appropriate for this? I would greatly appreciate any input/feedback for a beginner like me. Thanks.
