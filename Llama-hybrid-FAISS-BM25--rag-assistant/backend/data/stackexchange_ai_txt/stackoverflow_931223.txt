[site]: stackoverflow
[post_id]: 931223
[parent_id]: 923631
[tags]: 
//static method BOOL CALLBACK WinClass::DlgProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam) { // Store *this* pointer as long in GWL_USERDATA if (msg == WM_INITDIALOG) { ::SetWindowLongPtr(hwnd, DWLP_USER, reinterpret_cast(lParam)); m_hWnd = hWnd; // I assume you really don't want to keep passing the hwnd around } WinClass* wnd = reinterpret_cast(::GetWindowLongPtr(hwnd, GWL_USERDATA)); if (wnd) return wnd->DlgProcImpl(umsg, wParam, lParam); return FALSE; } BOOL WinClass::DlgProcImpl(UINT uMsg, WPARAM wParam, LPARAM lParam) { switch (uMsg) { // your code goes here return FALSE; } return FALSE; } INT_PTR WinClass:DoModalDialog(HINSTANCE hInst, HWND hwndParent, LPCTSTR template) { return ::DialogBoxParam(hInst, template, hwndParent, WinClass::DlgProc, this); }
