[site]: stackoverflow
[post_id]: 320396
[parent_id]: 
[tags]: 
Side effects in an iterator considered harmful?

I've written my first C# iterator today. Woohoo. Interestingly, it has side effects. My iterator filters out invalid files from a directory and returns a sequence of valid files to process. Wheneve it encounters an invlaid file, it moves it to another directory. I tried implementing it as a LINQ query, but really don't like the fact that the predicate for the where clause has side effects. That's a definite smell. I could implement it explicitly, looping over all files and handling the good or the bad in turn, but it's not very elegant. A better solution is to split it into two lists (good and bad) and process each in turn. But then I remembered iterators. And I've now got an iterator that yields the valid files and handles (moves) the invalid ones. So, my question is this: is it a bad idea for an iterator to have side effects such as this? Am I hiding too much functionality in an iterator?
