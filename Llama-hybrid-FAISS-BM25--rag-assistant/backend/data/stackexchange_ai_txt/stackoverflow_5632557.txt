[site]: stackoverflow
[post_id]: 5632557
[parent_id]: 
[tags]: 
C# WPF Drag & Drop ListBox MVVM

I want to enable drag and drop in my application to be able to create connections between components. That doesn't sound too hard, but the problem is the type of components I want connections between. The reason I want to be able to make connections is to be able to make a graph and calculate shortest path, etc. What I have is a ListBox with Components which are placed on a Canvas. The reason I use ListBox is to make the components selectable. I've also made them draggable. The tricky thing now though is that it is not the Components in my ViewModel I want to use drag and drop on, but components within those components. To illustrate this better, see the example picture of a train station and tracks below. I have PlaceableComponents (which are the ones that are in the listbox), i.e. the Track and a Station. A Track is built up of TrackSections, which can be regular track sections and electrified tracks sections). A Station is build up of Platforms, which is built up of Tracks which are built up of TrackSections. So the components(or nodes) I want to connect are the TrackSections, so I want to drag and drop (using right mousebutton) a section onto another section, and this should call a method (command) in my DocumentViewModel (the viewmodel that holds items on the canvas) and not on the sections since the sections doesn't have a clue about other components, nor should they hold the connection. The goal is to create a list of connections(containing from and to components) which should be able to be rendered ontop of everything as lines, using an adornment layer or similar). I might also add that the components which can be used to create connections all implement a INode interface to be able to identify them. I hope I described my question and situation clear enough. I can add that I've found plenty of good posts about drag & dropping but I wasn't able to apply any of them to my case, which is why I'm asking here.
