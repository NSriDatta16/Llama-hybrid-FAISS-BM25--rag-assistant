[site]: stackoverflow
[post_id]: 5044206
[parent_id]: 
[tags]: 
Cannot sign in using form with Mechanize

I am trying to submit a form with mechanize. But nothing happens on submit. I just get the login page again. The form: http://affilate.mikkelsenmedia.dk/partnersystem/mylogins.php require 'Mechanize' agent = WWW::Mechanize.new agent.get("http://affilate.mikkelsenmedia.dk/partnersystem/mylogins.php") form = agent.page.forms.first form.username = 'username' form.password = 'password' form.submit Live http log when login in with browser: http://affilate.mikkelsenmedia.dk/partnersystem/mylogins.php POST /partnersystem/mylogins.php HTTP/1.1 Host: affilate.mikkelsenmedia.dk User-Agent: Mozilla/5.0 (Windows; U; Windows NT 6.1; da; rv:1.9.2.13) Gecko/20101203 Firefox/3.6.13 Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8 Accept-Language: da,en-us;q=0.7,en;q=0.3 Accept-Encoding: gzip,deflate Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7 Keep-Alive: 115 Connection: keep-alive Referer: http://affilate.mikkelsenmedia.dk/partnersystem/mylogins.php Cookie: XXX Content-Type: application/x-www-form-urlencoded Content-Length: 47 username=username&password=password&send=Submit HTTP/1.1 200 OK Date: Fri, 18 Feb 2011 17:07:15 GMT Server: Apache/2.0.63 (CentOS) X-Powered-By: PHP/5.1.6 Expires: Thu, 19 Nov 1981 08:52:00 GMT Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0 Pragma: no-cache Content-Length: 77 Connection: close Content-Type: text/html; charset=UTF-8 Console: irb(main):001:0> require 'Mechanize' => true irb(main):002:0> agent = Mechanize.new { |agent| irb(main):003:1* agent.user_agent_alias = 'Mac Safari' # } {meta} {title "Partner System - Log-in"} {iframes} {frames} {links} {forms # # } {radiobuttons} {checkboxes} {file_uploads} {buttons # }>}> irb(main):006:0> form = agent.page.forms.first irb(main):007:0> form.username = 'username' => "username" irb(main):008:0> form.password = 'password' => "password" irb(main):009:0> form.submit => # } {meta} {title "Partner System - Log-in"} {iframes} {frames} {links} {forms # # } {radiobuttons} {checkboxes} {file_uploads} {buttons # }>}> irb(main):010:0>
