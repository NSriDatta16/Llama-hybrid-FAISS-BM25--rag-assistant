[site]: crossvalidated
[post_id]: 641957
[parent_id]: 641953
[tags]: 
Question 1 Yes, you have correctly described what avg_comparisons() does by default. Question 2 This is an example of “G-Computation”, which is a popular strategy for causal inference in observational data. See this vignette: https://marginaleffects.com/vignettes/gcomputation.html You can also read more about G-Computation in many textbooks like: Hernán MA, Robins JM (2020). Causal Inference: What If. Boca Raton: Chapman & Hall/CRC. Beyond Note that this G-Computation strategy is the default method, but that you can compute contrasts on arbitrary grids of predictors by specifying the newdata argument and using the datagrid() helper function. In particular, note the by argument in datagrid() , which allows you to create grids with representative values of subgroups. For example, options(width = 10000) library(marginaleffects) mod |z|) S 2.5 % 97.5 % hp am # am 1 - 0 -0.05769 0.09514 -0.606 0.5443 0.9 -0.2442 0.12879 160 0 # am 1 - 0 -0.70159 0.27437 -2.557 0.0106 6.6 -1.2393 -0.16383 127 1 # hp +1 -0.00629 0.00816 -0.770 0.4411 1.2 -0.0223 0.00971 160 0 # hp +1 -0.00731 0.00714 -1.024 0.3059 1.7 -0.0213 0.00668 127 1 # # Columns: rowid, term, contrast, estimate, std.error, statistic, p.value, s.value, conf.low, conf.high, predicted_lo, predicted_hi, predicted, vs, hp, am # Type: response Which gives you contrasts based on this grid: datagrid(hp = mean, by = "am", newdata = mtcars) # mpg cyl disp drat wt qsec vs gear carb hp am # 1 17.14737 6.947368 290.3789 3.286316 3.768895 18.18316 0 3.210526 2.736842 160.2632 0 # 2 24.39231 5.076923 143.5308 4.050000 2.411000 17.36000 1 4.384615 2.923077 126.8462 1 Edit in response to a comment by the original poster First, we compute average predictions. Then, we use the hypothesis argument to compare them pairwise. Please refer to these two vignettes for very detailed explanations of this code: https://marginaleffects.com/vignettes/predictions.html https://marginaleffects.com/vignettes/hypothesis.html library(marginaleffects) mod Term Estimate Std. Error z Pr(>|z|) S 2.5 % 97.5 % 1 - 0 0.17 0.0951 1.79 0.0737 3.8 -0.0163 0.356 Columns: term, estimate, std.error, statistic, p.value, s.value, conf.low, conf.high Type: response mean(predict(mod, subset(mtcars, am == 1))) - mean(predict(mod, subset(mtcars, am == 0))) [1] 0.1721376
