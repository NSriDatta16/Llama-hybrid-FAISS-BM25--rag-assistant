[site]: stackoverflow
[post_id]: 4867838
[parent_id]: 4867094
[tags]: 
In this case, I would steer you away from "clever" solutions. Tests are supposed to be fairly procedural recipes, and if you abstract into something like your example, the test loses its readability. I can easily understand the intent and purpose of the first test, but the "condensed" version is as clear as mud. In this case, I would encourage you to not necessarily feel like you need to avoid code duplication if it costs you clarity. If you still want to abstract it, I would recommend something like a helper, like after_refresh { page.should have_selector("foo.bar > baz") } Then, def after_refresh(&block) yield visit current_page yield end That keeps the test expressive, and lets you avoid duplication if you're testing a lot of these refresh cases.
