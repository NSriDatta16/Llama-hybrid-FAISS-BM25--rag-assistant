[site]: stackoverflow
[post_id]: 4441888
[parent_id]: 
[tags]: 
Android: how to shift a Bitmap?

I would like to "shift" a Bitmap by a certain x and y offset. By shift, I mean, If I have a 300x500 bitmap, and I shift it by a y offset of -50, I would expect every pixel to move up 50 pixels, and a 300x50 pixel rectangle to be blank, along the bottom of the Bitmap. The below code works great if shiftX and shiftY are negative, but doesn't work at all for positive values. I have no idea why? Rect srcRect = new Rect(-shiftX, -shiftY, mBitmap.getWidth(), mBitmap.getHeight()); Rect destRect = new Rect(srcRect); destRect.offset(shiftX, shiftY); Canvas bitmapCanvas = new Canvas(mBitmap); bitmapCanvas.drawBitmap(mBitmap, srcRect, destRect, null); I've tried many different versions of this. It seems that trying to translate a Bitmap with a positive y always produces garbage. In this simpler example, a negative shiftY gives expected behavior, but a positive shiftY gives a garbage result: Canvas bitmapCanvas = new Canvas(mBitmap); bitmapCanvas.drawBitmap(mBitmap, 0, shiftY, null); *Update. This is solved by the below code. However, this is not memory efficient. Any suggestions for a better solution? Canvas bitmapCanvas = new Canvas(mBitmap); Bitmap tempBitmap = mBitmap.copy(CONFIG.ARGB_8888, false); bitmapCanvas.drawBitmap(tempBitmap, 0, shiftY, null);
