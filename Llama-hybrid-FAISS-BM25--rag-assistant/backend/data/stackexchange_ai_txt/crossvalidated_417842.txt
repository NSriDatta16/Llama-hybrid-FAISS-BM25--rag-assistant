[site]: crossvalidated
[post_id]: 417842
[parent_id]: 
[tags]: 
Is there a simple formula to calculate sample size needed for precision and recall

I have trained a model on 30 towns and this produces good results. I want to apply the model to hundreds of new towns. These are likely similar but I want to measure results and identify any that do not work well. A typical town is typically 3000 cases that predict 1000 as one and 2000 as zero. To estimate precision and recall I take a random sample of 200 and manually check the labels. Across 200 towns this gives me average 97.2% precision, 97.2% recall for the zeros; and 98.6% precision, 98.7% recall for the ones. Currently I am calculating confidence limit as follows. The 200 sample is 165 zeros and 35 ones. So one tail limit is 1.64 * sqrt(np(1-p)). Assuming my target is 97% this suggests 95% confidence limit of Is this calculation correct? I am particularly unsure as to what is "n" in the formula when precision/recall have been derived from the whole sample. And is there a simple formula for calculating the sample size I should use?
