[site]: stackoverflow
[post_id]: 1334471
[parent_id]: 
[tags]: 
Content-Length header always zero

I set a header in the following way: header('Content-Length: ' . filesize($strPath)); On my PC with ZendServer it works fine and I can download a file with the correct file size. On the production server, a Solaris with Apache and compiled PHP, I get a file with the file size equal to zero, so an empty file. Is there a config parameter? Something that can prevent to set 'Content-Length: 1222'? Thanks. The code: isAdmin()) { $blnRight = true; } else { $objSecMan = new SecurityManager( 'file:'.$objFile->FileID, $objAdminInfo->getUserID() ); $blnRight = $objSecMan->processResource('view'); } // if the user can modify and or publish, can even view the file if(!$blnRight) { $blnRight = $objSecMan->processResource('modify'); if(!$blnRight) { $blnRight = $objSecMan->processResource('publish'); } } //$strPath = __UPLOADS__.DIRECTORY_SEPARATOR.$objFile->FileID; $strPath = 'subdept.csv'; if (file_exists($strPath) && $blnRight) { header('Content-Description: File Transfer'); header('Content-Type: application/octet-stream'); header('Content-Disposition: attachment; filename='.$strPath);//$objFile->Filename); header('Content-Transfer-Encoding: binary'); header('Expires: 0'); header('Cache-Control: must-revalidate, post-check=0, pre-check=0'); header('Pragma: public'); header('Content-Length: ' . filesize($strPath)); ob_clean(); flush(); readfile($strPath); exit; } else { die('Restricted access'); } ?> When I comment the code before $strPath it works, so it must be something in the bloody framework. I would like to throw the whole CMS away.
