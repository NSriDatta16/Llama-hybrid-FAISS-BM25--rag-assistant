[site]: stackoverflow
[post_id]: 5155688
[parent_id]: 
[tags]: 
RSS feed not validating because of substr cutting html characters

Currently unable to get my rss feed to validate through W3C RSS Validator . It seems there's a problem with the time/date. If you click the W3C link it'll show the errors. When I comment out the date it works fine but the date is kinda crucial!! Here's the original script: include "db.php"; header("Expires: 0"); header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT"); header("cache-control: no-store, no-cache, must-revalidate"); header("Pragma: no-cache"); header("Content-type: text/xml"); print " "; ?> MediWales Events The latest Events, updates and announcements from MediWales. http://www.mediwales.com Copyright 2011 MediWales. http://blogs.law.harvard.edu/tech/rss en-us 0000 info@mediwales.com 0000 info@mediwales.com codeworks rss script (1.0.0) http://mediwales.com/login/uploaded/template/logo.png MediWales Website http://www.mediwales.com The latest Events, updates and announcements from MediWales. 144 52 = CURDATE() AND myevents.id = myevents_dates.eventid order by myevents_dates.datefrom"); while ($news = mysql_fetch_assoc($latestnews)) { $datetime = explode(" ",$news[datefrom]); $date = explode("-",$datetime[0]); $time = explode(":",$datetime[1]); $news[description] = strip_tags($news[description]); $news[description] = htmlspecialchars($news[description]); echo " "; echo " ".mb_convert_encoding(htmlspecialchars($news[title]),"US-ASCII")." "; echo " ".mb_convert_encoding(substr($news[description],0, 250),"US-ASCII")." "; echo " http://www.mediwales.com/index.php?id=4&amp;nid=$news[id] "; echo " ".date('D, d M Y H:i:s O', mktime($time[0],$time[1],$time[2],$date[1],$date[2],$date[0]))." "; echo " "; } ?>
