[site]: crossvalidated
[post_id]: 550251
[parent_id]: 
[tags]: 
Down-sampling a difference between two series, retaining High and Low prints

Let's say I have two very high-frequency time series, that I want to downsample at the time of ingest into a database. The typical way to do this is with an Open/High/Low/Close "candle". So far so good. But what if at some future stage, I want to know the High or Low print between the difference of the two series. Open and Close is easy as their index position is always the same, I just take the difference of the two Opens to get the Open of the difference of the series. But the index positions of the High and Low of each series are different, so I cannot simply subtract one OHLC candle, from the other, to get the High and Low prints of the difference series. Of course, I could downsample and ingest the differences too, but then I get size explosion because say for 100 series, I have 100x99 differences. Is there an efficient way to solve this problem? That is, to store downsampled data per-series that also gives me accurate High and Low prints of their differences? Here is an example in R, with two series x1 and x2, where two sample periods of 100 data points each are downsampled to OHLC: You can see already optically that the High(x1 - x2) is not the same as High(x1) - High(x2). Similarly for Low. Here it is numerically: ohlc ohlc(x1) [1] -0.670020 10.692085 -9.049464 -5.235760 > ohlc(x2) [1] -0.5987462 2.3097553 -21.6404571 -20.6999062 > ohlc(x1 - x2) [1] -0.07127379 21.27152458 -1.19531333 15.46414630 > ohlc(x1) - ohlc(x2) [1] -0.07127379 8.38232928 12.59099351 15.46414630 As per the graphical output, you can see that the last two lines are different for high and low. Is there a way to store the Highs and Lows of the differences between a whole lot of series, efficiently (ie, without storing all of them, just storing downsampled details of their "parent" series)? ADDENDUM POST BOUNTY OFFERING I am happy to accept answers that give me a statistical idea of the diff highs and lows, as opposed to the exact number. For example is there some kind of descriptive statistic that would summarise the interval with time information that I could use to get "close" to diff highs and lows.
