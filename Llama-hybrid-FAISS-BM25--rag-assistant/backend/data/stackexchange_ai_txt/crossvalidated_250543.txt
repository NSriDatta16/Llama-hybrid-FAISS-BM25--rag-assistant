[site]: crossvalidated
[post_id]: 250543
[parent_id]: 
[tags]: 
Are we misuse the t-test in randomized experiment?

I am reading the Rubin's Causal Inference book and I found his "potential outcome" framework really fits my tastes. Then I rethink about the t-test we often used in randomized experiment setting. Suppose we have 20 people and we want to know the difference between treatment $A$ and $B$ on heart rate, for example. Then according to Rubin's potential outcome framework, these 20 people will have a distribution of heart rate if everyone got treatment $A$, denote this distribution as $F_A$. Similarly, if all of these 20 people get treatment $B$, then there will be another heart rate distribution, denoted by $F_B$. Note that we, as experimenter only observe one outcome for each people. Now, for each people, we flip a coin to determine whether this people get treatment $A$ or $B$. Say in the end, we get 11 people take treatment $A$ and 9 people take treatment $B$. Then we measure their heart rate, then we compute the average heart rate within each group, then we conduct t-test done. Note that these 11 people got treatment A can be seen as 11 draw from the distribution $F_A$. However, these 11 draw are NOT independent. The reason is because after you draw one guy, you cannot draw that guy for the second time. Hence, this is actually 11 draw WITH REPLACEMENT from the population $F_A$. One can show that these 11 people, whose heart rate is 11 identical but not independent draw from the population $F_A$. Similarly argument applies for the other 9 people who take treatment $B$. Then my question is: for using t-test, I remember it requires the population distribution is normal and the draw is i.i.d. It seems that in this example (and I believe it represents many practical experiments) I made, neither of these assumptions holds. So are we misuse the t-test? Or did I miss something?
