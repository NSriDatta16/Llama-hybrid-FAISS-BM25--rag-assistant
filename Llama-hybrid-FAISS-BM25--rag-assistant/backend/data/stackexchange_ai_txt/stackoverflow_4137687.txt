[site]: stackoverflow
[post_id]: 4137687
[parent_id]: 
[tags]: 
Apache cache while uploading file via FTP

I've got a problem with a basic webcam I set up recently. The local computer uploads a snapshot every few seconds via FTP onto some remote server which clients can access via HTTP. A simple HTML frame reloads the picture every few seconds with a basic meta-tag. So far, so easy, and basically it's working. However, when the client starts downloading the picture right in the moment where the next one is currently being uploaded via FTP, it gets tricky: Apparently, in this case the apache server provides some cached picture - not too bad, since nobody wants some half-uploaded JPEG debris. However, this cache usually is some hours old, so right in between some pictures which show the scenery at night you suddenly get a well-lit noon interlude. Here is where I'm looking for some workaround. How can I get my apache to refresh this apparent image cache more frequently, i.e. that it always provides the last snapshot that has been uploaded completely? Workarounds are fine, too. I thought of writing some PHP wrapper that does the caching issue itself, but here once again I failed in accomplishing my goal: How would my PHP script know if the file is currently in the process of being uploaded? Filesize is not helping since it varies. I even thought of using exec , but is there some linux command which reveals if the file is currently opened in write access? As you might see, I'm pretty much open to any solution to get it going; I'm striving for elegance, of course, but right now any hack would do just fine. Unfortunately, the software uploading the picture cannot be altered or replaced. Thanks alot for any ideas!
