[site]: stackoverflow
[post_id]: 4592624
[parent_id]: 
[tags]: 
Getting SSL to work with Apache/Passenger on Mac OS with "Snow Leopard"

I have a Mac OS with "Snow Leopard" v10.6.5 and I am developing a Ruby on Rails 3 application using Passenger Preference Pane v 1.3. To continue to develop my application I need a SSL support, but I have a similar problem . The steps I've followed are from a default apache osx install: Install Passenger and Passenger Preference Pane. Add my Ruby on Rails application (that works) Create my ca.key, server.crt and server.key as detailed on the Apple website ... ... but during the third step I had to stop for the following reasons happened on editing the /private/etc/apache2/ httpd.conf file (see the Apple website for more info): 1. Port 80 should be changed to #Port 80. I have not found "Port 80", but I think this is not a problem because even if it is present in the code, it has been commented out. 2. You will need to add the following just below where the Port directive was: Listen 443 Listen 80 If I add these lines of code and restart apache2, my application no longer works. 3. [...] The two lines should now look like this: LoadModule ssl_module libexec/httpd/libssl.so AddModule mod_ssl.c Since the code 'AddModule mod_ssl.c' does not exist (LoadModule is ready for use), I tried to add it and restart apache2, but my application no longer works. 4. Now find the “ServerName” directive and make sure it has 127.0.0.1 for it’s entry. ServerName 127.0.0.1 I do not know if I have to enter it, since I use Passenger. However, in the file I found the line of code (already commented) '#ServerName www.example.com:80'. Regarding the code for Passenger for the SSL certificates, I suppose that it must be the same as the problem reported above . I think that this is due to the fact that the guide was written a long time ago. So, what should I do to use SSL with apache2? Just to be clear, I also include the code related to Passenger Preference Pane... .../private/etc/apache2/ httpd.conf LoadModule passenger_module /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.2/ext/apache2/mod_passenger.so PassengerRoot /usr/local/lib/ruby/gems/1.9.1/gems/passenger-3.0.2 PassengerRuby /usr/local/bin/ruby # Added by the Passenger preference pane # Make sure to include the Passenger configuration (the LoadModule, # PassengerRoot, and PassengerRuby directives) before this section. NameVirtualHost *:80 ServerName _default_ Include /private/etc/apache2/passenger_pane_vhosts/*.conf .../private/etc/apache2/passenger_pane_vhosts/ subdomain.domain.com.vhost.conf ServerName subdomain.domain.com DocumentRoot "/Users/ /Sites/subdomain/public" RackEnv development /Sites/subdomain/public"> Order allow,deny Allow from all # SSL Configuration SSLEngine on SSLCipherSuite ALL:!ADH:!EXPORT56:RC4+RSA:+HIGH:+MEDIUM:+LOW:+SSLv2:+EXP SSLOptions +FakeBasicAuth +ExportCertData +StdEnvVars +StrictRequire #Self Signed certificates SSLCertificateFile /private/etc/apache2/ssl/server.crt SSLCertificateKeyFile /private/etc/apache2/ssl/server.key SSLCertificateChainFile /private/etc/apache2/ssl/ca.crt SetEnvIf User-Agent ".*MSIE.*" nokeepalive ssl-unclean-shutdown downgrade-1.0 force-response-1.0
