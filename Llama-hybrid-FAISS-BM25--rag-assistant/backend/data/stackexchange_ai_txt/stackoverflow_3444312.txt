[site]: stackoverflow
[post_id]: 3444312
[parent_id]: 
[tags]: 
How to execute an untrusted Lua file in its own environment from the C API

I want to execute an untrusted .lua file in its own environment by calling lua_setfenv() so that it cannot affect any of my code. The documentation for that function though only explains how to call a function, not how to execute a file. Currently to run the file I use: int error = luaL_loadfile(mState, path.c_str()) || lua_pcall(mState, 0, 0, 0); Do I have to call the "dofile" lua function from the C API with lua_setfenv , or is there a more elegant way to do it?
