[site]: stackoverflow
[post_id]: 2830811
[parent_id]: 
[tags]: 
WIN32 Logon question

We have developed a ASP.NET 3.5 web application with Web Server 2008 and has implemented a custom authentication solution using active directory as the credentials store. Our front end application uses a normal login form to capture the user name and password and leverages the Win32 LogonUser method to authenticate the userâ€™s credentials. When we are calling the LogonUser method, we are using the LOGON32_LOGON_NETWORK as the logon type. The issue we have found is that user profile folders are being created under the C:\Users folder of the web server. The folder seems to be created when a new user who has never logged on before is logging in for the first time. As the number of new users logging into the application grows, disk space is shrinking due to the large number of new user folders getting created. I need to get the token back after the authentication (authenticated \ password locked \ wrong password ) its futher use and based on logic showing different web pages Has anyone seen this behavior with the Win32 LogonUser method? Please answer the following issue: Is it possible to disable this behavior to create the folder as taking 2.78 MB of space for every new user and it eating my disck space? I have tried LOGON32_LOGON_BATCH but it was giving an error 1385 in authentication user. For any solution related to LOGON32_LOGON_BATCH, can you please confirm if that will stop creating the folders at location C:\users. Also for any possible solution I need either I am able to disable the folder to be created at C:\user or Any other option to authenticated user which will not creat folders.
