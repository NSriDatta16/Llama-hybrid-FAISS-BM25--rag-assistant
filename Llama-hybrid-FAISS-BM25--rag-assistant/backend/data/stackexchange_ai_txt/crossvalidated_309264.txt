[site]: crossvalidated
[post_id]: 309264
[parent_id]: 309234
[tags]: 
You are thinking along the right lines but it seems your notation is obscuring things (see bottom of this answer). The event $\tau = k$ means we remain in state $X_0$ for $k-1$ steps (which has probability $p_{ii}^{k-1}$) and then jump to another state on step $k$ (which has probability $1-p_{ii}$). Consequently, $$ \mathbb{P}(\tau = k) = p_{ii}^{k-1}(1-p_{ii}). $$ This "waiting for an event to happen (in a time homogenous setting)" time distribution is called the geometric distribution. The expectation can be evaluated with a "differentiate under the integral" trick: $$ \mathbb{E}[\tau] = \sum_k k p_{ii}^{k-1}(1-p_{ii}) \\ = (1-p_{ii})\sum_k \frac{d}{dp} \left. p^k \right|_{p=p_{ii}} \\ = (1-p_{ii})\frac{d}{dp}\left. \sum_k p^k \right|_{p=p_{ii}} \\ = \frac{1}{1-p_{ii}}, $$ the differentiation in the infinite series being ok because all terms are non-negative. Also we used the formula for a geometric series. Usually "homogeneous" means time homogeneous for Markov chains. With the usual notation for transition matrices $P = (p_{ij})_{i,j \in \mathcal{S}}$, $P^k$ is the $k$-step transition probability (just the matrix power). You appear to use $P^k$ for the transition probability at time step $k$ (which is different to the usual convention). With this understanding, taking $P^j_{ii}=p_{ii}$ (in your notation) makes your attempt look right.
