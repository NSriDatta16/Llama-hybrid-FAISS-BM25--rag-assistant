[site]: stackoverflow
[post_id]: 3373316
[parent_id]: 3373167
[tags]: 
Just check if your selected element is a paragraph, and if not use something like Prototype's Element.up() method to select the first paragraph parent. For example: if(selected_element.nodeName != 'P') { parent_paragraph = $(selected_element).up('p'); } Then just find the difference between the parent_paragraph's text offset and your selected_element's text offset.
