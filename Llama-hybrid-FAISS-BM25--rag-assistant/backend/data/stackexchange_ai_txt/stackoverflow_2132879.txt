[site]: stackoverflow
[post_id]: 2132879
[parent_id]: 
[tags]: 
php mail attachment not working with some clients

I have a webform that allows our agents to upload a pdf attachment that later gets emailed out to our customer. The code I use to build the email I found on a website and it seemed to work well until recently. It seems with some (only a few, gmail for example) mail-clients the attachment is printed out to the body of the email instead of being interpreted as an attachment. It works with almost every client we tried however except a few. Any solution to why this might happen would be greatly appreciated as I do not have much knowledge of this. if ($_FILES["file"]["error"] > 0) { echo "Error: " . $_FILES["file"]["error"] . " "; return; } if ($_FILES["file"]["type"] != "application/pdf") { echo " Attachment has to be valid .pdf Tillbaka "; return; } $file = chunk_split(base64_encode(file_get_contents($_FILES['file']['tmp_name']))); /* striped out some parts about how the body is constructed note that there are no comment fields here in the real version of this sourcecode. */ $msg = "msg here.." //i striped this part out as there's nothing odd about how the body is constructed its plain text $random_hash = md5(date('r', time())); ob_start(); ?> --PHP-mixed- Content-Type: multipart/alternative; boundary="PHP-alt- " --PHP-alt- Content-Type: text/plain; charset="iso-8859-1" Content-Transfer-Encoding: 7bit --PHP-alt- -- --PHP-mixed- Content-Type: application/pdf; name=" " Content-Transfer-Encoding: base64 Content-Disposition: attachment --PHP-mixed- -- \r\nReply-To: no-reply@hidden.com\r\nContent-Type: multipart/mixed; boundary=\"PHP-mixed-".$random_hash."\""))
