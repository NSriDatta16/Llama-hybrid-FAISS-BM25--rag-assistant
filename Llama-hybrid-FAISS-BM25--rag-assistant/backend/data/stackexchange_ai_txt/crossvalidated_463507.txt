[site]: crossvalidated
[post_id]: 463507
[parent_id]: 
[tags]: 
How do I sample data given weights per stratum?

I have different populations of data stratified by gender. I have a raw sample (Mexico) and a target sample (USA). What I want to do is give weights to each stratum and then use the weights to guide me in learning parameters. The table below illustrates the weighting scheme. First, we calculate the proportion per stratum per sample (Mexico or USA). Second, we divide the target proportion (usa_proportion) by the raw one (mexico_proportion) to get the weight. For example, for the Mexico male stratum, the weight is basically saying that we need 1.52 times the number of samples. Let's call this data the non-disease population. | gender | mexico | usa | mexico_proportion | usa_proportion | weight | |--------|--------|-----|-------------------|----------------|--------| | male | 100 | 300 | 0.33 | 0.5 | 1.52 | | female | 200 | 300 | 0.66 | 0.5 | 0.76 | One way I can get to the target is to oversample (or undersample). For example, I can sample randomly with replacement from the Mexico male stratum until I get 300; and likewise for the Mexico female stratum. Does oversampling in this way to calibrate the data make sense? Let's say we have another data called disease and apply the same procedure. | gender | mexico | usa | mexico_proportion | usa_proportion | weight | |--------|--------|-----|-------------------|----------------|--------| | male | 40 | 200 | 0.40 | 0.33 | 0.83 | | female | 60 | 600 | 0.60 | 0.66 | 1.10 | I can apply oversampling to the disease data again to get the target population and proportions. However, although the strata proportions are "correct", the resulting sampled data does not match the original. In the original/raw data, non-disease has 600 and disease has 100, but, in the sampled space, non-disease has 600 and disease has 800. In the original/raw data, non-disease has 300 and disease has 100 In the sampled space, non-disease has 600 and disease has 800 When I use the Logistic Regression model , these weights are what I used to learn the regression coefficients. However, I also need to estimate other parameters; for example, the conditional probability of a symptom given that a person is male and diseased. Any ideas on how to use weights to learn parameters such as conditional probabilities?
