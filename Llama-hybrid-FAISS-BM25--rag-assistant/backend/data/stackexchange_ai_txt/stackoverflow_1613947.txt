[site]: stackoverflow
[post_id]: 1613947
[parent_id]: 1613759
[tags]: 
I think you can organize the output a lot more concisely using something like this: # Use Enumerable#inject to convert Array to Hash results = votes_array.inject({ }) do |hash, vote| # Create hash entry for candidate if not defined (||=) hash[vote[0]] ||= { :votes => [ ] } # Add vote to candidate's array of votes hash[vote[0]][:votes] {"0"=>{:votes=>["1", "2"]}, "1"=>{:votes=>["N", "2", "3", "4"]}, "2"=>{:votes=>["1", "4"]}, "3"=>{:votes=>["4", "1"]}, "4"=>{:votes=>["3", "1"]}} As a note it's advantageous to use Symbols for Hash keys in Ruby since they are generally more efficient than Strings for that kind of application.
