[site]: stackoverflow
[post_id]: 4842194
[parent_id]: 
[tags]: 
separating JPA entities from Hibernate-specific tweaks

I have the following "root" entity (hibernate-specific parts commented out): @Entity //@GenericGenerator(name="system-uuid",strategy="org.hibernate.id.UUIDGenerator") public class Node extends PersistentEntity { private UUID id; private String name; private String displayName; @Id @GeneratedValue //@GeneratedValue(generator="system-uuid") //instead of above line //@Type(type = "pg-uuid") public UUID getId() { return id; } public String getName() { return name; } public String getDisplayName() { return displayName; } //stuff omitted } this is part of a persistence context deployed on JBoss AS 6 (hibernate 3.6) using PostgreSQL 9 for the database (using the latest JDBC4 driver). PostgreSQL has its own uuid column type, which requires some hibernate-specific mappings to use properly (commented out in the above code) - otherwise hibernate will try to map the UUID field to BINARY, then the PostgreSQL dialect does not support BINARY (apparently because postgre has 2 ways of storing binary and hibernate devs dont like it) and the whole thing explodes. uncommenting the lines above produces working code, but it forces me to have a compile-time dependency on hibernate - which i'd rather avoid. attempting to add an hbm.xml file into the mix and referencing it from the persistence.xml does not merge data from the file and annotations, but simply ignores the annotations: i can "fluff" this file up by adding the extra 2 properties, but even if i do that (at which point the Node class works), adding any extra entities, like: @Entity public class Host extends Node { //fields, getters, fluff } i get the following exception: org.hibernate.DuplicateMappingException: Duplicate class/entity mapping Node since hibernate "finds" Node twice. is there any elegant way around this? ideally, Node is the only class for which i'll need hibernate-specific properties, and it will be the root of a large hierarchy of classes. i'd like to avoid either compile-time dependencies on hibernate or mapping everything completely in hbm.xml. for completeness' sake, here's the persistence.xml file im using: java:/my-postgresql-DS META-INF/hbm.xml AUTO
