[site]: stackoverflow
[post_id]: 5556298
[parent_id]: 
[tags]: 
Jquery Animation failing initially in Safari

I have a gallery that executes a series of animations when a thumbnail is clicked. One of those animations-- the resizing of the containing block-- works as expected in IE/Firefox, but fails initially in Safari, then works as expected on subsequent clicks. A gallery using a similar script on the "Installations" page of the site suffers from the same issue, only there it fails to ever calculate the correct width. I've already tried switching from $(document).ready() to $(window).load() without success. I'm desperate for a solution; this project's been delayed because of this issue, and I'm not a developer so I don't have the first clue what could be going wrong. I'd be infinitely grateful for any help. Here's a link to the live site . The code in question is below: $(window).load(function() { $('#back').hide(); $('#full-wrap').hide(); $('#thumb-wrap a').children().not('img').hide();//hide image captions var moveIt = $('#thumb-wrap').outerWidth(); //Get the width of the thumb-wrap div /*if ($.browser.webkit) { var moveIt = $('#thumb-wrap').css({width: '100%'}); $('#full-wrap').width(383); }*/ $('#thumb-wrap a').click(function(){ var $big = $(this).index(); //get 0-based index of the thumb that was just clicked $('#ajax-content > h1').hide();//hide the page title $('#thumb-wrap').hide(); //hide the thumbnails $(this).children().not('img').clone().appendTo($('#gallery-wrap')).wrapAll(' ').delay(600).fadeIn(); //Clone the image captions and wrap them in an article $('#back').fadeIn(500); //make the back button appear $('#full-wrap img').eq($big).siblings().hide(); //Hide all fullsized images that don't match the index of the clicked thumb $('#full-wrap img').eq($big).show(); //reveal fullsized image that does match the index of the clicked thumbnail $('#content').animate({'maxWidth': '+=' + moveIt * 0.5 + 'px', 'left': '6%'}, 'slow'); $('#full-wrap').show(100).animate({ 'right': '+=' + moveIt * 0.75 + 'px'}, 'slow'); //slide out by a distance equal to the width of thumb-wrap. }); $('#back').click(function(){ $(this).fadeOut();//hide the back button $('.article').remove();//remove the article div $('#full-wrap').animate({'right': '0', 'opacity' : 'toggle'}, 400);//hide the fullsize image div $('#content').animate({'maxWidth': moveIt, 'left' : '43%'}, 400); $('#thumb-wrap').delay(500).fadeIn(500);//reveal the thumbnails $('#ajax-content > h1').delay(500).fadeIn(100);//show the page title }); }); Back DC1F Material: Merino wool, raw silk, silk gauze, cashmere, wild silk, raw linen and silk yard. DC2F Material: Merino wool, silk organza, and wild silk. DC3F Material: Silk organza, merino wool, handspun wool and silk, and raw silk. Dyed with color derived from weld. DC4F Material: Merino wool, silk organza, raw silk, raw linen, and Wensleydale wool. Dyed with color derived from onion skins. DC5F DC6F Material: Merino wool, silk chiffon, raw silk, and raw linen. DC7F Material: Natural yak hair, merino wool, raw silk, and handspun silk. DC9F Material: Merino wool, raw silk, silk organza, and raw linen. Dyed with color derived from weld. DC10F Material: Merino wool, silk chiffon, and raw silk. Yellow is dyed with color derived from weld.
