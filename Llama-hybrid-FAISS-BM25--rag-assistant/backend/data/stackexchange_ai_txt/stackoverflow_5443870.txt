[site]: stackoverflow
[post_id]: 5443870
[parent_id]: 
[tags]: 
Reading a BMP into memory using the correct structures

I'm currently doing a steganography project (for myself). I have done a bit of code already but after thinking about it, I know there are better ways of doing what I want. Also - this is my first time using dynamic memory allocation and binary file I/O. Here is my code to hide a text file within a BMP image: Link to code Also note that I'm not using the LSB to store the message in this code, but rather replacing the alpha byte, assuming its a 32 bit per pixel (bbp) image. Which is another reason why this won't be very flexible if there are 1, 4, 8, 16, 24 bpp in the image. For example if it were 24 bbp, the alpha channel will be 6 bits, not 1 byte. My question is what is the best way to read the entire BMP into memory using structures? This is how I see it: Read BITMAPFILEHEADER Read BITMAPINFOHEADER Read ColorTable (if there is one) Read PixelArray I know how I to read in the two headers, but the ColorTable is confusing me, I don't know what size the ColorTable is, or if there is one in an image at all. Also, after the PixelArray, Wikipedia says that there could be an ICC Color Profile, how do I know one exists? Link to BMP File Format (Wikipedia) Another thing, since I need to know the header info in order to know where the PixelArray starts, I would need to make multiple reads like I showed above, right? Sorry for all the questions in one, but I'm really unsure at the moment on what to do.
