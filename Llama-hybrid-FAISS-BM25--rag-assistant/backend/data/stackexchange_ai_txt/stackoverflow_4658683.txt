[site]: stackoverflow
[post_id]: 4658683
[parent_id]: 
[tags]: 
Symfony: issue with switching context

I am using Symfony 1.2 and I have some issues switching context. This code was working fine: require_once(dirname(__FILE__).'/../config/ProjectConfiguration.class.php'); $configuration = ProjectConfiguration::getApplicationConfiguration('account', 'prod', false); $context = sfContext::createInstance($configuration, 'account-prod'); $userToLogin = PcUserPeer::retrieveByEmailAddress("myemail@example.com"); Auth::login($context->getUser(), $userToLogin, false, false); echo "all done."; At some point requirements changed and I needed to use the 'public' application before the 'account' one. Then I changed to: require_once(dirname(__FILE__).'/../config/ProjectConfiguration.class.php'); // {{{ new code: $configuration = ProjectConfiguration::getApplicationConfiguration('public', 'prod', false); sfContext::createInstance($configuration); // some code using the public app... // }}} $configuration = ProjectConfiguration::getApplicationConfiguration('account', 'prod', false); $context = sfContext::createInstance($configuration, 'account-prod'); // {{{ new code: sfContext::switchTo('account-prod'); // }}} $userToLogin = PcUserPeer::retrieveByEmailAddress("myemail@example.com"); CustomAuth::login($context->getUser(), $userToLogin, false, false); echo "all done."; Basically I added a switchTo call. After the change, the code got broken and the error message is this: PHP Fatal error: Call to a member function prepare() on a non-object in /var/www/html/myproj/symfony/storage/sfPDOSessionStorage.class.php on line 109 Thanks for your help, Dan
