[site]: stackoverflow
[post_id]: 4883335
[parent_id]: 
[tags]: 
Append query string to request.request_uri without knowing if there was a query string

When a user arrives to my site on an iPhone I want to present them with a page with 2 options: 1) Go get our app or 2) Continue on to the requested URL I do this by checking the user agent in my application controller and rendering a view. For option 2 to work properly on that view I want the link to preserve the original URL and append a query string parameter fullsite=1. I look for that query string parameter param in a before_filter in my application controller and set a cookie so that the user is not prompted again. What is the cleanest way to append a query string parameter to a request.request_uri knowing that that request url may or may not have had a query string to start with? I know it is straight forward to check if the request had parameters but I'm wondering if there is a helper to append a parameter cleanly in either case (no params or with existing params) without evaluating things on my own. Seeking the correct "railsy" way to do this.
