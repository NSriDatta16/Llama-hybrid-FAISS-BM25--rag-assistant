[site]: stackoverflow
[post_id]: 3857660
[parent_id]: 3855367
[tags]: 
it is ok now : id('draggable').addEventListener("touchstart", function (e) { e.preventDefault(); var clone_div = jmQuery(' ' + ' Drag me to my target ' + ' '); e.stopPropagation(); function touchmove(e) { var x = e.pageX; var y = e.pageY; clone_div.style.left = x - 70 + 'px'; clone_div.style.top = y - 70 + 'px'; id('demo').insertBefore(clone_div, id('demo').firstChild); if (check_drop(e)) { id('droppable').style.background = 'red'; } else { id('droppable').style.background = '#F6A828'; } } function check_drop(e) { var drop_bounds = id('droppable').getBoundingClientRect(); var now_bounds = { left: e.pageX-document.body.scrollLeft - 50, top: e.pageY -document.body.scrollTop- 50, right: e.pageX -document.body.scrollLeft+ 50, bottom: e.pageY -document.body.scrollTop + 50 } //判断是否在droppable内 if (!(now_bounds.right drop_bounds.right || now_bounds.bottom drop_bounds.bottom) ) { return true; } return false; } function touchend(e) { id('droppable').style.background = '#F6A828'; if (check_drop(e)) { id('droppable').appendChild(jmQuery(id('draggable_').innerHTML)); }else{ } id('draggable_').parentNode.removeChild(id('draggable_')); document.removeEventListener('touchmove', touchmove); document.removeEventListener('touchend', touchend); } document.addEventListener("touchmove", touchmove); document.addEventListener("touchend", touchend); });
