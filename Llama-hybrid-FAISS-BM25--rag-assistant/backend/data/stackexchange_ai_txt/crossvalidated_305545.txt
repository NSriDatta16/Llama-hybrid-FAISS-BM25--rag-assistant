[site]: crossvalidated
[post_id]: 305545
[parent_id]: 
[tags]: 
Covariance matrix of the measurement in a Kalman filter

I want to fuse the estimation from two vision-based algoritms for a moving robot using Kalman filter. The state of the robot is defined as: $q_{k}=(x,y,\theta)$ where $x$ and $y$ are the coordinates in the $XY$ plan and $\theta$ is the heading angle. The first algorithm outputs the control $u_{k-1}$ and the evolution of the state over time is: $q_{k|k-1}=f(q_{k-1|k-1},u_{k-1})$ The second algorithm gives the measurement: $z_{k}=h(q_{k|k-1})$ The outputs of the fusion are the updated estimate $q_{k|k}$ and its covariance $\Sigma_{q_{k|k}} \in \mathbb{R}^{3\times3}$. We compute them according to Kalman filter equations: $q_{k|k}=q_{k|k-1}+\Sigma_{q_{k|k-1}}{(\Sigma_{q_{k|k-1}}+\Sigma_{z_{k}})}^{-1}(z_{k}-q_{k|k-1})$ $\Sigma_{q_{k|k}}=\Sigma_{q_{k|k-1}}-\Sigma_{q_{k|k-1}}{(\Sigma_{q_{k|k-1}}+\Sigma_{z_{k}})}^{-1}\Sigma_{q_{k|k-1}}$ My question concerns the estimation of $\Sigma_{z_{k}}$. In fact, with image processing techniques and using that the algorithm used in the measurement step could be assumed as a Markov chain, I was able to estimate $P(z_{k}|q_{k})$. I don't really know the theoretical aspect of Kalman filter equations (the probabilistic formulation) Is it possible to directly derive $\Sigma_{z_{k}}$ from $P(z_{k}|q_{k})$?
