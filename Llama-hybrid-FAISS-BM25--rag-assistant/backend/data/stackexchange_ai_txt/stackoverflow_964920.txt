[site]: stackoverflow
[post_id]: 964920
[parent_id]: 
[tags]: 
Is it possible to reasonably workaround an antivirus scanning the working directory?

My Win32 application performs numerous disk operations in a designated temporary folder while functioning, and seriously redesigning it is out of the question. Some clients have antivirus software that scans the same temporary directory (it simply scans everything). We tried to talk them into disabling it - it doesn't work, so it's out of the question either. Every once in a while (something like once for every one thousand file operations) my application tries to perform an operation on a file which is at that very time opened by the antivirus and is therefore locked by the operating system. A sharing violation occurs and causes an error in my application. This happens about once in three minutes on average. The temporary folder can contain up to 100k files in most typical scenarios, so I don't like the idea of having them open at all times because this could cause running out of resources on some edge conditions. Is there some reasonable strategy for my application to react to situations when a needed file is locked? Maybe something like this? for( int i = 0; i Is this a viable strategy? If so, how many times and how often should my application retry? What are better ideas if any?
