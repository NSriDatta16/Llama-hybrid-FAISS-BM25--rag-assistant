[site]: stackoverflow
[post_id]: 5382891
[parent_id]: 5149621
[tags]: 
The extension commands rebase and collapse should do the trick. Consider the following small repository as an example: $ hg glog -p o changeset: 3:bc701d12d956 | tag: tip | summary: hack | | diff --git a/file b/file | --- a/file | +++ b/file | @@ -1,1 +1,1 @@ | -hello world | +hello big world | o changeset: 2:2bb8c95d978e parent: -1:000000000000 summary: history breaking svn reorganization diff --git a/file b/file new file mode 100644 --- /dev/null +++ b/file @@ -0,0 +1,1 @@ +hello world @ changeset: 1:b578b2ec776b | summary: hack | | diff --git a/file b/file | --- a/file | +++ b/file | @@ -1,1 +1,1 @@ | -hello | +hello world | o changeset: 0:c3d20f0b7072 summary: initial diff --git a/file b/file new file mode 100644 --- /dev/null +++ b/file @@ -0,0 +1,1 @@ +hello It basically resembles your situation, i.e. there are two unrelated lines of history, where the first revision of the second line (r2) is a plain add of everything present at the last revision of the first line (r1). You can put the second line onto the first one with rebase : $ hg rebase -s 2 -d 1 $ hg glog @ changeset: 3:020d1b20caa8 | summary: hack | o changeset: 2:2a44eb4b74c3 | summary: history breaking svn reorganization (empty changeset now) | o changeset: 1:b578b2ec776b | summary: hack | o changeset: 0:c3d20f0b7072 summary: initial As you see, the two lines have been joined. Revision 2 now is an obsolete empty changeset. You can get rid of it by using the collapse command to combine revisions 1 and 2: $ hg collapse -r 1:2 $ hg glog -p @ changeset: 2:d283fe96a5e6 | tag: tip | summary: hack | | diff --git a/file b/file | --- a/file | +++ b/file | @@ -1,1 +1,1 @@ | -hello world | +hello big world | o changeset: 1:c486d8191bf0 | summary: hack | | diff --git a/file b/file | --- a/file | +++ b/file | @@ -1,1 +1,1 @@ | -hello | +hello world | o changeset: 0:c3d20f0b7072 summary: initial diff --git a/file b/file new file mode 100644 --- /dev/null +++ b/file @@ -0,0 +1,1 @@ +hello Now the unrelated lines of history are joined in a meaningful way.
