[site]: stackoverflow
[post_id]: 5385089
[parent_id]: 5384064
[tags]: 
I'm not quite sure why your code isn't working, since it looks OK (assuming that remoteUrl is declared outside of the each closure. In any case, this can be simplified quite a bit. First, by leveraging the getParameterMap() method of ServletRequest and second, by using the obscure but very powerful inject method from the Groovy collections API. Inject takes an initial value (which I'm presuming you set remoteUrl to in your actual code), and then iterates over a collection, passing an accumulated value (or the initial value on the first pass through), and the item. This is very convenient for calculating a value whose result is somehow derived from every element in a collection. That said, I think you can do something like this to get the result you want: protected void doCacheTransport(HttpServletRequest request, HttpServletResponse response) { def remoteUrl = request.parameterMap.entrySet().inject('http://someurl.example.com/?key=1828372') { url, entry -> if (entry.key == "url") return url else url } If you can provide more details on what, exactly you are doing, I can provide a more helpful example.
