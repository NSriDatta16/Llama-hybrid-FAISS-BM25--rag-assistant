[site]: crossvalidated
[post_id]: 108732
[parent_id]: 
[tags]: 
Defining constraint on prior with potential class

I have written an MCMC code in order to estimate parameters Xpos, Ypos, MASS and concentration with a set of input data gal_pos , observed_g (the parameter which the model gets compared) and the uncertainty in this parameter, shearerr . The problem is that the MCMC chain will break down if MASS would be less than $10^{13}$ due to the properties of the likelihood function nfwmodeltools.shearprofile_like and it follows the exponential and LogNormal prior shape. In order to put the constraint on MASS and concentration , I have defined a potential class but I don't know how it should be used and where, in order to enforce MASS to follow lower bound. import pymc as pm import nfwmodeltools import numpy as np import math import random import matplotlib.pyplot as plt from scipy.stats import expon import astropy.cosmology from astropy.cosmology import FlatLambdaCDM cos = FlatLambdaCDM(H0=70, Om0=0.3) from astropy import units as u cosmo=nfwmodeltools.global_cosmology() print "Reading input catalogues as observed values......." shear=np.loadtxt('/vol/cluster.shear.cat') #my shear catalogue data=np.loadtxt('/vol/Extended.MockFidSurvey.dat') for i in range(len(data[:,0])): if (i x_h) or (value y_h) or (value = math.pow(10,13)) and (MASS I will appreciate if somebody give me advise that where it should be used and which kind of change I need to make in my code.. running the code with above configuration I got this error: ERROR: ZeroProbability: Potential concentration_bound forbids its parents' current values [pymc.PyMCObjects] Traceback (most recent call last): File "MASS_NFW_MCMC.py", line 148, in M = pm.MCMC(nfw(gal_pos,observed_g,g_err,rho_crit,rho_c_over_sigma_c,beta),db='pickle',dbname='NFWTracer.pickle') File "MASS_NFW_MCMC.py", line 102, in nfw def concentration_bound(concentration=concentration): File "/vol/anaconda/lib/python2.7/site-packages/pymc/InstantiationDecorators.py", line 215, in potential return instantiate_pot(__func__) File "/vol/anaconda/lib/python2.7/site-packages/pymc/InstantiationDecorators.py", line 208, in instantiate_pot return Potential(parents=parents, **kwds) File "/vol/anaconda/lib/python2.7/site-packages/pymc/PyMCObjects.py", line 275, in __init__ if not isinstance(self.logp, float): File "/vol/anaconda/lib/python2.7/site-packages/pymc/PyMCObjects.py", line 327, in get_logp raise ZeroProbability(self.errmsg) pymc.Node.ZeroProbability: Potential concentration_bound forbids its parents' current values
