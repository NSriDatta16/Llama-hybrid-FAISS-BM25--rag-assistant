[site]: stackoverflow
[post_id]: 5476583
[parent_id]: 5469998
[tags]: 
This tested function works: function parse_query_vars(text) { // Extract name=value pairs from URL query string. // Empty object to store name, value pairs. var qvars = {}, // Capture non-empty query string in $1. re_q = /\?([^#]+)/, // From '?' up to '#' or EOS. // Capture variable name in $1 and value in $2. re_nv = /([^=]+)=([^&]*)(?:&(amp;)?|$)/gi, // Match array for query string and va=val pairs. m = text.match(re_q), // Query string plucked from URL q = ''; // If there is a query string, copy to q var. if (m) q = m[1]; while (m = re_nv.exec(q)) { qvars[m[1]] = m[2]; } return qvars; // Return results in object } It first extracts any query string from the URL, then iteratively parses out name=value pairs and returns the results in an object. It handles name value pairs separated by either & or &amp; and works if the URL has a #fragment following the query.
