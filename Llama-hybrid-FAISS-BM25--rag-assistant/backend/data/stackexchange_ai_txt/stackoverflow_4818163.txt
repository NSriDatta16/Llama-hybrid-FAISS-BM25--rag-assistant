[site]: stackoverflow
[post_id]: 4818163
[parent_id]: 4817917
[tags]: 
If you take some of the suggestions presented here and multiply by 127, you're going to find that 127 is not very well represented in your output. Maybe this won't be a problem for you, but there's a small change that makes a big difference. You might think that rounding would help, but it does not. The number of values at 127 will still be only half that of the other values, and now the number of values at 0 will also be half of the average. The correct formula: int amplitude = static_cast (value * (128-epsilon)); // where epsilon is a very small floating point value
