[site]: crossvalidated
[post_id]: 124489
[parent_id]: 
[tags]: 
How to calculate the HR and 95%CI using the log-rank test in R?

The R survival package is very useful to do survival analysis. And I know the survdiff function can be used to compare the difference of survival time in two or more groups. And the p-value number can also be calculated as below. However, how can I calculate the HR and 95% CI using the log-rank test. And I also know I can use the coxph() function to calculate the HR and 95% CI using the Cox regression. However, as the assumption of both the Cox model and log-rank test are that the hazard ratio stay constant over time, so I think I can also calculate the HR and 95% CI using the log-rank test. According to the book Survival Analysis: A Practical Approach , I got two formulas on Page 62 and 66 to do this (as shown below). So I wrote the R code as below, is there anybody know whether I'm right? Input codes: library(survival) data.survdiff Output results: > data.survdiff Call: survdiff(formula = Surv(data[, "os_whw"], data[, "status_whw"] == 1) ~ data[, "pcascore"] >= median(data[, "pcascore"])) N Observed Expected (O-E)^2/E (O-E)^2/V data[, "pcascore"] >= median(data[, "pcascore"])=FALSE 4 3 4.33 0.411 0.974 data[, "pcascore"] >= median(data[, "pcascore"])=TRUE 5 5 3.67 0.486 0.974 Chisq= 1 on 1 degrees of freedom, p= 0.324 > p.val [1] 0.3235935 > HR [1] 1.970484 > up95 [1] 7.917248 > low95 [1] 0.4904239
