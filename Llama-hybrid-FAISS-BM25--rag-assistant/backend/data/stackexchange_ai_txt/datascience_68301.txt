[site]: datascience
[post_id]: 68301
[parent_id]: 587
[tags]: 
Something changed on this web site recently. The code directly below works for me. import csv import requests from bs4 import BeautifulSoup url_base = "https://finviz.com/quote.ashx?t=" tckr = ['MSFT','AAPL','AMZN','FB','GOOG'] i = 1 url_list = [(s, url_base + s) for s in tckr] headers = {'User-Agent': 'Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:76.0) Gecko/20100101 Firefox/76.0'} with open('C:\\Users\\ryans\\OneDrive\\Desktop\\AAA.csv', 'w', newline='') as f_out: writer = csv.writer(f_out, delimiter=',', quotechar='"', quoting=csv.QUOTE_MINIMAL) for t, url in url_list: print(i) i = i + 1 print(t, url) print('Scrapping ticker {}...'.format(t)) soup = BeautifulSoup(requests.get(url, headers=headers).content, 'html.parser') writer.writerow([t]) for row in soup.select('.snapshot-table2 tr'): writer.writerow([td.text for td in row.select('td')]) I deleted the older, non-working, code.
