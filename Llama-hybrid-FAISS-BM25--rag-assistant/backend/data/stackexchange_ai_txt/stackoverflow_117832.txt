[site]: stackoverflow
[post_id]: 117832
[parent_id]: 117792
[tags]: 
You should use GetWindowLongPtr() / SetWindowLongPtr() (or the deprecated GetWindowLong() / SetWindowLong() ). They are fast and do exactly what you want to do. The only tricky part is figuring out when to call SetWindowLongPtr() - You need to do this when the first window message is sent, which is WM_NCCREATE . See this article for sample code and a more in-depth discussion. Thread-local storage is a bad idea, since you may have multiple windows running in one thread. A hash map would also work, but computing the hash function for every window message (and there are a LOT ) can get expensive. I'm not sure how you mean to use thunks; how are you passing around the thunks?
