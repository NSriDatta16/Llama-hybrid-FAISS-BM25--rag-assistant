[site]: stackoverflow
[post_id]: 5648504
[parent_id]: 5429181
[tags]: 
There seems to be some kind of bug in this version of Magento, the product catalog index price not updating on product save. So what you can do is by pass the price condition like described below. Update addAttributeToSort function of Mage_Catalog_Model_Resource_Eav_Mysql4_Product_Collection class. Comment out the following code:- // if ($attribute == 'price' && $storeId != 0) { // $websiteId = Mage::app()->getStore()->getWebsiteId(); // $customerGroup = Mage::getSingleton('customer/session')->getCustomerGroupId(); // // if ($this->isEnabledFlat()) { // $priceColumn = 'e.display_price_group_' . $customerGroup; // $this->getSelect()->order("{$priceColumn} {$dir}"); // } // else { // $priceAttributeId = $this->getAttribute('price')->getId(); // // $entityCondition = '_price_order_table.entity_id = e.entity_id'; // $storeCondition = $this->getConnection()->quoteInto( // '_price_order_table.website_id = ?', // $websiteId // ); // $groupCondition = $this->getConnection()->quoteInto( // '_price_order_table.customer_group_id = ?', // $customerGroup // ); // $attributeCondition = $this->getConnection()->quoteInto( // '_price_order_table.attribute_id = ?', // $priceAttributeId // ); // // $this->getSelect()->joinLeft( // array('_price_order_table'=>$this->getTable('catalogindex/price')), // "{$entityCondition} AND {$storeCondition} AND {$groupCondition} AND {$attributeCondition}", // array() // ); // $this->getSelect()->order('_price_order_table.value ' . $dir); // // /** // * Distinct we are using for remove duplicates of products which have // * several rows in price index (like grouped products) // */ // $this->getSelect()->distinct(true); // } // // return $this; // } You can do this in Magento standard way other than commenting out the core code. Hope this helps.
