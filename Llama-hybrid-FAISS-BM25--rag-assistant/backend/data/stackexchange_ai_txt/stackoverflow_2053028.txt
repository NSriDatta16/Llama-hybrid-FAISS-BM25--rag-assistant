[site]: stackoverflow
[post_id]: 2053028
[parent_id]: 
[tags]: 
Wait for getJSON response

i'm trying to make a script using Yahoo's YQL in a web applicaion. The script looks over a text paragraph and then it finds some references and appends on the text as a popup. It all goes fine until I have to loop through each reference with class "verso", after getting my response it appends all the references in the last element of the list. Here is the javascript code (rewrited and simplified) var url=""; var version = "RVR1960"; var verso = ""; $("div.post-body").find(".verso").each(function(i){ $resultado = null; verso = $(this).text(); url = "http://query.yahooapis.com/v1/public/yql?" + "q=select%20*%20from%20html%20where%20url%3D%22"+ encodeURIComponent("http://www.biblegateway.com/passage/?search=" + verso + "&version=" + version) + "%22&format=xml'&callback=?"; $pasaje = $(this); $.getJSON(url,function(data){ if(data.results[0]) { $resultado = null; $resultado = $(data.results[0]).find("div.result-text-style-normal:first"); $resultado.find("h5, div, a").remove(); $(" &ldquo; "+ $resultado.html()+ " "+verso+" "+ " &rdquo; ").appendTo($pasaje); } else { $resultado = $(" Pasaje no encontrado. "); } }); }); and here is my html: Juan 3:16 Mateo 11:28 Juan 1:1 I'll appreciate all the help
