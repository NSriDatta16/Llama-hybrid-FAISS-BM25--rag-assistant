[site]: stackoverflow
[post_id]: 5589297
[parent_id]: 
[tags]: 
JS Code over AJAX with jQuery - is this method safe?

I have an AJAX call that returns a HTML snippet that needs to be injected to the page, as well as some JS code under a 'script' element. There are no html/body/head elements in the response, just the HTML that needs to be injected. so the response could be: lorem ipsum alert(1); From my understanding, JS code that was fetched via AJAX needs to be added to the page by either using eval() or by creating a element, i.e.: var script = document.createElement('script'); script.type = 'text/javascript'; script.text = response; var head = document.getElementsByTagName("head")[0]; head.appendChild(script); But, I've tried embedding the response as is, using .html() in jQuery - and to my surprise, it seems that both the JS code and the HTML part, were handled as expected, the HTML part was added to the page, and the JS code ran just fine. this is what I've tried: $.ajax({ url: url, success: function(data) { $('#foo').html(data); // #foo now contains ' lorem ipsum ' and the JS alert was fired } }); Is this a safe method? will it work on every browser? If it's not - what would be the best way to accomplish what I'm trying (I'll probably have to parse the response to separate the elements from the rest) ? Many thanks in advance!
