[site]: crossvalidated
[post_id]: 311376
[parent_id]: 311334
[tags]: 
The difference in differences is what is called an interaction in statistics (as Dimitriy Masterov has already pointed out). You want to test whether the time effect is different when you intervene compared with when you don't. Your data is most naturally modelled as binomial, i.e., the number of top scores out of total people surveyed in each area at each time follows a binomial distribution, assuming that all the customers respond independently. The standard statistical method for testing for interaction with binomial data is to run a binomial logistic regression. In the R language, the code for this is as follows. First input the data: > NTopScore N Area Time Proportion Then fit the logistic regression. In R this is done by running a generalized linear model, and telling R that the data should be treated as binomial: > fit summary(fit) Call: glm(formula = Proportion ~ Area * Time, family = binomial, weights = N) Deviance Residuals: [1] 0 0 0 0 Coefficients: Estimate Std. Error z value Pr(>|z|) (Intercept) -0.03077 0.17543 -0.175 0.86076 AreaB -0.37469 0.26202 -1.430 0.15271 Time1 0.85397 0.26599 3.211 0.00132 ** AreaB:Time1 -0.04304 0.38768 -0.111 0.91160 --- Signif. codes: 0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 (Dispersion parameter for binomial family taken to be 1) Null deviance: 2.3047e+01 on 3 degrees of freedom Residual deviance: 7.1054e-15 on 0 degrees of freedom AIC: 28.523 Number of Fisher Scoring iterations: 3 We see that the the p-value for the interaction (difference in differences) is $P=0.9116$ , obviously not significant. The model is fitted on a log-odds (logit) scale. The AreaB parameter shows that Area B gives a lower proportion than Area A at Time 0. The Time1 parameter shows that Time 1 gives a higher proportion than Time 0 in Area A. The AreaB:Time1 parameter is the difference in differences. Another way to fit the logistic regression is to estimate the before-after time effect separately for areas A and B. This shows that the time effect is virtually identical for the two areas, regardless of whether you had an intervention for not: > fit summary(fit) Call: glm(formula = Proportion ~ Area + Area:Time, family = binomial, weights = N) Deviance Residuals: [1] 0 0 0 0 Coefficients: Estimate Std. Error z value Pr(>|z|) (Intercept) -0.03077 0.17543 -0.175 0.86076 AreaB -0.37469 0.26202 -1.430 0.15271 AreaA:Time1 0.85397 0.26599 3.211 0.00132 ** AreaB:Time1 0.81093 0.28204 2.875 0.00404 ** --- Signif. codes: 0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 (Dispersion parameter for binomial family taken to be 1) Null deviance: 2.3047e+01 on 3 degrees of freedom Residual deviance: -5.3291e-15 on 0 degrees of freedom AIC: 28.523 Number of Fisher Scoring iterations: 3 The time effect in Area A is 0.86397 and that in Area B is 0.81093. The difference in the time effects is $0.81093 - 0.86397 = -0.04304$ , which is equal to the interaction estimate we saw in the first regression.
