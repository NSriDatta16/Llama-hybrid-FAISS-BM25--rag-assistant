[site]: stackoverflow
[post_id]: 4054541
[parent_id]: 
[tags]: 
How to download to an sd card in AIR

I have a download function that I got from Andy Matthews , and an sd Card function that I got from Christian Cantrell . Now I need to download to the sd Card. Q: How do I specify that storage = e.storageVolume.rootDirectory.nativePath? var remoteFile = 'http://www.CompanyName.com/ClientName.txt'; jQuery(function($){ air.StorageVolumeInfo.storageVolumeInfo.addEventListener(air.StorageVolumeChangeEvent.STORAGE_VOLUME_MOUNT, onVolumeMount); air.StorageVolumeInfo.storageVolumeInfo.addEventListener(air.StorageVolumeChangeEvent.STORAGE_VOLUME_UNMOUNT, onVolumeUnmount); var PluggedIn = false; var volumes = air.StorageVolumeInfo.storageVolumeInfo.getStorageVolumes(); for (var i = 0; i Please insert your CompanyName card. '); } }) function onVolumeMount(e) { if (e.storageVolume.isRemovable) { $('#content').html(' Thank you '); if (e.storageVolume.name == 'COMPANYNAME') { var myNativePath = e.storageVolume.rootDirectory.nativePath; var storage = 'desktopDirectory'; // myNativePath downloadFile(remoteFile, storage); } else { $('#content').append(' The card you just plugged in is not CompanyName. '); } } else { $('#content').append(' This device is not removable '); } } function onVolumeUnmount(e) { $('#content').html(' Goodbye! '); } function downloadFile(remoteFile, storage){ var fn = remoteFile.match(/[a-z0-9-+\._]+?$/i); var myFile = air.File[storage].resolvePath(fn); var myURLStream = new air.URLStream(); myURLStream.addEventListener(air.Event.COMPLETE, function(e){ var myByteArray = new air.ByteArray(); myURLStream.readBytes(myByteArray, 0, myURLStream.bytesAvailable); var myFileStream = new air.FileStream(); myFileStream.openAsync(myFile, air.FileMode.WRITE); myFileStream.writeBytes(myByteArray, 0); myFileStream.close(); }); myURLStream.load(new air.URLRequest(remoteFile)); }
