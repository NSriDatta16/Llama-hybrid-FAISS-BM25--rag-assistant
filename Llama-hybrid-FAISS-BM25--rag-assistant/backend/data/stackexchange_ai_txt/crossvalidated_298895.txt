[site]: crossvalidated
[post_id]: 298895
[parent_id]: 
[tags]: 
how should I do the cross-validation after undersampling for imbalance dataset?

Last week, I encountered a problem which mix cross-validation and undersampling . I am so confused about it. This is a small data mining competition. I was supposed to build a model based on data from the March, which is supposed to classifier whether people of the June will buy the specific product or not, that is to say, it belongs to Binary classification.First of all, the proportion of the positive(label is 1) and the negative(label is 0) is 1:117 , I thought it belongs to imbalance-sample learning. So given tips by some people, I tried to use the undersampling tech for handling the imbalance problem, so I adjusted the proportion of the Positive and the Negative into 1:14 . And the next, I split the modified dataset into three parts, with the train dataset(60%) , cross-validated dataset(20%) , test dataset(20%) . By the way, the Proportion of the Positive and the Negative is 14:1 in the three parts. And then, I trained the model with the Logistic regression and Randomforest on train dataset and selected the best hyperparameter by using the validation curve. Finally, after confirming that the f1-score is roughly 0.30 , and precision-score is 0.70 , I used my model to predict the test dataset(30%) and got a good result. The f1-score is roughly 0.29 , precision-score is 0.70 . So I believed I got a good model and tried to predict whether the people of the June will buy the production or not. However, the results on the data of the June is too bad.The f1-score is 0.01 , precision-score is 0.1 . This is too far away from the result of the March.Why my model showed the good scores in the cross-validated dataset and test dataset, and shows the bad scores in true data? What is wrong with my process? Had I done something wrong in the process of undersampling? Should I make the cross-validated data(20%) and test data(20%) remain the original proportion(1:117) of the Positive and the Negative? What should I pay attention to the cross-validation after undersampling? I am confused about those questions, and I had searched for those problems in Google, so I decided to look for your help. If you know this, please help me.Thank you!!
