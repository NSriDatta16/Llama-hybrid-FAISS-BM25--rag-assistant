[site]: crossvalidated
[post_id]: 358563
[parent_id]: 
[tags]: 
Average treatment effect in binary choice model

All the random variables below are defined on the same probabiluty space $(\Omega, \mathcal{F}, \mathbb{P})$. Consider the following model $$ Y\equiv 1\{\epsilon > \beta_0+\beta_1X\} $$ where $1$ is an indicator function equal to $1$ if the condition inside is satisfied and zero otherwise $Y$ is a random variable with support $\mathcal{Y}\equiv \{0,1\}$ $X$ is a random variable with support $\mathcal{X}\equiv \{0,1\}$ (treatment) $\epsilon$ is a random variable with support $\mathbb{R}$ $\beta_0, \beta_1$ are scalar parameters A source I am considering states that the average treatment effect (ATE) is $$ \begin{aligned} \text{ATE} & = P_{\epsilon}(\epsilon > \beta_0+\beta_1)- P_{\epsilon}(\epsilon > \beta_0) \end{aligned} $$ without specifying which probability is $P_{\epsilon}$. Question: Is the probability used to compute the ATE, $P_{\epsilon}$, conditional on $X$ or unconditional? I am tempted to say that it should be conditional; in other words $$ \begin{aligned} \text{ATE} & \equiv E(Y|X=1)-E(Y|X=0)= \mathbb{P}(\epsilon > \beta_0+\beta_1|X=1)- \mathbb{P}(\epsilon > \beta_0|X=0) \end{aligned} $$ However, then the book claims that $$ \begin{aligned} \text{ATE} & = P_{\epsilon}(\epsilon > \beta_0+\beta_1)- P_{\epsilon}(\epsilon > \beta_0) \\ &= \sum_{x\in \{0,1\}} \mathbb{P}(\epsilon > \beta_0+\beta_1|X=x) \mathbb{P}(X=x)\\ &-\sum_{x\in \{0,1\}} \mathbb{P}(\epsilon > \beta_0|X=x) \mathbb{P}(X=x) \end{aligned} $$ which seems to be an application of he law of iterated expectations making sense only if $P_{\epsilon}$ is not conditional on $X$. Any hint?
