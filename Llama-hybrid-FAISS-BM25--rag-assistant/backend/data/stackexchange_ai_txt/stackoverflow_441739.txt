[site]: stackoverflow
[post_id]: 441739
[parent_id]: 
[tags]: 
Regex for url validation with parts capturing

Can a single regex be used to valdate urls and match all the parts, I have been working on one and what I have come up with so far is: (?:(?P [a-z]*?)://)?(?:(?P .*?):?(?P .*?)?@)?(?P .*?)/(?:(?:(?P .*?)\?)?(?P .*?\.[a-z]{1,6})?(?:(?:(?P .*?)#?)?(?P .*?)?)?)? however this does not work, it should match all of the following examples: http://username:password@hostname.tld/path?arg=value#anchor http://www.domain.com/ http://www.doamin.co.uk/ http://www.yahoo.com/ http://www.google.au/ https://username:password@domain.com/ ftp://user:password@domain.com/path/ https://www.blah1.subdoamin.doamin.tld/ domain.tld/#anchor doamin.tld/?query=123 domain.co.uk/ domain.tld http://www.domain.tld/index.php?var1=blah http://www.domain.tld/path/to/index.ext mailto://user@unkwndesign.com and provide a named capture for all the components: scheme eg. http https ftp ftps callto mailto and any other one not listed username password hostname including subdomains, domainand tld path eg /images/profile/ filename eg file.ext query string eg. ?foo=bar&bar=foo fragment eg. #anchor With the hostname as the only mandatory field. We can assume that this is coming from a form specificly asking for an url, and is not going to be used to find links in text.
