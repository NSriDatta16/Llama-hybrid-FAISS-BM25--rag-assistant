[site]: crossvalidated
[post_id]: 546801
[parent_id]: 539120
[tags]: 
I think the setup is that you want to estimate the average effect of a treatment once in a population where it is constant and once where it is heterogenous. So in both scenarios you want to estimate the same quantity , the ATE, however the "components" of this quantity are different: once constant and once varying across observations. Further, you have a confounder so the treatment is only as good as randomly assigned as given the confounder (this is an observational study). If you want to estimate the ATE under the constant scenario, you can run a regression of the outcome on the treatment and the confounder. But if you want to estimate the ATE under the heterogenous scenario you have to take some type of matching estimator. Intuitively, you figure out all the ATEs conditionally on the covariates and then weigh them to get an estimate of the ATE. Now, regression can get you that. But, it is clear that there are some subtleties (relevant in both matching and regression approaches). You definitely need common support that is you need to have both treatment and control observations for each value of the confounder(s).
