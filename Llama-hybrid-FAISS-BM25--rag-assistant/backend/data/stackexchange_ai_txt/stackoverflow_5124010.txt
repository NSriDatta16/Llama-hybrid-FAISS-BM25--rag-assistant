[site]: stackoverflow
[post_id]: 5124010
[parent_id]: 
[tags]: 
Add indicator variable to long data frame for when the value increases from one year to the next

I have a long data frame with three columns fyear , tic , and dcvt (for fiscal year, ticker, and total convertible debt). There are about 18 fiscal years and a few thousand tickers. I would like to add an indicator variable that is one whenever dcvt goes up from one year to the next. I tried ddply , but I lost the fyear column and wasn't sure how to get it back. library(plyr) temp 0, 1, 0)) temp2 I also tried to cast to wide with the reshape2 package, then run for loops, but of course, that took forever. Is there a way that I can do this quickly? Should I make a wide zoo object then use diff ? I would like to avoid passing through a time series, if I can. Thanks!
