[site]: stackoverflow
[post_id]: 2620888
[parent_id]: 2620486
[tags]: 
This works and is also fast, as it is better to insert all spans at once as one block. //get .foo elements var eles = $('.foo').toArray(), spans = []; //create html-fragments for each found element //respecting if no id is found //no overhead in loop as no unneeded jQuery wrapping is used for(var i=0; i '; //collect html fragments in an array spans.push(tmp); } //join the html-fragments with "no-space" and insert after div#content $("#content").after(spans.join("")); Check http://jsbin.com/etafe for a demo
