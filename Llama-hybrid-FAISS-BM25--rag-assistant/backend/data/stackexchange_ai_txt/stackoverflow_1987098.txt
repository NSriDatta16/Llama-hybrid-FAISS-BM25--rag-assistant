[site]: stackoverflow
[post_id]: 1987098
[parent_id]: 1971870
[tags]: 
If you have N=~2k agents, I suggest putting all sightings into a numpy array of size NxN. This easily fits in memory (around 16 meg for integers). Just store a 1 wherever a sighting occurred. Assume that you have an array sightings . The first coordinate is Sensing, the second is Sensed. Assume you also have 1-d index arrays listing which agents are on which side. You can get the number of sightings of side B by side A this way: sideAseesB = sightings[sideAindices, sideBindices] sideAseesBcount = numpy.logical_or.reduce(sideAseesB, axis=0).sum() It's possible you'd need to use sightings.take(sideAindices, axis=0).take(sideBindices, axis=1) in the first step, but I doubt it.
