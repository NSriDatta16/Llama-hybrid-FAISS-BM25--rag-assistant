[site]: crossvalidated
[post_id]: 256282
[parent_id]: 
[tags]: 
Which formula does the forecast package in R use to calculate variance/ standard error for prediction intervals?

I am trying to compare a manual computation for the prediction interval for a forecasted value (one step ahead, at 95% confidence) on this data set , to the given prediction interval from R's forecast package. I have selected an ARIMA(1,1,0)$\times$(0,1,1)$_{12}$ model for the above data set (which has 192 data points). The 'manual' computation I currently have (as R input) is: 339.5735+1.96*sqrt(t(res)%*%res/192) , where: 339.5735 is the Forecast value from forecast(Arima(dataset, order = c(1,1,0), seasonal = list(order =c(0,1,1), period =12)), h=1 ). The "Hi 95" and "Lo 95" entries of this output are also the values I am comparing my manually forecasted values against; res = as.matrix(Arima(mauna, order = c(1,1,0), seasonal = list(order =c(0,1,1), period =12))$residuals) , so res is a vector of the residual errors from the selected ARIMA model fitted to our time series; 192 is the number of data points in the time series (wasn't too sure whether to use biased or unbiased estimator of variance, and how many degrees of freedom need to be taken away from the denominator in the case of the unbiased estimator). My manual computation doesn't match that of R's for the lower bound and upper bound for the prediction interval and I was wondering whether anyone could tell me why? Even a formula for the variance of an ARIMA(p,d,q)(P,D,Q)_s model would be appreciated as I haven't been able to find one that helps my case. Any assistance with this problem would both help me tremendously and be greatly appreciated. Thank you.
