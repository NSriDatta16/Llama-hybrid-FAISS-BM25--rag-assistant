[site]: crossvalidated
[post_id]: 143083
[parent_id]: 
[tags]: 
Comparing Binomial Success Parameters in a Stratified Approach - An Example in Biostatistics

I would like to contrast the effectiveness of drug treatment and surgical treatment in a study with the following data. Each row represents one trial, and each trial uses either drugs or surgeries to treat the patients. I am looking for a method that will compare the overall recovery percentages between drugs and surgeries within each hospital. (Thus, Hospital #3 will be excluded in my analysis, because it only contains drug treatments.) take the varying number of patients treated from trial to trial into account. aggregate these comparisons for all hospitals. Point #1 is very important, because I want to control for confounding variables that are due to the hospital's own attributes. I have measurements for 2 of those attributes (staffing and funding), but I can't measure the hospital's competence. Notice that Hospital 1 has low recovery percentages, but that may be due to its low staffing level, poor funding level, or some other confounding variable (like its inherently low competence). I want to ensure that the comparison of the recovery percentages focuses on only the type of treatment and controls for these confounding variables. To see the significance for Point #2, consider Hospital 1. Its 2 drug trials treated 500 and 600 patients each, yet its 4 surgery trials had a total of 27 patients. Thus, I can't give equal weights to all recovery percentages. I previously used logistic regression with the binomial response as the number of patients who recovered out of all who were treated the treatment type, the staffing level, and the funding level as the predictors the multiple trials within each hospital as repeated measures I used PROC GENMOD in SAS to implement the above model; I used its REPEATED statement to add HOSPITAL as a repeated measures effect. I used the odds ratio of the treatment type to compare the effectiveness of drugs vs. surgeries. However, I see this model as insufficient, because it does not control for unknown confounding variables (like the hospital's own competence). My questions: A. Can you suggest a method to make such a comparison with my above requirements? I seem to be comparing 2 binomial success parameters, but stratified by hospital and trying to control for confounding variables, but I can't think of a regression method to do this. B. What procedure in SAS or R can implement your suggestion? My office uses SAS, so I prefer to use SAS, but I can use R if needed. C. Do I need to explicitly include staffing level and funding level in my model to control for these confounders, or does the stratification of the analysis by hospital control for the confounders already? Update: To clarify, a patient can be in one and only one trial.
