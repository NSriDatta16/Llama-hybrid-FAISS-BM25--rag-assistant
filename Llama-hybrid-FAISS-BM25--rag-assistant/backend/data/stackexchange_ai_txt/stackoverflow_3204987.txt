[site]: stackoverflow
[post_id]: 3204987
[parent_id]: 3098256
[tags]: 
The only difference between http:// links and itms:// links is that you need to set your User-Agent to an iTunes user-agent, and depending on the version you may also have to include a verification code based on some not-so-secret algorithm. For example this is the code for iTunes 9: # Some magic. Generates a seed we use for X-Apple-Validation. Adapted from LWP::UserAgent::iTMS_Client. function comp_seed($url, $user_agent) { $random = sprintf( "%04X%04X", rand(0,0x10000), rand(0,0x10000) ); $static = base64_decode("ROkjAaKid4EUF5kGtTNn3Q=="); $url_end = ( preg_match("|.*/.*/.*(/.+)$|",$url,$matches)) ? $matches[1] : '?'; $digest = md5(join("",array($url_end, $user_agent, $static, $random)) ); return $random . '-' . strtoupper($digest); } However if you are only scraping, iTunes preview should work for your purposes, the link you gave us to the iBooks page had more than enough information to scrape.
