[site]: crossvalidated
[post_id]: 161408
[parent_id]: 
[tags]: 
Hypothesis test based on (random) result of previous experiment: can I multiply confidence levels?

Consider an i.i.d. sequence of Bernoulli random variables $\{Z_i\}$ with Bernoulli parameter $x$. By a certain procedure (experiment A) I obtain a random set S such that $\mathrm{Pr}[x \in S] \geq c_A$, where $c_\mathrm A$ is a prescribed confidence value. That random set is always of the form $S = S_1 \cup S_2$, where $S_1$ and $S_2$ are disjoint intervals. What I mean by $S$ being random is that those intervals' endpoints are random numbers determined by the observed sequence $\{Z_i\}$. For each realization of $S$, I conduct an hypothesis test (experiment B) to decide whether $x$ is in $S_1$ or in $S_2$, where $S_1$ and $S_2$ are the random intervals resulting from each realization of experiment A. For this test I use samples $\{Z_j\}$ statistically independent of those used in experiment A. Let $d \in \{1,2\}$ denote the decision produced by the test ($d=1$ means "$x \in S_1$", and similarly for $d=2$). Experiment B is designed so that the decision $d$ is correct (i.e. $x$ actually belongs to $S_d$) with probability at least $c_\mathrm B$, which is again a prescribed confidence value. More specifically, experiment B consists in observing a number $N$ of variables $Z_j$, computing a statistic $t$ from them, and defining a threshold $t_0$ such that $d$ is declared to be $1$ if $t \geq t_0$, and otherwise $d$ is declared to be $2$. Both $N$ and $t_0$ depend on the (random) sets $S_1$ and $S_2$ obtained from experiment A . I would like to be able to say that $\mathrm{Pr}[x \in S_d] = \Pr[x \in S_d | x \in S] \cdot \mathrm{Pr}[x \in S]$. That would imply that $\mathrm{Pr}[x \in S_d] \geq c_\mathrm A \cdot c_\mathrm B$. I would thus obtain a confidence interval for $x$ (namely, $S_d$) with associated confidence level $c_\mathrm A \cdot c_\mathrm B$. Is the reasoning in the previous paragraph correct? My concern stems from the fact that the design of the hypothesis test is based on the observed $S_1$ and $S_2$. That could be introducing some kind of dependence or other effect that invalidates my reasoning. Or, put it another way, the hypothesis test is random (not just the result, but the design of the test itself), and is determined by the outcome of experiment A. I don't know how I should deal with that.
