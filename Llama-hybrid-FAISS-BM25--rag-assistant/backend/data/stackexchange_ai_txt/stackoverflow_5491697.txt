[site]: stackoverflow
[post_id]: 5491697
[parent_id]: 5491102
[tags]: 
In calculateAvg , I think you should you call calculateAvg on the children before calculating your "own" average. Otherwise, it looks to me like the values your reading are either stale or undefined..
