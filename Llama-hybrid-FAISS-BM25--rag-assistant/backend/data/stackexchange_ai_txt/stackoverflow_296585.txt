[site]: stackoverflow
[post_id]: 296585
[parent_id]: 296519
[tags]: 
The culprit is cd, try this instead sdir=`dirname $0` sdir=`(cd "$sdir/" >/dev/null; pwd)` This happens because when you specify a non absolute path and the directory is found in the environment variable CDPATH, cd prints to stdout the value of the absolute path to the directory it changed to. Relevant man bash sections: CDPATH The search path for the cd command. This is a colon-separated list of directories in which the shell looks for destination directories specified by the cd command. A sample value is ``.:~:/usr''. cd [-L|-P] [directory] Change the current working directory to directory. If directory is not given, the value of the HOME shell variable is used. If the shell variable CDPATH exists, it is used as a search path. If directory begins with a slash, CDPATH is not used. The -P option means to not follow symbolic links; symbolic links are followed by default or with the -L option. If directory is ‘-’, it is equivalent to $OLDPWD. If a non-empty directory name from CDPATH is used, or if ‘-’ RELEVANT -\ is the first argument, and the directory change is successful, PARAGRAPH -/ the absolute pathname of the new working directory is written to the standard output. The return status is zero if the directory is successfully changed, non-zero otherwise. OLDPWD The previous working directory as set by the cd command.
