[site]: stackoverflow
[post_id]: 4112616
[parent_id]: 4111614
[tags]: 
As @JasonWoof indicated, you need to use an embedded alternation: one alternative for quoted URLs, one for non-quoted. I also recommend using a capturing group to determine which kind of quote is being used, as @DanHorrigan did. With the addition of a negative lookahead ( (?!\\2) ) and possessive quantifiers ( *+ ), you can create a highly robust regex that is also very quick: ~ ]*?\\bhref= ( (["']) # capture the opening quote (?:(?!\\2).)*+ # anything else, zero or more times \\2 # match the closing quote | [^\\s>]*+ # anything but whitespace or closing brackets ) ~ix See it in action on ideone. (The doubled backslashes are because the regex is written in the form of a PHP heredoc. I'd prefer to use a nowdoc, but ideone is apparently still running PHP 5.2.)
