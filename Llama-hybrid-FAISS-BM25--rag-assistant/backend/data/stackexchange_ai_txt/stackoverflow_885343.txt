[site]: stackoverflow
[post_id]: 885343
[parent_id]: 885066
[tags]: 
It looks like others have hit most of the significant points (especially regarding incrementing the suffix and executing SQL queries recursively / in a loop), but I still see a couple of big improvements that could be made. Firstly, don't bother trying to come up with your own diacritics-to-ASCII replacements; you'll never catch them all and better tools exist. In particular, I direct your attention to iconv 's "TRANSLIT" feature. You can convert from UTF-8 (or whatever encoding is used for your titles) to plain old 7-bit ASCII as follows: $title = strtolower(strip(clean($title))); $title = iconv('UTF-8', 'ASCII//TRANSLIT', $title); $title = str_replace("'", "", $title); $title = preg_replace(array("/\W+/", "/^\W+|\W+$/"), array("-", ""), $title); Note that this also fixes a bug in your original code where the space-to-dash replacement was called before trim() and replaces all runs of non-letter/-number/-underscores with single dashes. For example, " HÃ©llo, world's peoples!" becomes "hello-worlds-peoples" . This replaces your entire section 1. Secondly, your $forbidden loop can be rewritten to be more efficient and to eliminate recursion: if ($forbidden) { while (in_array($title, $forbidden)) { $title = append_increasing_number($title); } } This replaces section 3.
