[site]: stackoverflow
[post_id]: 3681854
[parent_id]: 
[tags]: 
HTML email not displaying correctly

i have a strange problem with sending HTML mail in c#. Basically i am trying to email myself the weather every morning and I begin by downloading the weather in HTML markup from an ftp site. After obtaining the source file i then read it into a string and create a mailMessage using the following code. string body = File.ReadAllText(@"C:\Weather.htm"); MailMessage mailMessage = new MailMessage(); SmtpClient mailClient = new SmtpClient("smtp.gmail.com"); mailClient.Credentials = new NetworkCredential(username, password); mailClient.Port = 587; mailClient.EnableSsl = true; mailMessage.From = new MailAddress(emailFrom); mailMessage.IsBodyHtml = true; mailMessage.To.Add(emailTo); mailMessage.Subject = "Test Email"; mailMessage.SubjectEncoding = System.Text.Encoding.Unicode; mailMessage.Body = body; mailMessage.BodyEncoding = System.Text.Encoding.Unicode; mailClient.Send(mailMessage); The problem is that whilst the email arrives in HTML format, all of the DIV / CSS are not respected and it looks weird. I have tried to email to a different email address & client and it looks the same as well as trying different encodings. So somewhere along the line something is going wrong. Does anyone know how to fix this and get a properly formatted email? Good Image BadImage source markup Sydney Forecast IDN10064 Australian Government Bureau of Meteorology New South Wales Updated Sydney Forecast Issued at 8:11 am&nbsp;EST on Thursday 9 September 2010 for the period until midnight EST&nbsp;Wednesday 15 September 2010. Warning Summary at issue time Nil. Details of warnings are available on the Bureau's website www.bom.gov.au, by telephone 1300-659-218* or through some TV and radio broadcasts. Forecast for the rest of Thursday Cloud increasing. Areas of rain this afternoon and evening. Winds northerly averaging up to 20 km/h. City Centre A little rain later. Max 20 Chance of any rainfall: 30% Chance of no rainfall: 70% Rainfall: 0 to 1 mm Penrith Late rain. Max 20 Chance of any rainfall: 30% Chance of no rainfall: 70% Rainfall: 0 to 1 mm Around Sydney Liverpool Max 20 Parramatta Max 20 Terrey Hills Max 19 Campbelltown Max 19 Richmond Max 20 Bondi Max 19 Fire Danger: Low to Moderate [0-11] UV Alert from 9:10 am to 2:40 pm, UV Index predicted to reach 6 [High] Forecast for Friday Partly cloudy. Winds west to northwesterly averaging up to 25 km/h tending westerly up to 40 km/h around midday. City Centre Becoming windy. Min 13 Max 22 Penrith Partly cloudy. Becoming windy. Min 11 Max 23 Forecast for Saturday Sunny. Winds west to southwesterly averaging up to 25 km/h tending mainly southeast to southwesterly up to 20 km/h around midday. City Centre Sunny. Min 12 Max 21 Penrith Sunny. Min 9 Max 22 Forecast for Sunday Mostly sunny. Light winds. City Centre Mostly sunny. Min 10 Max 21 Penrith Sunny. Min 6 Max 23 Forecast for Monday Becoming cloudy. Isolated showers later in the day. Winds west to southwesterly averaging up to 25 km/h. City Centre Shower or two developing. Min 13 Max 22 Penrith Shower or two developing. Min 10 Max 22 Forecast for Tuesday Sunny. Light winds tending north to northeasterly up to 20 km/h during the evening. City Centre Sunny. Min 12 Max 19 Penrith Sunny. Min 10 Max 19 Forecast for Wednesday Isolated showers during the morning. Sunny afternoon. Winds northwesterly averaging up to 25 km/h tending westerly up to 35 km/h during the morning. City Centre Shower or two clearing. Min 12 Max 20 Penrith Shower or two clearing. Min 8 Max 21 The next routine forecast will be issued at 4:20 pm&nbsp;EST&nbsp;Thursday. * Calls to 1300 numbers cost around 27.5c incl. GST, higher from mobiles or public phones.
