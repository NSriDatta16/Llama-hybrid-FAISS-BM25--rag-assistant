[site]: stackoverflow
[post_id]: 4907040
[parent_id]: 4906988
[tags]: 
Not really anything to promising. You can't use flock for that like this. You could use system() to start another (php) process that does the locking for you. But drawbacks: You need to do interprocess communication. Think about a way how to tell the other program when to release the lock etc. You can use stdin for messenging und use 3 constants or something. In this case it's still rather simple It's bad for performance because you keep creating processes which is expensive. Another way would be to start another program that runs all the time. You connect to it using some means of IPC (probably just use a tcp channel because it's cross-platform) and allow this program to manage file acces. That program could be a php script in an endless loop as well, but it will probably be simpler to code this in Java or another language that has multithreading support. Another way would be to leverage existing ressources. Create a dummy database table for locks, create an entry for the file and then do table-row-locking. Another way would be not to use files, but a database.
