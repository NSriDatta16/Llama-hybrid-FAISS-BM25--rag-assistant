[site]: stackoverflow
[post_id]: 2398725
[parent_id]: 
[tags]: 
Using PHP substr() and strip_tags() while retaining formatting and without breaking HTML

I have various HTML strings to cut to 100 characters (of the stripped content, not the original) without stripping tags and without breaking HTML. Original HTML string (288 characters): $content = " With a span over here and a nested div over there and a lot of other nested texts and tags in the air everywhere , it's a HTML taggy kind of day. "; Standard trim: Trim to 100 characters and HTML breaks, stripped content comes to ~40 characters: $content = substr($content, 0, 100)."..."; /* output: With a span over here and a nested div ove... */ Stripped HTML: Outputs correct character count but obviously looses formatting: $content = substr(strip_tags($content)), 0, 100)."..."; /* output: With a span over here and a nested div over there and a lot of other nested texts and tags in the ai... */ Partial solution: using HTML Tidy or purifier to close off tags outputs clean HTML but 100 characters of HTML not displayed content. $content = substr($content, 0, 100)."..."; $tidy = new tidy; $tidy->parseString($content); $tidy->cleanRepair(); /* output: With a span over here and a nested div ove ... */ Challenge: To output clean HTML and n characters (excluding character count of HTML elements): $content = cutHTML($content, 100); /* output: With a span over here and a nested div over there and a lot of other nested texts and tags in the ai ..."; Similar Questions How to clip HTML fragments without breaking up tags Cutting HTML strings without breaking HTML tags
