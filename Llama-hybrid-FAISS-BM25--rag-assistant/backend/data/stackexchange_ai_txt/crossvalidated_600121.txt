[site]: crossvalidated
[post_id]: 600121
[parent_id]: 599966
[tags]: 
This post has become a bit long, so let me begin with a bit of a tl;dr. Even in the infinite-data case where your confidence intervals collapse to a point, you have not given us enough information to answer your question. Also, if you are interested in estimating the effect of the treatment on revenue, it is unclear to me why you are trying to take such an indirect path to getting it. Why not just compare average revenue in treatment vs control? As @Learning stats by example has pointed out in the comments, you have not given us enough information in your question to compute the quantity you want to compute. Some careful accounting will hopefully illuminate why something is missing. Let us start with a statistical model of how your A/B test dataset is generated. I will assume that each observation is of the form $(R,O,D)$ where each datapoint is a unique visitor, $R$ is the revenue generated by that visitor, $O$ is the number of orders made, and $D$ is an indicator which takes value $1$ if the visitor is in treatment and $0$ if the visitor is in control. When thinking about questions such as this, I typically like to first completely ignore issues of statistical sampling (as your questions about confidence intervals is an instance of) and just try to clarifying what we should be looking for if we had access to an infinitely-sized dataset. Once we fully think through this infinite-data thought experiment, it is typically much clearer how to construct statistical procedures to match this. The quantity you are interested in is the change in revenue amongst treated versus control visitors. This is given by $$\mathbb E[R | D = 1] - \mathbb E[R | D = 0]$$ On the other hand, the quantities that you gave confidence intervals are respectively the change in the number of orders, i.e. $$\mathbb E[O | D = 1] - \mathbb E[O | D = 0]$$ and the change in the revenue per order, i.e. $$\frac{\mathbb E[R | D = 1]}{\mathbb E[O | D=1]} - \frac{\mathbb E[R | D = 0]}{\mathbb E[O | D = 0]}$$ In general, it is not possible to use these numbers on their own to say very much about the quantity you are actually interested in. To see why, the following numerical example should suffice. Consider two situations, one where $\mathbb E[O | D=1] = 2$ , $\mathbb E[O | D=0] = 1$ , $\mathbb E[R | D=1] = 1$ , $\mathbb E[R | D=0] = 1/2$ . Now consider a second case where it is stil the case that $\mathbb E[O | D=1] = 2$ and $\mathbb E[O | D=0] = 1$ , but now, $\mathbb E[R | D = 1] = 2$ while $\mathbb E[R | D = 0] = 1$ . It is straightforward to check that in both cases, $$\frac{\mathbb E[R | D = 1]}{\mathbb E[O | D=1]} - \frac{\mathbb E[R | D = 0]}{\mathbb E[O | D = 0]} = 0$$ yet in the former case, $$\mathbb E[R | D = 1] - \mathbb E[R | D = 0] = 1/2$$ while in the latter case, $$\mathbb E[R | D = 1] - \mathbb E[R | D = 0] = 1$$ So this shows that even if you had infinite data, you would not have enough information in general to uniquely pin down the quantity you are interested in from the two quantities you have specified. Now, when it comes to trying to get confidence intervals, the situation gets even worse. In general, your confidence interval for your estimate of $\mathbb E[R | D = 1] - \mathbb E[R | D=0]$ will depend on the variance of $R$ in your data. Unfortunately, even if you know something about the variance of $$\mathbb E[O | D = 1] - \mathbb E[O | D = 0]$$ and $$\frac{\mathbb E[R | D = 1]}{\mathbb E[O | D=1]} - \frac{\mathbb E[R | D = 0]}{\mathbb E[O | D = 0]}$$ this will not pin down the variance of $R$ , because the answer will depend not just on the variances of the respective estimates, but also on their covariances. At most, your stated confidence intervals may give us information on the respective variances, but will in general not say much about the covariance between the two estimates. At any rate, this discussion is somewhat moot because it seems strange to me that you would want to construct a CI for the change in revenue by such an indirect method. Why not just estimate $\mathbb E[R | D=1] - \mathbb E[R|D=0]$ by taking the simple difference-in-sample-means $\hat{pe} = mean(R | D=1) - mean(R|D=0)$ ? In this case, the resulting standard errors will be $$\hat{se} = \sqrt{sd(R|D=1)^2 / N_1 + sd(R|D=0)^2 / N_2}$$ where $sd(R|D=d)$ are the sample standard deviations when $D=d$ and $N_d$ is the number of observations for whom $D=d$ . In this case, as long as you have sufficiently large samples, your 95% CI would just be $$\hat{pe} \pm 1.96 \hat{se}$$
