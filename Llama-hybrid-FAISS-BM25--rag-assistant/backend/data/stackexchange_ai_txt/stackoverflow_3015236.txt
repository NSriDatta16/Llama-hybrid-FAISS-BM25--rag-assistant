[site]: stackoverflow
[post_id]: 3015236
[parent_id]: 2990601
[tags]: 
We can get rid of the j variable and avoid addition of j.days everywhere and use date from_date.to_i.step(to_date.to_i, 24*60*60) do |date| 0.upto(48) do |half_hour| each_date = Time.at(date) event = Icalendar::Event.new status = get_availability_on_date_and_hour(@templates, @availabilities, each_date, half_hour).downcase if(status != 'unavailable') #Initialize start and end dates in DateTime's civil format bias_date_time = DateTime.civil(each_date.year, each_date.month, each_date.day) event.dtstart = bias_date_time + (i/2).to_i.hour + (i%2*30).to_i.minutes event.dtend = event.dtstart + 30.minutes event.summary = status.upcase cal.add_event(event) end end end
