[site]: crossvalidated
[post_id]: 350908
[parent_id]: 350890
[tags]: 
That depends on the degree of heterogeneity in the treatment effect of x. If there is no heterogeneity in the treatment effect, your instrument is perfectly valid and you will get what you want. However, that doesn't seem to be the case here. If there is large heterogeneity in the treatment effect, then the IV estimate converges to something irrelevant to what you're looking for, the average treatment effect of the whole population or the treated population. One of the key assumptions for identification of something relevant(even if it is not exactly the average treatment effect) is that z is not correlated with the treatment effect. (if treatment effect is constant, there is no correlation by construction) Search for some resources with keywords such as "local average treatment effect", "intention to treat" and so on.
