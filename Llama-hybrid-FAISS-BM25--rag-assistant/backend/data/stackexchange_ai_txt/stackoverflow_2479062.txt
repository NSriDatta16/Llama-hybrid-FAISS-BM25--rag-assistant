[site]: stackoverflow
[post_id]: 2479062
[parent_id]: 2418570
[tags]: 
This isn't the most elegant way to do it, but it works for me: from warnings import warn class Foo(object): """ Instantiating Foo always gives a warning: >>> import sys; sys.stderr = sys.stdout >>> foo = Foo() # doctest:+ELLIPSIS /.../testdocs.py:14: UserWarning: Boo! warn("Boo!", UserWarning) """ def __init__(self): warn("Boo!", UserWarning) if __name__ == '__main__': import doctest doctest.testmod() This presumably won't work on Windows, though, since the path reported in the UserWarning output must start with a slash the way I've written this test. You may be able to figure out some better incantation of the ELLIPSIS directive, but I could not.
