[site]: stackoverflow
[post_id]: 1337998
[parent_id]: 1337627
[tags]: 
I don't want to encourage you to use globals, but if you wanted to access $db from the safe function you would have to put global $db; at the beginning of the function. Resulting in: $db = new mysqli($host,$user,$password,$database_name); function safe ($data) { global $db; if(!is_array($data)) { if(!get_magic_quotes_gpc()) { $data = $db->escape_string($data); return $data; } } else { return array_map('safe',$data); } } Please note that globals are considered evil and shouldn't be used. What should you use then? Well, for your use case the registry pattern (keep that in mind for later) probably would fit best. But to get you started with object-oriented programming you should try the following for now: class myClass { protected $db; public function __construct() { $this->db = new mysqli($host,$user,$password,$database_name); } function safe ($data) { if(!is_array($data)) { if(!get_magic_quotes_gpc()) { $data = $this->db->escape_string($data); return $data; } } else { return array_map('safe',$data); } } } I urge you to read more about object-oriented programming as it will help you write better and more reusable code. Hope I could help.
