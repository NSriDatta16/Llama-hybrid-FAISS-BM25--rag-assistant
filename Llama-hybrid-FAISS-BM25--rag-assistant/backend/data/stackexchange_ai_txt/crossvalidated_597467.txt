[site]: crossvalidated
[post_id]: 597467
[parent_id]: 550053
[tags]: 
The specific answer is no, Z should not be included in the creation of a PS. Also, if you have a bunch of covariates c1 - c20, perhaps a DAG can clarify the minimal sufficient adjustment set for estimating the direct effect of A on Y and then perhaps covariate adjustment might be possible. PS methods are agnostic to both HTE and effect modification and are best avoided if feasible. A logistic regression with A, Z and A#Z balanced for potential covariates is still not very useful because there is no way to determine if a potential non-null product term in this GLM is due to an artifact of the sample (overfitting) or to true effect modification by Z. See this paper
