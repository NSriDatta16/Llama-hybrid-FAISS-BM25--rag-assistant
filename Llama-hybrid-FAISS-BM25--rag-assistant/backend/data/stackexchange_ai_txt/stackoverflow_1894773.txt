[site]: stackoverflow
[post_id]: 1894773
[parent_id]: 
[tags]: 
Best way to add missing tags to text in HTML while disregarding other tags?

I'm currently writing a function for parsing some HTML and adding tags where necessary. Basically i have a piece of HTML like this: Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse feugiat, nunc at vestibulum egestas. #include &lt;stdio.h&gt; #define debug(var) printf(#var &quot; = %d\n&quot;, var) int main(void) { int x = 12; debug(x) return 0; } Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse feugiat, nunc at vestibulum egestas. Test Heading Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ultricies luctus metus ut cursus. One Two Three Lorem ipsum dolor sit amet, consectetur adipiscing elit. Cras ultricies luctus metus ut cursus. If you notice there are no tags around the paragraphs. I would like to parse this HTML and add the correct tags to the different paragraphs of text. Also whatever parser is used, it cannot touch any of the other valid HTML. For example, the headings and list should not be altered. I've hacked together a solution using PHP and although it works, it's not fast or pretty to look at. What is the best way to accomplish this? Is there a nice PHP or Javascript based parser i could use for this? I need to break the HTML down into elements, add tags and write the assembled HTML back to the page(?)
