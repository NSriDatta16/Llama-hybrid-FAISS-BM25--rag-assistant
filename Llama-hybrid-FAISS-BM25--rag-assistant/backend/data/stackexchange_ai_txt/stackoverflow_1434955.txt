[site]: stackoverflow
[post_id]: 1434955
[parent_id]: 1404067
[tags]: 
The idea of using thread-local storage is interesting, but I have finally end up with another solution: I use the types in two phases: first they are all created and then they are "compiled". Compilation requires an environment, but is performed only once. It consist in translating all type-names into proper type-objects. After the compilation the environment is no longer needed. Nevertheless, I think it is still more a workaround than a general solution.
