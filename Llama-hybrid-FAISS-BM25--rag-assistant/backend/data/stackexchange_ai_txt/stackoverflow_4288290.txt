[site]: stackoverflow
[post_id]: 4288290
[parent_id]: 4288265
[tags]: 
I think you can do this by running the HTML through something like tidy . An extension for this is available in PHP . For example, suppose you had a fragment like this hello and you cut the text right here... Thorny! Dangling tags and a truncation in mid-tag! Here's what you'd get back hello and you cut the text right here... Pretty impressive! Now all you need to do is just extract the repaired fragment back out of the body element. See also the answers to PHP: Truncate HTML, ignoring tags
