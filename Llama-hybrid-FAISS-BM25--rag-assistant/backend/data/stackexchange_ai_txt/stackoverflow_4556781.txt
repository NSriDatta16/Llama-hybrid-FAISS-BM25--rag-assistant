[site]: stackoverflow
[post_id]: 4556781
[parent_id]: 
[tags]: 
Having trouble running a mechanize script on Linux when it runs fine on windows

Well here is the thing, I have written a Python script that connects to my works webpage and downloads my most recent paycheck. It works great in windows but when I move this script to my server that is running Debian it fails to redirect past the initial page. Is there a difference between the platforms? Searching for hours now has not resulted in any useful information for me. I have made sure that both systems and running the same version of mechanize but the Python versions are different (EDIT: now both are identical), although just a bit different. Both systems are running identical versions of Python and mechanize. # >> python -V Python 2.7.1 #mechanize >> print(mechanize.__version__) (0, 2, 4, None, None) Now I have created a stripped down test script just for testing. This is so I can compare the results easily. In Windows the script will return the final page that contains a list of all the paychecks available while in Linux it will only print the initial page that should be redirecting to the login page. I feel that mechanize under Linux is either not redirecting at all or it is just not setting a cookie that is needed to proceed. Any ideas? suggestions? I am basically asking if there is a difference in mechanize between Windows and Linux. Since the package contents are from the same source my guess is no but then what is causing this issue? Here is the code that I am using to test. Obviously I have left out the correct username and password :) import mechanize; import urllib; #constants URL_OPEN = "https://ep.upsers.com/ep-s/UPSRegistration/UPSLogin";#set a cookie URL_SECURE = "https://ep.upsers.com/gems-secure/epay_eng.html"; URL_PAYCHECK = "https://ep.upsers.com/gems-secure/psc/hrprod/EMPLOYEE/HRMS/c/M_UPS_MENU.VW_PYCHK_M.GBL?Page=PYCHKDAT_M&Action=U";#lists paychecks VIEWALL = "#ICViewAll"; def testConnection(username, password): success = "no connection: "; try: #get a cookie to use later mechanize.HTTPSHandler(); request1 = mechanize.Request(URL_OPEN); response1 = mechanize.urlopen(request1); #attempt our login postdata = {"user": username,"password": password}; post = urllib.urlencode(postdata); headers = {"User-agent" : "Mozilla/4.0 (compatible; MSIE 5.5; Windows NT)"}; request2 = mechanize.Request(URL_OPEN, post, headers); response2 = mechanize.urlopen(request2); #navigate to paycheck page request3 = mechanize.Request(URL_PAYCHECK); response3 = mechanize.urlopen(request3); success = response3.read(); except Exception as ex: success += str(ex); print(success); #end testConnection testConnection('USERNAME', 'PASSWORD') Initially I thought that the user-agent might need to changed but there is no change in the results. NOTE: Now both versions of Python and mechanize are identical. NOTE: I have observed that while examining the headers at each request that the cookie is not being set/stored on Linux but in Windows it is fine.
