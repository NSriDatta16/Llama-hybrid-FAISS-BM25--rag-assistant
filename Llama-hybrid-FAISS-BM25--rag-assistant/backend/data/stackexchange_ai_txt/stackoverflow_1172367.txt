[site]: stackoverflow
[post_id]: 1172367
[parent_id]: 1169376
[tags]: 
While zoo is great, sometimes there are simpler ways. If you data behaves nicely, and is evenly spaced, the embed() function effectively lets you create multiple lagged version of a time series. If you look inside the VARS package for vector auto-regression, you will see that the package author chooses this route. For example, to calculate the 3 period rolling average of x, where x = (1 -> 20)^2: > x embed (x, 3) [,1] [,2] [,3] [1,] 9 4 1 [2,] 16 9 4 [3,] 25 16 9 [4,] 36 25 16 [5,] 49 36 25 [6,] 64 49 36 [7,] 81 64 49 [8,] 100 81 64 [9,] 121 100 81 [10,] 144 121 100 [11,] 169 144 121 [12,] 196 169 144 [13,] 225 196 169 [14,] 256 225 196 [15,] 289 256 225 [16,] 324 289 256 [17,] 361 324 289 [18,] 400 361 324 > apply (embed (x, 3), 1, mean) [1] 4.666667 9.666667 16.666667 25.666667 36.666667 49.666667 [7] 64.666667 81.666667 100.666667 121.666667 144.666667 169.666667 [13] 196.666667 225.666667 256.666667 289.666667 324.666667 361.666667
