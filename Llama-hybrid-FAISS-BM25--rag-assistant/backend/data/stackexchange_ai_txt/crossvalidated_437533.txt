[site]: crossvalidated
[post_id]: 437533
[parent_id]: 437453
[tags]: 
The issue is less of having duplicates (MCMC runs also produce duplicates) than not being marginally distributed from $p$ . While $$\mathbb E_q[h(Y) p(Y)/q(Y)]=\mathbb E_p[h(Y)]$$ for any integrable function $h(\cdot)$ , weighting and resampling an iid sample $(Y_1,\ldots,Y_n)$ from $q$ does not produce a sample from $p$ , even marginally. The reason for the discrepancy is that the weighting-resampling step implies dividing the $p(Y_i)/q(Y_i)$ by the random sum of the weights, i.e., the index $i$ is selected with probability $$p(Y_i)/q(Y_i)\Big/\sum_j p(Y_j)/q(Y_j)$$ which modifies the marginal distribution of the resampled rv's, especially when the sum has an infinite variance. Here is an illustration when $p$ is the density of a Student's $t_5$ distribution with mean 3 and $q$ is the density of a standard Normal distribution: y=sample(x which shows that the original Normal sample fails to cover the rhs of the tail of the Student's $t$ and hence that the weighted-resampled sample cannot recover. Obviously, when the target $q$ has fatter tails than $p$ , the method converges, as shown in this example: y=sample(x
