[site]: stackoverflow
[post_id]: 5367706
[parent_id]: 
[tags]: 
How to efficiently add metadata to an arbitrary file in .NET?

I'm building a web shopping site. Each product that is sold can have several pictures attached to it as well as arbitrary attachments (like a PDF with a manual etc.) These resources are stored in our own ERP system, and are accessed via it's remote API. In reality the file can reside anywhere - in the DB, on a hard drive, on a network share etc. The API provides a unified interface of accessing it. To improve performance I intend to cache these files on the webserver. There is a version counter mechanism in place which will allow me to effectively determine when the file has changed and invalidate the cache entry. However where do I store the version number for the file that is currently in the cache? The cache is essentially a single folder, which can be accessed by several ASP.NET worker processes on the webserver. There is no DB for the website itself - all the data comes from the ERP API. Ideally this number would be stored together with the file itself somehow. So that when the file is deleted (say, the admin decides to clear the cache to improve disk usage), the metadata wouldn't linger around. So far I have two ideas: Write it in an ADS (Alternate Data Stream). There is no easy way of accessing it through .NET though. Libraries exist, but I'd prefer a more elegant solution (and I've no idea about the performance either). Append it to the file itself. All file formats that I know of are pretty relaxed about data appended to the file. But I would need to remove it before transmitting the contents, and that would mean that I couldn't use the built-in TransmitFile - again leaves me worried about performance. Is there any better way?
