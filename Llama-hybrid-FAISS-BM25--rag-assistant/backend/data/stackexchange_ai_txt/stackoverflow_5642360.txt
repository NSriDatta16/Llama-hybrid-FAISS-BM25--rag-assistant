[site]: stackoverflow
[post_id]: 5642360
[parent_id]: 
[tags]: 
Return a jagged array with dynamic number of dimensions from C# WCF Service

I'm currently trying create a service that will return results of a OLAP cube query in a C#/ WCF data service. I am doing this to gain complete programmatic control over how the OLAP results are serialized, how clients are authenticated/authorized and to be able to query cubes from javascript in a website directly. The results from the OLAP queries may have any number of dimensions (realistically somewhere between 1 and 5 max). The problem I'm having is that I cannot figure out how to first create a jagged array of a dynamic number of dimensions without hard codding the handling of every number of dimensions I'll possibly use. So the first quest is: is there an elegant way to create a jagged array of a dynamic number of dimensions in C#? Once I have this array of dynamic number of dimensions, is it possible to then serialize this into json using DataContractJsonSerializer (or any other json serializer freely available). The goal is to serialize this into an object that looks something like this for 2-dimensional results: { "DimensionMemberCaptions" = [["Dim1 member1", "Dim2 member2"], ["Dim2 member1"], ["Dim2 member2"]], "Data" = [[1, 2], [3, 4]], "FormatedData = [["1$", "2$"], ["3$", "4$"]] } Where DimensionMemberCaptions contain the headers for each dimension (OLAP member names) and data/formateddata is a table of the results. I would like to avoid writing my own serialization functions but its seeming more appealing as time goes on -- using an Array (multi-dimensional array instead of jagged) and writing my own json serializer specifically for the purpose of serializing OLAP output to a Stream returned by a WCF REST method.
