[site]: stackoverflow
[post_id]: 3151640
[parent_id]: 3151274
[tags]: 
Not that long ago I launched a Magento store with over 400 thousand products, 7,000+ categories, 2,000+ attribute sets, and over 4 million attributes for those products. We needed load times to be ~500ms, and it was to be run on one Amazon EC2 Extra Large memory instance (around $360 a month). Our solution? Implement Solr. The search is now powered by Solr, when browsing the catalog we're using facets so users can narrow their results by our 4 million+ attributes. The issue with this was Magento doesn't allow you to narrow your results down if you're using "varchar" attribute values. So I modified the catalog page to use Solr's facets along with modifying the catalog page to not do any queries to the DB at all, except one. This query would be given a list of ID's that Solr returned and do a direct query on these. This plugin took a few days to write, mainly because I've never used Magento before. The last change we did was modify the product view page so that attributes were a lot quicker. When you have millions of attributes the way Magento was doing the query it was really slow, a simple modification and it was fixed. The great thing was that all of this was done via custom plugins, it didn't take long at all, and the store works great. Edit: Also, remember to install APC (or alternative) and configure Magento use that in it's backend. It dramatically increases the speed, as not only will it speed up PHP, Magento was build to work with certain backends to speed it up. You can also do things like having Magento's cache stored in memory (tmpfs in linux). Storing static content onto a CDN or just a static content server will dramatically help as the web server processing Magento won't have to handle those requests at all. You know, the basic stuff for running an application. You can also tell Magento to save sessions into Memcache so that your sessions are in memory, and distributed. Once you modify Magento to get rid of all those "nasty" queries, the rest is really the same as with any website. There are TONS of tools that help you "scale" out your system. Just remember we had a LOT of products, and were preparing to go to around 1,000,000 products. So if you're doing like 40,000 products, you probably won't have to go to that much trouble.
