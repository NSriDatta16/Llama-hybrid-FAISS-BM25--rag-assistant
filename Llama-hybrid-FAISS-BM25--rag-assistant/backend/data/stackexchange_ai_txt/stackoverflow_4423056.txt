[site]: stackoverflow
[post_id]: 4423056
[parent_id]: 
[tags]: 
how to query a clicked polygon in mapserver with PHP?

everyone. Please allow me a brief introduction. For instance: My mapserver use CGI mode. I have a shapefile named 'us_states.shp' , there's a column 'state_name' in it. If I've written a correct '.map' file and a '.html' template, I should get a specific name of a US state when I click a map image in the 'form' tag. Why can this happen? Because the '.html' template has a string: [state_name] . Now, I make some changes: the spatial data is in a postgreSQL database, and there's also a column named 'state_name' ; I'm using PHP to show the query map. Then, how can I get the value of 'state_name' ? how to change the color of the clicked state? My progress rate: a. I can show the original map image from the '.map' file using postgreSQL, and also show the names of all states in the image; b. a simple 'QUERYMAP' paragraph have already exist in the '.map' file; c. I added these codes to my '.php' file: $point->setXY($img_x, $img_y); $map->queryByPoint($point, 'MS_SINGLE', -1); $image=$map->drawQuery(); However, first , the coordinates of the image aren't the ones of the database, as well as the coordinates in the database aren't latitudes or longitudes either! Need I transform them? Second , the method 'queryByPoint' couldn't get the state name, Need I use 'queryByAttributes' ? How to use it? I don't know... I really don't know... I need your help, please.
