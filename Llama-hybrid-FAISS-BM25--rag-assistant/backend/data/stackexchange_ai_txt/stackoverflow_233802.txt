[site]: stackoverflow
[post_id]: 233802
[parent_id]: 
[tags]: 
Rails: Detecting user agent works in development but not production?

I am trying to detect Blackberry user agents in my app, which works fine in my development version. But nothing happens when I redeploy the app in production. application_helper.rb def blackberry_user_agent? request.env["HTTP_USER_AGENT"] && request.env["HTTP_USER_AGENT"][/(Blackberry)/] end application.html.erb Using a Blackberry? Use the mobile optimized version . I've tried clearing the cache using rake tmp:cache:clear and restarted mongrel a few times. Apparently the HTTP_USER_AGENT is coming back nil in production. I am using Nginx with a mongrel cluster.
