[site]: crossvalidated
[post_id]: 333755
[parent_id]: 
[tags]: 
Weighted Least Squares with Endogenous Weights

Suppose I estimate the model $$y_i=\beta_0+\beta_1 x_i +\epsilon_i$$ via weighted least squares where $x_i$ and $\epsilon_i$ are independent, but I use weights $w_i$ that may be correlated with both $x_i$ and $\epsilon_i$. Is $\hat\beta_1$ still unbiased? I am having trouble trying to prove/disprove this. The bias takes the form $$ \frac{\sum_i w_{i}\left(x_{i}-\bar{x}\right)\left(\epsilon_{i}-\bar{\epsilon}\right)}{\sum_i w_{i}\left(x_{i}-\bar{x}\right)^{2}} $$ where $\bar x,\bar \epsilon$ are the weighted averages of $x,\epsilon$, but have not made any more progress. Thanks! Edit: I guess you can recast this as the OLS $$\sqrt{w_i}y_i=\beta_0\sqrt{w_i}+\beta_1\sqrt{w_i}x_i+\sqrt{w_i}\epsilon_i$$ and the question becomes what is the relationship between $\sqrt{w_i}x_i$ and $\sqrt{w_i}\epsilon_i$?
