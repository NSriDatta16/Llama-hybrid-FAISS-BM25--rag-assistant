[site]: stackoverflow
[post_id]: 5251763
[parent_id]: 5251290
[tags]: 
If you have access to the @organization variable (you indicate that you do) then you should be able to: @organization.stub_chain(:topics, :find).and_return(mock_topic) I don't believe (unless they've changed the API to stub_chain, but I don't see anything of that nature in the docs) you can specify a .with('37') when using stub_chain. If it is absolutely necessary that you specify what variable is passed to the find method (and it rarely is), you'll have to take the long route: # This line is attempting to fake-out the .topics association and # just return a mock of *whatever*, since it's just an intermediary # step to where we really want to get to. topics = @organizations.stub!(:topics).and_return(mock_model(Topic)) topics.stub!(:find).with('37').and_return(mock_topic)
