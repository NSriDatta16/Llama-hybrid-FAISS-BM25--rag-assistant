[site]: stackoverflow
[post_id]: 4536339
[parent_id]: 
[tags]: 
Google Storage - POST - Trouble With Generating Security Policy

I am creating the following form for using the POST object with Google Storage to allow a user to upload a document to my bucket. I am getting the following error when I submit the form. I am sure I am creating my policy wrong, but I am unsure how to do it correctly, I've tried several ways. Google's documentation explains the policy here . Thank you for your help! InvalidPolicyDocument − The content of the form does not meet the conditions specified in the policy document. − Invalid value for conditions: {"acl":"private","failure_action_redirect":"http:\/\/www.example.com\/failure_instructions.html"} class Policy { public $expiration = "2010-12-31T11:11:11Z"; public $conditions = array("acl" => "private", "failure_action_redirect" => "http://www.example.com/failure_instructions.html"); } $policy = new Policy(); $policy = json_encode($policy); $policy_utf = utf8_encode($policy); $policy_base64 = base64_encode($policy_utf); $policy_sig = base64_encode(hash_hmac('sha1', $policy_base64, $secret, TRUE)); ?> .commondatastorage.googleapis.com" method="post" enctype="multipart/form-data"> "> "> ">
