[site]: crossvalidated
[post_id]: 571979
[parent_id]: 
[tags]: 
How to set the number of knots in a regression spline

I want to fit fit a cubic regression spline and select the optimal number of knots via grid search. In other words, I want to find the optimal number of knots that minimizes the average test Mean Squared Error of $$y_i = \beta_0 + \beta_1 X_i + \beta_2 X_i^2 + \beta_3 X_i^3 + \beta_{3+1} (X_i - c_1)_+^3 + ... + \beta_{3 + k} (X_i - c_k)_+^3$$ where $k$ is the number of knots in the domain of $X$ . I am using R for this task. However, I am not sure which parameter in step_bs sets the degree of the polynomial and which one sets the number of knots. Here's what I have so far: # Libraries library(tidymodels) library(ISLR) # Load data and split it into 10 folds df % step_bs(age, deg_free = tune()) # I only want to tune the number of knots for `age` # Workflow spline_wf % add_model(lm_spec) %>% add_recipe(rec_spline) # Step grid spline_grid = data.frame(deg_free = c(1:10)) # Is this the number of cuts? # Fit step-functions on grid spline_tune It is my understanding that a regression spline has $(d + 1) + k$ degrees of freedom, where $d$ is the degree of the polynomial (in this case 3 because it's cubic) and $K$ is the number of cuts in the domain of $X$ . I cannot specify $d$ and $k$ by passing a single integer as deg_free . So how can I make sure that the spline is cubic and make the number of knots the tuning parameter?
