[site]: stackoverflow
[post_id]: 5209072
[parent_id]: 
[tags]: 
Modeling many-to-many :through with Mongoid/MongoDB

I'm relatively new to Mongoid/MongoDB and I have a question about how to model a specific many-to-many relationship. I have a User model and a Project model. Users can belong to many projects, and each project membership includes one role (eg. "administrator", "editor", or "viewer"). If I were using ActiveRecord then I'd set up a many-to-many association between User and Project using has_many :through and then I'd put a field for role in the join table. What is a good way to model this scenario in MongoDB and how would I declare that model with Mongoid? The example below seems like a good way to model this, but I don't know how to elegantly declare the relational association between User and the embedded ProjectMembership with Mongoid. Thanks in advance! db.projects.insert( { "name" : "Test project", "memberships" : [ { "user_id" : ObjectId("4d730fcfcedc351d67000002"), "role" : "administrator" }, { "role" : "editor", "user_id" : ObjectId("4d731fe3cedc351fa7000002") } ] } ) db.projects.ensureIndex({"memberships.user_id": 1})
