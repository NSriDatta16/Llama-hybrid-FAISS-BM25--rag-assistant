[site]: stackoverflow
[post_id]: 3723547
[parent_id]: 
[tags]: 
How to use MongoDB Ruby Driver to do a "Group" (group by)?

related to MongoDB Group using Ruby driver if I want to do something like the following in SQL: select page_id, count(page_id) from a_table group by page_id I thought the MongoDB's doc says http://api.mongodb.org/ruby/current/Mongo/Collection.html#group-instance_method group(key, condition, initial, reduce, finalize = nil) # returns an array So from the other post, I am using: Analytic.collection.group( "fucntion (x) return {page_id : x.page_id}", nil, {:count => 0}, "function(x, y) { y.count++ }" ) but it actually returns [{"count"=>47.0}] which is the total number of records (documents) in the collection. Is something not correct above? I thought the key might be a static string like in http://kylebanker.com/blog/2009/11/mongodb-count-group/ db.pageviews.group( { key: {'user.agent': true}, initial: {sum: 0}, reduce: function(doc, prev) { prev.sum += 1} }); but it is not in the other stackoverflow post. Update: actually, in the link above, the solution like Analytic.collection.group( ['page_id'], nil, {:count => 0}, "function(x, y) { y.count++ }" ) works, but just wonder why the first method in this post didn't work.
