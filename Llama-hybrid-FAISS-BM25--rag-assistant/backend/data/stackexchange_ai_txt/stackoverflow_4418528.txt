[site]: stackoverflow
[post_id]: 4418528
[parent_id]: 
[tags]: 
HTTP Post using JSON for UIImage

I am attempting to leverage http POST to send a JSON object (UIImage is included in POST). Below is the code I am currently using, but for some reason the server is not receiving the POST. Can anyone provide insight as to why this may not be working? NSString *userString = [[NSString alloc]init]; userString = [[NSUserDefaults standardUserDefaults]valueForKey:@"userId"]; //convert image to nsdata object NSData *imageData = UIImageJPEGRepresentation(imageView.image, .9); NSLog(@"User id is:%@", userString); NSLog(@"The tag string:%@", myTagString); NSLog(@"the question string is:%@", myQuestionString); NSLog(@"the image data is:%@", imageData); NSArray *keys = [NSArray arrayWithObjects:@"category", @"question", @"latitude", @"longitude", @"user_id", @"image",nil]; NSArray *objects = [NSArray arrayWithObjects:myTagString, myQuestionString, @"0.0", @"0.0", userString, imageData, nil]; NSDictionary *theRequestDictionary = [NSDictionary dictionaryWithObjects:objects forKeys:keys]; NSURL *theURL = [NSURL URLWithString:@"http://theserver.com/query"]; NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:theURL cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:10.0f]; [theRequest setHTTPMethod:@"POST"]; [theRequest setValue:@"application/json-rpc" forHTTPHeaderField:@"Content-Type"]; NSString *theBodyString = [[NSString alloc]init]; theBodyString = [[CJSONSerializer serializer] serializeDictionary:theRequestDictionary]; NSLog(@"body string: %@", theBodyString); NSData *theBodyData = [theBodyString dataUsingEncoding:NSUTF8StringEncoding]; NSLog(@"body data: %@", theBodyData); [theRequest setHTTPBody:theBodyData]; NSURLResponse *theResponse = NULL; NSError *theError = NULL; NSData *theResponseData = [NSURLConnection sendSynchronousRequest:theRequest returningResponse:&theResponse error:&theError]; NSString *theResponseString = [[[NSString alloc] initWithData:theResponseData encoding:NSUTF8StringEncoding] autorelease]; NSLog(@"the response string:%@", theResponseString); NSDictionary *theResponseDictionary = [[CJSONDeserializer deserializer] deserialize:theResponseData error:nil]; NSLog(@"%@", theResponseDictionary); This is my first post in a forum so I apologize if some of the formatting is wrong. Feel free to critique it so I can submit better posts in the future.
