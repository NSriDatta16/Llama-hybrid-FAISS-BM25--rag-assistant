[site]: stackoverflow
[post_id]: 2825175
[parent_id]: 
[tags]: 
Business rule validation of hierarchical list of objects ASP.NET MVC

I have a list of objects that are organized in a tree using a Depth property: public class Quota { [Range(0, int.MaxValue, ErrorMessage = "Please enter an amount above zero.")] public int Amount { get; set; } public int Depth { get; set; } [Required] [RegularExpression("^[a-zA-Z]+$")] public string Origin { get; set; } // ... another properties with validation attributes } For data example (amount - origin) 100 originA 200 originB 50 originC 150 originD the model data looks like: IList model = new List (); model.Add(new Quota{ Amount = 100, Depth = 0, Origin = "originA"); model.Add(new Quota{ Amount = 200, Depth = 0, Origin = "originB"); model.Add(new Quota{ Amount = 50, Depth = 1, Origin = "originC"); model.Add(new Quota{ Amount = 150, Depth = 1, Orinig = "originD"); Editing of the list Then I use Editing a variable length list, ASP.NET MVC 2-style to raise editing of the list. Controller actions QuotaController.cs : public class QuotaController : Controller { // // GET: /Quota/EditList public ActionResult EditList() { IList model = // ... assigments as in example above; return View(viewModel); } // // POST: /Quota/EditList [HttpPost] public ActionResult EditList(IList quotas) { if (ModelState.IsValid) { // ... save logic return RedirectToAction("Details"); } return View(quotas); // Redisplay the form with errors } // ... other controller actions } View EditList.aspx : >" %> ... Edit Quotas ... Partial View QuotaEditorRow.ascx : " %> px"> m.Id) %> m.Depth) %> m.Amount, new {@class = "number", size = 5})%> m.Amount) %> Origin: m.Origin)%> m.Origin) %> ... Business rule validation How do I implement validation of business rule : Amount of quota should equal to sum of amounts of its nested quotas (e.a. 200 = 50 + 150 in example)? I want appropriate inputs Html.TextBoxFor(m=>m.Amount) to be highlighted in red, if the rule is broken for it. In example if user enters not 200, but 201 - it should be red on submit. Using sever validation only. Thanks a lot for any advise.
