[site]: stackoverflow
[post_id]: 2343797
[parent_id]: 1364933
[tags]: 
This is a function I've just written which solves this problem in a very elegant way: First of all, the HTML tags will be extracted from the string, then htmlentities() is executed on every remaining substring and after that the original HTML tags will be inserted at their old position thus resulting in no alternation of the HTML tags. :-) Have fun: function htmlentitiesOutsideHTMLTags ($htmlText) { $matches = Array(); $sep = '###HTMLTAG###'; preg_match_all("@ ]*>@", $htmlText, $matches); $tmp = preg_replace("@( ]*>)@", $sep, $htmlText); $tmp = explode($sep, $tmp); for ($i=0; $i
