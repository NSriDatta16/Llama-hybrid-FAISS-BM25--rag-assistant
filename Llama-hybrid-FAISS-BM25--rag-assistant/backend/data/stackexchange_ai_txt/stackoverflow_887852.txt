[site]: stackoverflow
[post_id]: 887852
[parent_id]: 
[tags]: 
How to access members of a `struct' according to a variable integer in C?

Suppose I have this struct (which incidentally contain bit-fields, but you shouldn't care): struct Element { unsigned int a1 : 1; unsigned int a2 : 1; ... unsigned int an : 1; }; and I want to access the i'th member in a convenient way. Let's examine a retrieval solution. I came up with this function: int getval(struct Element *ep, int n) { int val; switch(n) { case 1: val = ep->a1; break; case 2: val = ep->a2; break; ... case n: val = ep->an; break; } return val; } But I suspect that there is a much simpler solution. Something like array accessing style, maybe. I tried to do something like that: #define getval(s,n) s.a##n But expectedly it doesn't work. Is there a nicer solution?
