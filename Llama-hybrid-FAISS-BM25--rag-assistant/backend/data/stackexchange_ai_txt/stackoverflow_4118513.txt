[site]: stackoverflow
[post_id]: 4118513
[parent_id]: 4118482
[tags]: 
It's because the operator precedence. The expression x and y or z does't evaluate as x and (y or z) but as (x and y) or z . therefore, the friend limitation only applies to the first way of matching the names. You need some parentheses around the name conditions: WHERE users_friends.bID='$USER' AND users_friends.type = '$typeUsers' AND ( (users.firstname = '$firstname' AND users.lastname='$lastname') OR (users.firstname LIKE '$firstname%' AND users.lastname LIKE '$lastname%') OR users.firstname LIKE '$firstname%' OR users.lastname LIKE '$firstname%' ) As part of the condition for joining in the friends table is only applied for some of the records, you will be joining in records from other users also. The reason that Megan Fox appears twice is most likely because she is friend with someone else also, so she appears twice in the friends table.
