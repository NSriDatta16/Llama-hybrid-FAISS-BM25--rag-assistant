[site]: stackoverflow
[post_id]: 4662734
[parent_id]: 
[tags]: 
VisualVM fatal error detected by Java Runtime Environment - question about log file and error

I'm using VisualVM to profile my web app on my pc. I want to see if there are any memory leaks and such. I'm running Tomcat 6.0.29 and jdk SE 1.6 (with update 22). I should note that I downloaded jdk1.6 so that I could download and use VisualVM. My classes are compiled under jdk1.5 though. After accessing a JSP page that displays images that are retrieved from a servlet (which in turns retrieves them from a db), Tomcat shuts itself down and the profiling in VisualVM stops since Tomcat is no longer running. A hs_err_pid.log file is generated and it has logged the following : Note that the spyder.servlets.ImageProcessing.ImageProcessingServlet is the servlet that handles image resizing, display and similar functions. # # A fatal error has been detected by the Java Runtime Environment: # # Internal Error (sharedRuntime.cpp:877), pid=1116, tid=432 # Error: guarantee((retry_count++ current thread ) 0x030e3800 JavaThread "AWT-Windows" daemon [_thread_in_native, id=3276, stack(0x04f10000,0x04f60000)] 0x03014400 JavaThread "Java2D Disposer" daemon [_thread_blocked, id=3736, stack(0x04dd0000,0x04e20000)] =>0x03f31c00 JavaThread "http-8080-6" daemon [_thread_in_vm, id=432, stack(0x04d50000,0x04da0000)] 0x0300a400 JavaThread "http-8080-5" daemon [_thread_in_native, id=1860, stack(0x04d00000,0x04d50000)] 0x030e9400 JavaThread "http-8080-4" daemon [_thread_in_native, id=1524, stack(0x04cb0000,0x04d00000)] 0x0328d400 JavaThread "http-8080-3" daemon [_thread_in_native, id=3844, stack(0x04c60000,0x04cb0000)] 0x03296400 JavaThread "http-8080-2" daemon [_thread_in_native, id=2704, stack(0x04c10000,0x04c60000)] 0x040b3c00 JavaThread "http-8080-1" daemon [_thread_in_native, id=3008, stack(0x03a30000,0x03a80000)] 0x03078400 JavaThread "*** Profiler Agent Special Execution Thread 3" daemon [_thread_blocked, id=3228, stack(0x04bc0000,0x04c10000)] 0x03023c00 JavaThread "*** Profiler Agent Special Execution Thread 6" daemon [_thread_blocked, id=1948, stack(0x03b20000,0x03b70000)] 0x02b98400 JavaThread "*** JFluid Monitor thread ***" daemon [_thread_blocked, id=1300, stack(0x03ad0000,0x03b20000)] 0x02f18400 JavaThread "*** Profiler Agent Communication Thread" daemon [_thread_in_native, id=3352, stack(0x03a80000,0x03ad0000)] 0x03177400 JavaThread "RMI TCP Connection(3)-192.168.0.102" daemon [_thread_in_native, id=3152, stack(0x039e0000,0x03a30000)] 0x02fc3400 JavaThread "JMX server connection timeout 22" daemon [_thread_blocked, id=1112, stack(0x03990000,0x039e0000)] 0x031a5400 JavaThread "RMI Scheduler(0)" daemon [_thread_blocked, id=540, stack(0x03940000,0x03990000)] 0x031a7c00 JavaThread "RMI TCP Connection(6)-192.168.0.102" daemon [_thread_in_native, id=2964, stack(0x038f0000,0x03940000)] 0x030a2c00 JavaThread "RMI TCP Accept-0" daemon [_thread_in_native, id=3296, stack(0x03890000,0x038e0000)] 0x031a0800 JavaThread "TP-Monitor" daemon [_thread_blocked, id=3984, stack(0x03720000,0x03770000)] 0x0319f400 JavaThread "TP-Processor4" daemon [_thread_in_native, id=3876, stack(0x036d0000,0x03720000)] 0x0319e000 JavaThread "TP-Processor3" daemon [_thread_blocked, id=3044, stack(0x03680000,0x036d0000)] 0x0319cc00 JavaThread "TP-Processor2" daemon [_thread_blocked, id=1320, stack(0x03630000,0x03680000)] 0x0319c400 JavaThread "TP-Processor1" daemon [_thread_blocked, id=2024, stack(0x035e0000,0x03630000)] 0x030a7400 JavaThread "http-8080-Acceptor-0" daemon [_thread_in_native, id=2780, stack(0x03590000,0x035e0000)] 0x030c0400 JavaThread "ContainerBackgroundProcessor[StandardEngine[Catalina]]" daemon [_thread_blocked, id=3300, stack(0x03540000,0x03590000)] 0x0306a000 JavaThread "GC Daemon" daemon [_thread_blocked, id=1772, stack(0x03450000,0x034a0000)] 0x02aecc00 JavaThread "Low Memory Detector" daemon [_thread_blocked, id=3840, stack(0x02da0000,0x02df0000)] 0x02ae7000 JavaThread "CompilerThread0" daemon [_thread_blocked, id=2036, stack(0x02d50000,0x02da0000)] 0x02ae5800 JavaThread "Attach Listener" daemon [_thread_blocked, id=4008, stack(0x02d00000,0x02d50000)] 0x02ae4000 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=460, stack(0x02cb0000,0x02d00000)] 0x02add400 JavaThread "Finalizer" daemon [_thread_blocked, id=4032, stack(0x02c60000,0x02cb0000)] 0x02adbc00 JavaThread "Reference Handler" daemon [_thread_blocked, id=2288, stack(0x02c10000,0x02c60000)] 0x002b7000 JavaThread "main" [_thread_in_native, id=212, stack(0x008c0000,0x00910000)] Other Threads: 0x02ada400 VMThread [stack: 0x02bc0000,0x02c10000] [id=784] 0x02aefc00 WatcherThread [stack: 0x02df0000,0x02e40000] [id=3740] VM state:not at safepoint (normal execution) VM Mutex/Monitor currently owned by a thread: None Heap def new generation total 30784K, used 15986K [0x26990000, 0x28af0000, 0x2a990000) eden space 27392K, 45% used [0x26990000, 0x275dc970, 0x28450000) from space 3392K, 100% used [0x28450000, 0x287a0000, 0x287a0000) to space 3392K, 0% used [0x287a0000, 0x287a0000, 0x28af0000) tenured generation total 68288K, used 20933K [0x2a990000, 0x2ec40000, 0x32990000) the space 68288K, 30% used [0x2a990000, 0x2be01590, 0x2be01600, 0x2ec40000) compacting perm gen total 15104K, used 14872K [0x32990000, 0x33850000, 0x36990000) the space 15104K, 98% used [0x32990000, 0x33816050, 0x33816200, 0x33850000) ro space 10240K, 54% used [0x36990000, 0x36f0c510, 0x36f0c600, 0x37390000) rw space 12288K, 55% used [0x37390000, 0x37a2fb78, 0x37a2fc00, 0x37f90000) Dynamic libraries: 0x00400000 - 0x00424000 C:\Java\jdk1.6.0_22\bin\java.exe 0x7c900000 - 0x7c9b2000 C:\WINDOWS\system32\ntdll.dll 0x7c800000 - 0x7c8f6000 C:\WINDOWS\system32\kernel32.dll 0x77dd0000 - 0x77e6b000 C:\WINDOWS\system32\ADVAPI32.dll 0x77e70000 - 0x77f02000 C:\WINDOWS\system32\RPCRT4.dll 0x77fe0000 - 0x77ff1000 C:\WINDOWS\system32\Secur32.dll 0x7c340000 - 0x7c396000 C:\Java\jdk1.6.0_22\jre\bin\msvcr71.dll 0x6d8a0000 - 0x6db47000 C:\Java\jdk1.6.0_22\jre\bin\client\jvm.dll 0x7e410000 - 0x7e4a1000 C:\WINDOWS\system32\USER32.dll 0x77f10000 - 0x77f59000 C:\WINDOWS\system32\GDI32.dll 0x76b40000 - 0x76b6d000 C:\WINDOWS\system32\WINMM.dll 0x6d850000 - 0x6d85c000 C:\Java\jdk1.6.0_22\jre\bin\verify.dll 0x6d3d0000 - 0x6d3ef000 C:\Java\jdk1.6.0_22\jre\bin\java.dll 0x6d330000 - 0x6d338000 C:\Java\jdk1.6.0_22\jre\bin\hpi.dll 0x76bf0000 - 0x76bfb000 C:\WINDOWS\system32\PSAPI.DLL 0x6d890000 - 0x6d89f000 C:\Java\jdk1.6.0_22\jre\bin\zip.dll 0x6d600000 - 0x6d609000 C:\Java\jdk1.6.0_22\jre\bin\management.dll 0x6d6b0000 - 0x6d6c3000 C:\Java\jdk1.6.0_22\jre\bin\net.dll 0x71ab0000 - 0x71ac7000 C:\WINDOWS\system32\WS2_32.dll 0x77c10000 - 0x77c68000 C:\WINDOWS\system32\msvcrt.dll 0x71aa0000 - 0x71aa8000 C:\WINDOWS\system32\WS2HELP.dll 0x71a50000 - 0x71a8f000 C:\WINDOWS\system32\mswsock.dll 0x662b0000 - 0x66308000 C:\WINDOWS\system32\hnetcfg.dll 0x71a90000 - 0x71a98000 C:\WINDOWS\System32\wshtcpip.dll 0x76f20000 - 0x76f47000 C:\WINDOWS\system32\DNSAPI.dll 0x76fb0000 - 0x76fb8000 C:\WINDOWS\System32\winrnr.dll 0x76f60000 - 0x76f8c000 C:\WINDOWS\system32\WLDAP32.dll 0x76fc0000 - 0x76fc6000 C:\WINDOWS\system32\rasadhlp.dll 0x6d370000 - 0x6d38a000 C:\Java\jdk1.6.0_22\jre\bin\instrument.dll 0x68000000 - 0x68036000 C:\WINDOWS\system32\rsaenh.dll 0x769c0000 - 0x76a74000 C:\WINDOWS\system32\USERENV.dll 0x5b860000 - 0x5b8b5000 C:\WINDOWS\system32\netapi32.dll 0x76d60000 - 0x76d79000 C:\WINDOWS\system32\iphlpapi.dll 0x76d40000 - 0x76d58000 C:\WINDOWS\system32\MPRAPI.dll 0x77cc0000 - 0x77cf2000 C:\WINDOWS\system32\ACTIVEDS.dll 0x76e10000 - 0x76e35000 C:\WINDOWS\system32\adsldpc.dll 0x76b20000 - 0x76b31000 C:\WINDOWS\system32\ATL.DLL 0x774e0000 - 0x7761d000 C:\WINDOWS\system32\ole32.dll 0x77120000 - 0x771ab000 C:\WINDOWS\system32\OLEAUT32.dll 0x76e80000 - 0x76e8e000 C:\WINDOWS\system32\rtutils.dll 0x71bf0000 - 0x71c03000 C:\WINDOWS\system32\SAMLIB.dll 0x77920000 - 0x77a13000 C:\WINDOWS\system32\SETUPAPI.dll 0x6d7a0000 - 0x6d7a6000 C:\Java\jdk1.6.0_22\jre\bin\rmi.dll 0x6e030000 - 0x6e038000 C:\Java\jdk1.6.0_22\lib\visualvm\profiler3\lib\deployed\jdk16\windows\profilerinterface.dll 0x6d6d0000 - 0x6d6d9000 C:\Java\jdk1.6.0_22\jre\bin\nio.dll 0x6d0b0000 - 0x6d1fa000 C:\Java\jdk1.6.0_22\jre\bin\awt.dll 0x73000000 - 0x73026000 C:\WINDOWS\system32\WINSPOOL.DRV 0x76390000 - 0x763ad000 C:\WINDOWS\system32\IMM32.dll 0x773d0000 - 0x774d3000 C:\WINDOWS\WinSxS\x86_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.2600.5512_x-ww_35d4ce83\COMCTL32.dll 0x77f60000 - 0x77fd6000 C:\WINDOWS\system32\SHLWAPI.dll 0x6d4f0000 - 0x6d515000 C:\Java\jdk1.6.0_22\jre\bin\jpeg.dll 0x5ad70000 - 0x5ada8000 C:\WINDOWS\system32\uxtheme.dll 0x60c40000 - 0x60ca9000 C:\PROGRAM FILES\NORTON 360\ENGINE\4.3.0.5\ASOEHOOK.DLL 0x78520000 - 0x785c3000 C:\PROGRAM FILES\NORTON 360\ENGINE\4.3.0.5\Microsoft.VC90.CRT\MSVCR90.dll 0x78480000 - 0x7850e000 C:\PROGRAM FILES\NORTON 360\ENGINE\4.3.0.5\Microsoft.VC90.CRT\MSVCP90.dll 0x6d2e0000 - 0x6d32f000 C:\Java\jdk1.6.0_22\jre\bin\fontmanager.dll VM Arguments: jvm_args: -Xms100m -Xmx192m -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=c:\jakarta-tomcat\webapps -Djava.util.logging.config.file=C:\jakarta-tomcat\conf\logging.properties -Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager -Djava.endorsed.dirs=C:\jakarta-tomcat\endorsed -Dcatalina.base=C:\jakarta-tomcat -Dcatalina.home=C:\jakarta-tomcat -Djava.io.tmpdir=C:\jakarta-tomcat\temp java_command: org.apache.catalina.startup.Bootstrap start Launcher Type: SUN_STANDARD Environment Variables: JAVA_HOME=C:\Java\jdk1.6.0_22 JRE_HOME=C:\Java\jdk1.6.0_22 CLASSPATH=C:\jakarta-tomcat\bin\bootstrap.jar PATH=C:\WINDOWS\system32;C:\WINDOWS;C:\WINDOWS\System32\Wbem;C:\WINDOWS\system32\WindowsPowerShell\v1.0;c:\Program Files\Common Files\Roxio Shared\DLLShared\;C:\Java\jdk1.6.0_22\bin;C:\jakarta-tomcat\bin;C:\MYSQL\MySQL Server 5.1\bin USERNAME=frank OS=Windows_NT PROCESSOR_IDENTIFIER=x86 Family 6 Model 23 Stepping 10, GenuineIntel --------------- S Y S T E M --------------- OS: Windows XP Build 2600 Service Pack 3 CPU:total 2 (2 cores per cpu, 1 threads per core) family 6 model 23 stepping 10, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3 Memory: 4k page, physical 2085992k(695128k free), swap 4023152k(2738324k free) vm_info: Java HotSpot(TM) Client VM (17.1-b03) for windows-x86 JRE (1.6.0_22-b04), built on Sep 15 2010 00:56:36 by "java_re" with MS VC++ 7.1 (VS2003) time: Tue Jan 11 15:39:01 2011 elapsed time: 243 seconds I don't know what to make of this. What specifically is the error here? What's strange, is that when I restart Tomcat and access the jsp pages again where the ImageProcessingServlet is used on the page...the crash doesn't happen. I just want to be sure this isn't a serious problem...and one that I will have to be concerned over when my app runs on my vps live.
