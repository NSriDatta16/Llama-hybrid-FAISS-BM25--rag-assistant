[site]: stackoverflow
[post_id]: 2512223
[parent_id]: 2512193
[tags]: 
To maximize code coverage you need to hit 100% coverage. Firstly the 100% aim is generally a waste of time. By all means use code coverage tools to aid you, but don't get obsessed by the number. It's more important to test specific areas of your code well and deliberately miss out other parts instead of spreading your effort over the entire codebase, regardless of its importance. Having said that, in order to get the coverage in this specific case you will have to mock the read method so that you can control what it does. You need to use dependency injection to achieve this. Another technique could be to assign a buffer of only one byte, forcing that branch to be taken.
