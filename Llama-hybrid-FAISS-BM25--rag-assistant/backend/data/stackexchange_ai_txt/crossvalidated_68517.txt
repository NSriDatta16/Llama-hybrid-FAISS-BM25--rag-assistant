[site]: crossvalidated
[post_id]: 68517
[parent_id]: 67660
[tags]: 
If you want an "online learning algorithm", which will try to improve itself during some kind of environmental simulation instead of preparing training data in form of $(x_i,y_i)$, then this looks like a classical use case of reinforcement learning , with input values $s_{i-1}, g_{i-1}$ and some current stock info $data_i$, with reward $g_i$. This is quite wide branch of machine learning, choice of particular method/algorithm is strongly data dependent. The most common approaches in reinforcement learning are Temporal Difference Learning and Q-learning, I suggest to look this things up.
