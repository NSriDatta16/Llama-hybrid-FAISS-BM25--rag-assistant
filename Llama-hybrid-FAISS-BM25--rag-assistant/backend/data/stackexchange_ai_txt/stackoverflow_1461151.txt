[site]: stackoverflow
[post_id]: 1461151
[parent_id]: 1460483
[tags]: 
The thread-local storage declspec on Windows limits you to using it only for static variables, which means you are out of luck if you want to use it in more creative ways. There is a low-level API on Windows, but it has broken semantics that make it very awkward to initialise: you can't tell whether or not the variable has already been seen by your thread, so you need to explicitly initialise it when you create the thread. On the other hand, the pthread API for thread-local storage is well thought-out and flexible.
