[site]: stackoverflow
[post_id]: 1485060
[parent_id]: 1485031
[tags]: 
Hmm... There are a few issues in here... for($c=0; $c This loop is executing just the next line: $racepage = file_get_contents($links[$i]); However, $i isn't defined, I suspect you want $c. Also, you need to place some braces around various parts... Now, this is untested, but I think you want something like: date_default_timezone_set("australia/sydney"); $host = 'http://www.tabonline.com.au/'; $day = date(d); $month = date(m); $year = date(Y); $slash = '/'; $mtgraces = '/mtgraces.html'; //Gallops Meetings on Todays racing page $content = file_get_contents($host . $year . "/". $month . "/" . $day . $mtgraces); preg_match_all('# ]+href\s*=\s*[\'"](.R[0-9]+.html*)[\'"]#i', $content, $matches); foreach ($matches[1] as $url) $links[] = "$host$year$slash$month$slash$day$slash$url"; //get the runners from each page $final_number = array(); $final_rating = array(); $final_location = array(); $final_locationcode = array(); for($c=0; $c [0-9]{1,2} #', $racepage, $number); preg_match_all('# [0-9]{1,3} #', $racepage, $rating); preg_match_all('# [\w]+([\s][A-Z]+)? #', $racepage, $location); preg_match_all('# [\w]+\s[0-9]+ #', $racepage, $locationcode); //strip tags for storage in DB $number_data = implode(",", $number[0]); $dbnumber = strip_tags($number_data); $final_number[] = explode(",", $dbnumber); $rating_data = implode(",", $rating[0]); $dbrating = strip_tags($rating_data); $final_rating[] = explode(",", $dbrating); $location_data = implode(",", $location[0]); $dblocation = strip_tags($location_data); $final_location[] = explode(",", $dblocation); $locationcode_data = implode(",", $locationcode[0]); $dblocationcode = strip_tags($locationcode_data); $final_locationcode[] = explode(",", $dblocationcode); } //Insert into database $data = array(); for($i=0; $i
