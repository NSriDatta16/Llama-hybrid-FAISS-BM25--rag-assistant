[site]: stackoverflow
[post_id]: 3230412
[parent_id]: 3230363
[tags]: 
You do know that char is a Unicode character since Delphi 2009, but an ANSI character prior to Delphi 2009. In the same way, in Delphi 2009 a string is a UnicodeString , not an AnsiString . So, when you write SetLength(text, Reserved) you do set the number of characters in text to Reserved . But the number of bytes will be 2*Reserved . In other words, in Delphi 2009+, one char is not one byte , but two bytes. You can get back the old behaviour by replacing all char with AnsiChar and all string with AnsiString . Update Since you did not post your entire code, I cannot really say what the problem is. Nevertheless, you might find it interesting to read my example usage of InternetReadFile in Delphi. See my answer to this question . It is a fully-working example of how to read a text file from the Internet using Delphi and InternetReadFile . For your convinience, I paste my code below as well: To read data from the Internet, use InternetReadFile function. I use the following code to read a small (one-line) text file from the Internet: function WebGetData(const UserAgent: string; const Server: string; const Resource: string): string; var hInet: HINTERNET; hURL: HINTERNET; Buffer: array[0..1023] of AnsiChar; i, BufferLen: cardinal; begin result := ''; hInet := InternetOpen(PChar(UserAgent), INTERNET_OPEN_TYPE_PRECONFIG, nil, nil, 0); try hURL := InternetOpenUrl(hInet, PChar('http://' + Server + Resource), nil, 0, 0, 0); try repeat InternetReadFile(hURL, @Buffer, SizeOf(Buffer), BufferLen); if BufferLen = SizeOf(Buffer) then result := result + AnsiString(Buffer) else if BufferLen > 0 then for i := 0 to BufferLen - 1 do result := result + Buffer[i]; until BufferLen = 0; finally InternetCloseHandle(hURL); end; finally InternetCloseHandle(hInet); end; end; Sample usage: WebGetData('My UserAgent', 'www.rejbrand.se', '/MyDir/update/ver.txt')
