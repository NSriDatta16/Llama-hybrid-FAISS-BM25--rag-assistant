[site]: stackoverflow
[post_id]: 3098613
[parent_id]: 3097489
[tags]: 
I got it mostly working without a custom msbuild script. Here are the relevant TeamCity build configuration settings: Artifact paths: %system.teamcity.build.workingDir%\MyProject\obj\Debug\Package\PackageTmp Type of runner: MSBuild (Runner for MSBuild files) Build file path: MyProject\MyProject.csproj Working directory: same as checkout directory MSBuild version: Microsoft .NET Framework 4.0 MSBuild ToolsVersion: 4.0 Run platform: x86 Targets: Package Command line parameters to MSBuild.exe: /p:Configuration=Debug This will compile, package (with web.config transformation), and save the output as artifacts. The only thing missing is copying the output to a specified location, but that could be done either in another TeamCity build configuration with an artifact dependency or with an msbuild script. Update Here is an msbuild script that will compile, package (with web.config transformation), and copy the output to my staging server Release MySolution $(SolutionName).sln MyProject $(ProjectName)\$(ProjectName).csproj '\\build02\wwwroot\$(ProjectName)\$(Configuration)\%(RecursiveDir)%(Filename)%(Extension)')"/> You can also remove the SolutionName and ProjectName properties from the PropertyGroup tag and pass them to msbuild. msbuild build.xml /p:Configuration=Deploy;SolutionName=MySolution;ProjectName=MyProject Update 2 Since this question still gets a good deal of traffic, I thought it was worth updating my answer with my current script that uses Web Deploy (also known as MSDeploy). Release $(ProjectName)\$(ProjectName).csproj http://staging-server/MSDeployAgentService In TeamCity, I have parameters named env.Configuration , env.ProjectName and env.DeployServiceUrl . The MSBuild runner has the build file path and the parameters are passed automagically (you don't have to specify them in Command line parameters). You can also run it from the command line: msbuild build.xml /p:Configuration=Staging;ProjectName=MyProject;DeployServiceUrl=http://staging-server/MSDeployAgentService
