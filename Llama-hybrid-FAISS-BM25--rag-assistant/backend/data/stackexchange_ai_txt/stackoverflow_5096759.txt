[site]: stackoverflow
[post_id]: 5096759
[parent_id]: 5076872
[tags]: 
Assuming you're running Linux, it sounds like you want to use a socket of family PF_PACKET and of type SOCK_DGRAM (see man packet ). These sockets will automatically include the layer 2 Ethernet headers for you, but it will be up to you to specify the rest of the packet above that layer. Unfortunately, the fragmentation logic used in IP is tied very closely to the IP protocol, as it relies on fields in the IP header in order to do fragmentation and reassembly. If you are in a hurry and do not want to worry about fragmentation, you could always limit your packets to be smaller than your MTU. Otherwise, I'd suggest using IP fragmentation as a reference point for developing your own fragmentation.
