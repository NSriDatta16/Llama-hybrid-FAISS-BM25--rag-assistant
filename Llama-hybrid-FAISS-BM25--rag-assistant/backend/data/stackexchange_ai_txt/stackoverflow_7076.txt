[site]: stackoverflow
[post_id]: 7076
[parent_id]: 2092
[tags]: 
Does your scripting language generate bytecode? Does it generate debug metadata? If so, bytecode instrumentation is probably the way to go. In fact existing tools will probably work (perhaps with minimal modification). The typical problem with such tools that they are written to work with Java and assume that a class com.foo.Bar.class corresponds to a file com/foo/Bar.java . Unwinding that assumption can be tedious. EMMA is a ClassLoader that does byte-code re-writing for code-coverage collection in Java. The coding style is a little funky, but I recommend reading source code for some ideas. If your scripting language is interpreted then you will need a higher-level class loader (at a source level) that hooks into the interpreter.
