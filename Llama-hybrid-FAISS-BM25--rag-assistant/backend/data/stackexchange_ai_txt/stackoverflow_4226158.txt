[site]: stackoverflow
[post_id]: 4226158
[parent_id]: 
[tags]: 
C++ ofstream - only 1 string gets written to file, previous string is overwritten, why?

i wrote a command line program that shall clean and reorganize our archived server logs by piping line by line to new target files. Each target file has an according regEx filter item so if the line that is red from the sourcefile gets written to this specific target file if it matches the regEx. I read the regEx strings and their target file strings from a config file and save these information in vectors to be able to dynamically resize them by one with every new taget/filter pair that is red from the config. The following piece of code shows how I loop through all my source files and for every single of them I read line by line and for every line that could be red I cycle through all the filters defined in the config and if the regEx match the line I write this line to to ofstream. Each time I do this the ofstream gets close()d and clear()ed before I open the new target file in it. My problem now is that everything works fine except of my target files only contain 1 single string after program ends. It contains the last string that I wrote to the file. All the strings that I wrote to the file before seem to be overwritten. I think I'm doing something wrong but I don't see what it ist. Here's the code extract: void StringDirector::redirect_all() { ifstream input; //Input Filestream init ofstream output; //Output Filestream init string transfer; //Transfer string init //regex e; for (unsigned k = 0; k EDIT: i forgot the reopen function I use template void reopen(Stream& pStream, const char * pFile, std::ios_base::openmode pMode = ios_base::out) { pStream.close(); pStream.clear(); pStream.open(pFile, pMode); }
