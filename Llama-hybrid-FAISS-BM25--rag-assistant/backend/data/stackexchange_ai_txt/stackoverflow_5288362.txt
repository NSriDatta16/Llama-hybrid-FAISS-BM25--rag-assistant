[site]: stackoverflow
[post_id]: 5288362
[parent_id]: 
[tags]: 
Hyperic JMX monitoring threads not closing

I'm using tomcat 6 and HypericHQ for monitoring via JMX. The issue is the following: hyperic, overtime, opens hundreds of jmx connection and never closes them.. after few hours our tomcat server is using 100% cpu without doing anything. Once I stop hyperic agent, tomcat will go back to 0-1% cpu.. Here is what we are seeing virtual vm: http://forums.hyperic.com/jiveforums/servlet/JiveServlet/download/1-11619-37096-2616/Capture.PNG I don't know if this is an hyperic issue or not, but I wonder if there is an option to fix it via tomcat/java configuration? The reason that I don't know if this is an hyperic or a tomcat/java configuration issue is because that when we use hyperic on other standard java daemon it doesn't have the same connection leak issue. The JMX is exposed using Spring, and it's working great when connecting with JMX clients (JConsole/VisualVM). When I close the client, I see that the number of connections drops by one. Is there any thing that we can do to fix this via java configuration? (forcing it to close a connection that is open for more than X seconds?) One more thing, in tomcat we see (from time to time) the following message (while hyperic is running): Mar 7, 2011 11:30:00 AM ServerCommunicatorAdmin reqIncoming WARNING: The server has decided to close this client connection. Thanks
