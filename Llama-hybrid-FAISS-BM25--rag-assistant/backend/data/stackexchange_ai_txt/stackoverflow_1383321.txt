[site]: stackoverflow
[post_id]: 1383321
[parent_id]: 1383315
[tags]: 
There are only two options: Find out by reading all rows (and then you might as well store them) run a specialized SELECT COUNT(*) query beforehand. Going twice through the DataReader loop is really expensive, you would have to re-execute the query. And (thanks to Pete OHanlon) the second option is only concurrency-safe when you use a transaction with a Snapshot isolation level. Since you want to end up storing all rows in memory anyway the only sensible option is to read all rows in a flexible storage ( List<> or DataTable ) and then copy the data to any format you want. The in-memory operation will always be much more efficient.
