[site]: stackoverflow
[post_id]: 5211015
[parent_id]: 5210948
[tags]: 
The API docs in the referenced paper are rather flaky and the author's FTP server doesn't respond, so I can't tell with certainty, but my hunch is that multi_array_ref kdtree2_data((float *)&data[0][0], extents[n][dim], c_storage_order( )); global_kdtree2 = new kdtree2(kdtree2_data, arrange); construct the kdtree2 by storing a reference to kdtree2_data in the global_kdtree2 object, rather than making a full copy. Since kdtree2_data is a local variable, it is destroyed when new_kdtree2 returns. You'll have to keep it alive until n_nearest_around_point_kdtree2 is done.
