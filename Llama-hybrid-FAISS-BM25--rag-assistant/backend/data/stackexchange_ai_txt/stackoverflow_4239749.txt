[site]: stackoverflow
[post_id]: 4239749
[parent_id]: 4239425
[tags]: 
It's safer to use DOMDocument instead of regex to parse HTML contents. Try this code: loadHtml(mb_convert_encoding($html, 'HTML-ENTITIES', "UTF-8")); $xpath = new DOMXPath($dom); foreach ($xpath->query('//a') as $node) { if ($node->hasAttribute('href')) { $newNode = $dom->createDocumentFragment(); $newNode->appendXML($node->getAttribute('href')); $node->parentNode->replaceChild($newNode, $node); } } // get only the body tag with its contents, then trim the body tag itself to get only the original content return mb_substr($dom->saveXML($xpath->query('//body')->item(0)), 6, -7, "UTF-8"); } $html = 'Some text Google some text some text.'; echo extractAnchors($html);
