Muhammad ibn al-Habib ibn as-Siddiq al-Amghari al-Idrisi al-Hasani (1876–1972), was a Moroccan Islamic teacher, author, and shaykh of the Darqawi tariqa in Morocco.

Life and education
Muhammad Ibn al-Habib was born in Fes in 1876. At the proper age, he went to the Qur'anic kuttab at Qantara Abu'r-Ru'us where he studied with Sidi al-Hashimi as-Sanhaji, learning Quranic reading, writing and recitation. He also studied with Sidi Ahmad al-Filali in the school of Qasba an-Nawwar and memorised the Qur'an under him. In about 1894, he began studies at the Abu'l-Junud Mosque, studying with Sidi Mahmad al-Irari, concentrating on the Ajrummiyya, the Alfiyya, as-Sullam by al-Bannani and at-Tirmidhi's Shamā'il.

Then in the Al-Qarawiyyin mosque, he studied Khalil's Mukhtasar including its commentaries by az-Zurqani, al-Bannani and al-Kharashi, with Sidi Ahmad ibn al-Jilali al-Amghari. He studied the Tuhfa with the commentary of Shaykh at-Tawudi ibn Sawda and the Collection of the Adab of the Teacher and Student by Shaykh Khalil with Sidi Abu Bakr ibn al-'Arabi Bannani. He studied part of Sahih Bukhari and the Hikam of Ibn 'Ata Allah with Ahmad ibn al-Khayyat az-Zargari.

He studied az-Zaqqaqiyya with the margin which the shaykh himself wrote,  with Sidi 'Abdu's'-Salam al-Huwari; the Alfiyya with the commentary of al-Makudi and al-Muwaddih with Sidi Khalil al-Khalidi; part of the Jami' al-Jawami' and part of the Musnad of Ahmad ibn Hanbal with Muhammad ibn Jaafar al-Kittani; Khalil's Mukhtasar, a summary of the Mukhtasar as-Sa'd, and part of Tawhid al-Murshid with the commentary of Shaykh at-Tayyib ibn Kiran with Sidi J. Muhammad Fatha Junun.

From Moulay 'Abdullah ibn Idris al-Badrawi, he learned Sahih Bukhari, part of Khalil's Mukhtasar, al- Isti'ara of Shaykh at-Tayyib ibn Kiran, and part of the Hamziyya by al-Busiri with the commentary of Ibn Hajar. He learned part of Khalil's Mukhtasar, ash-Shifa' by Qadi Iyad ibn Musa and part of al-Murshid al-Mu'in by Mayyara from Sidi Hammad as-Sanhaji. He also studied al-Murshid al-Mu'in from Sidi Muhammad ibn 'Abdu'r-Rahman al-Filali.

Teachings
He stopped his studies in 1901 and began voluntary instruction at the Qasba an-Nawwar mosque, teaching al-Murshid al-Mu'in, Khalil's Mukhtasar, the Muwatta of Imam Malik, as-Sanusiyya, and tafsir. He continued to undertake the tasks of his educational and secondary work until he immigrated to Meknès in 1936. There he continued his scholarly activity by giving lessons in the Zaytuna Mosque on tafsir and fiqh using the Risala of al-Qayrawani, and in tasawwuf using the Hikam, al-Murshid al-Mu'in, the ash-Shifa of Qadi Iyad, Bennani's commentary on Imam al-Akhdari's as-Sullam (a short poem on logic), and al-Makkudi's commentary on the Alfiyya of Ibn Malik, a 1000 lined poem on the sciences of the Arabic language.

His Ijazah & journeys
Badr ud-din ad-Dismishqi gave him a written ijazah in Damascus and he also received one from the Qadi of Tlemcen, Sidi Abu Shu'ayb, and oral ijazahs from Ahmad ibn al-Jilali al-Amghari, and Sidi Abu Bakr ibn al-'Arabi Bannani. In 1931 he went to Mecca for hajj and met with many scholars, including Shaykh Bakhit al-Muti'i and Shaykh as-Simaluti. In Syria he met Tawfiq al-Ayyubi and Badur'd-din ad-Dimishaqi. Later he travelled to Algiers and met Sidi Muhammad ibn Jalul and Sidi Ahmad in Blida, and Sidi Muhammad al-Qadi in the Oujda area. While there, he gave lessons on Sahih Bukhari and al-Murshid al-Mu'in with the commentary of Shaykh at-Tayyib ibn Kiran.

He left Meknès, in the company of his wives, intending to performing a third hajj in 1972, but died in Blida on January 10, 1972. He was buried on the same day in the Darqawi zawiya which he himself had inaugurated. On January 31 of the same year he was re-buried at Darb al-Pasha (Meknès), in his zawiya near the Zaytuna mosque.

Bibliography
He wrote: 
A diwan (collection of poetry or prose) called The Desire of the Travelling Murids and the Gift of the Wayfaring Gnostics. It has been published at least twice in Morocco, once in England which saw a number of reprints, and then a recent completely new edition by Madinah Media.
A commentary on the Hafidha of Sidi Muhammad al-'Arabi al-'Alawi al-Madghari which contains supplications of the Muhammad, ayat of Qur'an and some of the Shadhili hizbs.
A commentary on the Salat al-Mashishiyya.
Several qasidas (polythematic poems) about tasawwuf, good character, praise of Allah, praise of Muhammad and religious admonitions.

References

1876 births
1972 deaths
Sunni Sufis
Darqawi
Scholars of Sufism
Moroccan Sufi writers
Writers from Marrakesh
19th-century Moroccan people