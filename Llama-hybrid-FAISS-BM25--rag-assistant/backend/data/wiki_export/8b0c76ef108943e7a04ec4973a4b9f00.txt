"The Test Dream" is the 63rd episode of the HBO television series The Sopranos and the 11th episode of the show's fifth season. Written by series creator/executive producer David Chase and supervising producer Matthew Weiner, and directed by longtime series director Allen Coulter, it originally aired in the United States on May 16, 2004. This episode is unique in that it features an elaborate 20-minute dream sequence, alluded to in the title, featuring many actors from past seasons briefly reprising their roles.

Starring
 James Gandolfini as Tony Soprano
 Lorraine Bracco as Dr. Jennifer Melfi 
 Edie Falco as Carmela Soprano
 Michael Imperioli as Christopher Moltisanti
 Dominic Chianese as Corrado Soprano, Jr. *
 Steven Van Zandt as Silvio Dante
 Tony Sirico as Paulie Gualtieri
 Robert Iler as Anthony Soprano, Jr. 
 Jamie-Lynn DiScala as Meadow Soprano
 Drea de Matteo as Adriana La Cerva *
 Aida Turturro as Janice Soprano Baccalieri *
 Steven R. Schirripa as Bobby Baccalieri 
 John Ventimiglia as Artie Bucco 
 Kathrine Narducci as Charmaine Bucco
 and Steve Buscemi as Tony Blundetto
* = credit only

Guest starring

Synopsis
Cooking something for Tony, his girlfriend Valentina accidentally sets fire to the sleeve of her nylon kimono and is badly burned. After visiting her in a hospital burn unit, Tony calls on Tony B. Tony notices that his cousin is behaving erratically, but does not know the reason. Tony B has just learned that Angelo, his former cellmate and close friend, has been murdered by Phil and Billy Leotardo. Tony B says he has to leave soon with his sons, so Tony himself leaves.

Tony checks into a luxury suite at the Plaza Hotel "to get a good night's sleep", and nearly runs into Dr. Melfi there. When evening comes, a bored Tony starts drinking and nuisance-calls Charmaine Bucco, to whom he is attracted; she tells her unknown caller to stop it. He makes a call for an Asian girl from an escort agency. He gets a voicemail from Silvio telling him about Angelo's murder. He immediately tries to call Tony B, who is already on the move and is not answering his phone. Tony then frantically calls Tony B's casino, Aunt Quintina, and the Bada Bing, telling everyone to let Tony B know he is looking for him. The prostitute arrives and, at some point, Tony falls asleep and has a long and vivid dream.

Tony first encounters the deceased Carmine Lupertazzi, who is hiding from "the man upstairs", and receives a phone call telling him to kill somebody. Next, he sits in Melfi's office and is counseled by his deceased "ex-com√†re" Gloria Trillo. He then finds himself riding in the backseat of a 1959 Cadillac Eldorado being driven by his long-dead father Johnny Boy Soprano and accompanied by the also-deceased Big Pussy Bonpensiero and Mikey Palmice. Mikey briefly turns into Artie. Tony asks where they are going and Pussy, who has now turned into Ralphie Cifaretto, turns around and says, "We're driving you to the job."

Tony then wakes up at his house and prepares to go to dinner with Carmela to meet Finn's parents at Nuovo Vesuvio. When they finally arrive, Finn's father is the deceased Detective Vin Makazian, while his mother is Annette Bening. Finn occasionally turns into A.J. during the course of the dinner. Tony's teeth start to fall out while Finn's father starts singing "Three Times a Lady". Tony tries and fails to get Bening's attention. In the restroom with Vin, Tony reaches behind a toilet tank trying to find a gun. He hears shots fired outside and sees Tony B shooting Phil in his car. A crowd blames Tony and chases him; during the pursuit Lee Harvey Oswald shoots at him. He escapes in the Cadillac with help from Artie. Tony looks in the backseat and sees the deceased Richie Aprile and Gigi Cestone.

Tony then has wild sex with Charmaine, while her husband Artie coaches him. Suddenly Tony is sitting on Pie-O-My in his living room, with Carmela allowing him to return home on the condition that he does not bring his horse (whores) there. Finally, Tony is confronted by Mr. Molinaro, his high school football coach, who criticizes his lifestyle and points out that he didn't have to be a criminal and live with all the stress that comes with being one. When Tony tries to shoot Molinaro, his gun malfunctions and the bullets melt in his hands; the coach continues to taunt him about not being prepared.

Tony awakens with a start. Shortly afterward, he receives a visit from Christopher, who tells him that Tony B has killed Billy and wounded Phil. Tony goes to bed and, though it is not dawn yet, calls Carmela. He says, "I had one of my Coach Molinaro dreams." She is half asleep and they have a gentle, slow conversation.

Deceased
 Angelo Garepe: murdered by Phil and Billy Leotardo.
 Billy Leotardo: murdered offscreen by Tony Blundetto to avenge the death of Angelo Garepe.

Title reference
 David Chase explained that the title refers to the dreams where an individual turns up late for a test in school and is wearing no clothing, meaning that the person is unprepared for a test or another task they have to face. Tony is unprepared to murder his coach in his dream. He is also unprepared for the dilemma caused by Tony B's action.

Production
 The voice on the other end of the phone in the dream sequence is that of David Chase.
 A photo of a deleted scene on the official series website shows that, in the restaurant, Meadow was replaced for a moment by Tracee, the murdered Bada Bing stripper just as Finn was replaced by A.J.

References to past episodes
 Tony previously dreamed about being in his father's Cadillac (including the blurry background) in the Season 4 episode, "Calling All Cars."
When Tony is having sex with Charmaine, she mentions it being better than the sex they had in high school. In the Season 1 episode, "Denial, Anger, Acceptance," Charmaine reveals to Carmela that she had sex with Tony.
 When Tony wakes up in bed next to Carmine and the phone rings, Carmine says to Tony, "answer the fucking thing," which is what Carmine said to Johnny Sack in the episode "Fortunate Son" when Johnny's cell phone was ringing.
 The dream-sequence conversation between Tony and Gloria Trillo (who appeared in "He Is Risen," "The Telltale Moozadell," "Pine Barrens," "Amour Fou," "Everybody Hurts," and "Calling All Cars") referred to events that were revealed in earlier episodes: Tony once hit and choked Gloria, Gloria died without having had children, and Tony's mother once threatened to poke out her son's eye with a fork.
 The chase scene, in which some men are wearing lederhosen, evokes the angry mob scene in the 1931 James Whale film Frankenstein in which a few men are similarly dressed, and recalls The Sopranos episode "Denial, Anger, Acceptance" in which Shlomo Teittleman likened Tony to a golem or a Frankenstein; in that same episode Tony tells Dr. Melfi that the analogy bothered him.

Other cultural references
The episode makes multiple references to the film The Godfather. Annette Bening speaks the line, "I don't want my husband coming out of there with just his cock in his hand," referring to an almost-identical line spoken by Sonny Corleone. Afterwards, Tony's reaching behind the toilet tank for the non-existent gun is a reference to a similar scene with Michael Corleone. When Tony Blundetto shoots Phil Leotardo in Tony Soprano's dream, he exits the same make and brand car (Lincoln Continental) in a similar fashion to Sonny Corleone, during the famous toll-booth shooting scene.
 The book that Tony finds in the men's bathroom during his dream is The Valachi Papers, written by Peter Maas; it is the famous book based on the testimony of Joe Valachi, the first member of the Mafia to turn state's evidence and who confirmed the existence of the American Mafia. It is seen again when Tony states he's done his homework.
When Tony calls Aunt Quin from his hotel room, an advertisement for Anne Murray is on the TV.
Lee Harvey Oswald shoots at Tony from an apartment building window, when Tony is running from the angry mob. This is in keeping with his Kennedy interest.
Annette Bening also says about Tony, "There's something Bugsy about him." This is a reference to Bugsy Siegel, who was portrayed by Bening's husband Warren Beatty in the film Bugsy; she co-starred in the film as Bugsy's lover.
 Phil Leotardo (Frank Vincent) shoots Angelo Garepe in the trunk of his car, which is a bit of an in-joke to his own demise as Billy Batts in Goodfellas.
A scene from the movie Chinatown is shown on the television in the kitchen when Carmela tells Tony they are late to meet Finn's parents. It is then replaced with the ending of the film Scrooge. In Scrooge, the various Ghosts of Christmas Past, Future, etc all wordlessly point things out to Ebenezer Scrooge with an outheld finger; Carmela, Gloria Trillo, and Coach Molinaro all point things out to Tony in a similar way. 
As Tony and Carmela enter Nuovo Vesuvio to meet "Finn's parents" in Tony's dream, the climactic scene of High Noon is playing on the television above the bar. The film stars Gary Cooper, an actor whom Tony repeatedly references throughout the series (notably in the episodes "Pilot," "Christopher," and "The Strong, Silent Type") because Tony believes Cooper's strong, silent type demeanor is a trait lacking in today's psychotherapy-driven society.
 The episode also makes a series of references to Jackie Gleason, both as a musician and as Ralph Kramden in the 1950s sitcom, The Honeymooners. When Tony and Gloria are talking in Dr. Melfi's office, they jokingly repeat Gleason's catchphrase from the show: 'One of these days, Alice! Pow! Right in the kisser.' The line adroitly references Tony's own physical violence towards Trillo and perhaps suggestively indicates Trillo's own ambivalent attitude towards it, as she too repeats Gleason's phrase. This could also be a glimpse into the meaning of the dream (coming to terms with his cousin's actions) as Tony B frequently quotes Gleason.

Music 
The song played over the end credits is "Three Times a Lady" by the Commodores. The same song was sung earlier, a cappella, by Vin, during the dinner portion of Tony's dream.
The song that Angelo is listening to on his car radio before he is murdered is "Peanuts" by Frank Valli and the Four Seasons. Frankie Valli's character Rusty Millio is the one that got Angelo involved in the feud with Johnny Sack that led him to be killed.
The piece heard when Tony first walks into the hotel is "Clair De Lune" (which means "moonlight" in French) by French composer Claude Debussy.
The music playing when Tony is in Artie's car is "Kulun Mankwalesh" by Mahmoud Ahmed.

References

External links
"The Test Dream"  at HBO

The Sopranos (season 5) episodes
2004 American television episodes
Television episodes about dreams
Television episodes directed by Allen Coulter
Television episodes written by David Chase
Television episodes written by Matthew Weiner