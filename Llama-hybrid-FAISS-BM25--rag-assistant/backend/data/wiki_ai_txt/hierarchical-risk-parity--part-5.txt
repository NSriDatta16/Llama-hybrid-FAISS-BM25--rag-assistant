ng it to greater vulnerability in adverse market conditions compared to the more balanced HRP allocation. Monte-Carlo Simulations While the in-sample variance of the Critical Line Algorithm (CLA) portfolio is lower than that of the Hierarchical Risk Parity (HRP) portfolio in the earlier numerical example, the portfolio with minimum in-sample variance is not necessarily optimal out-of-sample. To evaluate robustness, a Monte Carlo simulation can be conducted, consistent with the methodology in López de Prado (2018). The simulation procedure consists of the following steps: Generate 10 time series of Gaussian returns, each with 520 observations (equivalent to two years of daily data), zero mean, and a standard deviation of 10%. To reflect realistic market behavior, random shocks and a random correlation structure are applied to the data, consistent with jump-diffusion models such as Merton (1976). Using a rolling window of 260 observations (one year), compute portfolio weights under three methodologies: HRP, CLA (minimum-variance), and the Inverse-Variance Portfolio (IVP). Portfolios are re-estimated and rebalanced every 22 observations (monthly frequency). Calculate the out-of-sample returns of the three portfolios over the subsequent periods. This process is repeated 10,000 times. As expected, the average out-of-sample returns are close to zero across all methods. The key differences emerge in the variances of the out-of-sample returns: σ C L A 2 = 0.1157 {\displaystyle \sigma _{\mathrm {CLA} }^{2}=0.1157} , σ I V P 2 = 0.0928 {\displaystyle \sigma _{\mathrm {IVP} }^{2}=0.0928} , and σ H R P 2 = 0.0671 {\displaystyle \sigma _{\mathrm {HRP} }^{2}=0.0671} . Although CLA is designed to minimize portfolio variance, its out-of-sample performance shows the highest variance, exceeding that of HRP by 72.47%. This finding aligns with earlier results from De Miguel et al. (2009). Based on these figures, HRP improves the out-of-sample Sharpe ratio of a CLA strategy by approximately 31.3%. While IVP benefits from assuming a diagonal covariance matrix, its variance remains 38.24% higher than HRP's. These differences are especially important for risk parity strategies, which often employ significant leverage (see Bailey et al., 2014). The experiment can be repeated with different parameters, including larger asset universes, more frequent or severe shocks, varying correlation structures, or the inclusion of rebalancing costs. Notably, the cumulative transaction costs associated with frequent CLA rebalances can materially degrade performance over time. The mathematical explanation for HRP's outperformance over CLA and IVP is non-trivial. However, an intuitive rationale can be offered: CLA's concentration makes it vulnerable to idiosyncratic shocks, while IVP’s disregard for asset correlations makes it sensitive to systematic shocks involving correlated groups. HRP mitigates both risks by balancing diversification across individual assets and across hierarchical clusters. This results in more robust allocations. For a detailed mathematical proof, see Antonov et al. (2024). Advantages HRP algorithms offer several advantages over the (at the time) MVO state-of-the-art methods: Improved diversification: HRP creates portfolios that are well-diversified across different risk sources.[1] Robustness: The algorithm has shown to generate portfolios with robust out-of-sample properties. Flexibility: HRP can handle singular covariance matrices and incorporate various constraints. Intuitive approach: The clustering-based method provides an intuitive understanding of the portfolio structure.[2] By combining elements of machine learning, risk parity, and traditional portfolio theory, HRP offers a sophisticated approach to portfolio construction that aims to overcome the limitations of conventional methods. == References ==